"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[7543],{38563:(e,n,t)=>{t.d(n,{Z:()=>u});var a=t(68870),l=t(50533),r=t(36314),i=t(4567),s=t(93517),o=t(4419),d=t(80184);function c(e){let{link:n,activeLast:t,disabled:r}=e;const i={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...r&&!t&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},s=(0,d.jsxs)(d.Fragment,{children:[n.icon&&(0,d.jsx)(a.Z,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:n.icon}),n.name]});return n.href?(0,d.jsx)(l.Z,{component:o.r,href:n.href,sx:i,children:s}):(0,d.jsxs)(a.Z,{sx:i,children:[" ",s," "]})}function u(e){let{links:n,action:t,heading:o,moreLink:u,activeLast:m,sx:g,...x}=e;const p=n&&n[n.length-1].name;return(0,d.jsxs)(a.Z,{sx:{...g},children:[(0,d.jsxs)(r.Z,{direction:"row",alignItems:"center",children:[(0,d.jsxs)(a.Z,{sx:{flexGrow:1,display:"flex",gap:3,alignItems:"center"},children:[o&&(0,d.jsx)(i.Z,{variant:"h4",gutterBottom:!0,children:o}),n&&!!n.length&&(0,d.jsx)(s.Z,{separator:(0,d.jsx)(h,{}),...x,children:null===n||void 0===n?void 0:n.map((e=>(0,d.jsx)(c,{link:e,activeLast:m,disabled:e.name===p},e.name||"")))})]}),t&&(0,d.jsxs)(a.Z,{sx:{flexShrink:0},children:[" ",t," "]})]}),!!u&&(0,d.jsx)(a.Z,{sx:{mt:2},children:u.map((e=>(0,d.jsx)(l.Z,{href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}function h(){return(0,d.jsx)(a.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}},73379:(e,n,t)=>{t.d(n,{Z:()=>a.Z});var a=t(38563)},27356:(e,n,t)=>{t.d(n,{Z:()=>o});var a=t(68870),l=t(36314),r=t(12065),i=t(4567),s=t(80184);function o(e){let{title:n,imgUrl:t,action:o,filled:d,description:c,sx:u,...h}=e;return(0,s.jsxs)(l.Z,{flexGrow:1,alignItems:"center",justifyContent:"center",sx:{px:3,height:1,...d&&{borderRadius:2,bgcolor:e=>(0,r.Fq)(e.palette.grey[500],.04),border:e=>"dashed 1px ".concat((0,r.Fq)(e.palette.grey[500],.08))},...u},...h,children:[(0,s.jsx)(a.Z,{component:"img",alt:"empty content",src:t||"/assets/icons/empty/ic_content.svg",sx:{width:1,maxWidth:160}}),n&&(0,s.jsx)(i.Z,{variant:"h6",component:"span",sx:{mt:1,color:"text.disabled",textAlign:"center"},children:n}),c&&(0,s.jsx)(i.Z,{variant:"caption",sx:{mt:1,color:"text.disabled",textAlign:"center"},children:c}),o&&o]})}},31092:(e,n,t)=>{t.d(n,{Z:()=>a.Z});var a=t(27356)},38062:(e,n,t)=>{function a(e,n,t){return e?Math.max(0,(1+e)*n-t):0}function l(e,n,t){return null===e[t]?1:null===n[t]||n[t]<e[t]?-1:n[t]>e[t]?1:0}function r(e,n){return"desc"===e?(e,t)=>l(e,t,n):(e,t)=>-l(e,t,n)}t.d(n,{$W:()=>g,K:()=>j,et:()=>m,S_:()=>S,Z4:()=>y,fQ:()=>a,sQ:()=>r,x6:()=>s});var i=t(72791);function s(e){const[n,t]=(0,i.useState)(!(null===e||void 0===e||!e.defaultDense)),[a,l]=(0,i.useState)((null===e||void 0===e?void 0:e.defaultCurrentPage)||0),[r,s]=(0,i.useState)((null===e||void 0===e?void 0:e.defaultOrderBy)||"name"),[o,d]=(0,i.useState)((null===e||void 0===e?void 0:e.defaultRowsPerPage)||5),[c,u]=(0,i.useState)((null===e||void 0===e?void 0:e.defaultOrder)||"asc"),[h,m]=(0,i.useState)((null===e||void 0===e?void 0:e.defaultSelected)||[]),g=(0,i.useCallback)((e=>{""!==e&&(u(r===e&&"asc"===c?"desc":"asc"),s(e))}),[c,r]),x=(0,i.useCallback)((e=>{const n=h.includes(e)?h.filter((n=>n!==e)):[...h,e];m(n)}),[h]),p=(0,i.useCallback)((e=>{l(0),d(parseInt(e.target.value,10))}),[]),f=(0,i.useCallback)((e=>{t(e.target.checked)}),[]),b=(0,i.useCallback)(((e,n)=>{m(e?n:[])}),[]),v=(0,i.useCallback)(((e,n)=>{l(n)}),[]),j=(0,i.useCallback)((()=>{l(0)}),[]),Z=(0,i.useCallback)((e=>{m([]),a&&e<2&&l(a-1)}),[a]),w=(0,i.useCallback)((e=>{let{totalRows:n,totalRowsInPage:t,totalRowsFiltered:r}=e;const i=h.length;if(m([]),a)if(i===t)l(a-1);else if(i===r)l(0);else if(i>t){const e=Math.ceil((n-i)/o)-1;l(e)}}),[a,o,h.length]);return{dense:n,order:c,page:a,orderBy:r,rowsPerPage:o,selected:h,onSelectRow:x,onSelectAllRows:b,onSort:g,onChangePage:v,onChangeDense:f,onResetPage:j,onChangeRowsPerPage:p,onUpdatePageDeleteRow:Z,onUpdatePageDeleteRows:w,setPage:l,setDense:t,setOrder:u,setOrderBy:s,setSelected:m,setRowsPerPage:d}}var o=t(9195),d=t(68745),c=t(76932),u=t(31092),h=t(80184);function m(e){let{notFound:n,sx:t}=e;const{t:a}=(0,c.qM)(),{currentLang:l}=(0,c.nt)();l.value;return(0,h.jsx)(o.Z,{children:n?(0,h.jsx)(d.Z,{colSpan:12,children:(0,h.jsx)(u.Z,{filled:!0,title:a("No Data"),sx:{py:10,...t}})}):(0,h.jsx)(d.Z,{colSpan:12,sx:{p:0}})})}function g(e){let{emptyRows:n,height:t}=e;return n?(0,h.jsx)(o.Z,{sx:{...t&&{height:t*n}},children:(0,h.jsx)(d.Z,{colSpan:9})}):null}var x=t(68870),p=t(13034),f=t(56890),b=t(80720);const v={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function j(e){let{order:n,orderBy:t,rowCount:a=0,headLabel:l,numSelected:r=0,onSort:i,onSelectAllRows:s,sx:c}=e;return(0,h.jsx)(f.Z,{sx:c,children:(0,h.jsxs)(o.Z,{children:[s&&(0,h.jsx)(d.Z,{padding:"checkbox",children:(0,h.jsx)(p.Z,{indeterminate:!!r&&r<a,checked:!!a&&r===a,onChange:e=>s(e.target.checked)})}),l.map((e=>(0,h.jsx)(d.Z,{align:e.align||"center",sortDirection:t===e.id&&n,sx:{width:e.width,minWidth:e.minWidth},lang:"ar",children:i?(0,h.jsxs)(b.Z,{hideSortIcon:!0,active:t===e.id,direction:t===e.id?n:"asc",onClick:()=>i(e.id),lang:"ar",children:[e.label,t===e.id?(0,h.jsx)(x.Z,{sx:{...v},children:"desc"===n?"sorted descending":"sorted ascending"}):null]}):e.label},e.id)))]})})}var Z=t(36314),w=t(4567);function y(e){let{dense:n,action:t,rowCount:a,numSelected:l,onSelectAllRows:r,sx:i,color:s,...o}=e;const{t:d}=(0,c.qM)(),{currentLang:u}=(0,c.nt)();u.value;return l?(0,h.jsxs)(Z.Z,{direction:"row",alignItems:"center",sx:{pl:1,pr:2,top:0,left:0,width:1,zIndex:9,height:58,position:"absolute",bgcolor:"".concat(s,".lighter"),...n&&{height:38},...i},...o,children:[(0,h.jsx)(p.Z,{indeterminate:!!l&&l<a,checked:!!a&&l===a,onChange:e=>r(e.target.checked)}),(0,h.jsxs)(w.Z,{variant:"subtitle2",sx:{ml:2,flexGrow:1,color:"".concat(s,".main"),...n&&{ml:3}},children:[l," ",d("selected")]}),t&&t]}):null}var _=t(89891),P=t(5446),C=t(25801);function S(e){let{dense:n,onChangeDense:t,rowsPerPageOptions:a=[5,10,25],sx:l,...r}=e;const{t:i}=(0,c.qM)();return(0,h.jsxs)(x.Z,{sx:{position:"relative",...l},children:[(0,h.jsx)(P.Z,{rowsPerPageOptions:a,component:"div",...r,sx:{borderTopColor:"transparent"}}),t&&(0,h.jsx)(C.Z,{label:i("dense"),control:(0,h.jsx)(_.Z,{checked:n,onChange:t}),sx:{pl:2,py:1.5,top:0,position:{sm:"absolute"}}})]})}},37543:(e,n,t)=>{t.r(n),t.d(n,{default:()=>M});var a=t(6907),l=t(27031),r=t(72791),i=t(89164),s=t(38072),o=t(76932),d=t(8976),c=(t(22459),t(25279)),u=(t(77008),t(6965)),h=t(73379),m=t(79572),g=t(8007),x=t(61134),p=t(44695),f=(t(31362),t(68870)),b=t(57621),v=t(13967),j=t(99116),Z=t(38062),w=t(19208),y=(t(60108),t(89731)),_=t(32869),P=t(29028),C=t(52007),S=t.n(C),k=t(9195),R=t(68745),D=(t(84954),t(40268),t(24845),t(80184));function q(e){let{row:n,selected:t,onEmploymentRow:a}=e;const{code:l,first_name:r,middle_name:i,family_name:s,identification_num:o,email:d,phone:c,birth_date:u,files:h}=n,m=(0,D.jsxs)(k.Z,{hover:!0,selected:t,children:[(0,D.jsx)(R.Z,{lang:"ar",align:"center",children:(0,D.jsx)(f.Z,{children:l})}),(0,D.jsxs)(R.Z,{lang:"ar",align:"center",children:[r," ",i," ",s]}),(0,D.jsx)(R.Z,{lang:"ar",align:"center",children:o}),(0,D.jsx)(R.Z,{lang:"ar",align:"center",children:d}),(0,D.jsx)(R.Z,{lang:"ar",align:"center",children:c}),(0,D.jsx)(R.Z,{lang:"ar",align:"center",children:null===h||void 0===h?void 0:h.length})]});return(0,D.jsx)(D.Fragment,{children:m})}function I(e){let{refetch:n}=e;(0,w.tv)();const{t:t}=(0,o.qM)(),{currentLang:a}=(0,o.nt)(),{user:l}=(a.value,(0,Z.x6)({defaultRowsPerPage:10}),(0,c.K$)(),(0,d.E)()),[i,u]=(0,r.useState)([]),[h,m]=(0,r.useState)([]),{enqueueSnackbar:C}=((0,v.Z)(),(0,_.Ds)()),S=g.Ry().shape({first_name:g.Z_().required("First name is required"),middle_name:g.Z_(),family_name:g.Z_().required("family name is required"),identification_num:g.Z_(),phone:g.Z_().required("Phone is required"),files:g.IX()}),k=(0,r.useMemo)((()=>{var e,n,t;return{unit_service:null===l||void 0===l||null===(e=l.employee)||void 0===e||null===(n=e.employee_engagements[null===l||void 0===l?void 0:l.employee.selected_engagement])||void 0===n?void 0:n.unit_service._id,employee:null===l||void 0===l||null===(t=l.employee)||void 0===t?void 0:t._id,first_name:"",middle_name:"",family_name:"",identification_num:"",phone:"",files:[]}}),[null===l||void 0===l?void 0:l.employee]),R=(0,x.cI)({resolver:(0,p.X)(S),defaultValues:k}),{reset:q,handleSubmit:I,getValues:L,setValue:F,formState:{isSubmitting:O}}=R,A=L(),B=I((async e=>{try{const t=new FormData;Object.keys(e).forEach((n=>{"files"===n?e[n].forEach(((e,n)=>{t.append("files[".concat(n,"]"),e)})):t.append(n,e[n])})),await y.ZP.post(y.Hv.tables.newOldPatient,t),j.W.emit("updated",{user:l,link:s.H.unitservice.oldPatient,msg:"uploaded an old patient data"}),n(),q(),C("Uploaded success!"),console.info("DATA",e)}catch(t){j.W.emit("error",{error:t,user:l,location:window.location.href}),console.error(t),C("Uploaded failed!",{variant:"error"})}})),E=e=>{/^[a-zA-Z0-9\s,@#$!*_\-&^%]*$/.test(e.target.value)&&F(e.target.name,e.target.value)},M=(0,r.useCallback)((e=>{const n=[...A.files||h,...e.map((e=>Object.assign(e,{preview:URL.createObjectURL(e)})))];m(n),F("files",n,{shouldValidate:!0})}),[F,A.files,h]);return(0,D.jsx)(P.ZP,{methods:R,onSubmit:B,children:(0,D.jsxs)(b.Z,{sx:{p:3},children:[(0,D.jsxs)(f.Z,{sx:{mb:3},rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"},children:[(0,D.jsx)(P.au,{lang:"ar",onChange:E,name:"first_name",label:"".concat(t("first name")," *")}),(0,D.jsx)(P.au,{lang:"ar",onChange:E,name:"middle_name",label:t("middle name")}),(0,D.jsx)(P.au,{lang:"ar",onChange:E,name:"family_name",label:"".concat(t("family name")," *")}),(0,D.jsx)(P.au,{lang:"ar",type:"email",name:"email",label:"".concat(t("email")," *")}),(0,D.jsx)(P.au,{lang:"ar",onChange:E,name:"identification_num",label:t("ID number")}),(0,D.jsx)(P.au,{lang:"ar",onChange:E,name:"phone",label:t("phone"),type:"number"})]}),(0,D.jsx)(P.rd,{multiple:!0,name:"files",maxSize:3145728,onDrop:M,onRemove:e=>{var n;F("files",A.files&&(null===(n=A.files)||void 0===n?void 0:n.filter((n=>n!==e))),{shouldValidate:!0}),m(h.filter((n=>n!==e)))},onRemoveAll:()=>{F("files",[],{shouldValidate:!0}),m([])},onUpload:B})]})})}q.propTypes={onEmploymentRow:S().func,row:S().object,selected:S().bool};var L=t(79836),F=t(53382),O=t(90618),A=t(53507);t(6385);function B(e){let{oldPatients:n}=e;const{t:t}=(0,o.qM)(),a=[{id:"code",label:t("code")},{id:"name",label:t("name")},{id:"identification_num",label:t("ID number")},{id:"email",label:t("email")},{id:"phone",label:t("phone")},{id:"files",label:t("files number")}],l=((0,w.tv)(),(0,Z.x6)({defaultRowsPerPage:10})),{user:r}=(0,d.E)(),i=(0,v.Z)(),{enqueueSnackbar:s}=(0,_.Ds)(),{dense:c,page:u,order:h,orderBy:m,rowsPerPage:g,selected:x,onSelectRow:p,onSelectAllRows:f,onSort:b,onChangeDense:j,onChangePage:y,onChangeRowsPerPage:P}=l;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(L.Z,{size:c?"small":"medium",sx:{minWidth:960,borderCollapse:"separate",borderSpacing:"0 16px"},children:[(0,D.jsx)(Z.K,{order:h,orderBy:m,headLabel:a,numSelected:x.length,onSort:b,sx:{["& .".concat(O.Z.head)]:{"&:first-of-type":{borderTopLeftRadius:12,borderBottomLeftRadius:12},"&:last-of-type":{borderTopRightRadius:12,borderBottomRightRadius:12}}}}),(0,D.jsxs)(F.Z,{children:[n.slice(u*g,u*g+g).map((e=>(0,D.jsx)(q,{row:e},e.id))),(0,D.jsx)(Z.et,{notFound:0===n.length,sx:{m:-2,borderRadius:1.5,border:"dashed 1px ".concat(i.palette.divider)}})]})]}),(0,D.jsx)(Z.S_,{count:n.length,page:u,rowsPerPage:g,onPageChange:y,onRowsPerPageChange:P,dense:c,onChangeDense:j,sx:{["& .".concat(A.Z.toolbar)]:{borderTopColor:"transparent"}}})]})}function E(){var e;const n=(0,c.K$)(),{user:t}=(0,d.E)(),{t:a}=(0,o.qM)(),{oldPatients:r,refetch:g,loading:x}=(0,m.Vz)(null===t||void 0===t||null===(e=t.employee)||void 0===e?void 0:e._id);return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(i.Z,{maxWidth:!n.themeStretch&&"lg",children:[(0,D.jsx)(h.Z,{heading:a("old patient data"),links:[{name:a("dashboard"),href:s.H.unitservice.root},{name:a("old patient data")}],sx:{mb:{xs:3,md:5}}}),x&&(0,D.jsx)(u.a,{}),(0,l.Z)({category:"unit_service",subcategory:"old_patient",acl:"create"})&&(0,D.jsx)(I,{refetch:g}),!x&&(0,l.Z)({category:"unit_service",subcategory:"old_patient",acl:"read"})&&(0,D.jsx)(B,{oldPatients:r})]})})}function M(){return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(l.Z,{hasContent:!0,category:"unit_service",subcategory:"old_patient",acl:"create",children:[(0,D.jsx)(a.ql,{children:(0,D.jsx)("title",{children:"Old patient"})}),(0,D.jsx)(E,{})]})})}},6385:(e,n,t)=>{t.d(n,{Z:()=>i});var a=t(31243),l=t(88329),r=t(33805);async function i(e){let{setData:n,setError:t,method:i,path:s,data:o}=e;const d="".concat(r.E0).concat(s),c=l.Z.get("user_token"),u=await(0,a.Z)({method:i,url:d,headers:{authorization:"Bearer ".concat(c)},data:o});return u.status,n&&n(u.data),u}}}]);
//# sourceMappingURL=7543.52a67d16.chunk.js.map
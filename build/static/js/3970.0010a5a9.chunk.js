"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[3970],{83970:(e,a,n)=>{n.r(a),n.d(a,{default:()=>u});var t=n(6907),r=n(19208),o=n(27031),i=n(66630),s=n(35456),l=n(10266),d=n(85300),c=n(80184);function m(e){let{roomData:a,departmentData:n}=e;return(0,c.jsx)(l.Z,{maxWidth:"xl",children:a&&n&&(0,c.jsx)(d.Z,{departmentData:n,currentTable:a})})}function u(){const e=(0,r.UO)(),{id:a,acid:n}=e,l=(0,i.YLE)(a).data,{data:d,loading:u}=(0,i.zTV)(n);return(0,c.jsxs)(o.Z,{category:"department",subcategory:"management_tables",acl:"update",children:[(0,c.jsxs)(t.ql,{children:[(0,c.jsxs)("title",{children:[l.name_english||"Deartment"," : Edit Room "]}),(0,c.jsx)("meta",{name:"description",content:"meta"})]}),u&&(0,c.jsx)(s.a,{}),!u&&(0,c.jsx)(m,{roomData:d,departmentData:l})]})}},85300:(e,a,n)=>{n.d(a,{Z:()=>b});var t=n(8007),r=n(61134),o=n(72791),i=n(44695),s=n(16029),l=n(57621),d=n(53767),c=n(24308),m=n(12258),u=n(38072),g=n(66664),v=n(99116),_=n(8976),h=n(66512),p=n(32869),f=n(24461),Z=n(80184);function b(e){let{departmentData:a,currentTable:n}=e;const{t:b}=(0,h.qM)(),{currentLang:x}=(0,h.nt)(),j="ar"===x.value,{user:y}=(0,_.E)(),{enqueueSnackbar:k}=(0,p.useSnackbar)(),C=t.Ry().shape({name_arabic:t.Z_().required(b("required field")),name_english:t.Z_().required(b("required field")),general_info:t.Z_()}),w=(0,o.useMemo)((()=>{var e,t;return{unit_service:null===y||void 0===y||null===(e=y.employee)||void 0===e||null===(t=e.employee_engagements[null===y||void 0===y?void 0:y.employee.selected_engagement])||void 0===t?void 0:t.unit_service._id,name_arabic:(null===n||void 0===n?void 0:n.name_arabic)||"",name_english:(null===n||void 0===n?void 0:n.name_english)||"",department:a._id,general_info:(null===n||void 0===n?void 0:n.general_info)||""}}),[n,a,null===y||void 0===y?void 0:y.employee]),q=(0,r.cI)({mode:"onTouched",resolver:(0,i.X)(C),defaultValues:w}),D=e=>{/^[a-zA-Z0-9\s,@#$!*_\-&^%.()]*$/.test(e.target.value)&&q.setValue(e.target.name,e.target.value,{shouldValidate:!0})},{reset:S,handleSubmit:E,formState:{isSubmitting:M,errors:V}}=q;(0,o.useEffect)((()=>{Object.keys(V).length&&Object.keys(V).forEach(((e,a)=>{var n;return k("".concat(e,": ").concat((null===V||void 0===V||null===(n=V[e])||void 0===n?void 0:n.message)||"error"),{variant:"error"})}))}),[V,k]);const P=E((async e=>{try{n?(await g.ZP.patch(g.Hv.rooms.one(n._id),{department:a._id,...e}),v.Z.emit("updated",{data:e,user:y,link:u.H.unitservice.departments.rooms.root(a._id),msg:"updated room <strong>".concat(e.name_english||"","</strong> in <strong>").concat(a.name_english,"</strong> department")})):(await g.ZP.post(g.Hv.rooms.all,{department:a._id,...e}),v.Z.emit("created",{data:e,user:y,link:u.H.unitservice.departments.rooms.root(a._id),msg:"created room <strong>".concat(e.name_english||"","</strong> into <strong>").concat(a.name_english,"</strong> department"),ar_msg:"\u0625\u0646\u0634\u0627\u0621 \u063a\u0631\u0641\u0629 <strong>".concat(e.name_arabic||"","</strong> \u0641\u064a \u0642\u0633\u0645 <strong>").concat(a.name_arabic,"</strong>")})),S(),k(b(n?"update success!":"create success!"))}catch(t){k(j&&"".concat(t.arabic_message)||"".concat(t.message),{variant:"error"}),console.error(t)}}));return(0,o.useEffect)((()=>{var e,t;S({unit_service:null===y||void 0===y||null===(e=y.employee)||void 0===e||null===(t=e.employee_engagements[null===y||void 0===y?void 0:y.employee.selected_engagement])||void 0===t?void 0:t.unit_service._id,name_arabic:(null===n||void 0===n?void 0:n.name_arabic)||"",name_english:(null===n||void 0===n?void 0:n.name_english)||"",department:a._id,general_info:(null===n||void 0===n?void 0:n.general_info)||""})}),[n]),(0,Z.jsx)(f.ZP,{methods:q,onSubmit:P,children:(0,Z.jsx)(c.Z,{container:!0,spacing:3,children:(0,Z.jsx)(c.Z,{xs:12,maxWidth:"md",children:(0,Z.jsxs)(l.Z,{sx:{p:3},children:[(0,Z.jsxs)(s.Z,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,Z.jsx)(f.au,{onChange:D,name:"name_english",label:"".concat(b("name english")," *")}),(0,Z.jsx)(f.au,{onChange:e=>{/^[\u0600-\u06FF0-9\s!@#$%^&*_\-()]*$/.test(e.target.value)&&q.setValue(e.target.name,e.target.value,{shouldValidate:!0})},name:"name_arabic",label:"".concat(b("name arabic")," *")}),(0,Z.jsx)(f.au,{onChange:D,name:"general_info",label:b("general info")})]}),(0,Z.jsx)(d.Z,{alignItems:"flex-end",sx:{mt:3},children:(0,Z.jsx)(m.Z,{type:"submit",tabIndex:-1,variant:"contained",loading:M,children:b(n?"save changes":"create")})})]})})})})}},57621:(e,a,n)=>{n.d(a,{Z:()=>p});var t=n(87462),r=n(63366),o=n(72791),i=n(59278),s=n(20838),l=n(66934),d=n(31402),c=n(27938),m=n(59703),u=n(64657);function g(e){return(0,u.ZP)("MuiCard",e)}(0,m.Z)("MuiCard",["root"]);var v=n(80184);const _=["className","raised"],h=(0,l.ZP)(c.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,a)=>a.root})((()=>({overflow:"hidden"}))),p=o.forwardRef((function(e,a){const n=(0,d.Z)({props:e,name:"MuiCard"}),{className:o,raised:l=!1}=n,c=(0,r.Z)(n,_),m=(0,t.Z)({},n,{raised:l}),u=(e=>{const{classes:a}=e;return(0,s.Z)({root:["root"]},g,a)})(m);return(0,v.jsx)(h,(0,t.Z)({className:(0,i.Z)(u.root,o),elevation:l?8:void 0,ref:a,ownerState:m},c))}))}}]);
//# sourceMappingURL=3970.0010a5a9.chunk.js.map
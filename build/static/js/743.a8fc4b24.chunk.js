"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[743],{96659:(e,n,a)=>{a.r(n),a.d(n,{default:()=>k});var i=a(6907),s=a(27031),o=a(8976),t=a(8007),l=a(61134),r=a(72791),d=a(44695),c=a(53767),p=a(12258),u=a(61889),m=a(4567),v=a(57621),g=a(9585),h=a(10266),x=a(19208),y=a(38887),f=a(66664),j=a(36980),Z=a(81164),b=a(32869),_=a(535),w=a(80184);function P(){const{t:e}=(0,Z.qM)(),{currentLang:n}=(0,Z.nt)(),a="ar"===n.value,i=[{label:e("read"),value:"read"},{label:e("create"),value:"create"},{label:e("edit"),value:"update"},{label:e("delete"),value:"delete"}],{emid:s,wgid:o}=(0,x.UO)(),{data:P}=(0,j.tBz)(o),k=(0,y.F)("up","md"),{enqueueSnackbar:T}=(0,b.Ds)(),C=t.Ry().shape({appointments:t.IX(),appointment_configs:t.IX(),accounting:t.IX(),entrance_management:t.IX(),permissions:t.IX()}),S=(0,r.useMemo)((()=>{var e,n,a,i,o,t,l,r,d,c,p,u,m,v,g;return{appointments:(null===P||void 0===P||null===(e=P.employees)||void 0===e||null===(n=e.find((e=>e._id===s)))||void 0===n||null===(a=n.acl)||void 0===a?void 0:a.appointments)||[],appointment_configs:(null===P||void 0===P||null===(i=P.employees)||void 0===i||null===(o=i.find((e=>e._id===s)))||void 0===o||null===(t=o.acl)||void 0===t?void 0:t.appointment_configs)||[],accounting:(null===P||void 0===P||null===(l=P.employees)||void 0===l||null===(r=l.find((e=>e._id===s)))||void 0===r||null===(d=r.acl)||void 0===d?void 0:d.accounting)||[],entrance_management:(null===P||void 0===P||null===(c=P.employees)||void 0===c||null===(p=c.find((e=>e._id===s)))||void 0===p||null===(u=p.acl)||void 0===u?void 0:u.entrance_management)||[],permissions:(null===P||void 0===P||null===(m=P.employees)||void 0===m||null===(v=m.find((e=>e._id===s)))||void 0===v||null===(g=v.acl)||void 0===g?void 0:g.permissions)||[]}}),[P,s]),M=(0,l.cI)({mode:"onTouched",resolver:(0,d.X)(C),defaultValues:S}),{reset:R,handleSubmit:H,formState:{isSubmitting:N,errors:I}}=M;(0,r.useEffect)((()=>{Object.keys(I).length&&Object.keys(I).forEach(((e,n)=>{var a;return T(null===I||void 0===I||null===(a=I[e])||void 0===a?void 0:a.message,{variant:"error"})}))}),[I,T]),(0,r.useEffect)((()=>{var e,n,a,i,o,t,l,r,d,c,p,u,m,v,g;R({appointments:(null===P||void 0===P||null===(e=P.employees)||void 0===e||null===(n=e.find((e=>e._id===s)))||void 0===n||null===(a=n.acl)||void 0===a?void 0:a.appointments)||[],appointment_configs:(null===P||void 0===P||null===(i=P.employees)||void 0===i||null===(o=i.find((e=>e._id===s)))||void 0===o||null===(t=o.acl)||void 0===t?void 0:t.appointment_configs)||[],accounting:(null===P||void 0===P||null===(l=P.employees)||void 0===l||null===(r=l.find((e=>e._id===s)))||void 0===r||null===(d=r.acl)||void 0===d?void 0:d.accounting)||[],entrance_management:(null===P||void 0===P||null===(c=P.employees)||void 0===c||null===(p=c.find((e=>e._id===s)))||void 0===p||null===(u=p.acl)||void 0===u?void 0:u.entrance_management)||[],permissions:(null===P||void 0===P||null===(m=P.employees)||void 0===m||null===(v=m.find((e=>e._id===s)))||void 0===v||null===(g=v.acl)||void 0===g?void 0:g.permissions)||[]})}),[s,P]);const z=H((async n=>{try{f.ZP.patch(f.Hv.work_groups.employee.acl(s),{acl:n}),T(e("updated successfully!"))}catch(i){T(a&&i.arabic_message||i.message,{variant:"error"}),console.error(i)}})),X=(0,w.jsxs)(w.Fragment,{children:[k&&(0,w.jsxs)(u.ZP,{md:4,children:[(0,w.jsx)(m.Z,{variant:"h6",sx:{mb:.5},children:e("permissions")}),(0,w.jsx)(m.Z,{variant:"body2",sx:{color:"text.secondary"},children:e("giving or withdrowing permissions refered to all")}),(0,w.jsx)(m.Z,{variant:"body2",sx:{color:"text.secondary"},children:e("work group and all its employees")})]}),(0,w.jsx)(u.ZP,{xs:12,md:8,children:(0,w.jsxs)(v.Z,{children:[!k&&(0,w.jsx)(g.Z,{title:e("permissions")}),(0,w.jsxs)(c.Z,{spacing:3,sx:{p:3},children:[(0,w.jsxs)(c.Z,{spacing:1,children:[(0,w.jsx)(m.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("appointments")}),(0,w.jsx)(_.s2,{row:!0,spacing:4,name:"appointments",options:i})]}),(0,w.jsxs)(c.Z,{spacing:1,children:[(0,w.jsx)(m.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("appointment configuration")}),(0,w.jsx)(_.s2,{row:!0,spacing:4,name:"appointment_configs",options:i})]}),(0,w.jsxs)(c.Z,{spacing:1,children:[(0,w.jsx)(m.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("accounting")}),(0,w.jsx)(_.s2,{row:!0,spacing:4,name:"accounting",options:i})]}),(0,w.jsxs)(c.Z,{spacing:1,children:[(0,w.jsx)(m.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("entrance management")}),(0,w.jsx)(_.s2,{row:!0,spacing:4,name:"entrance_management",options:i})]}),(0,w.jsxs)(c.Z,{spacing:1,children:[(0,w.jsx)(m.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("permissions")}),(0,w.jsx)(_.s2,{row:!0,spacing:4,name:"permissions",options:i})]})]})]})})]}),E=(0,w.jsxs)(w.Fragment,{children:[k&&(0,w.jsx)(u.ZP,{md:4}),(0,w.jsx)(u.ZP,{xs:12,md:8,sx:{display:"flex",justifyContent:"flex-end"},children:(0,w.jsx)(p.Z,{type:"submit",variant:"contained",loading:N,sx:{m:2},children:e("save changes")})})]});return(0,w.jsx)(h.Z,{maxWidth:"lg",children:(0,w.jsx)(_.ZP,{methods:M,onSubmit:z,children:(0,w.jsxs)(u.ZP,{container:!0,spacing:3,children:[X,E]})})})}function k(){var e;const{user:n}=(0,o.E)();return(0,w.jsxs)(s.Z,{category:"work_group",subcategory:"permissions",acl:"update",children:[(0,w.jsxs)(i.ql,{children:[(0,w.jsxs)("title",{children:[(null===n||void 0===n||null===(e=n.employee)||void 0===e?void 0:e.name_english)||"employee"," : work group permissions "]}),(0,w.jsx)("meta",{name:"description",content:"meta"})]}),(0,w.jsx)(P,{})]})}},9585:(e,n,a)=>{a.d(n,{Z:()=>Z});var i=a(63366),s=a(87462),o=a(72791),t=a(59278),l=a(20838),r=a(4567),d=a(31402),c=a(66934),p=a(59703),u=a(64657);function m(e){return(0,u.ZP)("MuiCardHeader",e)}const v=(0,p.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var g=a(80184);const h=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],x=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,n)=>(0,s.Z)({["& .".concat(v.title)]:n.title,["& .".concat(v.subheader)]:n.subheader},n.root)})({display:"flex",alignItems:"center",padding:16}),y=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,n)=>n.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),f=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,n)=>n.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),j=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,n)=>n.content})({flex:"1 1 auto"}),Z=o.forwardRef((function(e,n){const a=(0,d.Z)({props:e,name:"MuiCardHeader"}),{action:o,avatar:c,className:p,component:u="div",disableTypography:v=!1,subheader:Z,subheaderTypographyProps:b,title:_,titleTypographyProps:w}=a,P=(0,i.Z)(a,h),k=(0,s.Z)({},a,{component:u,disableTypography:v}),T=(e=>{const{classes:n}=e;return(0,l.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},m,n)})(k);let C=_;null==C||C.type===r.Z||v||(C=(0,g.jsx)(r.Z,(0,s.Z)({variant:c?"body2":"h5",className:T.title,component:"span",display:"block"},w,{children:C})));let S=Z;return null==S||S.type===r.Z||v||(S=(0,g.jsx)(r.Z,(0,s.Z)({variant:c?"body2":"body1",className:T.subheader,color:"text.secondary",component:"span",display:"block"},b,{children:S}))),(0,g.jsxs)(x,(0,s.Z)({className:(0,t.Z)(T.root,p),as:u,ref:n,ownerState:k},P,{children:[c&&(0,g.jsx)(y,{className:T.avatar,ownerState:k,children:c}),(0,g.jsxs)(j,{className:T.content,ownerState:k,children:[C,S]}),o&&(0,g.jsx)(f,{className:T.action,ownerState:k,children:o})]}))}))}}]);
//# sourceMappingURL=743.a8fc4b24.chunk.js.map
"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[98169],{22698:(e,n,o)=>{o.d(n,{A:()=>I});var l=o(58168),t=o(98587),a=o(65043),i=o(58387),s=o(98610),r=o(88092),d=o(34535),c=o(98206),u=o(94496),p=o(67266),m=o(66734),v=o(70579);const g=(0,m.A)((0,v.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var h=o(96030);const x=["slots","slotProps"],y=(0,d.Ay)(h.A)((e=>{let{theme:n}=e;return(0,l.A)({display:"flex",marginLeft:`calc(${n.spacing(1)} * 0.5)`,marginRight:`calc(${n.spacing(1)} * 0.5)`},"light"===n.palette.mode?{backgroundColor:n.palette.grey[100],color:n.palette.grey[700]}:{backgroundColor:n.palette.grey[700],color:n.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,l.A)({},"light"===n.palette.mode?{backgroundColor:n.palette.grey[200]}:{backgroundColor:n.palette.grey[600]}),"&:active":(0,l.A)({boxShadow:n.shadows[0]},"light"===n.palette.mode?{backgroundColor:(0,p.tL)(n.palette.grey[200],.12)}:{backgroundColor:(0,p.tL)(n.palette.grey[600],.12)})})})),A=(0,d.Ay)(g)({width:24,height:16});const j=function(e){const{slots:n={},slotProps:o={}}=e,a=(0,t.A)(e,x),i=e;return(0,v.jsx)("li",{children:(0,v.jsx)(y,(0,l.A)({focusRipple:!0},a,{ownerState:i,children:(0,v.jsx)(A,(0,l.A)({as:n.CollapsedIcon,ownerState:i},o.collapsedIcon))}))})};var f=o(92532),b=o(72372);function _(e){return(0,b.Ay)("MuiBreadcrumbs",e)}const w=(0,f.A)("MuiBreadcrumbs",["root","ol","li","separator"]),C=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],k=(0,d.Ay)(u.A,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,n)=>[{[`& .${w.li}`]:n.li},n.root]})({}),P=(0,d.Ay)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,n)=>n.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),S=(0,d.Ay)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,n)=>n.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function R(e,n,o,l){return e.reduce(((t,a,i)=>(i<e.length-1?t=t.concat(a,(0,v.jsx)(S,{"aria-hidden":!0,className:n,ownerState:l,children:o},`separator-${i}`)):t.push(a),t)),[])}const I=a.forwardRef((function(e,n){const o=(0,c.b)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:u,component:p="nav",slots:m={},slotProps:g={},expandText:h="Show path",itemsAfterCollapse:x=1,itemsBeforeCollapse:y=1,maxItems:A=8,separator:f="/"}=o,b=(0,t.A)(o,C),[w,S]=a.useState(!1),I=(0,l.A)({},o,{component:p,expanded:w,expandText:h,itemsAfterCollapse:x,itemsBeforeCollapse:y,maxItems:A,separator:f}),L=(e=>{const{classes:n}=e;return(0,s.A)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},_,n)})(I),T=(0,r.A)({elementType:m.CollapsedIcon,externalSlotProps:g.collapsedIcon,ownerState:I}),F=a.useRef(null),$=a.Children.toArray(d).filter((e=>a.isValidElement(e))).map(((e,n)=>(0,v.jsx)("li",{className:L.li,children:e},`child-${n}`)));return(0,v.jsx)(k,(0,l.A)({ref:n,component:p,color:"text.secondary",className:(0,i.A)(L.root,u),ownerState:I},b,{children:(0,v.jsx)(P,{className:L.ol,ref:F,ownerState:I,children:R(w||A&&$.length<=A?$:(e=>y+x>=e.length?e:[...e.slice(0,y),(0,v.jsx)(j,{"aria-label":h,slots:{CollapsedIcon:m.CollapsedIcon},slotProps:{collapsedIcon:T},onClick:()=>{S(!0);const e=F.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-x,e.length)])($),L.separator,f,I)})}))}))},35924:(e,n,o)=>{o.d(n,{l:()=>t});var l=o(60778);const t=()=>{const{t:e}=(0,l.WD)();return{STATUS_OPTIONS:[{value:"active",label:e("active")},{value:"inactive",label:e("inactive")}],QC_STATUS_OPTIONS:[{value:"unread",label:e("unread")},{value:"read",label:e("read")}]}}},56316:(e,n,o)=>{o.d(n,{A:()=>m});var l=o(65043),t=o(74600),a=o(49633),i=o(94814),s=o(67784),r=o(51787),d=o(60778),c=o(35151),u=o(34624),p=o(70579);function m(e){let{filters:n,onFilters:o,onPrint:m,onDownload:v,canReset:g,onResetFilters:h}=e;const x=(0,u.f)(),{t:y}=(0,d.WD)(),A=(0,l.useCallback)((e=>{o("name",e.target.value)}),[o]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(t.A,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[(0,p.jsx)(t.A,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:(0,p.jsx)(s.A,{fullWidth:!0,value:n.name,onChange:A,placeholder:y("Search name or number..."),InputProps:{startAdornment:(0,p.jsx)(r.A,{position:"start",children:(0,p.jsx)(c.A,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),g&&(0,p.jsx)(a.A,{color:"error",sx:{flexShrink:0},onClick:h,startIcon:(0,p.jsx)(c.A,{icon:"solar:trash-bin-trash-bold"}),children:y("clear")})]}),(0,p.jsxs)(u.A,{open:x.open,onClose:x.onClose,arrow:"right-top",sx:{width:140},children:[(0,p.jsxs)(i.A,{lang:"ar",onClick:()=>{m(),x.onClose()},children:[(0,p.jsx)(c.A,{icon:"solar:printer-minimalistic-bold"}),y("print")]}),(0,p.jsxs)(i.A,{lang:"ar",onClick:()=>{v(),x.onClose()},children:[(0,p.jsx)(c.A,{icon:"solar:import-bold"}),"Import"]})]})]})}},83858:(e,n,o)=>{o.d(n,{A:()=>l.A});var l=o(91720)},91720:(e,n,o)=>{o.d(n,{A:()=>u});var l=o(81e3),t=o(88446),a=o(74600),i=o(94496),s=o(22698),r=o(65381),d=o(70579);function c(e){let{link:n,activeLast:o,disabled:a}=e;const i={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...a&&!o&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},s=(0,d.jsxs)(d.Fragment,{children:[n.icon&&(0,d.jsx)(l.A,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:n.icon}),n.name]});return n.href?(0,d.jsx)(t.A,{component:r.W,href:n.href,sx:i,children:s}):(0,d.jsxs)(l.A,{sx:i,children:[" ",s," "]})}function u(e){let{links:n,action:o,heading:r,moreLink:u,activeLast:m,sx:v,...g}=e;const h=n&&n[n.length-1].name;return(0,d.jsxs)(l.A,{sx:{...v},children:[(0,d.jsxs)(a.A,{direction:"row",alignItems:"center",children:[(0,d.jsxs)(l.A,{sx:{flexGrow:1,display:"flex",gap:{md:3},alignItems:{md:"center"},flexDirection:{xs:"column",md:"row"}},children:[r&&(0,d.jsx)(i.A,{textTransform:"capitalize",variant:"h4",gutterBottom:!0,children:r}),n&&!!n.length&&(0,d.jsx)(s.A,{separator:(0,d.jsx)(p,{}),...g,children:null===n||void 0===n?void 0:n.map(((e,n)=>(0,d.jsx)(c,{link:e,activeLast:m,disabled:e.name===h},n)))})]}),o&&(0,d.jsxs)(l.A,{sx:{flexShrink:0,textTransform:"capitalize"},children:[" ",o," "]})]}),!!u&&(0,d.jsx)(l.A,{sx:{mt:2},children:u.map(((e,n)=>(0,d.jsx)(t.A,{href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},n)))})]})}function p(){return(0,d.jsx)(l.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}},98169:(e,n,o)=>{o.r(n),o.d(n,{default:()=>K});var l=o(29490),t=o(75139),a=o(93141),i=o(65043),s=o(40360),r=o(29013),d=o(12110),c=o(71806),u=o(49633),p=o(77739),m=o(90310),v=o(77224),g=o(73460),h=o(17392),x=o(79650),y=o(48407),A=o(67132),j=o(65381),f=o(59229),b=o(7625),_=o(60778),w=o(68719),C=o(35924),k=o(16236),P=o(35151),S=o(51440),R=o(70074),I=o(67555),L=o(83858),T=o(75950),F=o(31673),$=o(91562),M=o(94857),O=o(81e3),B=o(26353),D=o(94814),W=o(68738),U=o(1273),N=o(39652),z=o(57442),E=o(34624),Z=o(70579);function q(e){var n,o,l;let{row:t,selected:a,onEditRow:i,onSelectRow:s,onActivate:r,onInactivate:d,setFilters:c,filters:u,onViewRow:p,onChangeVisPage:m,onChangeVisOnlineApp:v}=e;const{employee:g,salary:x,start_time:y,end_time:A,status:j,created_at:f,user_creation:b,ip_address_user_creation:C,updated_at:k,user_modification:S,ip_address_user_modification:R,modifications_nums:I,online:L}=t,{t:T}=(0,_.WD)(),F=(0,w.v)(),{currentLang:$}=(0,_.jc)(),M="ar"===$.value,q=(0,E.f)(),V=(0,E.f)(),G=(0,Z.jsxs)(W.A,{hover:!0,selected:a,children:[(0,Z.jsx)(N.A,{padding:"checkbox",children:(0,Z.jsx)(U.A,{checked:a,onClick:s})}),(0,Z.jsxs)(N.A,{sx:{cursor:"pointer",color:"#3F54EB"},onClick:p,align:"center",children:[String(null===g||void 0===g||null===(n=g.nationality)||void 0===n?void 0:n.code).padStart(3,"0"),"-",g.sequence_number]}),(0,Z.jsx)(N.A,{align:"center",children:(0,Z.jsx)(P.A,{icon:L?"noto:green-circle":"noto:red-circle",style:{width:"10px"}})}),(0,Z.jsx)(N.A,{sx:{cursor:"pointer",color:"#3F54EB"},onClick:p,align:"center",children:M?null===g||void 0===g?void 0:g.name_arabic:null===g||void 0===g?void 0:g.name_english}),(0,Z.jsx)(N.A,{align:"center",children:M?null===g||void 0===g||null===(o=g.employee_type)||void 0===o?void 0:o.name_arabic:null===g||void 0===g||null===(l=g.employee_type)||void 0===l?void 0:l.name_english}),(0,Z.jsx)(N.A,{sx:{textTransform:"lowercase"},align:"center",children:(0,z.ts)(f)}),(0,Z.jsx)(N.A,{align:"center",children:x}),(0,Z.jsx)(N.A,{align:"center",children:(0,z.qi)(y)}),(0,Z.jsx)(N.A,{align:"center",children:(0,z.qi)(A)}),(0,Z.jsx)(N.A,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,Z.jsx)(h.A,{color:q.open?"inherit":"default",onClick:q.onOpen,children:(0,Z.jsx)(P.A,{icon:"eva:more-vertical-fill"})})})]});return(0,Z.jsxs)(Z.Fragment,{children:[G,(0,Z.jsxs)(E.A,{open:q.open,onClose:q.onClose,arrow:"right-top",sx:{width:140},children:["active"===j?F({category:"unit_service",subcategory:"employees",acl:"delete"})&&(0,Z.jsxs)(D.A,{lang:"ar",onClick:()=>{d(),q.onClose()},sx:{color:"error.main"},children:[(0,Z.jsx)(P.A,{icon:"ic:baseline-pause"}),T("inactivate")]}):F({category:"unit_service",subcategory:"employees",acl:"update"})&&(0,Z.jsxs)(D.A,{lang:"ar",onClick:()=>{r(),q.onClose()},sx:{color:"success.main"},children:[(0,Z.jsx)(P.A,{icon:"bi:play-fill"}),T("activate")]}),(0,Z.jsxs)(D.A,{lang:"ar",onClick:p,children:[(0,Z.jsx)(P.A,{icon:"solar:eye-bold"}),T("view")]}),(0,Z.jsxs)(D.A,{lang:"ar",onClick:V.onOpen,children:[(0,Z.jsx)(P.A,{icon:"carbon:data-quality-definition"}),T("DDL")]})]}),(0,Z.jsxs)(E.A,{open:V.open,onClose:V.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,Z.jsxs)(O.A,{sx:{fontWeight:600},children:[T("creation time"),":"]}),(0,Z.jsx)(O.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,Z.jsx)(B.A,{primary:(0,z.ts)(f,"dd MMMMMMMM yyyy"),secondary:(0,z.ts)(f,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,Z.jsxs)(O.A,{sx:{pt:1,fontWeight:600},children:[T("created by"),":"]}),(0,Z.jsx)(O.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===b||void 0===b?void 0:b.email}),(0,Z.jsxs)(O.A,{sx:{pt:1,fontWeight:600},children:[T("created by IP"),":"]}),(0,Z.jsx)(O.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:C}),(0,Z.jsxs)(O.A,{sx:{pt:1,fontWeight:600},children:[T("editing time"),":"]}),(0,Z.jsx)(O.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,Z.jsx)(B.A,{primary:(0,z.ts)(k,"dd MMMMMMMM yyyy"),secondary:(0,z.ts)(k,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,Z.jsxs)(O.A,{sx:{pt:1,fontWeight:600},children:[T("editor"),":"]}),(0,Z.jsx)(O.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===S||void 0===S?void 0:S.email}),(0,Z.jsxs)(O.A,{sx:{pt:1,fontWeight:600},children:[T("editor IP"),":"]}),(0,Z.jsx)(O.A,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:R}),(0,Z.jsxs)(O.A,{sx:{pt:1,fontWeight:600},children:[T("modifications no"),": ",I]})]})]})}var V=o(56316),G=o(99812);const H={name:"",status:"active"};function J(){var e,n,o;const{t:l}=(0,_.WD)(),{currentLang:O}=(0,_.jc)(),B="ar"===O.value,D=[{id:"sequence_number",label:l("number")},{id:"online",label:l("online")},{id:"name_english",label:l("name")},{id:"employee_type",label:l("employee type")},{id:"created_at",label:l("employed at")},{id:"salary",label:l("salary")},{id:"work_start",label:l("work start")},{id:"work_end",label:l("work end")},{id:"",width:88}],{enqueueSnackbar:W}=(0,M.dh)(),U=(0,w.v)(),{STATUS_OPTIONS:N}=(0,C.l)(),z=(0,T.K2)({defaultOrderBy:"code"}),E=(0,i.useRef)(),{user:J}=(0,t.Z)(),K=(0,f.C)(),Q=(0,f.C)(),X=(0,A.rd)(),{employeesData:Y,loading:ee,refetch:ne}=(0,b.pA$)(null===J||void 0===J||null===(e=J.employee)||void 0===e||null===(n=e.employee_engagements)||void 0===n||null===(o=n[null===J||void 0===J?void 0:J.employee.selected_engagement])||void 0===o?void 0:o.unit_service._id),[oe,le]=(0,i.useState)(H),te=!(!oe.startDate||!oe.endDate)&&oe.startDate.getTime()>oe.endDate.getTime(),ae=function(e){var n;let{inputData:o,comparator:l,filters:t,dateError:a}=e;const{status:i,name:s}=t,r=null===(n=o)||void 0===n?void 0:n.map(((e,n,o)=>[e,n]));r.sort(((e,n)=>{const o=l(e[0],n[0]);return 0!==o?o:e[1]-n[1]})),o=r.map(((e,n)=>e[0])),s&&(o=o.filter((e=>{var n,o,l,t,a,i,r,d,c,u,p,m,v,g,h,x,y,A,j,f,b,_,w,C,k,P,S,R,I,L,T,F,$,M,O,B,D,W,U,N,z,E;return(null===e||void 0===e||null===(n=e.employee)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(o=e.employee)||void 0===o||null===(l=o.name_english)||void 0===l?void 0:l.toLowerCase().indexOf(s.toLowerCase()))||(null===e||void 0===e||null===(t=e.employee)||void 0===t?void 0:t.name_arabic)&&-1!==(null===e||void 0===e||null===(a=e.employee)||void 0===a||null===(i=a.name_arabic)||void 0===i?void 0:i.toLowerCase().indexOf(s.toLowerCase()))||(null===e||void 0===e||null===(r=e.employee)||void 0===r?void 0:r.name_english)&&-1!==(null===e||void 0===e||null===(d=e.employee)||void 0===d||null===(c=d.name_english)||void 0===c?void 0:c.toLowerCase().indexOf(s.toLowerCase()))||(null===e||void 0===e||null===(u=e.employee)||void 0===u||null===(p=u.country)||void 0===p?void 0:p.name_english)&&-1!==(null===e||void 0===e||null===(m=e.employee)||void 0===m||null===(v=m.country)||void 0===v||null===(g=v.name_english)||void 0===g?void 0:g.toLowerCase().indexOf(s.toLowerCase()))||(null===e||void 0===e||null===(h=e.employee)||void 0===h||null===(x=h.country)||void 0===x?void 0:x.name_arabic)&&-1!==(null===e||void 0===e||null===(y=e.employee)||void 0===y||null===(A=y.country)||void 0===A||null===(j=A.name_arabic)||void 0===j?void 0:j.toLowerCase().indexOf(s.toLowerCase()))||(null===e||void 0===e||null===(f=e.employee)||void 0===f||null===(b=f.city)||void 0===b?void 0:b.name_english)&&-1!==(null===e||void 0===e||null===(_=e.employee)||void 0===_||null===(w=_.city)||void 0===w||null===(C=w.name_english)||void 0===C?void 0:C.toLowerCase().indexOf(s.toLowerCase()))||(null===e||void 0===e||null===(k=e.employee)||void 0===k||null===(P=k.city)||void 0===P?void 0:P.name_arabic)&&-1!==(null===e||void 0===e||null===(S=e.employee)||void 0===S||null===(R=S.city)||void 0===R||null===(I=R.name_arabic)||void 0===I?void 0:I.toLowerCase().indexOf(s.toLowerCase()))||(null===e||void 0===e||null===(L=e.employee)||void 0===L||null===(T=L.nationality)||void 0===T?void 0:T.name_english)&&-1!==(null===e||void 0===e||null===(F=e.employee)||void 0===F||null===($=F.nationality)||void 0===$||null===(M=$.name_english)||void 0===M?void 0:M.toLowerCase().indexOf(s.toLowerCase()))||(null===e||void 0===e||null===(O=e.employee)||void 0===O||null===(B=O.nationality)||void 0===B?void 0:B.name_arabic)&&-1!==(null===e||void 0===e||null===(D=e.employee)||void 0===D||null===(W=D.nationality)||void 0===W||null===(U=W.name_arabic)||void 0===U?void 0:U.toLowerCase().indexOf(s.toLowerCase()))||(null===e||void 0===e||null===(N=e.employee)||void 0===N?void 0:N.email)&&-1!==(null===e||void 0===e||null===(z=e.employee)||void 0===z||null===(E=z.email)||void 0===E?void 0:E.toLowerCase().indexOf(s.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===s||JSON.stringify(e.code)===s})));"all"!==i&&(o=o.filter((e=>e.status===i)));return o}({inputData:Y,comparator:(0,T.hz)(z.order,z.orderBy),filters:oe,dateError:te}),ie=ae.slice(z.page*z.rowsPerPage,z.page*z.rowsPerPage+z.rowsPerPage),se=!(null===oe||void 0===oe||!oe.name)||"active"!==oe.status,re=!ae.length&&se||!ae.length,de=(0,a.useReactToPrint)({content:()=>E.current}),ce=(0,i.useCallback)((async e=>{try{var n;await F.Ay.patch(`${F.vZ.employee_engagements.one(e._id)}/updatestatus`,{status:"active"}),$.A.emit("updated",{user:J,link:y.f.unitservice.employees.root,msg:`activated an employee <strong>${null===e||void 0===e||null===(n=e.employee)||void 0===n?void 0:n.name_english}</strong>`})}catch(o){W(B&&`${o.arabic_message}`||`${o.message}`,{variant:"error"}),console.error(o)}ne(),z.onUpdatePageDeleteRow(ie.length)}),[ie.length,z,ne,J,W,B]),ue=(0,i.useCallback)((async e=>{try{var n;await F.Ay.patch(`${F.vZ.employee_engagements.one(e._id)}/updatestatus`,{status:"inactive"}),$.A.emit("updated",{user:J,link:y.f.unitservice.employees.root,msg:`inactivated an employee <strong>${null===e||void 0===e||null===(n=e.employee)||void 0===n?void 0:n.name_english}</strong>`})}catch(o){W(B&&`${o.arabic_message}`||`${o.message}`,{variant:"error"}),console.error(o)}ne(),z.onUpdatePageDeleteRow(ie.length)}),[ie.length,z,ne,J,W,B]),pe=(0,i.useCallback)((async()=>{try{await F.Ay.patch(`${F.vZ.employee_engagements.ones}/updatestatus`,{status:"active",ids:z.selected}),$.A.emit("updated",{user:J,link:y.f.unitservice.employees.root,msg:"activated many employees"})}catch(e){W(B&&`${e.arabic_message}`||`${e.message}`,{variant:"error"}),console.error(e)}ne(),z.onUpdatePageDeleteRows({totalRows:Y.length,totalRowsInPage:ie.length,totalRowsFiltered:ae.length})}),[ae.length,ie.length,z,Y,ne,J,B,W]),me=(0,i.useCallback)((async()=>{try{await F.Ay.patch(`${F.vZ.employee_engagements.ones}/updatestatus`,{status:"inactive",ids:z.selected}),$.A.emit("updated",{user:J,link:y.f.unitservice.employees.root,msg:"inactivated many employees "})}catch(e){W(B&&`${e.arabic_message}`||`${e.message}`,{variant:"error"}),console.error(e)}ne(),z.onUpdatePageDeleteRows({totalRows:Y.length,totalRowsInPage:ie.length,totalRowsFiltered:ae.length})}),[ae.length,ie.length,z,Y,ne,J,B,W]),ve=(0,i.useCallback)(((e,n)=>{z.onResetPage(),le((o=>({...o,[e]:n})))}),[z]),ge=(0,i.useCallback)((e=>{X.push(y.f.unitservice.hr.employee(e))}),[X]),he=(0,i.useCallback)((()=>{le(H)}),[]),xe=(0,i.useCallback)((async e=>{try{await F.Ay.patch(F.vZ.employee_engagements.one(e),{visibility_US_page:!Y.find((n=>n._id===e)).visibility_US_page}),ne(),W(l("updated successfully!"))}catch(n){W(B&&`${n.arabic_message}`||`${n.message}`,{variant:"error"})}}),[Y,ne,l,W,B]),ye=(0,i.useCallback)((async e=>{try{await F.Ay.patch(F.vZ.employee_engagements.one(e),{visibility_online_appointment:!Y.find((n=>n._id===e)).visibility_online_appointment}),ne(),W(l("updated successfully!"))}catch(n){W(B&&`${n.arabic_message}`||`${n.message}`,{variant:"error"})}}),[Y,ne,l,W,B]),Ae=(0,i.useCallback)(((e,n)=>{ve("status",n)}),[ve]);return(0,i.useEffect)((()=>{$.A.on("employeeStatusUpdated",(e=>{var n,o,l,t,a;let{unit_service:i}=e;(null===J||void 0===J||null===(n=J.employee)||void 0===n||null===(o=n.employee_engagements)||void 0===o||null===(l=o[null===J||void 0===J||null===(a=J.employee)||void 0===a?void 0:a.selected_engagement])||void 0===l||null===(t=l.unit_service)||void 0===t?void 0:t._id)===i&&ne()}))}),[]),ee?(0,Z.jsx)(I.x,{}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(v.A,{maxWidth:"xl",children:[(0,Z.jsx)(L.A,{heading:l("employees"),links:[{name:l("dashboard"),href:y.f.unitservice.root},{name:l("employees")}],action:U({category:"unit_service",subcategory:"employees",acl:"create"})&&(0,Z.jsx)(u.A,{component:j.W,href:y.f.unitservice.employees.new,variant:"contained",startIcon:(0,Z.jsx)(P.A,{icon:"mingcute:add-line"}),children:l("new employee")}),sx:{mb:{xs:3,md:5},mt:{xs:3,md:5}}}),(0,Z.jsxs)(d.A,{children:[(0,Z.jsx)(r.A,{value:oe.status,onChange:Ae,sx:{px:2.5,boxShadow:e=>`inset 0 -2px 0 0 ${(0,m.X4)(e.palette.grey[500],.08)}`},children:N.map(((e,n)=>(0,Z.jsx)(s.A,{iconPosition:"end",value:e.value,label:e.label,icon:(0,Z.jsxs)(k.A,{variant:"all"===e.value||e.value===oe.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&Y.length,"active"===e.value&&Y.filter((e=>"active"===e.status)).length,"inactive"===e.value&&Y.filter((e=>"inactive"===e.status)).length]})},n)))}),(0,Z.jsx)(V.A,{onPrint:de,filters:oe,onFilters:ve,canReset:se,onResetFilters:he}),se&&(0,Z.jsx)(G.A,{filters:oe,onFilters:ve,onResetFilters:he,results:ae.length,sx:{p:2.5,pt:0}}),(0,Z.jsxs)(x.A,{children:[(0,Z.jsx)(T.Uv,{dense:z.dense,numSelected:z.selected.length,rowCount:ae.length,onSelectAllRows:e=>z.onSelectAllRows(e,ae.map(((e,n)=>e._id))),action:(0,Z.jsx)(Z.Fragment,{children:ae.filter((e=>z.selected.includes(e._id))).some((e=>"inactive"===e.status))?(0,Z.jsx)(p.A,{title:"Activate all",children:(0,Z.jsx)(h.A,{color:"primary",onClick:K.onTrue,children:(0,Z.jsx)(P.A,{icon:"codicon:run-all"})})}):(0,Z.jsx)(p.A,{title:"Inactivate all",children:(0,Z.jsx)(h.A,{color:"error",onClick:Q.onTrue,children:(0,Z.jsx)(P.A,{icon:"iconoir:pause-solid"})})})}),color:ae.filter((e=>z.selected.includes(e._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,Z.jsx)(S.A,{children:(0,Z.jsxs)(c.A,{ref:E,size:z.dense?"small":"medium",children:[(0,Z.jsx)(T.er,{order:z.order,orderBy:z.orderBy,headLabel:D,rowCount:ae.length,numSelected:z.selected.length,onSort:z.onSort,onSelectAllRows:e=>z.onSelectAllRows(e,ae.map(((e,n)=>e._id)))}),(0,Z.jsxs)(g.A,{children:[ae.slice(z.page*z.rowsPerPage,z.page*z.rowsPerPage+z.rowsPerPage).map(((e,n)=>(0,Z.jsx)(q,{row:e,filters:oe,setFilters:le,selected:z.selected.includes(e._id),onSelectRow:()=>z.onSelectRow(e._id),onActivate:()=>ce(e),onViewRow:()=>ge(e._id),onInactivate:()=>ue(e),onChangeVisPage:()=>xe(e._id),onChangeVisOnlineApp:()=>ye(e._id)},n))),(0,Z.jsx)(T.Sm,{notFound:re})]})]})})]}),(0,Z.jsx)(T.We,{count:ae.length,page:z.page,rowsPerPage:z.rowsPerPage,onPageChange:z.onChangePage,onRowsPerPageChange:z.onChangeRowsPerPage,dense:z.dense,onChangeDense:z.onChangeDense})]})]}),(0,Z.jsx)(R.T,{open:Q.value,onClose:Q.onFalse,title:"Inactivate",content:(0,Z.jsxs)(Z.Fragment,{children:["Are you sure want to Inactivate ",(0,Z.jsxs)("strong",{children:[" ",z.selected.length," "]})," items?"]}),action:(0,Z.jsx)(u.A,{variant:"contained",color:"error",onClick:()=>{me(),Q.onFalse()},children:"Inactivate"})}),(0,Z.jsx)(R.T,{open:K.value,onClose:K.onFalse,title:"Activate",content:(0,Z.jsxs)(Z.Fragment,{children:["Are you sure want to Activate ",(0,Z.jsxs)("strong",{children:[" ",z.selected.length," "]})," items?"]}),action:(0,Z.jsx)(u.A,{variant:"contained",color:"primary",onClick:()=>{pe(),K.onFalse()},children:"Activate"})})]})}function K(){var e,n,o,a,i;const{user:s}=(0,t.Z)(),r=null===s||void 0===s||null===(e=s.employee)||void 0===e||null===(n=e.employee_engagements)||void 0===n||null===(o=n[null===s||void 0===s||null===(i=s.employee)||void 0===i?void 0:i.selected_engagement])||void 0===o||null===(a=o.unit_service)||void 0===a?void 0:a.name_english;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(l.mg,{children:[(0,Z.jsxs)("title",{children:[r||"unit of service"," : Human resourse"]}),(0,Z.jsx)("meta",{name:"description",content:"meta"})]}),(0,Z.jsx)(J,{})]})}}}]);
//# sourceMappingURL=98169.5681e464.chunk.js.map
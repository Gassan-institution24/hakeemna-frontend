"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[2244],{27356:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(16029),a=i(53767),o=i(12065),l=i(4567),s=i(80184);function r(e){let{title:t,imgUrl:i,action:r,filled:d,description:c,sx:m,...u}=e;return(0,s.jsxs)(a.Z,{flexGrow:1,alignItems:"center",justifyContent:"center",sx:{px:3,height:1,...d&&{borderRadius:2,bgcolor:e=>(0,o.Fq)(e.palette.grey[500],.04),border:e=>"dashed 1px ".concat((0,o.Fq)(e.palette.grey[500],.08))},...m},...u,children:[(0,s.jsx)(n.Z,{component:"img",alt:"empty content",src:i||"/assets/icons/empty/ic_content.svg",sx:{width:1,maxWidth:160}}),t&&(0,s.jsx)(l.Z,{variant:"h6",component:"span",sx:{mt:1,color:"text.disabled",textAlign:"center"},children:t}),c&&(0,s.jsx)(l.Z,{variant:"caption",sx:{mt:1,color:"text.disabled",textAlign:"center"},children:c}),r&&r]})}},31092:(e,t,i)=>{i.d(t,{Z:()=>n.Z});var n=i(27356)},82244:(e,t,i)=>{i.r(t),i.d(t,{default:()=>q});var n=i(6907),a=i(81164),o=i(8976),l=i(66630),s=i(72791),r=i(31092),d=i(8007),c=i(61134),m=i(44695),u=i(16029),p=i(1503),x=i(13838),h=i(5574),v=i(15581),g=i(4110),j=i(62861),y=i(4567),Z=i(68096),f=i(65661),b=i(97123),_=i(39157),w=i(22459),S=i(66664),k=i(41364),B=i(32869),F=i(82007),C=i(80184);function W(e){var t,i,n,r;let{employeesData:W}=e;const{enqueueSnackbar:D}=(0,B.useSnackbar)(),{t:q}=(0,a.qM)(),{currentLang:R}=(0,a.nt)(),E="ar"===R.value,I=d.Ry().shape({Body:d.Z_(),Selection:d.Z_().nullable()}),[P,T]=(0,s.useState)(),{user:L}=(0,o.E)(),{appointmentsData:z}=(0,l.BLB)(null===L||void 0===L||null===(t=L.patient)||void 0===t?void 0:t._id);console.log(z,"appointmentsData");const V=(0,c.cI)({mode:"onTouched",resolver:(0,m.X)(I),defaultValues:{Body:"",Selection:null}}),{register:A,handleSubmit:M,formState:{isSubmitting:O}}=V,G=(0,w.k)(!0),[H,N]=s.useState(void 0),U=["Neglectful treatment","Employee Behavior","Cleanliness","Price"],X=(e,t)=>{N(t)},{fullWidth:J}=(0,s.useState)(!1),{maxWidth:K}=(0,s.useState)("xs");return(0,C.jsx)(h.Z,{open:G.value,maxWidth:K,onClose:G.onTrue,fullWidth:J,children:(0,C.jsxs)(F.Z,{methods:V,onSubmit:M((async e=>{try{var t,i,n;const a={...e,Selection:H,Rate:P,patient:null===L||void 0===L?void 0:L.patient._id,appointment:z._id,department:null===(t=z.department)||void 0===t?void 0:t._id,employee:null===W||void 0===W||null===(i=W.employee)||void 0===i||null===(n=i.employee)||void 0===n?void 0:n._id};await S.ZP.post("api/feedback",a),await S.ZP.patch("api/appointments/feedback/".concat(z._id)),G.onFalse(),D(q("Thanks for your cooperation"),{variant:"success"}),setTimeout((()=>{window.location.reload()}),1e3)}catch(a){console.error(a.message),D(E&&a.arabic_message||a.message,{variant:"error"})}})),children:[(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textalign:"center",margin:"20px",gap:"10px"},children:[(0,C.jsx)(f.Z,{children:q("Rate your appointment")}),(0,C.jsxs)(_.Z,{children:[q("How was your experience with ")," ","".concat(E?null===z||void 0===z||null===(i=z.unit_service)||void 0===i?void 0:i.name_arabic:null===z||void 0===z||null===(n=z.unit_service)||void 0===n?void 0:n.name_english)]}),(0,C.jsx)(k.Z,{src:null===z||void 0===z||null===(r=z.unit_service)||void 0===r?void 0:r.company_logo,sx:{width:"60px",height:"60px",border:1,borderRadius:"50px"}}),(0,C.jsx)(v.Z,{size:"large",precision:1,max:5,name:"Rate",value:P,onChange:e=>{T(parseFloat(e.target.value))}})]}),P<5?(0,C.jsx)(_.Z,{children:(0,C.jsxs)(u.Z,{component:"form",noValidate:!0,children:[(0,C.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:null===U||void 0===U?void 0:U.map(((e,t)=>{return(0,C.jsx)("div",{children:(0,C.jsxs)(u.Z,{sx:{fontSize:{md:"15px",xs:"9px"},fontWeight:{md:"400",xs:"bolder"}},children:[(0,C.jsx)(p.Z,{...(i=e,{checked:H===i,onChange:e=>X(e,i),value:i,name:"color-radio-button-demo",inputProps:{"aria-label":i}}),name:"Selection"}),e]})},t);var i}))}),(0,C.jsxs)(Z.Z,{sx:{my:5,minWidth:"100%"},children:[(0,C.jsx)(j.Z,{htmlFor:"max-width",children:"Other"}),(0,C.jsx)(g.Z,{id:"max-width",...A("Body")})]})]})}):(0,C.jsxs)(_.Z,{children:[(0,C.jsx)(y.Z,{sx:{ml:2,mb:1,fontSize:15},children:q("We hope that everything was to your satisfaction")}),(0,C.jsx)(u.Z,{component:"form",noValidate:!0,children:(0,C.jsxs)(Z.Z,{sx:{my:3,minWidth:"100%"},children:[(0,C.jsx)(j.Z,{htmlFor:"max-width",children:"Other"}),(0,C.jsx)(g.Z,{id:"max-width",...A("Body")})]})})]}),(0,C.jsxs)(b.Z,{children:[(0,C.jsx)(x.Z,{onClick:async()=>{try{await S.ZP.patch("api/appointments/".concat(z._id),{hasFeedback:!0}),G.onFalse()}catch(e){console.error(e.message)}},loading:O,variant:"outlined",color:"inherit",type:"submit",children:q("Skip")}),(0,C.jsx)(x.Z,{type:"submit",variant:"contained",children:q("Submit")})]})]})})}function D(e){var t;let{employeeId:i}=e;const{user:n}=(0,o.E)(),{appointmentsData:a}=(0,l.BLB)(null===n||void 0===n||null===(t=n.patient)||void 0===t?void 0:t._id),[d,c]=(0,s.useState)();return(0,s.useEffect)((()=>{null!==a&&void 0!==a&&a.hasFeedback||c(!0)}),[a]),console.log(a),d?(0,C.jsx)(W,{employeesData:i}):(0,C.jsx)(r.Z,{})}function q(){var e,t,i;const{t:s}=(0,a.qM)(),{user:r}=(0,o.E)(),{appointmentsData:d}=(0,l.BLB)(null===r||void 0===r||null===(e=r.patient)||void 0===e?void 0:e._id);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(n.ql,{children:[(0,C.jsx)("title",{children:s("watingroom")}),(0,C.jsx)("meta",{name:"description",content:"meta"})]}),null===d||void 0===d||null===(t=d.work_group)||void 0===t||null===(i=t.employees)||void 0===i?void 0:i.map(((e,t)=>(0,C.jsx)(D,{employeeId:e},t)))]})}}}]);
//# sourceMappingURL=2244.87c8316b.chunk.js.map
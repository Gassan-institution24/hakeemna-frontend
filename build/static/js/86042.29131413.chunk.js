"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[86042],{63661:(e,n,a)=>{a.r(n),a.d(n,{default:()=>S});var i=a(29490),s=a(67132),t=a(68719),r=a(75139),o=a(80899),l=a(24858),d=a(65043),c=a(18403),p=a(74600),m=a(38246),u=a(68903),v=a(94496),g=a(12110),h=a(79958),x=a(77224),y=a(48407),j=a(88887),A=a(31673),f=a(91562),b=a(7625),_=a(60778),w=a(94857),k=a(59699),T=a(70579);function C(){const{t:e}=(0,_.WD)(),{currentLang:n}=(0,_.jc)(),a="ar"===n.value,i=[{label:e("read"),value:"read"},{label:e("create"),value:"create"},{label:e("edit"),value:"update"},{label:e("delete"),value:"delete"}],{emid:t,wgid:C}=(0,s.g)(),{data:S}=(0,b.w5O)(C),{user:N}=(0,r.Z)(),E=(0,j.Q)("up","md"),{enqueueSnackbar:M}=(0,w.dh)(),O=o.Ik().shape({appointments:o.YO(),appointment_configs:o.YO(),accounting:o.YO(),entrance_management:o.YO(),permissions:o.YO()}),R=(0,d.useMemo)((()=>{var e,n,a,i,s,r,o,l,d,c,p,m,u,v,g;return{appointments:(null===S||void 0===S||null===(e=S.employees)||void 0===e||null===(n=e.find((e=>e._id===t)))||void 0===n||null===(a=n.acl)||void 0===a?void 0:a.appointments)||[],appointment_configs:(null===S||void 0===S||null===(i=S.employees)||void 0===i||null===(s=i.find((e=>e._id===t)))||void 0===s||null===(r=s.acl)||void 0===r?void 0:r.appointment_configs)||[],accounting:(null===S||void 0===S||null===(o=S.employees)||void 0===o||null===(l=o.find((e=>e._id===t)))||void 0===l||null===(d=l.acl)||void 0===d?void 0:d.accounting)||[],entrance_management:(null===S||void 0===S||null===(c=S.employees)||void 0===c||null===(p=c.find((e=>e._id===t)))||void 0===p||null===(m=p.acl)||void 0===m?void 0:m.entrance_management)||[],permissions:(null===S||void 0===S||null===(u=S.employees)||void 0===u||null===(v=u.find((e=>e._id===t)))||void 0===v||null===(g=v.acl)||void 0===g?void 0:g.permissions)||[]}}),[S,t]),H=(0,l.mN)({mode:"all",resolver:(0,c.t)(O),defaultValues:R}),{reset:$,handleSubmit:z,formState:{isSubmitting:Y,errors:P}}=H;(0,d.useEffect)((()=>{Object.keys(P).length&&Object.keys(P).forEach(((e,n)=>{var a;return M(`${e}: ${(null===P||void 0===P||null===(a=P[e])||void 0===a?void 0:a.message)||"error"}`,{variant:"error"})}))}),[P,M]),(0,d.useEffect)((()=>{$(R)}),[R,$]);const W=z((async n=>{try{await A.Ay.patch(A.vZ.work_groups.employee.acl(t),{acl:n}),f.A.emit("updated",{user:N,link:y.f.unitservice.employees.acl(t),msg:"updated a department employee permissions"}),M(e("updated successfully!"))}catch(i){M(a&&`${i.arabic_message}`||`${i.message}`,{variant:"error"}),console.error(i)}})),Z=(0,T.jsxs)(T.Fragment,{children:[E&&(0,T.jsxs)(u.Ay,{md:4,children:[(0,T.jsx)(v.A,{variant:"h6",sx:{mb:.5},children:e("permissions")}),(0,T.jsx)(v.A,{variant:"body2",sx:{color:"text.secondary"},children:e("giving or withdrowing permissions refered to all")}),(0,T.jsx)(v.A,{variant:"body2",sx:{color:"text.secondary"},children:e("work group and all its employees")})]}),(0,T.jsx)(u.Ay,{xs:12,md:8,children:(0,T.jsxs)(g.A,{children:[!E&&(0,T.jsx)(h.A,{title:e("permissions")}),(0,T.jsxs)(p.A,{spacing:3,sx:{p:3},children:[(0,T.jsxs)(p.A,{spacing:1,children:[(0,T.jsx)(v.A,{textTransform:"capitalize",variant:"subtitle2",children:e("appointments")}),(0,T.jsx)(k.lE,{row:!0,spacing:4,name:"appointments",options:i})]}),(0,T.jsxs)(p.A,{spacing:1,children:[(0,T.jsx)(v.A,{textTransform:"capitalize",variant:"subtitle2",children:e("appointment configuration")}),(0,T.jsx)(k.lE,{row:!0,spacing:4,name:"appointment_configs",options:i})]}),(0,T.jsxs)(p.A,{spacing:1,children:[(0,T.jsx)(v.A,{textTransform:"capitalize",variant:"subtitle2",children:e("accounting")}),(0,T.jsx)(k.lE,{row:!0,spacing:4,name:"accounting",options:i})]}),(0,T.jsxs)(p.A,{spacing:1,children:[(0,T.jsx)(v.A,{textTransform:"capitalize",variant:"subtitle2",children:e("entrance management")}),(0,T.jsx)(k.lE,{row:!0,spacing:4,name:"entrance_management",options:i})]}),(0,T.jsxs)(p.A,{spacing:1,children:[(0,T.jsx)(v.A,{textTransform:"capitalize",variant:"subtitle2",children:e("permissions")}),(0,T.jsx)(k.lE,{row:!0,spacing:4,name:"permissions",options:i})]})]})]})})]}),F=(0,T.jsxs)(T.Fragment,{children:[E&&(0,T.jsx)(u.Ay,{md:4}),(0,T.jsx)(u.Ay,{xs:12,md:8,sx:{display:"flex",justifyContent:"flex-end"},children:(0,T.jsx)(m.A,{type:"submit",variant:"contained",loading:Y,sx:{m:2},children:e("save changes")})})]});return(0,T.jsx)(x.A,{maxWidth:"lg",children:(0,T.jsx)(k.Ay,{methods:H,onSubmit:W,children:(0,T.jsxs)(u.Ay,{container:!0,spacing:3,children:[Z,F]})})})}function S(){var e,n,a,o,l;const{user:d}=(0,r.Z)(),c=null===d||void 0===d||null===(e=d.employee)||void 0===e||null===(n=e.employee_engagements)||void 0===n||null===(a=n[null===d||void 0===d||null===(l=d.employee)||void 0===l?void 0:l.selected_engagement])||void 0===a||null===(o=a.unit_service)||void 0===o?void 0:o.name_english,{emid:p,wgid:m}=(0,s.g)();return(0,T.jsxs)(t.A,{category:"unit_service",subcategory:"permissions",acl:"read",children:[(0,T.jsxs)(i.mg,{children:[(0,T.jsxs)("title",{children:[c||"unit of service"," : Work Groups permissions"]}),(0,T.jsx)("meta",{name:"description",content:"meta"})]}),p&&m&&(0,T.jsx)(C,{})]})}},79958:(e,n,a)=>{a.d(n,{A:()=>f});var i=a(98587),s=a(58168),t=a(65043),r=a(58387),o=a(98610),l=a(94496),d=a(98206),c=a(34535),p=a(92532),m=a(72372);function u(e){return(0,m.Ay)("MuiCardHeader",e)}const v=(0,p.A)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var g=a(70579);const h=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],x=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,n)=>(0,s.A)({[`& .${v.title}`]:n.title,[`& .${v.subheader}`]:n.subheader},n.root)})({display:"flex",alignItems:"center",padding:16}),y=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,n)=>n.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),j=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,n)=>n.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),A=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,n)=>n.content})({flex:"1 1 auto"}),f=t.forwardRef((function(e,n){const a=(0,d.b)({props:e,name:"MuiCardHeader"}),{action:t,avatar:c,className:p,component:m="div",disableTypography:v=!1,subheader:f,subheaderTypographyProps:b,title:_,titleTypographyProps:w}=a,k=(0,i.A)(a,h),T=(0,s.A)({},a,{component:m,disableTypography:v}),C=(e=>{const{classes:n}=e;return(0,o.A)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},u,n)})(T);let S=_;null==S||S.type===l.A||v||(S=(0,g.jsx)(l.A,(0,s.A)({variant:c?"body2":"h5",className:C.title,component:"span",display:"block"},w,{children:S})));let N=f;return null==N||N.type===l.A||v||(N=(0,g.jsx)(l.A,(0,s.A)({variant:c?"body2":"body1",className:C.subheader,color:"text.secondary",component:"span",display:"block"},b,{children:N}))),(0,g.jsxs)(x,(0,s.A)({className:(0,r.A)(C.root,p),as:m,ref:n,ownerState:T},k,{children:[c&&(0,g.jsx)(y,{className:C.avatar,ownerState:T,children:c}),(0,g.jsxs)(A,{className:C.content,ownerState:T,children:[S,N]}),t&&(0,g.jsx)(j,{className:C.action,ownerState:T,children:t})]}))}))}}]);
//# sourceMappingURL=86042.29131413.chunk.js.map
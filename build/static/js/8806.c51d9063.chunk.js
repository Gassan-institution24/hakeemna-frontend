/*! For license information please see 8806.c51d9063.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[8806],{61447:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var n=a(6907),r=a(19208),o=a(27031),i=a(66833),s=a(35456),d=a(89164),c=a(25279),u=a(59403),l=a(80184);function m(e){let{roomData:t,departmentData:a}=e;const n=(0,c.K$)();return(0,l.jsx)(d.Z,{maxWidth:!n.themeStretch&&"lg",children:t&&a&&(0,l.jsx)(u.Z,{departmentData:a,currentTable:t})})}function p(){const e=(0,r.UO)(),{depid:t,acid:a}=e,d=(0,i.YL)(t).data,{data:c,loading:u}=(0,i.zT)(a),p=null===c||void 0===c?void 0:c.name_english;return(0,l.jsxs)(o.Z,{hasContent:!0,category:"department",subcategory:"rooms",acl:"update",children:[(0,l.jsx)(n.ql,{children:(0,l.jsxs)("title",{children:[" Edit ",p||""," Room "]})}),u&&(0,l.jsx)(s.a,{}),!u&&(0,l.jsx)(m,{roomData:c,departmentData:d})]})}},59403:(e,t,a)=>{a.d(t,{Z:()=>C});var n=a(55294),r=a(8007),o=a(72791),i=a(61134),s=a(44695),d=a(68870),c=a(57621),u=a(36314),l=a(24308),m=a(12258),p=a(38072),h=a(19208),g=a(89731),f=a(6385),v=a(99116),_=a(76932),Z=a(8976),x=a(32869),b=a(26405),j=a(80184);function C(e){let{departmentData:t,currentTable:a}=e;const C=(0,h.tv)(),{id:w}=(0,h.UO)(),{t:k}=(0,_.qM)(),{user:y}=(0,Z.E)(),{enqueueSnackbar:D}=(0,x.Ds)(),I=r.Ry().shape({name_arabic:r.Z_().required("Name is required"),name_english:r.Z_().required("Name is required"),general_info:r.Z_()}),R=(0,o.useMemo)((()=>({unit_service:w,name_arabic:(null===a||void 0===a?void 0:a.name_arabic)||"",name_english:(null===a||void 0===a?void 0:a.name_english)||"",department:t._id,general_info:(null===a||void 0===a?void 0:a.general_info)||""})),[a,t,w]),S=(0,i.cI)({mode:"onTouched",resolver:(0,s.X)(I),defaultValues:R}),U=e=>{/^[a-zA-Z0-9\s,@#$!*_\-&^%]*$/.test(e.target.value)&&S.setValue(e.target.name,e.target.value,{shouldValidate:!0})},{reset:T,handleSubmit:q,formState:{isSubmitting:E}}=S,H=q((async e=>{try{const r=await n.Z.get("https://geolocation-db.com/json/");a?(await(0,f.Z)({method:"PATCH",path:g.Hv.tables.room(a._id),data:{modifications_nums:(a.modifications_nums||0)+1,ip_address_user_modification:r.data.IPv4,user_modification:y._id,department:t._id,...e}}),v.Z.emit("updated",{data:e,user:y,link:p.H.superadmin.unitservices.departments.rooms.root(w,t._id),msg:"updated room <strong>".concat(e.name_english,"</strong> in <strong>").concat(t.name_english,"</strong> department")})):(await(0,f.Z)({method:"POST",path:g.Hv.tables.rooms,data:{department:t._id,ip_address_user_creation:r.data.IPv4,user_creation:y._id,...e}}),v.Z.emit("created",{data:e,user:y,link:p.H.superadmin.unitservices.departments.rooms.root(w,t._id),msg:"created room <strong>".concat(e.name_english,"</strong> into <strong>").concat(t.name_english,"</strong> department")})),T(),D(k(a?"update success!":"create success!")),C.push(p.H.superadmin.unitservices.departments.rooms.root(w,t._id))}catch(r){v.Z.emit("error",{error:r,user:y,location:window.location.pathname}),D("string"===typeof r?r:r.message,{variant:"error"}),console.error(r)}}));return(0,j.jsx)(b.ZP,{methods:S,onSubmit:H,children:(0,j.jsx)(l.Z,{container:!0,spacing:3,children:(0,j.jsx)(l.Z,{xs:12,maxWidth:"md",children:(0,j.jsxs)(c.Z,{sx:{p:3},children:[(0,j.jsxs)(d.Z,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,j.jsx)(b.au,{lang:"ar",onChange:U,name:"name_english",label:"".concat(k("name english")," *")}),(0,j.jsx)(b.au,{lang:"ar",onChange:e=>{/^[\u0600-\u06FF0-9\s!@#$%^&*_-]*$/.test(e.target.value)&&S.setValue(e.target.name,e.target.value,{shouldValidate:!0})},name:"name_arabic",label:"".concat(k("name arabic")," *")}),(0,j.jsx)(b.au,{lang:"ar",onChange:U,name:"general_info",label:k("general info")})]}),(0,j.jsx)(u.Z,{alignItems:"flex-end",sx:{mt:3},children:(0,j.jsx)(m.Z,{type:"submit",tabIndex:-1,variant:"contained",loading:E,children:k(a?"save changes":"create")})})]})})})})}},6385:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(55294),r=a(88329),o=a(33805);async function i(e){let{setData:t,setError:a,method:i,path:s,data:d}=e;const c="".concat(o.E0).concat(s),u=r.Z.get("user_token"),l=await(0,n.Z)({method:i,url:c,headers:{authorization:"Bearer ".concat(u)},data:d});return t&&t(l.data),a&&a(l.data),l}},57621:(e,t,a)=>{a.d(t,{Z:()=>v});var n=a(87462),r=a(63366),o=a(72791),i=a(59278),s=a(94419),d=a(66934),c=a(31402),u=a(27938),l=a(75878),m=a(21217);function p(e){return(0,m.Z)("MuiCard",e)}(0,l.Z)("MuiCard",["root"]);var h=a(80184);const g=["className","raised"],f=(0,d.ZP)(u.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),v=o.forwardRef((function(e,t){const a=(0,c.Z)({props:e,name:"MuiCard"}),{className:o,raised:d=!1}=a,u=(0,r.Z)(a,g),l=(0,n.Z)({},a,{raised:d}),m=(e=>{const{classes:t}=e;return(0,s.Z)({root:["root"]},p,t)})(l);return(0,h.jsx)(f,(0,n.Z)({className:(0,i.Z)(m.root,o),elevation:d?8:void 0,ref:t,ownerState:l},u))}))},88329:(e,t,a)=>{function n(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)e[n]=a[n]}return e}a.d(t,{Z:()=>r});var r=function e(t,a){function r(e,r,o){if("undefined"!==typeof document){"number"===typeof(o=n({},a,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in o)o[s]&&(i+="; "+s,!0!==o[s]&&(i+="="+o[s].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+i}}return Object.create({set:r,get:function(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var a=document.cookie?document.cookie.split("; "):[],n={},r=0;r<a.length;r++){var o=a[r].split("="),i=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(n[s]=t.read(i,s),e===s)break}catch(d){}}return e?n[e]:n}},remove:function(e,t){r(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}}]);
//# sourceMappingURL=8806.c51d9063.chunk.js.map
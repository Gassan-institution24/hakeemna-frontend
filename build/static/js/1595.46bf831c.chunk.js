"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[1595],{38563:(e,a,n)=>{n.d(a,{Z:()=>c});var t=n(68870),i=n(50533),r=n(36314),l=n(4567),s=n(93517),o=n(4419),d=n(80184);function m(e){let{link:a,activeLast:n,disabled:r}=e;const l={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...r&&!n&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},s=(0,d.jsxs)(d.Fragment,{children:[a.icon&&(0,d.jsx)(t.Z,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:a.icon}),a.name]});return a.href?(0,d.jsx)(i.Z,{component:o.r,href:a.href,sx:l,children:s}):(0,d.jsxs)(t.Z,{sx:l,children:[" ",s," "]})}function c(e){let{links:a,action:n,heading:o,moreLink:c,activeLast:p,sx:h,...v}=e;const g=a&&a[a.length-1].name;return(0,d.jsxs)(t.Z,{sx:{...h},children:[(0,d.jsxs)(r.Z,{direction:"row",alignItems:"center",children:[(0,d.jsxs)(t.Z,{sx:{flexGrow:1,display:"flex",gap:3,alignItems:"center"},children:[o&&(0,d.jsx)(l.Z,{variant:"h4",gutterBottom:!0,children:o}),a&&!!a.length&&(0,d.jsx)(s.Z,{separator:(0,d.jsx)(u,{}),...v,children:null===a||void 0===a?void 0:a.map((e=>(0,d.jsx)(m,{link:e,activeLast:p,disabled:e.name===g},e.name||"")))})]}),n&&(0,d.jsxs)(t.Z,{sx:{flexShrink:0},children:[" ",n," "]})]}),!!c&&(0,d.jsx)(t.Z,{sx:{mt:2},children:c.map((e=>(0,d.jsx)(i.Z,{href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}function u(){return(0,d.jsx)(t.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}},73379:(e,a,n)=>{n.d(a,{Z:()=>t.Z});var t=n(38563)},41595:(e,a,n)=>{n.r(a),n.d(a,{default:()=>h});var t=n(6907),i=n(89164),r=n(38072),l=n(76932),s=n(25279),o=n(73379),d=n(86579),m=n(80184);function c(e){let{WorkGroupData:a}=e;const n=(0,s.K$)(),{t:t}=(0,l.qM)();return(0,m.jsxs)(i.Z,{maxWidth:!n.themeStretch&&"lg",children:[(0,m.jsx)(o.Z,{heading:t("edit room"),links:[{name:t("dashboard"),href:r.H.unitservice.root},{name:t("work groups"),href:r.H.unitservice.tables.workgroups.root},{name:t("edit")}],sx:{mb:{xs:3,md:5}}}),a&&(0,m.jsx)(d.Z,{currentTable:a})]})}var u=n(79572),p=n(19208);function h(){const e=(0,p.UO)(),{id:a}=e,{data:n}=(0,u.tB)(a),i=null===n||void 0===n?void 0:n.name_english;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(t.ql,{children:(0,m.jsxs)("title",{children:["Edit ",i||""," Work Group"]})}),n&&(0,m.jsx)(c,{workGroupData:n})]})}},86579:(e,a,n)=>{n.d(a,{Z:()=>C});var t=n(8007),i=n(763),r=n(72791),l=n(61134),s=n(44695),o=n(68870),d=n(57621),m=n(85771),c=n(36314),u=n(82626),p=n(24308),h=n(12258),v=n(38072),g=n(19208),_=n(99116),x=n(89731),b=n(32869),y=n(29028),f=n(31243),Z=n(8976),j=n(6385),k=n(76932),w=n(79572),q=n(80184);function C(e){var a,n,C,S,E,H,I,T,D,V;let{currentTable:W}=e;const G=(0,g.tv)(),{t:L}=(0,k.qM)(),{currentLang:F}=(0,k.nt)(),O="ar"===F.value,{user:P}=(0,Z.E)(),{employeesData:$}=(0,w.Y3)(null===P||void 0===P||null===(a=P.employee)||void 0===a||null===(n=a.employee_engagements)||void 0===n||null===(C=n[null===P||void 0===P||null===(E=P.employee)||void 0===E?void 0:E.selected_engagement])||void 0===C||null===(S=C.unit_service)||void 0===S?void 0:S._id),{departmentsData:A}=(0,w.T8)(null===P||void 0===P||null===(H=P.employee)||void 0===H||null===(I=H.employee_engagements)||void 0===I||null===(T=I[null===P||void 0===P||null===(V=P.employee)||void 0===V?void 0:V.selected_engagement])||void 0===T||null===(D=T.unit_service)||void 0===D?void 0:D._id),[z,B]=(0,r.useState)([]),{enqueueSnackbar:M}=(0,b.Ds)(),N=t.Ry().shape({department:t.Z_().required("department is required"),name_arabic:t.Z_().required("Name is required"),name_english:t.Z_().required("Name is required"),employees:t.IX().min(1,"Choose at least one option")}),R=(0,r.useMemo)((()=>{var e,a,n;return{unit_service:null===P||void 0===P||null===(e=P.employee)||void 0===e||null===(a=e.employee_engagements[null===P||void 0===P?void 0:P.employee.selected_engagement])||void 0===a?void 0:a.unit_service._id,department:(null===W||void 0===W||null===(n=W.department)||void 0===n?void 0:n._id)||null,name_arabic:(null===W||void 0===W?void 0:W.name_arabic)||"",name_english:(null===W||void 0===W?void 0:W.name_english)||"",employees:(null===W||void 0===W?void 0:W.employees)||[]}}),[W,null===P||void 0===P?void 0:P.employee]),X=(0,l.cI)({resolver:(0,s.X)(N),defaultValues:R}),{reset:K,handleSubmit:U,formState:{isSubmitting:Y}}=X,J=U((async e=>{try{const a=await f.Z.get("https://geolocation-db.com/json/");W?(await(0,j.Z)({method:"PATCH",path:x.Hv.tables.workgroup(W._id),data:{modifications_nums:(W.modifications_nums||0)+1,ip_address_user_modification:a.data.IPv4,user_modification:P._id,...e}}),_.W.emit("updated",{user:P,link:v.H.unitservice.tables.workgroups.root,msg:"updated a work group <strong>".concat(e.name_english,"</strong>")})):(await(0,j.Z)({method:"POST",path:x.Hv.tables.workgroups,data:{ip_address_user_creation:a.data.IPv4,user_creation:P._id,...e}}),_.W.emit("created",{user:P,link:v.H.unitservice.tables.workgroups.root,msg:"created a work group <strong>".concat(e.name_english,"</strong>")})),K(),M(L(W?"update success!":"create success!")),G.push(v.H.unitservice.tables.workgroups.root),console.info("DATA",e)}catch(a){_.W.emit("error",{error:a,user:P,location:window.location.href}),console.error(a)}}));return(0,q.jsx)(y.ZP,{methods:X,onSubmit:J,children:(0,q.jsx)(p.Z,{xs:12,maxWidth:"md",children:(0,q.jsxs)(d.Z,{sx:{p:3},children:[(0,q.jsxs)(o.Z,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"},children:[(0,q.jsx)(y.au,{lang:"ar",onChange:e=>{/^[a-zA-Z0-9\s,@#$!*_\-&^%]*$/.test(e.target.value)&&X.setValue(e.target.name,e.target.value,{shouldValidate:!0})},name:"name_english",label:"".concat(L("name english")," *")}),(0,q.jsx)(y.au,{lang:"ar",onChange:e=>{/^[\u0600-\u06FF0-9\s!@#$%^&*_-]*$/.test(e.target.value)&&X.setValue(e.target.name,e.target.value,{shouldValidate:!0})},name:"name_arabic",label:"".concat(L("name arabic")," *")}),(0,q.jsx)(y.Cc,{name:"department",label:L("department"),children:A.map((e=>(0,q.jsx)(u.Z,{value:e._id,children:O?e.name_arabic:e.name_english},e._id)))}),(0,q.jsx)(y.Fl,{name:"employees",label:"".concat(L("employees")," *"),multiple:!0,disableCloseOnSelect:!0,options:$.filter((e=>!z.some((a=>(0,i.isEqual)(e,a))))),getOptionLabel:e=>e._id,renderOption:(e,a)=>(0,r.createElement)("li",{...e,key:a._id,value:a._id},a.employee.first_name," ",a.employee.middle_name," ",a.employee.family_name),onChange:(e,a)=>{B(a),X.setValue("employees",a,{shouldValidate:!0})},renderTags:(e,a)=>e.map(((e,n)=>(0,r.createElement)(m.Z,{...a({index:n}),key:e._id,label:e.employee.first_name,size:"small",color:"info",variant:"soft"})))})]}),(0,q.jsx)(c.Z,{alignItems:"flex-end",sx:{mt:3},children:(0,q.jsx)(h.Z,{type:"submit",variant:"contained",loading:Y,children:L(W?"save changes":"create")})})]})})})}},6385:(e,a,n)=>{n.d(a,{Z:()=>l});var t=n(31243),i=n(88329),r=n(33805);async function l(e){let{setData:a,setError:n,method:l,path:s,data:o}=e;const d="".concat(r.E0).concat(s),m=i.Z.get("user_token"),c=await(0,t.Z)({method:l,url:d,headers:{authorization:"Bearer ".concat(m)},data:o});return c.status,a&&a(c.data),c}}}]);
//# sourceMappingURL=1595.46bf831c.chunk.js.map
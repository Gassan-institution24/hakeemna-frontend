"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[17704],{17704:(e,n,o)=>{o.r(n),o.d(n,{default:()=>Z});var r=o(29490),t=o(11238),i=o(72450),s=o(93141),a=o(65043),l=o(12110),d=o(71806),c=o(49633),h=o(77224),p=o(73460),x=o(79650),u=o(48407),g=o(65381),m=o(67132),j=o(40799),y=o(39556),v=o(31673);var A=o(35151),f=o(51440),b=o(67555),w=o(83858),_=o(75950),C=o(46987),P=o(81e3),k=o(94814),M=o(68738),W=o(39652),D=o(17392),S=o(74600),R=o(67784),B=o(51787),T=o(26353),E=o(57442),F=o(34624),L=o(70579);function O(e){let{row:n,index:o,selected:r,onEditRow:t,showAll:i,onSelectRow:s}=e;const{code:l,name:d,phone:c,city:h,notes:p,communication_date:x,status:u,created_at:g,user_creation:m,ip_address_user_creation:j,updated_at:y,user_modification:f,ip_address_user_modification:b,modifications_nums:w}=n,{enqueueSnackbar:_}=(0,C.dh)(),[O,I]=(0,a.useState)(p),z=(0,F.f)(),$=(0,F.f)(),N=(0,L.jsxs)(M.A,{hover:!0,index:o,sx:{backgroundColor:o%2?"background.lightgray":""},selected:r,children:[(0,L.jsx)(W.A,{align:"center",children:(0,L.jsx)(P.A,{children:l})}),(0,L.jsx)(W.A,{align:"center",children:d}),(0,L.jsx)(W.A,{align:"center",children:(0,L.jsx)("a",{href:`tel:${c}`,children:c})}),(0,L.jsx)(W.A,{align:"center",children:(0,L.jsxs)(S.A,{direction:"row",justifyContent:"space-between",children:[(0,L.jsx)("a",{rel:"noreferrer",target:"_blank",style:{color:"green"},href:`tel:${c}`,children:(0,L.jsx)(A.A,{icon:"material-symbols:call"})}),(0,L.jsx)("a",{rel:"noreferrer",target:"_blank",style:{color:"green"},href:`sms:${c}`,children:(0,L.jsx)(A.A,{icon:"solar:chat-round-dots-bold"})}),(0,L.jsx)("a",{rel:"noreferrer",target:"_blank",style:{color:"green"},href:`https://wa.me/${c}`,children:(0,L.jsx)(A.A,{icon:"flowbite:whatsapp-solid"})})]})}),(0,L.jsx)(W.A,{align:"center",children:h}),(0,L.jsx)(W.A,{align:"center",children:p}),(0,L.jsx)(W.A,{align:"center",children:x}),(0,L.jsx)(W.A,{align:"center",children:(0,L.jsxs)(R.A,{select:!0,fullWidth:!0,value:u,onChange:async e=>{try{await v.Ay.patch(v.vZ.companies.one(null===n||void 0===n?void 0:n._id),{status:e.target.value}),_("done")}catch(o){_("error",{variant:"error"})}},children:[(0,L.jsx)(k.A,{value:"not contact",children:"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u062a\u0648\u0627\u0635\u0644"}),(0,L.jsx)(k.A,{value:"agreed",children:"\u0642\u0628\u0648\u0644"}),(0,L.jsx)(k.A,{value:"refused",children:"\u0631\u0641\u0636"}),(0,L.jsx)(k.A,{value:"no number",children:"\u0644\u0627 \u064a\u0648\u062c\u062f \u0631\u0642\u0645 \u0644\u0644\u062a\u0648\u0627\u0635\u0644"}),(0,L.jsx)(k.A,{value:"wrong number",children:"\u0627\u0644\u0631\u0642\u0645 \u062e\u0627\u0637\u0626"})]})}),(0,L.jsx)(W.A,{align:"center",children:(0,L.jsx)(R.A,{fullWidth:!0,multiline:!0,value:O,onChange:e=>I(e.target.value),InputProps:{endAdornment:(0,L.jsx)(B.A,{position:"end",children:(0,L.jsx)(D.A,{onClick:async()=>{try{await v.Ay.patch(v.vZ.doctors.one(null===n||void 0===n?void 0:n._id),{notes:O}),_("done")}catch(e){_("error",{variant:"error"})}},edge:"end",children:(0,L.jsx)(A.A,{icon:"icon-park-solid:correct"})})})}})}),(0,L.jsx)(W.A,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,L.jsx)(D.A,{color:z.open?"inherit":"default",onClick:z.onOpen,children:(0,L.jsx)(A.A,{icon:"eva:more-vertical-fill"})})})]});return(0,L.jsxs)(L.Fragment,{children:[N,(0,L.jsxs)(F.A,{open:z.open,onClose:z.onClose,arrow:"right-top",sx:{width:140},children:[(0,L.jsxs)(k.A,{lang:"ar",onClick:()=>{t(),z.onClose()},children:[(0,L.jsx)(A.A,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,L.jsxs)(k.A,{lang:"ar",onClick:$.onOpen,children:[(0,L.jsx)(A.A,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,L.jsxs)(F.A,{open:$.open,onClose:$.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,L.jsx)(P.A,{sx:{fontWeight:600},children:"Creation Time:"}),(0,L.jsx)(P.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,L.jsx)(T.A,{primary:(0,E.ts)(g,"dd MMMMMMMM yyyy"),secondary:(0,E.ts)(g,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,L.jsx)(P.A,{sx:{pt:1,fontWeight:600},children:"created by:"}),(0,L.jsx)(P.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===m||void 0===m?void 0:m.email}),(0,L.jsx)(P.A,{sx:{pt:1,fontWeight:600},children:"created by IP:"}),(0,L.jsx)(P.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:j}),(0,L.jsx)(P.A,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,L.jsx)(P.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,L.jsx)(T.A,{primary:(0,E.ts)(y,"dd MMMMMMMM yyyy"),secondary:(0,E.ts)(y,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,L.jsx)(P.A,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,L.jsx)(P.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===f||void 0===f?void 0:f.email}),(0,L.jsx)(P.A,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,L.jsx)(P.A,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:b}),(0,L.jsxs)(P.A,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",w]})]})]})}var I=o(87396),z=o(15596);const $={name:"",phone:"",city:"",notes:"",communication_date:""};function N(){var e;const[n,o]=(0,a.useState)(!1),r=[{id:"code",label:"code"},{id:"name",label:"name"},{id:"phone",label:"phone"},{id:"contact",label:"contact"},{id:"city",label:"city"},{id:"notes",label:"notes"},{id:"communication_date",label:"communication date"},{id:"status",label:"status"},{id:"",label:""},{id:"",width:50}].filter(Boolean),C=(0,_.K2)({defaultOrderBy:"code"}),P=(0,a.useRef)(),k=(0,m.rd)(),{doctorsData:M,loading:W}=function(){const e=v.vZ.doctors.all,{data:n,isLoading:o,error:r,isValidating:t}=(0,j.Ay)(e,v.GO);return{...(0,a.useMemo)((()=>({doctorsData:n||[],loading:o,error:r,validating:t,empty:!o&&!(null!==n&&void 0!==n&&n.length)})),[n,r,o,t]),refetch:async()=>{await(0,y.j)(e)}}}(),[D,S]=(0,a.useState)($),R=(0,m.ok)().get("upload_record");(0,a.useEffect)((()=>{R&&S((e=>({...e,name:R})))}),[R]);const B=!(!D.startDate||!D.endDate)&&D.startDate.getTime()>D.endDate.getTime(),T=function(e){var n;let{inputData:o,comparator:r,filters:t,dateError:i}=e;const{name:s}=t,a=null===(n=o)||void 0===n?void 0:n.map(((e,n,o)=>[e,n]));null===a||void 0===a||a.sort(((e,n)=>{const o=r(e[0],n[0]);return 0!==o?o:e[1]-n[1]})),o=null===a||void 0===a?void 0:a.map(((e,n)=>e[0])),s&&(o=o.filter((e=>{var n,o;return(null===e||void 0===e?void 0:e.name)&&-1!==(null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.toLowerCase().indexOf(s.toLowerCase()))||(null===e||void 0===e?void 0:e.phone)&&-1!==(null===e||void 0===e||null===(o=e.phone)||void 0===o?void 0:o.toLowerCase().indexOf(s.toLowerCase()))||(null===e||void 0===e?void 0:e.upload_record)===s||(null===e||void 0===e?void 0:e._id)===s||JSON.stringify(e.code)===s})));return o}({inputData:M,comparator:(0,_.hz)(C.order,C.orderBy),filters:D,dateError:B}),E=!(null===D||void 0===D||!D.name),F=!(null!==T&&void 0!==T&&T.length)&&E||!(null!==T&&void 0!==T&&T.length),N=(0,s.useReactToPrint)({content:()=>P.current}),Z=(0,a.useCallback)(((e,n)=>{C.onResetPage(),S((o=>({...o,[e]:n})))}),[C]),q=(0,a.useCallback)((e=>{k.push(u.f.superadmin.tables.companies.edit(e))}),[k]),G=(0,a.useCallback)((()=>{S($)}),[]);return W?(0,L.jsx)(b.x,{}):(0,L.jsxs)(h.A,{maxWidth:"",children:[(0,L.jsx)(w.A,{heading:"doctors",links:[{name:"dashboard",href:u.f.superadmin.root},{name:"Tables",href:u.f.superadmin.tables.list},{name:"doctors"}],action:(0,L.jsx)(c.A,{component:g.W,href:u.f.superadmin.tables.doctors.new,variant:"contained",startIcon:(0,L.jsx)(A.A,{icon:"mingcute:add-line"}),children:"New doctor"}),sx:{mb:{xs:3,md:5}}}),(0,L.jsxs)(l.A,{children:[(0,L.jsx)(I.A,{onPrint:N,filters:D,onFilters:Z,onDownload:()=>{const e=T.reduce(((e,n)=>(e.push({code:n.code,name:n.name,phone:n.phone,notes:n.notes}),e)),[]),n=t.Wp.book_new(),o=t.Wp.json_to_sheet(e);t.Wp.book_append_sheet(n,o,"Sheet 1");const r=t.M9(n,{bookType:"xlsx",type:"array"}),s=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,i.saveAs)(s,"doctors.xlsx")},canReset:E,onResetFilters:G}),E&&(0,L.jsx)(z.A,{filters:D,onFilters:Z,onResetFilters:G,results:null===T||void 0===T?void 0:T.length,sx:{p:2.5,pt:0}}),(0,L.jsx)(x.A,{children:(0,L.jsx)(f.A,{sx:{height:"60vh",position:"relative"},children:(0,L.jsxs)(d.A,{ref:P,size:C.dense?"small":"medium",children:[(0,L.jsx)(_.er,{order:C.order,orderBy:C.orderBy,headLabel:r,rowCount:null===T||void 0===T?void 0:T.length,numSelected:C.selected.length,onSort:C.onSort,sx:{position:{sm:"sticky"},top:0,zIndex:5}}),(0,L.jsxs)(p.A,{sx:{position:"relative"},children:[null===T||void 0===T||null===(e=T.slice(C.page*C.rowsPerPage,C.page*C.rowsPerPage+C.rowsPerPage))||void 0===e?void 0:e.map(((e,o)=>(0,L.jsx)(O,{index:o,row:e,showAll:n,selected:C.selected.includes(e._id),onSelectRow:()=>C.onSelectRow(e._id),onEditRow:()=>q(e._id)},o))),(0,L.jsx)(_.Sm,{notFound:F})]})]})})}),(0,L.jsx)(_.We,{count:null===T||void 0===T?void 0:T.length,page:C.page,setPage:C.setPage,rowsPerPage:C.rowsPerPage,onPageChange:C.onChangePage,onRowsPerPageChange:C.onChangeRowsPerPage,dense:C.dense,onChangeDense:C.onChangeDense})]})]})}function Z(){return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(r.mg,{children:[(0,L.jsx)("title",{children:" Dashboard: Doctors Table"}),(0,L.jsx)("meta",{name:"description",content:"meta"})]}),(0,L.jsx)(N,{})]})}}}]);
//# sourceMappingURL=17704.fd55868b.chunk.js.map
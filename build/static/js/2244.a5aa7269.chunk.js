"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[2244],{27356:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(16029),o=i(53767),a=i(12065),l=i(4567),r=i(80184);function s(e){let{title:t,imgUrl:i,action:s,filled:d,description:c,sx:p,...m}=e;return(0,r.jsxs)(o.Z,{flexGrow:1,alignItems:"center",justifyContent:"center",sx:{px:3,height:1,...d&&{borderRadius:2,bgcolor:e=>(0,a.Fq)(e.palette.grey[500],.04),border:e=>"dashed 1px ".concat((0,a.Fq)(e.palette.grey[500],.08))},...p},...m,children:[(0,r.jsx)(n.Z,{component:"img",alt:"empty content",src:i||"/assets/icons/empty/ic_content.svg",sx:{width:1,maxWidth:160}}),t&&(0,r.jsx)(l.Z,{variant:"h6",component:"span",sx:{mt:1,color:"text.disabled",textAlign:"center"},children:t}),c&&(0,r.jsx)(l.Z,{variant:"caption",sx:{mt:1,color:"text.disabled",textAlign:"center"},children:c}),s&&s]})}},31092:(e,t,i)=>{i.d(t,{Z:()=>n.Z});var n=i(27356)},82007:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(61134),o=i(80184);function a(e){let{children:t,onSubmit:i,methods:a}=e;return(0,o.jsx)(n.RV,{...a,children:(0,o.jsx)("form",{onSubmit:i,children:t})})}},80639:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(72791),o=i(87087),a=i(16029),l=i(13967),r=i(12065);function s(){return{"4/3":"calc(100% / 4 * 3)","3/4":"calc(100% / 3 * 4)","6/4":"calc(100% / 6 * 4)","4/6":"calc(100% / 4 * 6)","16/9":"calc(100% / 16 * 9)","9/16":"calc(100% / 9 * 16)","21/9":"calc(100% / 21 * 9)","9/21":"calc(100% / 9 * 21)","1/1":"100%"}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1/1"]}var d=i(80184);const c=(0,n.forwardRef)(((e,t)=>{let{ratio:i,overlay:n,disabledEffect:c=!1,alt:p,src:m,afterLoad:u,delayTime:h,threshold:x,beforeLoad:v,delayMethod:g,placeholder:f,wrapperProps:b,scrollPosition:y,effect:j="blur",visibleByDefault:Z,wrapperClassName:w,useIntersectionObserver:_,sx:S,...k}=e;const B=(0,l.Z)(),F=!!n&&{"&:before":{content:"''",top:0,left:0,width:1,height:1,zIndex:1,position:"absolute",background:n||(0,r.Fq)(B.palette.grey[900],.48)}},C=(0,d.jsx)(a.Z,{component:o.LazyLoadImage,alt:p,src:m,afterLoad:u,delayTime:h,threshold:x,beforeLoad:v,delayMethod:g,placeholder:f,wrapperProps:b,scrollPosition:y,visibleByDefault:Z,effect:c?void 0:j,useIntersectionObserver:_,wrapperClassName:w||"component-image-wrapper",placeholderSrc:c?"/assets/transparent.png":"/assets/placeholder.svg",sx:{width:1,height:1,objectFit:"cover",verticalAlign:"bottom",...!!i&&{top:0,left:0,position:"absolute"}}});return(0,d.jsx)(a.Z,{ref:t,component:"span",className:"component-image",sx:{overflow:"hidden",position:"relative",verticalAlign:"bottom",display:"inline-block",...!!i&&{width:1},"& span.component-image-wrapper":{width:1,height:1,verticalAlign:"bottom",backgroundSize:"cover !important",...!!i&&{pt:s(i)}},...F,...S},...k,children:C})}))},41364:(e,t,i)=>{i.d(t,{Z:()=>n.Z});var n=i(80639)},82244:(e,t,i)=>{i.r(t),i.d(t,{default:()=>I});var n=i(6907),o=i(81164),a=i(8976),l=i(94877),r=i(72791),s=i(31092),d=i(8007),c=i(61134),p=i(44695),m=i(16029),u=i(1503),h=i(13838),x=i(5574),v=i(15581),g=i(4110),f=i(62861),b=i(4567),y=i(68096),j=i(65661),Z=i(97123),w=i(39157),_=i(22459),S=i(66664),k=i(41364),B=i(32869),F=i(82007),C=i(80184);function D(e){var t,i,n,s;let{employeesData:D}=e;const{enqueueSnackbar:L}=(0,B.Ds)(),{t:I}=(0,o.qM)(),{currentLang:P}=(0,o.nt)(),W="ar"===P.value,R=d.Ry().shape({Body:d.Z_(),Selection:d.Z_().nullable()}),[q,T]=(0,r.useState)(),{user:z}=(0,a.E)(),{appointmentsData:E}=(0,l.BLB)(null===z||void 0===z||null===(t=z.patient)||void 0===t?void 0:t._id);console.log(E,"appointmentsData");const A=(0,c.cI)({mode:"onTouched",resolver:(0,p.X)(R),defaultValues:{Body:"",Selection:null}}),{register:M,handleSubmit:N,formState:{isSubmitting:O}}=A,V=(0,_.k)(!0),[G,H]=r.useState(void 0),U=["Neglectful treatment","Employee Behavior","Cleanliness","Price"],X=(e,t)=>{H(t)},{fullWidth:J}=(0,r.useState)(!1),{maxWidth:K}=(0,r.useState)("xs");return(0,C.jsx)(x.Z,{open:V.value,maxWidth:K,onClose:V.onTrue,fullWidth:J,children:(0,C.jsxs)(F.Z,{methods:A,onSubmit:N((async e=>{try{var t,i,n;const o={...e,Selection:G,Rate:q,patient:null===z||void 0===z?void 0:z.patient._id,appointment:E._id,department:null===(t=E.department)||void 0===t?void 0:t._id,employee:null===D||void 0===D||null===(i=D.employee)||void 0===i||null===(n=i.employee)||void 0===n?void 0:n._id};await S.ZP.post("api/feedback",o),await S.ZP.patch("api/appointments/feedback/".concat(E._id)),V.onFalse(),L(I("Thanks for your cooperation"),{variant:"success"}),setTimeout((()=>{window.location.reload()}),1e3)}catch(o){console.error(o.message),L(W&&o.arabic_message||o.message,{variant:"error"})}})),children:[(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textalign:"center",margin:"20px",gap:"10px"},children:[(0,C.jsx)(j.Z,{children:I("Rate your appointment")}),(0,C.jsxs)(w.Z,{children:[I("How was your experience with ")," ","".concat(W?null===E||void 0===E||null===(i=E.unit_service)||void 0===i?void 0:i.name_arabic:null===E||void 0===E||null===(n=E.unit_service)||void 0===n?void 0:n.name_english)]}),(0,C.jsx)(k.Z,{src:null===E||void 0===E||null===(s=E.unit_service)||void 0===s?void 0:s.company_logo,sx:{width:"60px",height:"60px",border:1,borderRadius:"50px"}}),(0,C.jsx)(v.Z,{size:"large",precision:1,max:5,name:"Rate",value:q,onChange:e=>{T(parseFloat(e.target.value))}})]}),q<5?(0,C.jsx)(w.Z,{children:(0,C.jsxs)(m.Z,{component:"form",noValidate:!0,children:[(0,C.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:null===U||void 0===U?void 0:U.map(((e,t)=>{return(0,C.jsx)("div",{children:(0,C.jsxs)(m.Z,{sx:{fontSize:{md:"15px",xs:"9px"},fontWeight:{md:"400",xs:"bolder"}},children:[(0,C.jsx)(u.Z,{...(i=e,{checked:G===i,onChange:e=>X(e,i),value:i,name:"color-radio-button-demo",inputProps:{"aria-label":i}}),name:"Selection"}),e]})},t);var i}))}),(0,C.jsxs)(y.Z,{sx:{my:5,minWidth:"100%"},children:[(0,C.jsx)(f.Z,{htmlFor:"max-width",children:"Other"}),(0,C.jsx)(g.Z,{id:"max-width",...M("Body")})]})]})}):(0,C.jsxs)(w.Z,{children:[(0,C.jsx)(b.Z,{sx:{ml:2,mb:1,fontSize:15},children:I("We hope that everything was to your satisfaction")}),(0,C.jsx)(m.Z,{component:"form",noValidate:!0,children:(0,C.jsxs)(y.Z,{sx:{my:3,minWidth:"100%"},children:[(0,C.jsx)(f.Z,{htmlFor:"max-width",children:"Other"}),(0,C.jsx)(g.Z,{id:"max-width",...M("Body")})]})})]}),(0,C.jsxs)(Z.Z,{children:[(0,C.jsx)(h.Z,{onClick:async()=>{try{await S.ZP.patch("api/appointments/".concat(E._id),{hasFeedback:!0}),V.onFalse()}catch(e){console.error(e.message)}},loading:O,variant:"outlined",color:"inherit",type:"submit",children:I("Skip")}),(0,C.jsx)(h.Z,{type:"submit",variant:"contained",children:I("Submit")})]})]})})}function L(e){var t;let{employeeId:i}=e;const{user:n}=(0,a.E)(),{appointmentsData:o}=(0,l.BLB)(null===n||void 0===n||null===(t=n.patient)||void 0===t?void 0:t._id),[d,c]=(0,r.useState)();return(0,r.useEffect)((()=>{null!==o&&void 0!==o&&o.hasFeedback||c(!0)}),[o]),console.log(o),d?(0,C.jsx)(D,{employeesData:i}):(0,C.jsx)(s.Z,{})}function I(){var e,t,i;const{t:r}=(0,o.qM)(),{user:s}=(0,a.E)(),{appointmentsData:d}=(0,l.BLB)(null===s||void 0===s||null===(e=s.patient)||void 0===e?void 0:e._id);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(n.ql,{children:[(0,C.jsx)("title",{children:r("watingroom")}),(0,C.jsx)("meta",{name:"description",content:"meta"})]}),null===d||void 0===d||null===(t=d.work_group)||void 0===t||null===(i=t.employees)||void 0===i?void 0:i.map(((e,t)=>(0,C.jsx)(L,{employeeId:e},t)))]})}}}]);
//# sourceMappingURL=2244.a5aa7269.chunk.js.map
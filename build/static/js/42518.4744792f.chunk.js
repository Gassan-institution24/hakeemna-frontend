"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[42518],{33546:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(81e3),l=n(74600),r=n(90310),o=n(94496),s=n(70579);function a(e){let{title:t,imgUrl:n,action:a,filled:d,description:c,sx:u,...p}=e;return(0,s.jsxs)(l.A,{flexGrow:1,alignItems:"center",justifyContent:"center",sx:{px:3,height:1,...d&&{borderRadius:2,bgcolor:e=>(0,r.X4)(e.palette.grey[500],.04),border:e=>`dashed 1px ${(0,r.X4)(e.palette.grey[500],.08)}`},...u},...p,children:[(0,s.jsx)(i.A,{component:"img",alt:"empty content",src:n||"/assets/icons/empty/ic_content.svg",sx:{width:1,maxWidth:160}}),t&&(0,s.jsx)(o.A,{variant:"h6",component:"span",sx:{mt:1,color:"text.disabled",textAlign:"center"},children:t}),c&&(0,s.jsx)(o.A,{variant:"caption",sx:{mt:1,color:"text.disabled",textAlign:"center"},children:c}),a&&a]})}},44847:(e,t,n)=>{n.d(t,{A:()=>i.A});var i=n(33546)},75950:(e,t,n)=>{function i(e,t,n){return null===e[n]?1:null===t[n]||t[n]<e[n]?-1:t[n]>e[n]?1:0}function l(e,t){return"desc"===e?(e,n)=>i(e,n,t):(e,n)=>-i(e,n,t)}n.d(t,{er:()=>f,Sm:()=>p,We:()=>S,Uv:()=>A,hz:()=>l,K2:()=>o});var r=n(65043);function o(e){const[t,n]=(0,r.useState)(!(null===e||void 0===e||!e.defaultDense)),[i,l]=(0,r.useState)((null===e||void 0===e?void 0:e.defaultCurrentPage)||0),[o,s]=(0,r.useState)((null===e||void 0===e?void 0:e.defaultOrderBy)||"created_at"),[a,d]=(0,r.useState)((null===e||void 0===e?void 0:e.defaultRowsPerPage)||10),[c,u]=(0,r.useState)((null===e||void 0===e?void 0:e.defaultOrder)||"desc"),[p,m]=(0,r.useState)((null===e||void 0===e?void 0:e.defaultSelected)||[]),h=(0,r.useCallback)((e=>{""!==e&&(u(o===e&&"asc"===c?"desc":"asc"),s(e))}),[c,o]),x=(0,r.useCallback)((e=>{const t=p.includes(e)?p.filter((t=>t!==e)):[...p,e];m(t)}),[p]),g=(0,r.useCallback)((e=>{l(0),d(parseInt(e.target.value,10))}),[]),v=(0,r.useCallback)((e=>{n(e.target.checked)}),[]),f=(0,r.useCallback)(((e,t)=>{m(e?t:[])}),[]),w=(0,r.useCallback)(((e,t)=>{l(t)}),[]),j=(0,r.useCallback)((()=>{l(0)}),[]),A=(0,r.useCallback)((e=>{m([]),i&&e<2&&l(i-1)}),[i]),b=(0,r.useCallback)((e=>{let{totalRows:t,totalRowsInPage:n,totalRowsFiltered:r}=e;const o=p.length;if(m([]),i)if(o===n)l(i-1);else if(o===r)l(0);else if(o>n){const e=Math.ceil((t-o)/a)-1;l(e)}}),[i,a,p.length]);return{dense:t,order:c,page:i,orderBy:o,rowsPerPage:a,selected:p,onSelectRow:x,onSelectAllRows:f,onSort:h,onChangePage:w,onChangeDense:v,onResetPage:j,onChangeRowsPerPage:g,onUpdatePageDeleteRow:A,onUpdatePageDeleteRows:b,setPage:l,setDense:n,setOrder:u,setOrderBy:s,setSelected:m,setRowsPerPage:d}}var s=n(68738),a=n(39652),d=n(60778),c=n(44847),u=n(70579);function p(e){let{notFound:t,sx:n}=e;const{t:i}=(0,d.WD)();return(0,u.jsx)(s.A,{children:t?(0,u.jsx)(a.A,{colSpan:12,children:(0,u.jsx)(c.A,{filled:!0,title:i("No Data"),sx:{py:10,...n}})}):(0,u.jsx)(a.A,{colSpan:12,sx:{p:0}})})}var m=n(81e3),h=n(1273),x=n(84882),g=n(58093);const v={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function f(e){let{order:t,orderBy:n,rowCount:i=0,headLabel:l,numSelected:r=0,onSort:o,onSelectAllRows:c,sx:p}=e;const{t:f}=(0,d.WD)();return(0,u.jsx)(x.A,{sx:p,children:(0,u.jsxs)(s.A,{children:[c&&(0,u.jsx)(a.A,{padding:"checkbox",children:(0,u.jsx)(h.A,{indeterminate:!!r&&r<i,checked:!!i&&r===i,onChange:e=>c(e.target.checked)})}),l.map(((e,i)=>(0,u.jsx)(a.A,{align:e.align||"center",sortDirection:n===e.id&&t,sx:{width:e.width,minWidth:e.minWidth},children:o?(0,u.jsxs)(g.A,{hideSortIcon:!0,active:n===e.id,direction:n===e.id?t:"asc",onClick:()=>o(e.id),sx:{textTransform:"capitalize"},children:[f(e.label),n===e.id?(0,u.jsx)(m.A,{sx:{...v},children:"desc"===t?"sorted descending":"sorted ascending"}):null]}):f(e.label)},i)))]})})}var w=n(74600),j=n(94496);function A(e){let{dense:t,action:n,rowCount:i,numSelected:l,onSelectAllRows:r,sx:o,color:s,...a}=e;const{t:c}=(0,d.WD)();return l?(0,u.jsxs)(w.A,{direction:"row",alignItems:"center",sx:{pl:1,pr:2,top:0,left:0,width:1,zIndex:9,height:58,position:"absolute",bgcolor:`${s}.lighter`,...t&&{height:38},...o},...a,children:[(0,u.jsx)(h.A,{indeterminate:!!l&&l<i,checked:!!i&&l===i,onChange:e=>r(e.target.checked)}),(0,u.jsxs)(j.A,{variant:"subtitle2",sx:{ml:2,flexGrow:1,color:`${s}.main`,...t&&{ml:3}},children:[l," ",c("selected")]}),n&&n]}):null}var b=n(19042),_=n(72221),y=n(94814),k=n(79266),C=n(99784);function S(e){let{dense:t,count:n,page:i,onChangeDense:l,rowsPerPage:r,setPage:o,rowsPerPageOptions:s=[5,10,25,50],sx:a,...c}=e;const{t:p}=(0,d.WD)();return(0,u.jsxs)(m.A,{sx:{position:"relative",...a},children:[(0,u.jsx)(k.A,{showFirstButton:!0,showLastButton:!0,rowsPerPageOptions:s,component:"div",count:n,page:i,rowsPerPage:r,...c,sx:{borderTopColor:"transparent"}}),l&&(0,u.jsx)(C.A,{label:p("dense"),control:(0,u.jsx)(b.A,{checked:t,onChange:l}),sx:{pl:2,py:1.5,top:0,position:{sm:"absolute"}}}),o&&(0,u.jsx)(C.A,{label:p("page"),control:(0,u.jsx)(_.A,{value:i,onChange:e=>o(e.target.value),variant:"filled",sx:{height:0,width:68,mr:1,backgroundColor:"white",".MuiSelect-select":{paddingTop:1,paddingBottom:1,lineHeight:"40px"}},children:Array.from({length:Math.ceil(n/r)},((e,t)=>(0,u.jsx)(y.A,{value:t,children:t+1},t)))}),sx:{ml:18,my:2,top:5,position:{sm:"absolute"}}})]})}},90470:(e,t,n)=>{n.d(t,{A:()=>W});var i=n(80899),l=n(65043),r=n(48751),o=n(24858),s=n(18403),a=n(81e3),d=n(74600),c=n(38246),u=n(49633),p=n(83462),m=n(4219),h=n(7829),x=n(29347),g=n(35316),v=n(94814),f=n(39336),w=n(94496),j=n(48407),A=n(5124),b=n(31673),_=n(91562),y=n(75139),k=n(60778),C=n(7625),S=n(35151),D=n(94857),P=n(59699),R=n(70579);function W(e){var t,n,W,I,$,q,O;let{onClose:T,refetch:B,...G}=e;const{enqueueSnackbar:z}=(0,D.dh)(),{user:L}=(0,y.Z)(),{t:M}=(0,k.WD)(),{currentLang:F}=(0,k.jc)(),H="ar"===F.value,{handleAddNew:U}=(0,A.I)(),{appointmenttypesData:X}=(0,C.uZ5)(),{workGroupsData:E}=(0,C.hJU)(null===L||void 0===L||null===(t=L.employee)||void 0===t||null===(n=t.employee_engagements)||void 0===n||null===(W=n[null===L||void 0===L?void 0:L.employee.selected_engagement])||void 0===W||null===(I=W.unit_service)||void 0===I?void 0:I._id),{workShiftsData:Y}=(0,C.c8d)(null===L||void 0===L||null===($=L.employee)||void 0===$||null===(q=$.employee_engagements)||void 0===q||null===(O=q[null===L||void 0===L?void 0:L.employee.selected_engagement])||void 0===O?void 0:O.unit_service._id),N=i.Ik().shape({work_shift:i.Yj().required(M("required field")),work_group:i.Yj().required(M("required field")),service_types:i.YO(),appointment_type:i.Yj().required(M("required field")),start_time:i.gl().required(M("required field"))}),Z=(0,l.useMemo)((()=>{var e,t,n,i;return{start_time:new Date,appointment_type:null===X||void 0===X||null===(e=X[0])||void 0===e?void 0:e._id,work_group:null===E||void 0===E||null===(t=E[0])||void 0===t?void 0:t._id,work_shift:null===(n=Y.filter((e=>{const t=new Date,n=new Date(t);n.setHours(new Date(e.start_time).getHours(),new Date(e.start_time).getMinutes(),0,0);const i=new Date(t);if(i.setHours(new Date(e.end_time).getHours(),new Date(e.end_time).getMinutes(),0,0),n<=i)return t>=n&&t<i;const l=new Date(i.getTime()+864e5);return t>=n||t<l})))||void 0===n||null===(i=n[0])||void 0===i?void 0:i._id,service_types:[]}}),[E,Y,X]),K=(0,o.mN)({mode:"all",resolver:(0,s.t)(N),defaultValues:Z}),{reset:V,setValue:J,handleSubmit:Q,formState:{errors:ee,isSubmitting:te}}=K;(0,l.useEffect)((()=>{Object.keys(ee).length&&Object.keys(ee).forEach(((e,t)=>{var n;return z(`${e}: ${(null===ee||void 0===ee||null===(n=ee[e])||void 0===n?void 0:n.message)||"error"}`,{variant:"error"})}))}),[ee,z]);const ne=Q((async e=>{try{var t,n,i,l,r,o,s,a;const d=await b.Ay.post(b.vZ.appointments.all,{...e,emergency:!0,unit_service:null===L||void 0===L||null===(t=L.employee)||void 0===t||null===(n=t.employee_engagements)||void 0===n||null===(i=n[null===L||void 0===L?void 0:L.employee.selected_engagement])||void 0===i||null===(l=i.unit_service)||void 0===l?void 0:l._id,department:null===(r=E.filter((t=>t._id===e.work_group)))||void 0===r||null===(o=r[0])||void 0===o||null===(s=o.department)||void 0===s?void 0:s._id});_.A.emit("updated",{user:L,link:j.f.unitservice.appointments.root,msg:`created an emergency appointment <strong>[ ${null===d||void 0===d||null===(a=d.data)||void 0===a?void 0:a.code} ]</strong>`}),V(),z(M("created successfully!")),B(),T()}catch(d){z(H&&`${d.arabic_message}`||`${d.message}`,{variant:"error"}),console.error(d)}}));return(0,l.useEffect)((()=>{V(Z)}),[Z,V]),(0,R.jsx)(p.A,{maxWidth:"lg",onClose:T,...G,children:(0,R.jsxs)(P.Ay,{methods:K,onSubmit:ne,children:[(0,R.jsx)(m.A,{sx:{mb:1},children:H?"\u0625\u0646\u0634\u0627\u0621 \u0645\u0648\u0639\u062f \u0645\u0633\u062a\u0639\u062c\u0644 \u062c\u062f\u064a\u062f":"new urgent appointment"}),(0,R.jsx)(g.A,{sx:{overflow:"unset"},children:(0,R.jsx)(d.A,{spacing:2.5,children:(0,R.jsxs)(a.A,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"},children:[(0,R.jsx)(o.xI,{name:"start_time",render:e=>{let{field:t,fieldState:{error:n}}=e;return(0,R.jsx)(h.K,{label:`${M("start date")} *`,sx:{width:"30vw",minWidth:"300px"},onChange:e=>{var t,n,i,l,o;const s=(0,r.A)(e,(null===L||void 0===L||null===(t=L.employee)||void 0===t||null===(n=t.employee_engagements)||void 0===n||null===(i=n[null===L||void 0===L?void 0:L.employee.selected_engagement])||void 0===i||null===(l=i.unit_service)||void 0===l||null===(o=l.country)||void 0===o?void 0:o.time_zone)||"Asia/Amman");J("start_time",new Date(s))},minutesStep:5,slotProps:{textField:{fullWidth:!0,margin:"normal"}}})}}),(0,R.jsxs)(a.A,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,R.jsx)(P.tX,{name:"appointment_type",label:`${M("appointment type")} *`,children:X.map(((e,t,n)=>(0,R.jsx)(v.A,{lang:"ar",value:e._id,children:H?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))}),(0,R.jsxs)(P.tX,{name:"work_shift",label:`${M("work shift")} *`,PaperPropsSx:{textTransform:"capitalize"},children:[Y&&Y.map(((e,t,n)=>(0,R.jsx)(v.A,{lang:"ar",value:e._id,children:H?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n))),(0,R.jsx)(f.A,{}),(0,R.jsxs)(v.A,{lang:"ar",sx:{display:"flex",justifyContent:"flex-end",gap:1,fontWeight:600},onClick:()=>U(j.f.unitservice.tables.workshifts.new),children:[(0,R.jsx)(w.A,{variant:"body2",sx:{color:"info.main"},children:M("Add new")}),(0,R.jsx)(S.A,{icon:"material-symbols:new-window-sharp"})]})]}),(0,R.jsxs)(P.tX,{name:"work_group",label:`${M("work group")} *`,children:[E.map(((e,t,n)=>(0,R.jsx)(v.A,{lang:"ar",value:e._id,children:H?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n))),(0,R.jsx)(f.A,{}),(0,R.jsxs)(v.A,{lang:"ar",sx:{display:"flex",justifyContent:"flex-end",gap:1,fontWeight:600},onClick:()=>U(j.f.unitservice.tables.workgroups.new),children:[(0,R.jsx)(w.A,{variant:"body2",sx:{color:"info.main"},children:M("Add new")}),(0,R.jsx)(S.A,{icon:"material-symbols:new-window-sharp"})]})]})]})]})})}),(0,R.jsxs)(x.A,{children:[(0,R.jsx)(u.A,{color:"inherit",variant:"outlined",onClick:T,children:M("cancel")}),(0,R.jsx)(c.A,{loading:te,type:"submit",variant:"contained",children:M("add")})]})]})})}},91720:(e,t,n)=>{n.d(t,{A:()=>u});var i=n(81e3),l=n(88446),r=n(74600),o=n(94496),s=n(22698),a=n(65381),d=n(70579);function c(e){let{link:t,activeLast:n,disabled:r}=e;const o={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...r&&!n&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},s=(0,d.jsxs)(d.Fragment,{children:[t.icon&&(0,d.jsx)(i.A,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:t.icon}),t.name]});return t.href?(0,d.jsx)(l.A,{component:a.W,href:t.href,sx:o,children:s}):(0,d.jsxs)(i.A,{sx:o,children:[" ",s," "]})}function u(e){let{links:t,action:n,heading:a,moreLink:u,activeLast:m,sx:h,...x}=e;const g=t&&t[t.length-1].name;return(0,d.jsxs)(i.A,{sx:{...h},children:[(0,d.jsxs)(r.A,{direction:"row",alignItems:"center",children:[(0,d.jsxs)(i.A,{sx:{flexGrow:1,display:"flex",gap:{md:3},alignItems:{md:"center"},flexDirection:{xs:"column",md:"row"}},children:[a&&(0,d.jsx)(o.A,{textTransform:"capitalize",variant:"h4",gutterBottom:!0,children:a}),t&&!!t.length&&(0,d.jsx)(s.A,{separator:(0,d.jsx)(p,{}),...x,children:null===t||void 0===t?void 0:t.map(((e,t)=>(0,d.jsx)(c,{link:e,activeLast:m,disabled:e.name===g},t)))})]}),n&&(0,d.jsxs)(i.A,{sx:{flexShrink:0,textTransform:"capitalize"},children:[" ",n," "]})]}),!!u&&(0,d.jsx)(i.A,{sx:{mt:2},children:u.map(((e,t)=>(0,d.jsx)(l.A,{href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},t)))})]})}function p(){return(0,d.jsx)(i.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}}}]);
//# sourceMappingURL=42518.4744792f.chunk.js.map
"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[3593],{53593:(e,n,l)=>{l.r(n),l.d(n,{default:()=>ne});var t=l(6907),a=l(72791),s=l(61474),r=l(2101),i=l(12065),o=l(57621),d=l(79836),c=l(89164),u=l(53382),x=l(39281),h=(l(4419),l(38072),l(19208)),p=l(22459),m=l(61146),g=l(34045),v=l(64802),j=l(84954),f=l(40268),Z=l(10261),b=(l(77008),l(25279)),_=(l(73379),l(38062)),w=l(51642),y=l(6965),C=l(79572),P=(l(6385),l(89731),l(76932)),k=l(68870),D=l(9195),S=l(68745),R=l(13400),F=l(10901),L=l(30250),O=l(24845),W=l(80184);function B(e){let{row:n,onEditRow:l,setFilters:t,filters:a}=e;const{code:s,department:r,appointment:i,employee:o,status:d,title:c,Body:u,Rate:x,created_at:h,user_creation:p,ip_address_user_creation:m,updated_at:g,user_modification:v,ip_address_user_modification:Z,modifications_nums:b}=n,{t:_}=(0,P.qM)(),{currentLang:w}=(0,P.nt)(),y="ar"===w.value,C=(0,O.S)(),B=(0,O.S)(),I=(0,W.jsxs)(D.Z,{hover:!0,children:[(0,W.jsx)(S.Z,{lang:"ar",align:"center",children:s}),(0,W.jsx)(S.Z,{align:"center",onClick:()=>t({...a,name:null===i||void 0===i?void 0:i.name_english}),children:null===i||void 0===i?void 0:i.code}),(0,W.jsx)(S.Z,{align:"center",onClick:()=>t({...a,name:null===r||void 0===r?void 0:r.name_english}),children:y?null===r||void 0===r?void 0:r.name_arabic:null===r||void 0===r?void 0:r.name_english}),(0,W.jsx)(S.Z,{align:"center",onClick:()=>t({...a,name:null===o||void 0===o?void 0:o.name_english}),children:y?null===o||void 0===o?void 0:o.name_arabic:null===o||void 0===o?void 0:o.name_english}),(0,W.jsx)(S.Z,{lang:"ar",align:"center",children:c}),(0,W.jsx)(S.Z,{lang:"ar",align:"center",children:(0,W.jsx)(j.Z,{lang:"ar",variant:"soft",color:("read"===d?"success":"unread"===d&&"error")||"default",children:_(d)})}),(0,W.jsx)(S.Z,{lang:"ar",align:"center",children:u}),(0,W.jsx)(S.Z,{children:(0,W.jsx)(F.Z,{size:"small",readOnly:!0,value:x,precision:.1,max:5})}),(0,W.jsx)(S.Z,{lang:"ar",align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,W.jsx)(R.Z,{color:C.open?"inherit":"default",onClick:B.onOpen,children:(0,W.jsx)(f.Z,{icon:"carbon:data-quality-definition"})})})]});return(0,W.jsxs)(W.Fragment,{children:[I,(0,W.jsxs)(O.Z,{open:B.open,onClose:B.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,W.jsxs)(k.Z,{sx:{fontWeight:600},children:[_("creation time"),":"]}),(0,W.jsx)(k.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,L.zM)(h)}),(0,W.jsxs)(k.Z,{sx:{pt:1,fontWeight:600},children:[_("creator"),":"]}),(0,W.jsx)(k.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===p||void 0===p?void 0:p.email}),(0,W.jsxs)(k.Z,{sx:{pt:1,fontWeight:600},children:[_("creator IP"),":"]}),(0,W.jsx)(k.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:m}),(0,W.jsxs)(k.Z,{sx:{pt:1,fontWeight:600},children:[_("editing time"),":"]}),(0,W.jsx)(k.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,L.zM)(g)}),(0,W.jsxs)(k.Z,{sx:{pt:1,fontWeight:600},children:[_("editor"),":"]}),(0,W.jsx)(k.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===v||void 0===v?void 0:v.email}),(0,W.jsxs)(k.Z,{sx:{pt:1,fontWeight:600},children:[_("editor IP"),":"]}),(0,W.jsx)(k.Z,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:Z}),(0,W.jsxs)(k.Z,{sx:{pt:1,fontWeight:600},children:[_("modifications no"),": ",b]})]})]})}var I=l(36314),z=l(58406),q=l(82626),T=l(13034),M=l(48550),Q=l(62861),A=l(68096),E=l(13838),U=l(63466),G=l(77196);function K(e){let{filters:n,onFilters:l,canReset:t,onResetFilters:s}=e;const{t:r}=(0,P.qM)(),{currentLang:i}=(0,P.nt)(),o=(i.value,(0,a.useCallback)((e=>{l("name",e.target.value)}),[l])),d=(0,a.useCallback)((e=>{l("rate","string"===typeof e.target.value?e.target.value.split(","):e.target.value)}),[l]);return(0,W.jsxs)(I.Z,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[(0,W.jsxs)(A.Z,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[(0,W.jsx)(Q.Z,{children:r("rate")}),(0,W.jsx)(z.Z,{multiple:!0,value:n.rate,onChange:d,input:(0,W.jsx)(G.Z,{label:r("rate")}),renderValue:e=>e.map((e=>e)).join(", "),MenuProps:{PaperProps:{sx:{maxHeight:240}}},children:[1,2,3,4,5].map((e=>(0,W.jsxs)(q.Z,{value:e,children:[(0,W.jsx)(T.Z,{disableRipple:!0,size:"small",checked:n.rate.includes(e)}),(0,W.jsx)(F.Z,{size:"small",readOnly:!0,value:e,precision:.1,max:5})]},e)))})]}),(0,W.jsx)(I.Z,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:(0,W.jsx)(M.Z,{fullWidth:!0,value:n.name,onChange:o,placeholder:r("Search name or number..."),InputProps:{startAdornment:(0,W.jsx)(U.Z,{position:"start",children:(0,W.jsx)(f.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),t&&(0,W.jsx)(E.Z,{color:"error",sx:{flexShrink:0},onClick:s,startIcon:(0,W.jsx)(f.Z,{icon:"solar:trash-bin-trash-bold"}),children:r("clear")})]})}var N=l(85771),$=l(27938),H=l(2540);function J(e){let{filters:n,onFilters:l,onResetFilters:t,results:a,...s}=e;const{t:r}=(0,P.qM)(),i=(0,H.l2)(n.startDate,n.endDate);return(0,W.jsxs)(I.Z,{spacing:1.5,...s,children:[(0,W.jsxs)(k.Z,{sx:{typography:"body2"},children:[(0,W.jsx)("strong",{children:a}),(0,W.jsx)(k.Z,{component:"span",sx:{color:"text.secondary",ml:.25},children:r("results found")})]}),(0,W.jsxs)(I.Z,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:["all"!==n.status&&(0,W.jsx)(V,{label:r("status:"),children:(0,W.jsx)(N.Z,{size:"small",label:r(n.status),onDelete:()=>{l("status","all")}})}),n.startDate&&n.endDate&&(0,W.jsx)(V,{label:r("date:"),children:(0,W.jsx)(N.Z,{size:"small",label:i,onDelete:()=>{l("startDate",null),l("endDate",null)}})}),(0,W.jsx)(E.Z,{color:"error",onClick:t,startIcon:(0,W.jsx)(f.Z,{icon:"solar:trash-bin-trash-bold"}),children:r("clear")})]})]})}function V(e){let{label:n,children:l,sx:t,...a}=e;return(0,W.jsxs)(I.Z,{component:$.Z,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...t},...a,children:[(0,W.jsx)(k.Z,{component:"span",sx:{typography:"subtitle2"},children:n}),(0,W.jsx)(I.Z,{spacing:1,direction:"row",flexWrap:"wrap",children:l})]})}const Y={name:"",status:"all",rate:[]};function X(e){let{departmentData:n}=e;const{t:l}=(0,P.qM)(),t=[{id:"code",label:l("code")},{id:"department",label:l("department")},{id:"appointments",label:l("appointments")},{id:"employees",label:l("employees")},{id:"title",label:l("title")},{id:"status",label:l("status")},{id:"Body",label:l("body")},{id:"Rate",label:l("rate")},{id:"",width:88}],{QC_STATUS_OPTIONS:f}=(0,w.D)(),k=(0,_.x6)({defaultOrderBy:"code"}),D=(0,h.UO)(),{id:S}=D,R=(0,a.useRef)(),F=(0,b.K$)(),{feedbackData:L,loading:O}=((0,p.k)(),(0,p.k)(),(0,h.tv)(),(0,C.If)(S)),[I,z]=(0,a.useState)(Y),q=!(!I.startDate||!I.endDate)&&I.startDate.getTime()>I.endDate.getTime(),T=function(e){var n;let{inputData:l,comparator:t,filters:a,dateError:s}=e;const{status:r,name:i,rate:o}=a,d=null===(n=l)||void 0===n?void 0:n.map(((e,n)=>[e,n]));null===d||void 0===d||d.sort(((e,n)=>{const l=t(e[0],n[0]);return 0!==l?l:e[1]-n[1]})),l=d.map((e=>e[0])),i&&(l=l.filter((e=>{var n,l,t,a,s,r,o,d,c,u,x,h,p;return(null===e||void 0===e||null===(n=e.appointment)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(l=e.appointment)||void 0===l||null===(t=l.name_english)||void 0===t?void 0:t.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(a=e.appointment)||void 0===a?void 0:a.name_arabic)&&-1!==(null===e||void 0===e||null===(s=e.appointment)||void 0===s||null===(r=s.name_arabic)||void 0===r?void 0:r.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(o=e.employee)||void 0===o?void 0:o.name_english)&&-1!==(null===e||void 0===e||null===(d=e.employee)||void 0===d||null===(c=d.name_english)||void 0===c?void 0:c.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(u=e.employee)||void 0===u?void 0:u.name_arabic)&&-1!==(null===e||void 0===e||null===(x=e.employee)||void 0===x||null===(h=x.name_arabic)||void 0===h?void 0:h.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e.title)&&-1!==(null===e||void 0===e||null===(p=e.title)||void 0===p?void 0:p.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===i||JSON.stringify(e.code)===i})));"all"!==r&&(l=l.filter((e=>e.status===r)));o.length>0&&(l=l.filter((e=>o.includes(e.Rate))));return l}({inputData:L,comparator:(0,_.sQ)(k.order,k.orderBy),filters:I,dateError:q}),M=k.dense?52:72,Q=!(null===I||void 0===I||!I.name)||"all"!==I.status||I.rate.length>0,A=!T.length&&Q||!T.length,E=(0,m.useReactToPrint)({content:()=>R.current}),U=(0,a.useCallback)(((e,n)=>{k.onResetPage(),z((l=>({...l,[e]:n})))}),[k]),G=(0,a.useCallback)((()=>{z(Y)}),[]),N=(0,a.useCallback)(((e,n)=>{U("status",n)}),[U]);return O?(0,W.jsx)(y.a,{}):(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(c.Z,{maxWidth:!F.themeStretch&&"lg",children:(0,W.jsxs)(o.Z,{children:[(0,W.jsx)(r.Z,{value:I.status,onChange:N,sx:{px:2.5,boxShadow:e=>"inset 0 -2px 0 0 ".concat((0,i.Fq)(e.palette.grey[500],.08))},children:f.map((e=>(0,W.jsx)(s.Z,{iconPosition:"end",value:e.value,label:e.label,icon:(0,W.jsxs)(j.Z,{lang:"ar",variant:"all"===e.value||e.value===I.status?"filled":"soft",color:("read"===e.value?"success":"unread"===e.value&&"error")||"default",children:["all"===e.value&&L.length,"read"===e.value&&L.filter((e=>"read"===e.status)).length,"unread"===e.value&&L.filter((e=>"unread"===e.status)).length]})},e.value)))}),(0,W.jsx)(K,{onPrint:E,filters:I,onFilters:U,onDownload:()=>{const e=T.reduce(((e,n)=>{var l,t;return e.push({code:n.code,name:n.name_english,category:null===(l=n.category)||void 0===l?void 0:l.name_english,symptoms:null===(t=n.symptoms)||void 0===t?void 0:t.map((e=>null===e||void 0===e?void 0:e.name_english))}),e}),[]),n=g.P6.book_new(),l=g.P6.json_to_sheet(e);g.P6.book_append_sheet(n,l,"Sheet 1");const t=g.cW(n,{bookType:"xlsx",type:"array"}),a=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,v.saveAs)(a,"unitservicesTable.xlsx")},canReset:Q,onResetFilters:G}),Q&&(0,W.jsx)(J,{filters:I,onFilters:U,onResetFilters:G,results:T.length,sx:{p:2.5,pt:0}}),(0,W.jsx)(x.Z,{children:(0,W.jsx)(Z.Z,{children:(0,W.jsxs)(d.Z,{ref:R,size:k.dense?"small":"medium",children:[(0,W.jsx)(_.K,{order:k.order,orderBy:k.orderBy,headLabel:t,rowCount:T.length,numSelected:k.selected.length,onSort:k.onSort}),(0,W.jsxs)(u.Z,{children:[T.slice(k.page*k.rowsPerPage,k.page*k.rowsPerPage+k.rowsPerPage).map((e=>(0,W.jsx)(B,{row:e,filters:I,setFilters:z,onSelectRow:()=>k.onSelectRow(e._id)},e._id))),(0,W.jsx)(_.$W,{height:M,emptyRows:(0,_.fQ)(k.page,k.rowsPerPage,L.length)}),(0,W.jsx)(_.et,{notFound:A})]})]})})}),(0,W.jsx)(_.S_,{count:T.length,page:k.page,rowsPerPage:k.rowsPerPage,onPageChange:k.onChangePage,onRowsPerPageChange:k.onChangeRowsPerPage,dense:k.dense,onChangeDense:k.onChangeDense})]})})})}var ee=l(27031);function ne(){const e=(0,h.UO)(),{id:n}=e,{data:l,loading:a}=(0,C.YL)(n),s=null===l||void 0===l?void 0:l.name_english;return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(ee.Z,{hasContent:!0,category:"department",subcategory:"quality_control",acl:"read",children:[(0,W.jsx)(t.ql,{children:(0,W.jsxs)("title",{children:[s||""," Department Quality Control"]})}),a&&(0,W.jsx)(y.a,{}),!a&&(0,W.jsx)(X,{departmentData:l})]})})}}}]);
//# sourceMappingURL=3593.c3527609.chunk.js.map
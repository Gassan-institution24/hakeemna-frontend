"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[64555],{22698:(e,l,n)=>{n.d(l,{A:()=>B});var a=n(58168),t=n(98587),r=n(65043),o=n(58387),s=n(98610),i=n(88092),d=n(34535),c=n(98206),m=n(94496),u=n(67266),p=n(66734),g=n(70579);const h=(0,p.A)((0,g.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var v=n(96030);const x=["slots","slotProps"],f=(0,d.Ay)(v.A)((e=>{let{theme:l}=e;return(0,a.A)({display:"flex",marginLeft:`calc(${l.spacing(1)} * 0.5)`,marginRight:`calc(${l.spacing(1)} * 0.5)`},"light"===l.palette.mode?{backgroundColor:l.palette.grey[100],color:l.palette.grey[700]}:{backgroundColor:l.palette.grey[700],color:l.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,a.A)({},"light"===l.palette.mode?{backgroundColor:l.palette.grey[200]}:{backgroundColor:l.palette.grey[600]}),"&:active":(0,a.A)({boxShadow:l.shadows[0]},"light"===l.palette.mode?{backgroundColor:(0,u.tL)(l.palette.grey[200],.12)}:{backgroundColor:(0,u.tL)(l.palette.grey[600],.12)})})})),A=(0,d.Ay)(h)({width:24,height:16});const b=function(e){const{slots:l={},slotProps:n={}}=e,r=(0,t.A)(e,x),o=e;return(0,g.jsx)("li",{children:(0,g.jsx)(f,(0,a.A)({focusRipple:!0},r,{ownerState:o,children:(0,g.jsx)(A,(0,a.A)({as:l.CollapsedIcon,ownerState:o},n.collapsedIcon))}))})};var y=n(92532),j=n(72372);function _(e){return(0,j.Ay)("MuiBreadcrumbs",e)}const w=(0,y.A)("MuiBreadcrumbs",["root","ol","li","separator"]),C=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],k=(0,d.Ay)(m.A,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,l)=>[{[`& .${w.li}`]:l.li},l.root]})({}),S=(0,d.Ay)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,l)=>l.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),I=(0,d.Ay)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,l)=>l.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function $(e,l,n,a){return e.reduce(((t,r,o)=>(o<e.length-1?t=t.concat(r,(0,g.jsx)(I,{"aria-hidden":!0,className:l,ownerState:a,children:n},`separator-${o}`)):t.push(r),t)),[])}const B=r.forwardRef((function(e,l){const n=(0,c.b)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:m,component:u="nav",slots:p={},slotProps:h={},expandText:v="Show path",itemsAfterCollapse:x=1,itemsBeforeCollapse:f=1,maxItems:A=8,separator:y="/"}=n,j=(0,t.A)(n,C),[w,I]=r.useState(!1),B=(0,a.A)({},n,{component:u,expanded:w,expandText:v,itemsAfterCollapse:x,itemsBeforeCollapse:f,maxItems:A,separator:y}),R=(e=>{const{classes:l}=e;return(0,s.A)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},_,l)})(B),L=(0,i.A)({elementType:p.CollapsedIcon,externalSlotProps:h.collapsedIcon,ownerState:B}),q=r.useRef(null),M=r.Children.toArray(d).filter((e=>r.isValidElement(e))).map(((e,l)=>(0,g.jsx)("li",{className:R.li,children:e},`child-${l}`)));return(0,g.jsx)(k,(0,a.A)({ref:l,component:u,color:"text.secondary",className:(0,o.A)(R.root,m),ownerState:B},j,{children:(0,g.jsx)(S,{className:R.ol,ref:q,ownerState:B,children:$(w||A&&M.length<=A?M:(e=>f+x>=e.length?e:[...e.slice(0,f),(0,g.jsx)(b,{"aria-label":v,slots:{CollapsedIcon:p.CollapsedIcon},slotProps:{collapsedIcon:L},onClick:()=>{I(!0);const e=q.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-x,e.length)])(M),R.separator,y,B)})}))}))},39878:(e,l,n)=>{n.d(l,{A:()=>S});var a=n(80899),t=n(24858),r=n(65043),o=n(18403),s=n(81e3),i=n(12110),d=n(74600),c=n(22075),m=n(38246),u=n(94814),p=n(39336),g=n(94496),h=n(48407),v=n(67132),x=n(5124),f=n(31673),A=n(91562),b=n(75139),y=n(60778),j=n(7625),_=n(35151),w=n(94857),C=n(59699),k=n(70579);function S(e){var l,n,S,I,$,B,R,L,q,M,N,T,z,P;let{currentTable:V}=e;const W=(0,v.rd)(),{t:E}=(0,y.WD)(),{currentLang:Y}=(0,y.jc)(),D="ar"===Y.value,{user:Z}=(0,b.Z)(),{departmentsData:F}=(0,j.Lhq)(null===Z||void 0===Z||null===(l=Z.employee)||void 0===l||null===(n=l.employee_engagements)||void 0===n||null===(S=n[null===Z||void 0===Z||null===($=Z.employee)||void 0===$?void 0:$.selected_engagement])||void 0===S||null===(I=S.unit_service)||void 0===I?void 0:I._id),{activitiesData:G}=(0,j.h0B)(null===Z||void 0===Z||null===(B=Z.employee)||void 0===B||null===(R=B.employee_engagements)||void 0===R||null===(L=R[null===Z||void 0===Z||null===(M=Z.employee)||void 0===M?void 0:M.selected_engagement])||void 0===L||null===(q=L.unit_service)||void 0===q?void 0:q._id),{enqueueSnackbar:O}=(0,w.dh)(),{handleAddNew:X}=(0,x.I)(),H=a.Ik().shape({name_arabic:a.Yj().required(E("required field")),name_english:a.Yj().required(E("required field")),activities:a.Yj().required(E("required field")),department:a.Yj().nullable(),general_info:a.Yj()}),J=(0,r.useMemo)((()=>{var e,l,n,a;return{unit_service:null===Z||void 0===Z||null===(e=Z.employee)||void 0===e||null===(l=e.employee_engagements)||void 0===l||null===(n=l[null===Z||void 0===Z?void 0:Z.employee.selected_engagement])||void 0===n?void 0:n.unit_service._id,name_arabic:(null===V||void 0===V?void 0:V.name_arabic)||"",name_english:(null===V||void 0===V?void 0:V.name_english)||"",department:(null===V||void 0===V||null===(a=V.department)||void 0===a?void 0:a._id)||null,general_info:(null===V||void 0===V?void 0:V.general_info)||"",activities:(null===V||void 0===V?void 0:V.activities)||""}}),[V,null===Z||void 0===Z?void 0:Z.employee]),K=(0,t.mN)({mode:"all",resolver:(0,o.t)(H),defaultValues:J}),Q=e=>{/^[a-zA-Z0-9\s,@#$!*_\-&^%.()]*$/.test(e.target.value)&&K.setValue(e.target.name,e.target.value,{shouldValidate:!0})},{reset:U,handleSubmit:ee,formState:{isSubmitting:le,errors:ne}}=K;(0,r.useEffect)((()=>{Object.keys(ne).length&&Object.keys(ne).forEach(((e,l)=>{var n;return O(`${e}: ${(null===ne||void 0===ne||null===(n=ne[e])||void 0===n?void 0:n.message)||"error"}`,{variant:"error"})}))}),[ne,O]);const ae=ee((async e=>{try{V?(await f.Ay.patch(f.vZ.rooms.one(V._id),{...e}),A.A.emit("updated",{user:Z,link:h.f.unitservice.tables.rooms.root,msg:`updated a room <strong>${e.name_english||""}</strong>`}),W.push(h.f.unitservice.tables.rooms.root)):(await f.Ay.post(f.vZ.rooms.all,{...e}),A.A.emit("created",{user:Z,link:h.f.unitservice.tables.rooms.root,msg:`created a room <strong>${e.name_english||""}</strong>`})),U(),O(E(V?"update success!":"create success!"))}catch(l){O(D&&`${l.arabic_message}`||`${l.message}`,{variant:"error"}),console.error(l)}})),te=(null===Z||void 0===Z||null===(N=Z.employee)||void 0===N||null===(T=N.employee_engagements)||void 0===T||null===(z=T[null===Z||void 0===Z?void 0:Z.employee.selected_engagement])||void 0===z||null===(P=z.unit_service)||void 0===P?void 0:P.employees_number)||10;return(0,r.useEffect)((()=>{U(J)}),[J,U]),(0,k.jsx)(C.Ay,{methods:K,onSubmit:ae,children:(0,k.jsx)(c.A,{container:!0,spacing:3,children:(0,k.jsx)(c.A,{xs:12,maxWidth:"md",children:(0,k.jsxs)(i.A,{sx:{p:3},children:[(0,k.jsxs)(s.A,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,k.jsx)(C.o3,{onChange:Q,name:"name_english",label:`${E("name english")} *`}),(0,k.jsx)(C.o3,{onChange:e=>{/^[\u0600-\u06FF0-9\s!@#$%^&*_\-().]*$/.test(e.target.value)&&K.setValue(e.target.name,e.target.value,{shouldValidate:!0})},name:"name_arabic",label:`${E("name arabic")} *`}),te>3&&(0,k.jsxs)(C.tX,{name:"department",label:E("department"),children:[F.map(((e,l)=>(0,k.jsx)(u.A,{lang:"ar",value:e._id,children:D?e.name_arabic:e.name_english},l))),(0,k.jsx)(p.A,{}),(0,k.jsxs)(u.A,{lang:"ar",sx:{display:"flex",justifyContent:"flex-end",gap:1,fontWeight:600},onClick:()=>X(h.f.unitservice.departments.new),children:[(0,k.jsx)(g.A,{variant:"body2",sx:{color:"info.main"},children:E("Add new")}),(0,k.jsx)(_.A,{icon:"material-symbols:new-window-sharp"})]})]}),(0,k.jsxs)(C.tX,{name:"activities",label:E("activities"),children:[G.map(((e,l)=>(0,k.jsx)(u.A,{lang:"ar",value:e._id,children:D?e.name_arabic:e.name_english},l))),(0,k.jsx)(p.A,{}),(0,k.jsxs)(u.A,{lang:"ar",sx:{display:"flex",justifyContent:"flex-end",gap:1,fontWeight:600},onClick:()=>X(h.f.unitservice.tables.activities.new),children:[(0,k.jsx)(g.A,{variant:"body2",sx:{color:"info.main"},children:E("Add new")}),(0,k.jsx)(_.A,{icon:"material-symbols:new-window-sharp"})]})]}),(0,k.jsx)(C.o3,{onChange:Q,name:"general_info",label:E("general info")})]}),(0,k.jsx)(d.A,{alignItems:"flex-end",sx:{mt:3},children:(0,k.jsx)(m.A,{type:"submit",tabIndex:-1,variant:"contained",loading:le,children:E(V?"save changes":"create")})})]})})})})}},83858:(e,l,n)=>{n.d(l,{A:()=>a.A});var a=n(91720)},91720:(e,l,n)=>{n.d(l,{A:()=>m});var a=n(81e3),t=n(88446),r=n(74600),o=n(94496),s=n(22698),i=n(65381),d=n(70579);function c(e){let{link:l,activeLast:n,disabled:r}=e;const o={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...r&&!n&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},s=(0,d.jsxs)(d.Fragment,{children:[l.icon&&(0,d.jsx)(a.A,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:l.icon}),l.name]});return l.href?(0,d.jsx)(t.A,{component:i.W,href:l.href,sx:o,children:s}):(0,d.jsxs)(a.A,{sx:o,children:[" ",s," "]})}function m(e){let{links:l,action:n,heading:i,moreLink:m,activeLast:p,sx:g,...h}=e;const v=l&&l[l.length-1].name;return(0,d.jsxs)(a.A,{sx:{...g},children:[(0,d.jsxs)(r.A,{direction:"row",alignItems:"center",children:[(0,d.jsxs)(a.A,{sx:{flexGrow:1,display:"flex",gap:{md:3},alignItems:{md:"center"},flexDirection:{xs:"column",md:"row"}},children:[i&&(0,d.jsx)(o.A,{textTransform:"capitalize",variant:"h4",gutterBottom:!0,children:i}),l&&!!l.length&&(0,d.jsx)(s.A,{separator:(0,d.jsx)(u,{}),...h,children:null===l||void 0===l?void 0:l.map(((e,l)=>(0,d.jsx)(c,{link:e,activeLast:p,disabled:e.name===v},l)))})]}),n&&(0,d.jsxs)(a.A,{sx:{flexShrink:0,textTransform:"capitalize"},children:[" ",n," "]})]}),!!m&&(0,d.jsx)(a.A,{sx:{mt:2},children:m.map(((e,l)=>(0,d.jsx)(t.A,{href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},l)))})]})}function u(){return(0,d.jsx)(a.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}}}]);
//# sourceMappingURL=64555.d930c41a.chunk.js.map
"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[5220],{38563:(e,n,t)=>{t.d(n,{Z:()=>m});var l=t(68870),i=t(50533),o=t(36314),a=t(4567),s=t(93517),r=t(4419),d=t(80184);function c(e){let{link:n,activeLast:t,disabled:o}=e;const a={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...o&&!t&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},s=(0,d.jsxs)(d.Fragment,{children:[n.icon&&(0,d.jsx)(l.Z,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:n.icon}),n.name]});return n.href?(0,d.jsx)(i.Z,{component:r.r,href:n.href,sx:a,children:s}):(0,d.jsxs)(l.Z,{sx:a,children:[" ",s," "]})}function m(e){let{links:n,action:t,heading:r,moreLink:m,activeLast:p,sx:v,...x}=e;const h=n&&n[n.length-1].name;return(0,d.jsxs)(l.Z,{sx:{...v},children:[(0,d.jsxs)(o.Z,{direction:"row",alignItems:"center",children:[(0,d.jsxs)(l.Z,{sx:{flexGrow:1,display:"flex",gap:3,alignItems:"center"},children:[r&&(0,d.jsx)(a.Z,{variant:"h4",gutterBottom:!0,children:r}),n&&!!n.length&&(0,d.jsx)(s.Z,{separator:(0,d.jsx)(u,{}),...x,children:null===n||void 0===n?void 0:n.map((e=>(0,d.jsx)(c,{link:e,activeLast:p,disabled:e.name===h},e.name||"")))})]}),t&&(0,d.jsxs)(l.Z,{sx:{flexShrink:0},children:[" ",t," "]})]}),!!m&&(0,d.jsx)(l.Z,{sx:{mt:2},children:m.map((e=>(0,d.jsx)(i.Z,{href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}function u(){return(0,d.jsx)(l.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}},73379:(e,n,t)=>{t.d(n,{Z:()=>l.Z});var l=t(38563)},45220:(e,n,t)=>{t.d(n,{Z:()=>U});var l=t(8007),i=t(61134),o=t(6165),a=t.n(o),s=t(72791),r=t(44695),d=t(57621),c=t(36314),m=t(89164),u=t(63515),p=t(4567),v=t(68870),x=t(13239),h=t(12258),_=t(38072),g=t(19208),y=t(22459),f=t(89731),j=t(99116),b=t(8976),w=t(66833),Z=t(76932),k=t(81688),S=t(32869),C=t(25279),I=t(77008),T=t(73379),z=t(94721),P=t(82626),D=t(48550),F=t(63466),M=t(41985),q=t(80184);function W(e){var n,t,l,o,a;let{appointmentConfigData:s,setAppointTime:r}=e;const{t:d}=(0,Z.qM)(),{currentLang:m}=(0,Z.nt)(),u="ar"===m.value,x=[{value:"saturday",label:d("Saturday")},{value:"sunday",label:d("Sunday")},{value:"Monday",label:d("Monday")},{value:"tuesday",label:d("Tuesday")},{value:"wednesday",label:d("Wednesday")},{value:"thursday",label:d("Thursday")},{value:"friday",label:d("Friday")}],{control:h,watch:_,getValues:g,setValue:y}=(0,i.Gc)(),f=g(),{user:j}=(0,b.E)(),{workGroupsData:S}=(0,w.nj)(null===j||void 0===j||null===(n=j.employee)||void 0===n||null===(t=n.employee_engagements)||void 0===t||null===(l=t[j.employee.selected_engagement])||void 0===l?void 0:l._id),{workShiftsData:C}=(0,w.lL)(null===j||void 0===j||null===(o=j.employee)||void 0===o||null===(a=o.employee_engagements[null===j||void 0===j?void 0:j.employee.selected_engagement])||void 0===a?void 0:a.unit_service._id);return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(z.Z,{flexItem:!0,sx:{borderStyle:"solid"}}),(0,q.jsxs)(c.Z,{sx:{p:3},children:[(0,q.jsxs)(c.Z,{spacing:2,direction:{xs:"column",sm:"row"},sx:{p:3,width:{xs:"100%",md:"auto"}},children:[(0,q.jsx)(i.Qr,{name:"start_date",control:h,render:e=>{let{field:n,fieldState:{error:t}}=e;return(0,q.jsx)(M.M,{label:"".concat(d("start date")," *"),value:new Date(f.start_date||""),onChange:e=>{n.onChange(e)},slotProps:{textField:{fullWidth:!0,error:!!t,helperText:null===t||void 0===t?void 0:t.message}}})}}),(0,q.jsx)(i.Qr,{name:"end_date",control:h,render:e=>{let{field:n,fieldState:{error:t}}=e;return(0,q.jsx)(M.M,{label:d("end date"),value:new Date(f.end_date||""),onChange:e=>{n.onChange(e)},slotProps:{textField:{fullWidth:!0,error:!!t,helperText:null===t||void 0===t?void 0:t.message}}})}})]}),(0,q.jsxs)(c.Z,{spacing:2,direction:{xs:"column",sm:"row"},sx:{px:3,pb:3,width:{xs:"100%",md:"auto"}},children:[(0,q.jsx)(k.Cc,{size:"small",name:"work_shift",label:"".concat(d("work shift")," *"),InputLabelProps:{shrink:!0},PaperPropsSx:{textTransform:"capitalize"},disabled:Boolean(s),children:C.map((e=>(0,q.jsx)(P.Z,{value:e._id,children:u?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},e._id)))}),(0,q.jsx)(k.Cc,{size:"small",name:"work_group",label:"".concat(d("work group")," *"),InputLabelProps:{shrink:!0},PaperPropsSx:{textTransform:"capitalize"},disabled:Boolean(s),children:S&&(null===S||void 0===S?void 0:S.map((e=>(0,q.jsx)(P.Z,{value:e._id,children:u?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},e._id))))}),(0,q.jsx)(i.Qr,{name:"appointment_time",control:h,render:e=>{let{field:n,fieldState:{error:t}}=e;return(0,q.jsx)(D.Z,{fullWidth:!0,label:d("appointment duration time"),type:"number",lang:"ar",value:0===n.value?"":n.value,onChange:e=>{n.onChange(Number(e.target.value)),r(e.target.value)},error:!!t,size:"small",InputLabelProps:{shrink:!0},InputProps:{endAdornment:(0,q.jsx)(F.Z,{position:"end",children:(0,q.jsx)(v.Z,{lang:"ar",sx:{fontSize:"0.8rem"},children:d("min")})})}})}}),(0,q.jsx)(k.au,{lang:"ar",size:"small",InputProps:{startAdornment:(0,q.jsx)(F.Z,{position:"start",children:(0,q.jsx)(v.Z,{sx:{fontSize:"0.8rem"},children:u?"\u0644\u0628\u0639\u062f":"for the next"})}),endAdornment:(0,q.jsx)(F.Z,{position:"end",children:(0,q.jsx)(v.Z,{sx:{fontSize:"0.8rem"},children:u?"\u0623\u064a\u0627\u0645":"days"})})},name:"config_frequency",label:d("configuration frequency"),type:"number",inputProps:{min:0,max:30,textalign:"center"},InputLabelProps:{shrink:!0}})]}),(0,q.jsxs)(p.Z,{variant:"p",sx:{color:"text.secondary",mb:3,fontWeight:"700",textTransform:"capitalize"},children:[u?"\u0627\u0644\u0639\u0637\u0644 \u0627\u0644\u0623\u0633\u0628\u0648\u0639\u064a\u0629":"Weekly Days Off",":"]}),(0,q.jsx)(c.Z,{spacing:2,direction:{xs:"column",sm:"row"},sx:{p:3},children:(0,q.jsx)(k.s2,{size:"small",name:"weekend",options:x,sx:{display:"grid",gridTemplateColumns:{md:"repeat(7, 1fr)",sm:"repeat(4, 1fr)",xs:"repeat(2, 1fr)"}}})})]})]})}var L=t(13838),A=t(13400),H=t(40268);function R(){const{t:e}=(0,Z.qM)(),{currentLang:n}=(0,Z.nt)(),t="ar"===n.value,{control:l,setValue:o,watch:a,resetField:s,getValues:r}=(0,i.Gc)(),{fields:d,append:m,remove:u}=(0,i.Dq)({control:l,name:"holidays"}),x=r();return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(z.Z,{flexItem:!0,sx:{borderStyle:"solid"}}),(0,q.jsxs)(v.Z,{sx:{p:3},children:[(0,q.jsxs)(p.Z,{variant:"p",sx:{color:"text.secondary",mb:3,fontWeight:"700",textTransform:"capitalize"},children:[t?"\u0627\u0644\u0639\u0637\u0644":"Holidays",":"]}),(0,q.jsx)(c.Z,{sx:{mt:3},divider:(0,q.jsx)(z.Z,{flexItem:!0,sx:{borderStyle:"dashed"}}),spacing:2,children:d.map(((n,t)=>(0,q.jsx)(c.Z,{alignItems:"flex-start",spacing:1.5,sx:{width:{xs:"100%",md:"auto"}},children:(0,q.jsxs)(c.Z,{direction:{xs:"column",md:"row"},spacing:2,sx:{width:{xs:"100%",md:"auto"}},children:[(0,q.jsx)(k.au,{lang:"ar",size:"small",name:"holidays[".concat(t,"].description"),label:e("description")}),(0,q.jsx)(i.Qr,{name:"holidays[".concat(t,"].date"),control:l,render:n=>{let{field:l,fieldState:{error:i}}=n;return(0,q.jsx)(M.M,{label:e("date"),value:new Date(x.holidays[t].date?x.holidays[t].date:""),onChange:e=>{l.onChange(e)},slotProps:{textField:{size:"small",fullWidth:!0,error:!!i,helperText:null===i||void 0===i?void 0:i.message}}})}}),(0,q.jsx)(A.Z,{sx:{justifySelf:"flex-end",alignSelf:"flex-end",width:35},size:"small",color:"error",onClick:()=>(e=>{u(e)})(t),children:(0,q.jsx)(H.Z,{icon:"solar:trash-bin-trash-bold"})})]})},n.id)))}),(0,q.jsx)(z.Z,{sx:{mt:3,mb:1,borderStyle:"dashed"}}),(0,q.jsx)(c.Z,{spacing:3,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"},children:(0,q.jsx)(L.Z,{size:"small",color:"primary",startIcon:(0,q.jsx)(H.Z,{icon:"tdesign:plus"}),sx:{padding:1},onClick:()=>{m({date:null,description:""})},children:t?"\u0625\u0636\u0627\u0641\u0629 \u0623\u064a\u0627\u0645 \u0639\u0637\u0644":"add holiday"})})]})]})}var E=t(58406),Q=t(13034),V=t(62861),N=t(68096),B=t(47071),G=t(86778),X=t(56125);function O(e){let{ParentIndex:n,open:t,appointmenttypesData:l,serviceTypesData:o,setAppointmentsNum:a}=e;const{t:s}=(0,Z.qM)(),{currentLang:r}=(0,Z.nt)(),d="ar"===r.value,{control:m,setValue:u,watch:x,resetField:h,getValues:_}=(0,i.Gc)(),{fields:g,append:y,remove:f}=(0,i.Dq)({control:m,name:"days_details[".concat(n,"].appointments")}),j=_(),b=e=>{const n=null===o||void 0===o?void 0:o.filter((n=>null===e||void 0===e?void 0:e.includes(n._id)));return null===n||void 0===n?void 0:n.map((e=>d?e.name_arabic:e.name_english)).join(", ")};return(0,q.jsx)(X.Z,{in:t,sx:{bgcolor:"background.neutral"},children:(0,q.jsxs)(v.Z,{sx:{px:2,pb:0},children:[j.days_details[n].appointments&&j.days_details[n].appointments.length>0&&(0,q.jsxs)(p.Z,{variant:"p",lang:"ar",sx:{color:"text.disabled",mb:3,fontSize:14},children:[s("appointments"),":"]}),(0,q.jsx)(c.Z,{sx:{mt:3},divider:(0,q.jsx)(z.Z,{flexItem:!0,sx:{borderStyle:"dashed"}}),spacing:3,alignItems:"flex-end",children:g.map(((e,t)=>(0,q.jsx)(c.Z,{alignItems:"center",flexWrap:"wrap",spacing:1.5,sx:{width:"80%"},children:(0,q.jsxs)(c.Z,{direction:{xs:"column",md:"row"},spacing:2,sx:{width:"100%"},children:[(0,q.jsx)(k.Cc,{size:"small",InputLabelProps:{shrink:!0},name:"days_details[".concat(n,"].appointments[").concat(t,"].appointment_type"),label:"".concat(s("appointment type")," *"),children:null===l||void 0===l?void 0:l.map((e=>(0,q.jsx)(P.Z,{value:e._id,children:d?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english})))}),(0,q.jsx)(i.Qr,{name:"days_details[".concat(n,"].appointments[").concat(t,"].start_time"),control:m,render:e=>{let{field:l,fieldState:{error:i}}=e;return(0,q.jsx)(G.d,{lang:"ar",minutesStep:"5",label:s("start time"),value:j.days_details[n].appointments[t].start_time?new Date(j.days_details[n].appointments[t].start_time):new Date,onChange:e=>{l.onChange(e)},slotProps:{textField:{size:"small",fullWidth:!0,error:!!i,helperText:null===i||void 0===i?void 0:i.message}}})}}),(0,q.jsx)(i.Qr,{name:"days_details[".concat(n,"].appointments[").concat(t,"].service_types"),control:m,render:e=>{let{field:l,fieldState:{error:i}}=e;return(0,q.jsxs)(N.Z,{error:!!i,size:"small",sx:{width:"100%",shrink:!0},children:[(0,q.jsxs)(V.Z,{shrink:!0,children:[" ",s("service types")," "]}),(0,q.jsx)(E.Z,{...l,multiple:!0,id:"multiple-days_details[".concat(n,"].appointments[").concat(t,"].service_types"),label:s("service types"),renderValue:b,children:null===o||void 0===o?void 0:o.map((e=>{var n;const t=null===l||void 0===l||null===(n=l.value)||void 0===n?void 0:n.includes(e._id);return(0,q.jsxs)(P.Z,{value:e._id,children:[(0,q.jsx)(Q.Z,{size:"small",disableRipple:!0,checked:t}),d?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english]},e._id)}))}),!!i&&(0,q.jsx)(B.Z,{error:!!i,children:null===i||void 0===i?void 0:i.message})]})}}),(0,q.jsx)(k.jb,{size:"small",InputLabelProps:{shrink:!0},name:"days_details[".concat(n,"].appointments[").concat(t,"].online_available"),label:(0,q.jsx)(p.Z,{lang:"ar",sx:{fontSize:12},children:s("online avaliable")})}),(0,q.jsx)(A.Z,{size:"small",color:"error",sx:{justifySelf:{xs:"flex-end"},alignSelf:{xs:"flex-end"},width:35},onClick:()=>(e=>{f(e),a((e=>({...e,[n]:e[n]-1})))})(t),children:(0,q.jsx)(H.Z,{icon:"solar:trash-bin-trash-bold"})})]})},e.id)))}),(0,q.jsx)(z.Z,{sx:{mt:j.days_details[n].appointments&&j.days_details[n].appointments.length>0?3:0,mb:1,borderStyle:"dashed"}}),(0,q.jsx)(c.Z,{spacing:3,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"},children:(0,q.jsx)(L.Z,{size:"small",color:"primary",startIcon:(0,q.jsx)(H.Z,{icon:"tdesign:plus"}),sx:{padding:1},onClick:()=>{const e=j.days_details[n].appointments?j.days_details[n].appointments[j.days_details[n].appointments.length-1]:null,t=new Date(e?e.start_time:j.days_details[n].work_start_time);e&&t.setMinutes(t.getMinutes()+j.appointment_time);const l={appointment_type:null,start_time:null,price:null,online_available:!0,service_types:[],...e,start_time:t};y(l),a((e=>({...e,[n]:e[n]+1})))},children:d?"\u0625\u0636\u0627\u0641\u0629 \u0645\u0648\u0627\u0639\u064a\u062f \u0628\u0627\u0644\u062a\u0641\u0635\u064a\u0644":"Add Detailed Appointment"})})]})})}function J(e){var n,t;let{setErrorMsg:l,appointTime:o}=e;const{t:a}=(0,Z.qM)(),{currentLang:r}=(0,Z.nt)(),d="ar"===r.value,m=[{value:"saturday",label:a("Saturday")},{value:"sunday",label:a("Sunday")},{value:"Monday",label:a("Monday")},{value:"tuesday",label:a("Tuesday")},{value:"wednesday",label:a("Wednesday")},{value:"thursday",label:a("Thursday")},{value:"friday",label:a("Friday")}],{control:u,setValue:x,watch:h,resetField:_,getValues:g}=(0,i.Gc)(),[y,f]=(0,s.useState)(g()),{fields:j,append:S,remove:C}=(0,i.Dq)({control:u,name:"days_details"});(0,s.useEffect)((()=>(h((()=>{const e=g();f(e)})),()=>{h()})),[h,g,S]);const{user:I}=(0,b.E)(),[T,D]=(0,s.useState)({}),[F,M]=(0,s.useState)({}),{appointmenttypesData:W}=(0,w.o5)(),{serviceTypesData:R}=(0,w.fO)(null===I||void 0===I||null===(n=I.employee)||void 0===n||null===(t=n.employee_engagements[null===I||void 0===I?void 0:I.employee.selected_engagement])||void 0===t?void 0:t.unit_service._id);function X(e,n){const t=new Date(e),l=new Date(n),i=Math.abs(l-t);return Math.floor(i/6e4)}const J=e=>{const n=null===R||void 0===R?void 0:R.filter((n=>null===e||void 0===e?void 0:e.includes(null===n||void 0===n?void 0:n._id)));return null===n||void 0===n?void 0:n.map((e=>null===e||void 0===e?void 0:e.name_english)).join(", ")};function K(e){const n=y.days_details[e];if(null!==n&&void 0!==n&&n.appointments.length)return null===n||void 0===n?void 0:n.appointments.length;if(null!==n&&void 0!==n&&n.break_start_time&&null!==n&&void 0!==n&&n.break_end_time){return Math.floor(X(null===n||void 0===n?void 0:n.work_start_time,null===n||void 0===n?void 0:n.break_start_time)/y.appointment_time)+Math.floor(X(null===n||void 0===n?void 0:n.break_end_time,null===n||void 0===n?void 0:n.work_end_time)/y.appointment_time)||0}return Math.floor(X(null===n||void 0===n?void 0:n.work_start_time,null===n||void 0===n?void 0:n.work_end_time)/y.appointment_time)||0}return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(z.Z,{flexItem:!0,sx:{borderStyle:"solid"}}),(0,q.jsxs)(v.Z,{sx:{p:3},children:[(0,q.jsxs)(p.Z,{variant:"p",sx:{color:"text.secondary",mb:3,fontWeight:"700",textTransform:"capitalize"},children:[d?"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u064a\u0648\u0645":"Days Details",":"]}),(0,q.jsx)(c.Z,{sx:{mt:3},divider:(0,q.jsx)(z.Z,{flexItem:!0,sx:{borderStyle:"dashed"}}),spacing:3,children:j.map(((e,n)=>{var t;return(0,q.jsxs)(c.Z,{spacing:1.5,sx:{width:"100%"},children:[(0,q.jsxs)(c.Z,{direction:{xs:"column",md:"row"},spacing:2,sx:{width:"100%",mt:2},children:[(0,q.jsxs)(c.Z,{direction:{xs:"column",md:"column"},spacing:2,sx:{width:"100%",mt:2},children:[(0,q.jsx)(k.Cc,{disabled:null===(t=y.days_details[n])||void 0===t?void 0:t.day,InputLabelProps:{shrink:!0},size:"small",name:"days_details[".concat(n,"].day"),label:a("day"),children:m.filter((e=>!y.weekend.includes(e.value)&&!y.days_details.some((t=>{var l;return t.day===e.value&&(null===(l=y.days_details[n])||void 0===l?void 0:l.day)!==e.value})))).map((e=>(0,q.jsx)(P.Z,{value:e.value,children:e.label})))}),(0,q.jsx)(k.au,{lang:"ar",disabled:!0,size:"small",name:"days_details[".concat(n,"].appointment_number"),label:a("appointments number"),InputLabelProps:{shrink:!0},value:F[n]||K(n)})]}),(0,q.jsxs)(c.Z,{direction:{xs:"column",md:"column"},spacing:2,sx:{width:"100%",mt:2},children:[(0,q.jsx)(i.Qr,{name:"days_details[".concat(n,"].work_start_time"),control:u,render:e=>{var t,l;let{field:i,fieldState:{error:o}}=e;return(0,q.jsx)(G.d,{lang:"ar",minutesStep:"5",label:a("work start time"),value:null!==(t=y.days_details[n])&&void 0!==t&&t.work_start_time?new Date(null===(l=y.days_details[n])||void 0===l?void 0:l.work_start_time):null,onChange:e=>{i.onChange(e)},slotProps:{textField:{size:"small",fullWidth:!0,error:!!o,helperText:null===o||void 0===o?void 0:o.message}}})}}),(0,q.jsx)(i.Qr,{name:"days_details[".concat(n,"].break_start_time"),control:u,render:e=>{var t,l;let{field:i,fieldState:{error:o}}=e;return(0,q.jsx)(G.d,{lang:"ar",minutesStep:"5",label:a("break start time"),value:null!==(t=y.days_details[n])&&void 0!==t&&t.break_start_time?new Date(null===(l=y.days_details[n])||void 0===l?void 0:l.break_start_time):null,onChange:e=>{i.onChange(e)},slotProps:{textField:{size:"small",fullWidth:!0,error:!!o,helperText:null===o||void 0===o?void 0:o.message}}})}})]}),(0,q.jsxs)(c.Z,{direction:{xs:"column",md:"column"},spacing:2,sx:{width:"100%",mt:2},children:[(0,q.jsx)(i.Qr,{name:"days_details[".concat(n,"].work_end_time"),control:u,render:e=>{var t,l;let{field:i,fieldState:{error:o}}=e;return(0,q.jsx)(G.d,{lang:"ar",minutesStep:"5",label:a("work end time"),value:null!==(t=y.days_details[n])&&void 0!==t&&t.work_end_time?new Date(null===(l=y.days_details[n])||void 0===l?void 0:l.work_end_time):null,onChange:e=>{i.onChange(e)},slotProps:{textField:{size:"small",fullWidth:!0,error:!!o,helperText:null===o||void 0===o?void 0:o.message}}})}}),(0,q.jsx)(i.Qr,{name:"days_details[".concat(n,"].break_end_time"),control:u,render:e=>{var t,l;let{field:i,fieldState:{error:o}}=e;return(0,q.jsx)(G.d,{lang:"ar",minutesStep:"5",label:a("break end time"),value:null!==(t=y.days_details[n])&&void 0!==t&&t.break_end_time?new Date(null===(l=y.days_details[n])||void 0===l?void 0:l.break_end_time):null,onChange:e=>{i.onChange(e)},slotProps:{textField:{size:"small",fullWidth:!0,error:!!o,helperText:null===o||void 0===o?void 0:o.message}}})}})]}),(0,q.jsxs)(c.Z,{direction:{xs:"column",md:"column"},spacing:2,sx:{width:"100%",mt:2},children:[(0,q.jsx)(k.Cc,{size:"small",InputLabelProps:{shrink:!0},name:"days_details[".concat(n,"].appointment_type"),label:"".concat(a("appointment type")," *"),children:null===W||void 0===W?void 0:W.map((e=>(0,q.jsx)(P.Z,{value:e._id,children:d?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english})))}),(0,q.jsx)(i.Qr,{name:"days_details[".concat(n,"].service_types"),control:u,render:e=>{let{field:t,fieldState:{error:l}}=e;return(0,q.jsxs)(N.Z,{error:!!l,size:"small",sx:{width:"100%",shrink:!0},children:[(0,q.jsxs)(V.Z,{shrink:!0,children:[" ",a("service types")," "]}),(0,q.jsx)(E.Z,{...t,multiple:!0,id:"multiple-days_details[".concat(n,"].service_types"),label:a("service types"),renderValue:J,children:null===R||void 0===R?void 0:R.map((e=>{var n;const l=null===t||void 0===t||null===(n=t.value)||void 0===n?void 0:n.includes(e._id);return(0,q.jsxs)(P.Z,{value:e._id,children:[(0,q.jsx)(Q.Z,{size:"small",disableRipple:!0,checked:l}),d?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english]},e._id)}))}),!!l&&(0,q.jsx)(B.Z,{error:!!l,children:null===l||void 0===l?void 0:l.message})]})}})]}),(0,q.jsxs)(c.Z,{direction:{xs:"column",md:"column"},spacing:.2,sx:{justifySelf:{xs:"flex-end"},alignSelf:{xs:"flex-end"}},children:[(0,q.jsx)(A.Z,{size:"small",color:"error",onClick:()=>(e=>{C(e)})(n),children:(0,q.jsx)(H.Z,{icon:"solar:trash-bin-trash-bold"})}),(0,q.jsx)(A.Z,{size:"small",onClick:()=>async function(e){const n=[];if(!o&&!y.appointment_time)return;const t=e=>{const n=new Date(e);return 60*n.getHours()+n.getMinutes()},l=(e,n)=>{const t=new Date(e);return new Date(t.getTime()-6e4*n)},i=y.days_details[e];let a=X(null===i||void 0===i?void 0:i.work_start_time,null===i||void 0===i?void 0:i.work_end_time),s=X(null===i||void 0===i?void 0:i.work_start_time,null===i||void 0===i?void 0:i.break_start_time),r=X(null===i||void 0===i?void 0:i.break_end_time,null===i||void 0===i?void 0:i.work_end_time);const d=()=>{if(a>=y.appointment_time){const o=l(null===i||void 0===i?void 0:i.work_end_time,a),s=null===i||void 0===i?void 0:i.appointments.filter((e=>t(o)===t(e.start_time)))[0];return s?n.push(s):n.push({appointment_type:(null===i||void 0===i?void 0:i.appointment_type)||null,start_time:o,price:null,online_available:!0,service_types:(null===i||void 0===i?void 0:i.service_types)||[]}),a-=y.appointment_time,new Promise((n=>{setTimeout((()=>{n(d(i,e,a))}),0)}))}return Promise.resolve()},c=()=>{if(s>=y.appointment_time){const o=l(null===i||void 0===i?void 0:i.break_start_time,s),a=null===i||void 0===i?void 0:i.appointments.filter((e=>t(o)===t(e.start_time)))[0];return a?n.push(a):n.push({appointment_type:(null===i||void 0===i?void 0:i.appointment_type)||null,start_time:o,price:null,online_available:!0,service_types:(null===i||void 0===i?void 0:i.service_types)||[]}),s-=y.appointment_time,new Promise((n=>{setTimeout((()=>{n(c(i,e,s))}),0)}))}return Promise.resolve()},m=()=>{if(r>=y.appointment_time){const o=l(null===i||void 0===i?void 0:i.work_end_time,r),a=null===i||void 0===i?void 0:i.appointments.filter((e=>t(o)===t(e.start_time)))[0];return a?n.push(a):n.push({appointment_type:(null===i||void 0===i?void 0:i.appointment_type)||null,start_time:o,price:null,online_available:!0,service_types:(null===i||void 0===i?void 0:i.service_types)||[]}),r-=y.appointment_time,new Promise((n=>{setTimeout((()=>{n(m(i,e,r))}),0)}))}return Promise.resolve()};null!==i&&void 0!==i&&i.break_start_time&&null!==i&&void 0!==i&&i.break_end_time?(await c(),await m()):await d(),M({...F,[e]:n.length}),x("days_details[".concat(e,"].appointments"),n)}(n),children:(0,q.jsx)(H.Z,{icon:"zondicons:refresh"})}),(0,q.jsx)(A.Z,{size:"small",onClick:()=>D({...T,[n]:!T[n]}),children:(0,q.jsx)(H.Z,{icon:"tabler:list-details"})})]})]}),(0,q.jsx)(O,{setAppointmentsNum:M,serviceTypesData:R,appointmenttypesData:W,open:T[n],ParentIndex:n})]},null===e||void 0===e?void 0:e.id)}))}),(0,q.jsx)(z.Z,{sx:{mt:3,mb:1,borderStyle:"dashed"}}),(0,q.jsx)(c.Z,{spacing:3,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"},children:(0,q.jsx)(L.Z,{size:"small",color:"primary",startIcon:(0,q.jsx)(H.Z,{icon:"tdesign:plus"}),sx:{padding:1},onClick:()=>{try{var e;const n=null===(e=m.filter((e=>!y.weekend.includes(e.value)&&!y.days_details.some((n=>n.day===e.value))))[0])||void 0===e?void 0:e.value;if(!n)throw Error("No valid date to create");const t={day:"",work_start_time:null,work_end_time:null,break_start_time:null,break_end_time:null,appointments:[],service_types:[],appointment_type:null},l=y.days_details?y.days_details[y.days_details.length-1]:"",i={...t,...l,day:n,appointments:[]};S(i)}catch(n){l(n.message),window.scrollTo({top:0,behavior:"smooth"})}},children:d?"\u0625\u0636\u0627\u0641\u0629 \u064a\u0648\u0645 \u062c\u062f\u064a\u062f":"add new day"})})]})]})}function K(){const{t:e}=(0,Z.qM)(),{currentLang:n}=(0,Z.nt)(),t="ar"===n.value,{control:l,setValue:o,watch:a,resetField:s,getValues:r}=(0,i.Gc)(),{fields:d,append:m,remove:u}=(0,i.Dq)({control:l,name:"long_holidays"}),x=r();return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(z.Z,{flexItem:!0,sx:{borderStyle:"solid"}}),(0,q.jsxs)(v.Z,{sx:{p:3},children:[(0,q.jsxs)(p.Z,{variant:"p",sx:{color:"text.secondary",mb:3,fontWeight:"700",textTransform:"capitalize"},children:[t?"\u0639\u0637\u0644 \u0637\u0648\u064a\u0644\u0629":"Long Holidays",":"]}),(0,q.jsx)(c.Z,{sx:{mt:3},divider:(0,q.jsx)(z.Z,{flexItem:!0,sx:{borderStyle:"dashed"}}),spacing:3,children:d.map(((n,t)=>(0,q.jsx)(c.Z,{alignItems:"flex-start",spacing:1.5,sx:{width:{xs:"100%",md:"auto"}},children:(0,q.jsxs)(c.Z,{direction:{xs:"column",md:"row"},spacing:2,sx:{width:{xs:"100%",md:"auto"}},children:[(0,q.jsx)(k.au,{lang:"ar",size:"small",name:"long_holidays[".concat(t,"].description"),label:e("description")}),(0,q.jsx)(i.Qr,{name:"long_holidays[".concat(t,"].start_date"),control:l,render:n=>{let{field:l,fieldState:{error:i}}=n;return(0,q.jsx)(M.M,{label:e("start date"),value:new Date(x.long_holidays[t].start_date?x.long_holidays[t].start_date:""),onChange:e=>{l.onChange(e)},slotProps:{textField:{size:"small",fullWidth:!0,error:!!i,helperText:null===i||void 0===i?void 0:i.message}}})}}),(0,q.jsx)(i.Qr,{name:"long_holidays[".concat(t,"].end_date"),control:l,render:n=>{let{field:l,fieldState:{error:i}}=n;return(0,q.jsx)(M.M,{label:e("end date"),value:new Date(x.long_holidays[t].end_date?x.long_holidays[t].end_date:""),onChange:e=>{l.onChange(e)},slotProps:{textField:{size:"small",fullWidth:!0,error:!!i,helperText:null===i||void 0===i?void 0:i.message}}})}}),(0,q.jsx)(A.Z,{size:"small",color:"error",sx:{justifySelf:"flex-end",alignSelf:"flex-end",width:35},onClick:()=>(e=>{u(e)})(t),children:(0,q.jsx)(H.Z,{icon:"solar:trash-bin-trash-bold"})})]})},n.id)))}),(0,q.jsx)(z.Z,{sx:{mt:3,mb:1,borderStyle:"dashed"}}),(0,q.jsx)(c.Z,{spacing:1,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"},children:(0,q.jsx)(L.Z,{size:"small",color:"primary",startIcon:(0,q.jsx)(H.Z,{icon:"tdesign:plus"}),sx:{padding:1},onClick:()=>{m({start_date:null,end_date:null,description:""})},children:t?"\u0625\u0636\u0627\u0641\u0629 \u0639\u0637\u0644 \u0637\u0648\u064a\u0644\u0629":"add long holiday"})})]})]})}function U(e){var n,t,o;let{appointmentConfigData:z,refetch:P,loading:D}=e;const F=(0,g.tv)(),{t:M}=(0,Z.qM)(),{currentLang:L}=(0,Z.nt)(),A="ar"===L.value,{user:H}=(0,b.E)(),E=(0,w.X7)(null===H||void 0===H||null===(n=H.employee)||void 0===n||null===(t=n.employee_engagements)||void 0===t||null===(o=t[H.employee.selected_engagement])||void 0===o?void 0:o._id).data,[Q,V]=(0,s.useState)(0),[N,B]=(0,s.useState)([]),[G,X]=(0,s.useState)(),{enqueueSnackbar:O}=(0,S.Ds)(),U=((0,C.K$)(),(0,y.k)(!1)),$=(0,y.k)(!1),Y=(0,y.k)(),ee=(0,y.k)(),ne=l.Ry().shape({weekend:l.IX(),start_date:l.hT().nullable(),end_date:l.hT().nullable(),appointment_time:l.Rx().required("Appointment Time is required").min(5,"Appointment Time must be at least 5").max(180,"Appointment Time must be at most 180"),config_frequency:l.Rx().required("Configuration Frequency is required").min(1,"must be at least 1").max(360,"must be at most 360"),holidays:l.IX(),long_holidays:l.IX(),work_group:l.Z_().required("Work Group is required"),work_shift:l.Z_().required("Work Shift is required"),days_details:l.IX().of(l.Ry().shape({day:l.Z_().required("Day is required"),work_start_time:l.hT().required("work start time is required"),work_end_time:l.hT().required("work end time is required").when("work_start_time",((e,n)=>e&&n.min(e,"Work End Time must be after Work Start Time"))),appointments:l.IX(),service_types:l.IX(),appointment_type:l.Z_().nullable()}))}),te=(0,s.useMemo)((()=>{var e,n,t,l,i,o,a,s;return{unit_service:(null===z||void 0===z?void 0:z.unit_service._id)||(null===H||void 0===H||null===(e=H.employee)||void 0===e||null===(n=e.employee_engagements[null===H||void 0===H?void 0:H.employee.selected_engagement])||void 0===n?void 0:n.unit_service._id),department:(null===E||void 0===E||null===(t=E.department)||void 0===t?void 0:t._id)||(null===H||void 0===H||null===(l=H.employee)||void 0===l||null===(i=l.employee_engagements[null===H||void 0===H?void 0:H.employee.selected_engagement])||void 0===i||null===(o=i.department)||void 0===o?void 0:o._id),start_date:(null===z||void 0===z?void 0:z.start_date)||null,end_date:(null===z||void 0===z?void 0:z.end_date)||null,weekend:(null===z||void 0===z?void 0:z.weekend)||[],appointment_time:(null===z||void 0===z?void 0:z.appointment_time)||null,config_frequency:(null===z||void 0===z?void 0:z.config_frequency)||null,holidays:(null===z||void 0===z?void 0:z.holidays)||[{description:"",date:null}],long_holidays:(null===z||void 0===z?void 0:z.long_holidays)||[{description:"",start_date:null,end_date:null}],work_group:(null===z||void 0===z||null===(a=z.work_group)||void 0===a?void 0:a._id)||null,work_shift:(null===z||void 0===z||null===(s=z.work_shift)||void 0===s?void 0:s._id)||null,days_details:(null===z||void 0===z?void 0:z.days_details)||[]}}),[z,null===H||void 0===H?void 0:H.employee,null===E||void 0===E?void 0:E.department]),le=(0,i.cI)({resolver:(0,r.X)(ne),defaultValues:te}),{reset:ie,handleSubmit:oe,formState:{isSubmitting:ae,errors:se}}=le,re=oe((async e=>{ee.onTrue();const n=new Date,t=new Date(n.getTime()+24*e.config_frequency*60*60*1e3);try{var l,i,o,a,s,r;if(z)if(!e.start_date&&!e.end_date||new Date(e.end_date)>n&&(new Date(e.start_date)<=n||new Date(e.start_date)<t))B(e),Y.onTrue();else await f.ZP.patch("".concat(f.Hv.tables.appointmentconfigs,"/").concat(null===z||void 0===z?void 0:z._id),e),j.Z.emit("updated",{data:e,user:H,link:_.H.unitservice.employees.appointmentconfig.root(null===H||void 0===H||null===(l=H.employee)||void 0===l||null===(i=l.employee_engagements)||void 0===i||null===(o=i[H.employee.selected_engagement])||void 0===o?void 0:o._id),msg:"updated an appointment configuration ".concat(z.code)}),F.push(_.H.employee.appointmentconfiguration.root);else $.onTrue(),await f.ZP.post(f.Hv.tables.appointmentconfigs,e),j.Z.emit("created",{data:e,user:H,link:_.H.unitservice.employees.appointmentconfig.root(null===H||void 0===H||null===(a=H.employee)||void 0===a||null===(s=a.employee_engagements)||void 0===s||null===(r=s[H.employee.selected_engagement])||void 0===r?void 0:r._id),msg:"created an appointment config <strong>".concat(e.name_english,"</strong>")}),$.onFalse(),F.push(_.H.employee.appointmentconfiguration.root),O(M("added successfully!"));ee.onFalse(),console.info("DATA",JSON.stringify(e,null,2))}catch(d){console.log("error",JSON.stringify(d)),X("string"===typeof d?d:d.message),window.scrollTo({top:0,behavior:"smooth"}),console.error(d),$.onFalse(),j.Z.emit("error",{error:d,user:H,location:window.location.pathname}),ee.onFalse(),O("string"===typeof d?d:d.message,{variant:"error"})}}));return(0,s.useEffect)((()=>{Object.keys(se).length&&X(Object.keys(se).map((e=>{var n;return null===se||void 0===se||null===(n=se[e])||void 0===n?void 0:n.message})).join("<br>")),window.scrollTo({top:0,behavior:"smooth"})}),[se]),console.log("errorMsg",G),(0,s.useEffect)((()=>{var e,n,t,l,i,o,a;z&&le.reset({unit_service:(null===z||void 0===z?void 0:z.unit_service)||(null===H||void 0===H||null===(e=H.employee)||void 0===e||null===(n=e.employee_engagements[null===H||void 0===H?void 0:H.employee.selected_engagement])||void 0===n?void 0:n.unit_service._id),department:(null===E||void 0===E||null===(t=E.department)||void 0===t?void 0:t._id)||(null===H||void 0===H||null===(l=H.employee.employee_engagements[null===H||void 0===H?void 0:H.employee.selected_engagement])||void 0===l||null===(i=l.department)||void 0===i?void 0:i._id),start_date:(null===z||void 0===z?void 0:z.start_date)||null,end_date:(null===z||void 0===z?void 0:z.end_date)||null,weekend:(null===z||void 0===z?void 0:z.weekend)||[],appointment_time:(null===z||void 0===z?void 0:z.appointment_time)||null,config_frequency:(null===z||void 0===z?void 0:z.config_frequency)||null,holidays:(null===z||void 0===z?void 0:z.holidays)||[{description:"",date:null}],long_holidays:(null===z||void 0===z?void 0:z.long_holidays)||[{description:"",start_date:null,end_date:null}],work_group:(null===(o=z.work_group)||void 0===o?void 0:o._id)||null,work_shift:(null===(a=z.work_shift)||void 0===a?void 0:a._id)||null,days_details:z.days_details||[{day:"",work_start_time:null,work_end_time:null,break_start_time:null,break_end_time:null,appointments:[]}]})}),[z,le,H,null===E||void 0===E?void 0:E.department]),(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(m.Z,{maxWidth:"lg",children:[(0,q.jsx)(T.Z,{heading:M("appointment configuration"),links:[{name:M("dashboard"),href:_.H.dashboard.root},{name:M("appointment configuration")}],sx:{mb:{xs:3,md:5}}}),(0,q.jsxs)(k.ZP,{methods:le,children:[!D&&(0,q.jsxs)(d.Z,{children:[!!G&&(0,q.jsx)(u.Z,{sx:{borderRadius:0},severity:"error",children:(0,q.jsx)("div",{dangerouslySetInnerHTML:{__html:G}})}),(0,q.jsx)(W,{setAppointTime:V,appointmentConfigData:z}),(0,q.jsx)(J,{setErrorMsg:X,appointTime:Q}),(0,q.jsx)(R,{}),(0,q.jsx)(K,{})]}),(0,q.jsx)(c.Z,{justifyContent:"flex-end",direction:"row",spacing:2,sx:{mt:3},children:(0,q.jsx)(h.Z,{variant:"contained",loading:ae||U.value||$.value,onClick:re,children:M("save")})})]})]}),(0,q.jsx)(I.Q,{disabled:$.value,open:$.value||Y.value,onClose:Y.onFalse,title:$.value?"Creating appointments...":"Do you want to change your existance appointments?",content:$.value?(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(a(),{options:{strings:["It might take several minutes..","We are getting appointments ready..","We are almost done.."],autoStart:!0,loop:!0,deleteSpeed:5,cursor:"",delay:20}})}):(0,q.jsxs)(q.Fragment,{children:[A?(0,q.jsxs)(p.Z,{variant:"body2",component:"p",sx:{mt:1,color:"text.disabled"},children:["\u0627\u0636\u063a\u0637 ",(0,q.jsx)("strong",{children:" \u0646\u0639\u0645 "})," \u0644\u062a\u063a\u064a\u064a\u0631 \u0627\u0644\u0645\u0648\u0627\u0639\u064a\u062f \u0627\u0644\u0645\u0646\u0634\u0623\u0629"]}):(0,q.jsxs)(p.Z,{variant:"body2",component:"p",sx:{mt:1,color:"text.disabled"},children:["press",(0,q.jsx)("strong",{children:" yes"})," to change existance appointments"]}),A?(0,q.jsxs)(p.Z,{variant:"body2",component:"p",sx:{mt:1,color:"text.disabled"},children:["\u0627\u0636\u063a\u0637 ",(0,q.jsx)("strong",{children:" \u0644\u0627 "})," \u0644\u062d\u0641\u0638 \u0627\u0644\u0627\u0639\u062f\u0627\u062f\u0627\u062a \u0644\u0644\u0628\u062f\u0621 \u0645\u0646 \u0627\u0644\u0645\u0648\u0627\u0639\u064a\u062f \u0627\u0644\u062a\u064a \u064a\u0631\u0627\u062f \u0625\u0646\u0634\u0627\u0626\u0647\u0627"]}):(0,q.jsxs)(p.Z,{variant:"body2",component:"p",sx:{mt:1,color:"text.disabled"},children:["press",(0,q.jsx)("strong",{children:" No"})," to start changing when creating new appointments"]})]}),withoutCancel:$.value,action:(0,q.jsxs)(q.Fragment,{children:[$.value&&(0,q.jsx)(v.Z,{height:"40",sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,q.jsx)(x.Z,{size:24,color:"primary"})}),!$.value&&(0,q.jsx)(h.Z,{variant:"contained",loading:$.value,color:"warning",onClick:async()=>{$.onTrue();try{await f.ZP.patch("".concat(f.Hv.tables.appointmentconfigs,"/").concat(null===z||void 0===z?void 0:z._id),{...N,ImmediateEdit:!0}),j.Z.emit("updated",{user:H,link:_.H.employee.appointmentconfiguration.root,msg:"updated an appointment configuration <strong>[ ".concat(z.code," ]</strong>")}),$.onFalse(),Y.onFalse(),O(M("Updated successfully!")),F.push(_.H.employee.appointmentconfiguration.root)}catch(e){console.error(e),X("string"===typeof e?e:e.message),window.scrollTo({top:0,behavior:"smooth"}),j.Z.emit("error",{error:e,user:H,location:window.location.pathname}),$.onFalse(),Y.onFalse(),O("string"===typeof e?e:e.message,{variant:"error"})}},children:M("yes")}),!$.value&&(0,q.jsx)(h.Z,{disabled:$.value,loading:U.value,variant:"contained",color:"success",onClick:async()=>{U.onTrue();try{var e,n,t;await f.ZP.patch("".concat(f.Hv.tables.appointmentconfigs,"/").concat(null===z||void 0===z?void 0:z._id),{...N,ImmediateEdit:!1}),j.Z.emit("updated",{user:H,link:_.H.unitservice.employees.appointmentconfig.root(null===H||void 0===H||null===(e=H.employee)||void 0===e||null===(n=e.employee_engagements)||void 0===n||null===(t=n[H.employee.selected_engagement])||void 0===t?void 0:t._id),msg:"updated an appointment configuration <strong>[ ".concat(z.code," ]</strong>")}),O(M("updated successfully!")),U.onFalse(),Y.onFalse(),F.push(_.H.employee.appointmentconfiguration.root)}catch(l){console.error(l),X("string"===typeof l?l:l.message),window.scrollTo({top:0,behavior:"smooth"}),j.Z.emit("error",{error:l,user:H,location:window.location.pathname}),U.onFalse(),Y.onFalse(),O("string"===typeof l?l:l.message,{variant:"error"})}},children:M("no")})]})})]})}},93517:(e,n,t)=>{t.d(n,{Z:()=>z});var l=t(87462),i=t(63366),o=t(72791),a=(t(57441),t(59278)),s=t(94419),r=t(43572),d=t(66934),c=t(31402),m=t(4567),u=t(12065),p=t(74223),v=t(80184);const x=(0,p.Z)((0,v.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var h=t(95080);const _=["slots","slotProps"],g=(0,d.ZP)(h.Z)((e=>{let{theme:n}=e;return(0,l.Z)({display:"flex",marginLeft:"calc(".concat(n.spacing(1)," * 0.5)"),marginRight:"calc(".concat(n.spacing(1)," * 0.5)")},"light"===n.palette.mode?{backgroundColor:n.palette.grey[100],color:n.palette.grey[700]}:{backgroundColor:n.palette.grey[700],color:n.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,l.Z)({},"light"===n.palette.mode?{backgroundColor:n.palette.grey[200]}:{backgroundColor:n.palette.grey[600]}),"&:active":(0,l.Z)({boxShadow:n.shadows[0]},"light"===n.palette.mode?{backgroundColor:(0,u._4)(n.palette.grey[200],.12)}:{backgroundColor:(0,u._4)(n.palette.grey[600],.12)})})})),y=(0,d.ZP)(x)({width:24,height:16});const f=function(e){const{slots:n={},slotProps:t={}}=e,o=(0,i.Z)(e,_),a=e;return(0,v.jsx)("li",{children:(0,v.jsx)(g,(0,l.Z)({focusRipple:!0},o,{ownerState:a,children:(0,v.jsx)(y,(0,l.Z)({as:n.CollapsedIcon,ownerState:a},t.collapsedIcon))}))})};var j=t(75878),b=t(21217);function w(e){return(0,b.Z)("MuiBreadcrumbs",e)}const Z=(0,j.Z)("MuiBreadcrumbs",["root","ol","li","separator"]),k=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],S=(0,d.ZP)(m.Z,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,n)=>[{["& .".concat(Z.li)]:n.li},n.root]})({}),C=(0,d.ZP)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,n)=>n.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),I=(0,d.ZP)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,n)=>n.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function T(e,n,t,l){return e.reduce(((i,o,a)=>(a<e.length-1?i=i.concat(o,(0,v.jsx)(I,{"aria-hidden":!0,className:n,ownerState:l,children:t},"separator-".concat(a))):i.push(o),i)),[])}const z=o.forwardRef((function(e,n){const t=(0,c.Z)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:m,component:u="nav",slots:p={},slotProps:x={},expandText:h="Show path",itemsAfterCollapse:_=1,itemsBeforeCollapse:g=1,maxItems:y=8,separator:j="/"}=t,b=(0,i.Z)(t,k),[Z,I]=o.useState(!1),z=(0,l.Z)({},t,{component:u,expanded:Z,expandText:h,itemsAfterCollapse:_,itemsBeforeCollapse:g,maxItems:y,separator:j}),P=(e=>{const{classes:n}=e;return(0,s.Z)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},w,n)})(z),D=(0,r.y)({elementType:p.CollapsedIcon,externalSlotProps:x.collapsedIcon,ownerState:z}),F=o.useRef(null),M=o.Children.toArray(d).filter((e=>o.isValidElement(e))).map(((e,n)=>(0,v.jsx)("li",{className:P.li,children:e},"child-".concat(n))));return(0,v.jsx)(S,(0,l.Z)({ref:n,component:u,color:"text.secondary",className:(0,a.Z)(P.root,m),ownerState:z},b,{children:(0,v.jsx)(C,{className:P.ol,ref:F,ownerState:z,children:T(Z||y&&M.length<=y?M:(e=>g+_>=e.length?e:[...e.slice(0,g),(0,v.jsx)(f,{"aria-label":h,slots:{CollapsedIcon:p.CollapsedIcon},slotProps:{collapsedIcon:D},onClick:()=>{I(!0);const e=F.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-_,e.length)])(M),P.separator,j,z)})}))}))}}]);
//# sourceMappingURL=5220.6d2bae84.chunk.js.map
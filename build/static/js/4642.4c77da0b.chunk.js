"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[4642],{54642:(e,n,a)=>{a.r(n),a.d(n,{default:()=>C});var i=a(6907),t=a(19208),s=a(27031),o=a(8976),r=a(8007),l=a(61134),c=a(72791),d=a(44695),p=a(53767),m=a(12258),u=a(61889),v=a(4567),g=a(57621),h=a(9585),x=a(10266),y=a(38072),j=a(38887),Z=a(66664),f=a(99116),b=a(93011),_=a(81164),w=a(32869),P=a(85563),k=a(80184);function T(){var e,n;const{t:a}=(0,_.qM)(),{currentLang:i}=(0,_.nt)(),s="ar"===i.value,T=[{label:a("read"),value:"read"},{label:a("create"),value:"create"},{label:a("edit"),value:"update"},{label:a("delete"),value:"delete"}],{id:C,wgid:S}=(0,t.UO)(),{data:H}=(0,b.tBz)(S),{user:M}=(0,o.E)(),R=(0,j.F)("up","md"),{enqueueSnackbar:N}=(0,w.Ds)(),I=r.Ry().shape({appointments:r.IX(),appointment_configs:r.IX(),accounting:r.IX(),entrance_management:r.IX(),permissions:r.IX()}),z=null===H||void 0===H||null===(e=H.employees)||void 0===e||null===(n=e.find((e=>{var n;return(null===e||void 0===e||null===(n=e.employee)||void 0===n?void 0:n._id)===C})))||void 0===n?void 0:n.acl,X=(0,c.useMemo)((()=>({appointments:(null===z||void 0===z?void 0:z.appointments)||[],appointment_configs:(null===z||void 0===z?void 0:z.appointment_configs)||[],accounting:(null===z||void 0===z?void 0:z.accounting)||[],entrance_management:(null===z||void 0===z?void 0:z.entrance_management)||[],permissions:(null===z||void 0===z?void 0:z.permissions)||[]})),[z]),E=(0,l.cI)({mode:"onTouched",resolver:(0,d.X)(I),defaultValues:X}),{reset:O,handleSubmit:q,formState:{isSubmitting:F,errors:A}}=E;(0,c.useEffect)((()=>{Object.keys(A).length&&Object.keys(A).forEach(((e,n)=>{var a;return N("".concat(e,": ").concat((null===A||void 0===A||null===(a=A[e])||void 0===a?void 0:a.message)||"error"),{variant:"error"})}))}),[A,N]),(0,c.useEffect)((()=>{O({appointments:(null===z||void 0===z?void 0:z.appointments)||[],appointment_configs:(null===z||void 0===z?void 0:z.appointment_configs)||[],accounting:(null===z||void 0===z?void 0:z.accounting)||[],entrance_management:(null===z||void 0===z?void 0:z.entrance_management)||[],permissions:(null===z||void 0===z?void 0:z.permissions)||[]})}),[C,H]);const B=q((async e=>{try{var n,i;await Z.ZP.patch(Z.Hv.work_groups.employee.acl(null===H||void 0===H||null===(n=H.employees)||void 0===n||null===(i=n.find((e=>{var n;return(null===e||void 0===e||null===(n=e.employee)||void 0===n?void 0:n._id)===C})))||void 0===i?void 0:i._id),{acl:e}),f.Z.emit("updated",{user:M,link:y.H.unitservice.employees.acl(C),msg:"updated a department employee permissions"}),N(a("updated successfully!"))}catch(t){N(s&&"".concat(t.arabic_message)||"".concat(t.message),{variant:"error"}),console.error(t)}})),U=(0,k.jsxs)(k.Fragment,{children:[R&&(0,k.jsxs)(u.ZP,{md:4,children:[(0,k.jsx)(v.Z,{variant:"h6",sx:{mb:.5},children:a("permissions")}),(0,k.jsx)(v.Z,{variant:"body2",sx:{color:"text.secondary"},children:a("giving or withdrowing permissions refered to all")}),(0,k.jsx)(v.Z,{variant:"body2",sx:{color:"text.secondary"},children:a("work group and all its employees")})]}),(0,k.jsx)(u.ZP,{xs:12,md:8,children:(0,k.jsxs)(g.Z,{children:[!R&&(0,k.jsx)(h.Z,{title:a("permissions")}),(0,k.jsxs)(p.Z,{spacing:3,sx:{p:3},children:[(0,k.jsxs)(p.Z,{spacing:1,children:[(0,k.jsx)(v.Z,{textTransform:"capitalize",variant:"subtitle2",children:a("appointments")}),(0,k.jsx)(P.s2,{row:!0,spacing:4,name:"appointments",options:T})]}),(0,k.jsxs)(p.Z,{spacing:1,children:[(0,k.jsx)(v.Z,{textTransform:"capitalize",variant:"subtitle2",children:a("appointment configuration")}),(0,k.jsx)(P.s2,{row:!0,spacing:4,name:"appointment_configs",options:T})]}),(0,k.jsxs)(p.Z,{spacing:1,children:[(0,k.jsx)(v.Z,{textTransform:"capitalize",variant:"subtitle2",children:a("accounting")}),(0,k.jsx)(P.s2,{row:!0,spacing:4,name:"accounting",options:T})]}),(0,k.jsxs)(p.Z,{spacing:1,children:[(0,k.jsx)(v.Z,{textTransform:"capitalize",variant:"subtitle2",children:a("entrance management")}),(0,k.jsx)(P.s2,{row:!0,spacing:4,name:"entrance_management",options:T})]}),(0,k.jsxs)(p.Z,{spacing:1,children:[(0,k.jsx)(v.Z,{textTransform:"capitalize",variant:"subtitle2",children:a("permissions")}),(0,k.jsx)(P.s2,{row:!0,spacing:4,name:"permissions",options:T})]})]})]})})]}),D=(0,k.jsxs)(k.Fragment,{children:[R&&(0,k.jsx)(u.ZP,{md:4}),(0,k.jsx)(u.ZP,{xs:12,md:8,sx:{display:"flex",justifyContent:"flex-end"},children:(0,k.jsx)(m.Z,{type:"submit",variant:"contained",loading:F,sx:{m:2},children:a("save changes")})})]});return(0,k.jsx)(x.Z,{maxWidth:"lg",children:(0,k.jsx)(P.ZP,{methods:E,onSubmit:B,children:(0,k.jsxs)(u.ZP,{container:!0,spacing:3,children:[U,D]})})})}function C(){var e,n,a,r,l;const{user:c}=(0,o.E)(),d=null===c||void 0===c||null===(e=c.employee)||void 0===e||null===(n=e.employee_engagements)||void 0===n||null===(a=n[null===c||void 0===c||null===(l=c.employee)||void 0===l?void 0:l.selected_engagement])||void 0===a||null===(r=a.unit_service)||void 0===r?void 0:r.name_english,{id:p,wgid:m}=(0,t.UO)();return(0,k.jsxs)(s.Z,{category:"unit_service",subcategory:"permissions",acl:"read",children:[(0,k.jsxs)(i.ql,{children:[(0,k.jsxs)("title",{children:[d||"unit of service"," : work groups permissions"]}),(0,k.jsx)("meta",{name:"description",content:"meta"})]}),p&&m&&(0,k.jsx)(T,{})]})}},9585:(e,n,a)=>{a.d(n,{Z:()=>f});var i=a(63366),t=a(87462),s=a(72791),o=a(59278),r=a(20838),l=a(4567),c=a(31402),d=a(66934),p=a(59703),m=a(64657);function u(e){return(0,m.ZP)("MuiCardHeader",e)}const v=(0,p.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var g=a(80184);const h=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],x=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,n)=>(0,t.Z)({["& .".concat(v.title)]:n.title,["& .".concat(v.subheader)]:n.subheader},n.root)})({display:"flex",alignItems:"center",padding:16}),y=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,n)=>n.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),j=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,n)=>n.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),Z=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,n)=>n.content})({flex:"1 1 auto"}),f=s.forwardRef((function(e,n){const a=(0,c.Z)({props:e,name:"MuiCardHeader"}),{action:s,avatar:d,className:p,component:m="div",disableTypography:v=!1,subheader:f,subheaderTypographyProps:b,title:_,titleTypographyProps:w}=a,P=(0,i.Z)(a,h),k=(0,t.Z)({},a,{component:m,disableTypography:v}),T=(e=>{const{classes:n}=e;return(0,r.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},u,n)})(k);let C=_;null==C||C.type===l.Z||v||(C=(0,g.jsx)(l.Z,(0,t.Z)({variant:d?"body2":"h5",className:T.title,component:"span",display:"block"},w,{children:C})));let S=f;return null==S||S.type===l.Z||v||(S=(0,g.jsx)(l.Z,(0,t.Z)({variant:d?"body2":"body1",className:T.subheader,color:"text.secondary",component:"span",display:"block"},b,{children:S}))),(0,g.jsxs)(x,(0,t.Z)({className:(0,o.Z)(T.root,p),as:m,ref:n,ownerState:k},P,{children:[d&&(0,g.jsx)(y,{className:T.avatar,ownerState:k,children:d}),(0,g.jsxs)(Z,{className:T.content,ownerState:k,children:[C,S]}),s&&(0,g.jsx)(j,{className:T.action,ownerState:k,children:s})]}))}))}}]);
//# sourceMappingURL=4642.4c77da0b.chunk.js.map
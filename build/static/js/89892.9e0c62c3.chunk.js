"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[89892],{12604:(e,n,t)=>{t.d(n,{A:()=>s});var i=t(79386),l=t(84402);const r=(0,t(92532).A)("MuiBox",["root"]),s=(0,l.A)({defaultClassName:r.root,generateClassName:i.A.generate})},89892:(e,n,t)=>{t.r(n),t.d(n,{default:()=>w});var i=t(29490),l=t(80899),r=t(73216),s=t(65043),o=t(46987),a=t(24858),d=t(18403),c=t(12604),m=t(96992),u=t(84284),h=t(12110),x=t(94496),p=t(49633),_=t(83462),v=t(4219),j=t(35316),y=t(94814),g=t(1273),f=t(29347),A=t(67132),C=t(59229),b=t(31673),D=t(57442),F=t(60778),S=t(7625),W=t(98250),k=t(59699),N=t(70579);function E(){var e,n,t,i;const{t:E}=(0,F.WD)(),{currentLang:w}=(0,F.jc)(),Y="ar"===w.value,{id:q}=(0,A.g)(),{prescriptionData:M,refetch:P}=(0,S.aEg)(q),{medicinesData:T}=(0,S.N_9)(),[I,z]=(0,s.useState)(""),B=(0,C.C)(),[K,V]=(0,s.useState)(!1),$=(0,r.Zp)(),L=l.Ik().shape({employee:l.Yj(),patient:l.Yj(),Start_time:l.gl(),End_time:l.gl(),file:l.YO(),Frequency_per_day:l.Yj(),entrance_mangament:l.Yj(),description:l.Yj(),department:l.Yj(),Drugs_report:l.Yj(),medical_report:l.Yj(),Medical_sick_leave_start:l.gl(),Medical_sick_leave_end:l.gl()}),O=(0,a.mN)({mode:"all",resolver:(0,d.t)(L),defaultValues:{medicines:"",Frequency_per_day:"",Num_days:"",Start_time:null,End_time:null,Doctor_Comments:"",chronic:!1}}),{reset:U,handleSubmit:X,control:Z,watch:G,setValue:H,formState:{isSubmitting:J}}=O;(0,s.useEffect)((()=>{var e;M&&(V(M.chronic),z(M.Doctor_Comments||""),U({medicines:(null===(e=M.medicines)||void 0===e?void 0:e._id)||"",Frequency_per_day:M.Frequency_per_day||"",Num_days:M.Num_days||"",Start_time:M.Start_time?new Date(M.Start_time):null,End_time:M.End_time?new Date(M.End_time):null,Doctor_Comments:M.Doctor_Comments||"",chronic:M.chronic}))}),[M,U]);const Q=G("Start_time"),R=G("End_time");(0,s.useEffect)((()=>{if(Q&&R){const e=new Date(Q),n=new Date(R),t=Math.ceil((n-e)/864e5);H("Num_days",t>0?t:0)}}),[Q,R,H]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(c.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,N.jsxs)(m.A,{component:h.A,sx:{p:3,width:"80%",display:"grid",gridTemplateColumns:{md:"1fr 1fr",xs:"1fr"}},children:[(0,N.jsxs)(c.A,{children:[(0,N.jsx)(x.A,{variant:"h3",children:null===M||void 0===M||null===(e=M.patient)||void 0===e?void 0:e.name_english}),(0,N.jsxs)(x.A,{sx:{fontWeight:600,p:2},children:[E("Date"),":\xa0 \xa0",(0,N.jsx)("span",{style:{color:"gray",fontWeight:400},children:(0,D.uK)(null===M||void 0===M?void 0:M.created_at)})]}),(0,N.jsxs)(x.A,{sx:{fontWeight:600,p:2},children:[E("name"),":\xa0 \xa0",null===M||void 0===M||null===(n=M.medicines)||void 0===n?void 0:n.map(((e,n)=>{var t;return(0,N.jsxs)("span",{style:{color:"gray",fontWeight:400},children:["(",null===e||void 0===e||null===(t=e.medicines)||void 0===t?void 0:t.trade_name,")"," "]},n)}))]}),(0,N.jsxs)(x.A,{sx:{fontWeight:600,p:2},children:[E("Dr."),"\xa0",(0,N.jsx)("span",{style:{color:"gray",fontWeight:400},children:null===M||void 0===M||null===(t=M.employee)||void 0===t?void 0:t.name_english})," ","\xa0 ",E("added a new prescription")]}),(null===M||void 0===M?void 0:M.Doctor_Comments)&&(0,N.jsxs)(x.A,{sx:{fontWeight:600,p:2},children:[E("note"),":\xa0\xa0",(0,N.jsx)("span",{style:{color:"gray",fontWeight:400},children:null===M||void 0===M?void 0:M.Doctor_Comments})," "]}),(0,N.jsxs)(p.A,{variant:"outlined",sx:{mt:2},onClick:()=>$(-1),children:[(0,N.jsx)(W.A,{icon:"icon-park:back"}),"\xa0 ",E("Back")]})]}),(0,N.jsxs)(c.A,{children:[(0,N.jsx)(x.A,{variant:"h3",children:null===M||void 0===M||null===(i=M.medicines)||void 0===i?void 0:i.trade_name}),(0,N.jsxs)(x.A,{sx:{fontWeight:600,p:2},children:[E("Date"),":\xa0 \xa0",(0,N.jsx)("span",{style:{color:"gray",fontWeight:400},children:(0,D.uK)(null===M||void 0===M?void 0:M.created_at)})]}),(null===M||void 0===M?void 0:M.Frequency_per_day)&&(0,N.jsxs)(x.A,{sx:{fontWeight:600,p:2},children:[E("Frequency"),":\xa0 \xa0",(0,N.jsx)("span",{style:{color:"gray",fontWeight:400},children:null===M||void 0===M?void 0:M.Frequency_per_day})]}),null!==M&&void 0!==M&&M.chronic?(0,N.jsx)(x.A,{sx:{fontWeight:600,p:2},children:E("Chronic: Yes")}):(null===M||void 0===M?void 0:M.Num_days)&&(0,N.jsxs)(x.A,{sx:{fontWeight:600,p:2},children:[E("Duration"),":\xa0\xa0",null!==M&&void 0!==M&&M.Start_time&&null!==M&&void 0!==M&&M.End_time?(0,N.jsxs)(N.Fragment,{children:[E("From")," ",(0,D.tN)(null===M||void 0===M?void 0:M.Start_time)," ",E("To")," ",(0,D.tN)(null===M||void 0===M?void 0:M.End_time),(0,N.jsxs)("span",{style:{color:"#2F88FF",fontWeight:500},children:["\xa0",null===M||void 0===M?void 0:M.Num_days," day/s"]})]}):`${null===M||void 0===M?void 0:M.Num_days} day/s`]})]})]})}),(0,N.jsx)(_.A,{open:B.value,onClose:B.onFalse,children:(0,N.jsxs)(k.Ay,{methods:O,onSubmit:X((async e=>{try{e.chronic=K,e.Doctor_Comments=I,await b.Ay.patch(`/api/drugs/${q}`,e),(0,o.M8)("Prescription updated successfully",{variant:"success"}),$(-1),P(),U()}catch(n){console.error(n.message),(0,o.M8)("Error uploading data",{variant:"error"})}})),children:[(0,N.jsx)(v.A,{sx:{color:"success.main",position:"relative",top:"10px"},children:Y?"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0648\u0635\u0641\u0629 \u0627\u0644\u0637\u0628\u064a\u0629":"update prescription"}),(0,N.jsxs)(j.A,{children:[(0,N.jsx)(k.tX,{label:E("medicine*"),fullWidth:!0,name:"medicines",PaperPropsSx:{textTransform:"capitalize"},sx:{mb:2},children:null===T||void 0===T?void 0:T.map(((e,n)=>(0,N.jsx)(y.A,{lang:"ar",value:null===e||void 0===e?void 0:e._id,sx:{mb:1},children:null===e||void 0===e?void 0:e.trade_name},n)))}),(0,N.jsx)(k.o3,{name:"Frequency_per_day",label:E("Frequency pe day"),sx:{mb:2}}),(0,N.jsx)(k.o3,{name:"Num_days",label:E("Number of days"),sx:{mb:2}}),(0,N.jsx)(a.xI,{name:"Start_time",control:Z,render:e=>{let{field:n,fieldState:{error:t}}=e;return(0,N.jsx)(u.l,{...n,label:E("Start time*"),sx:{mb:2},slotProps:{textField:{fullWidth:!0,error:!!t,helperText:null===t||void 0===t?void 0:t.message}}})}}),(0,N.jsx)(a.xI,{name:"End_time",control:Z,render:e=>{let{field:n,fieldState:{error:t}}=e;return(0,N.jsx)(u.l,{...n,label:E("End time*"),sx:{mb:2},slotProps:{textField:{fullWidth:!0,error:!!t,helperText:null===t||void 0===t?void 0:t.message}}})}}),(0,N.jsx)(k.o3,{name:"Doctor_Comments",label:E("Doctor Comments"),multiline:!0,value:I,sx:{mb:2},onChange:e=>z(e.target.value)})]}),(0,N.jsx)(g.A,{size:"small",name:"chronic",color:"success",checked:K,sx:{position:"relative",top:5,left:25},onChange:()=>V(!K)}),(0,N.jsx)(x.A,{sx:{color:"text.secondary",mt:{md:-3,xs:-2.3},ml:Y?{md:-31,xs:-5}:{md:8,xs:4},typography:"caption",fontSize:{md:15,xs:10}},children:"chronic"}),(0,N.jsxs)(f.A,{children:[(0,N.jsx)(p.A,{variant:"outlined",color:"inherit",onClick:B.onFalse,children:E("Cancel")}),(0,N.jsx)(p.A,{type:"submit",loading:J,variant:"contained",children:E("Upload")})]})]})})]})}function w(){return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(i.mg,{children:[(0,N.jsx)("title",{children:"record"}),(0,N.jsx)("meta",{name:"description",content:"meta"})]}),(0,N.jsx)(E,{})]})}}}]);
//# sourceMappingURL=89892.9e0c62c3.chunk.js.map
/*! For license information please see 616.1a12aaab.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[616],{616:(e,n,i)=>{i.r(n),i.d(n,{default:()=>Q});var o=i(6907),t=i(19208),l=i(43616),r=i(6965),a=i(34045),s=i(64802),d=i(84802),c=i(61146),u=i(72791),v=i(61474),h=i(2101),p=i(57621),g=i(79836),m=i(13838),x=i(12065),f=i(82626),j=i(89164),w=i(53382),b=i(39281),C=i(38072),Z=i(4419),_=i(89731),P=i(6385),y=i(76932),k=i(84954),R=i(40268),D=i(10261),S=i(25279),F=i(73379),I=i(24845),O=i(38062),A=i(52007),U=i.n(A),B=i(9195),T=i(68745),L=i(13400),H=i(80184);function E(e){let{row:n,onDeleteRow:i,setFilters:o,filters:t}=e;const{code:l,name_english:r,type:a,status:s,webpage:d,phone:c,address:u}=n,{t:v}=(0,y.qM)(),h=(0,H.jsxs)(B.Z,{hover:!0,children:[(0,H.jsx)(T.Z,{align:"center",children:l}),(0,H.jsx)(T.Z,{children:r}),(0,H.jsx)(T.Z,{align:"center",onClick:()=>o({...t,name:null===a||void 0===a?void 0:a.name_english}),children:null===a||void 0===a?void 0:a.name_english}),(0,H.jsx)(T.Z,{align:"center",children:(0,H.jsx)(k.Z,{variant:"soft",color:("active"===s?"success":"inactive"===s&&"error")||"default",children:s})}),(0,H.jsx)(T.Z,{align:"center",children:d}),(0,H.jsx)(T.Z,{align:"center",children:c}),(0,H.jsx)(T.Z,{align:"center",children:u}),(0,H.jsx)(T.Z,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,H.jsx)(L.Z,{sx:{color:"error.main"},onClick:i,children:(0,H.jsx)(R.Z,{icon:"mi:delete"})})})]});return(0,H.jsx)(H.Fragment,{children:h})}E.propTypes={setFilters:U().func,onDeleteRow:U().func,row:U().object,filters:U().object};var W=i(81653),q=i(48566);const z=[{id:"code",label:"Code"},{id:"name_english",label:"Name"},{id:"type",label:"Type"},{id:"status",label:"Status"},{id:"webpage",label:"Webpage"},{id:"phone",label:"Phone"},{id:"address",label:"Address"},{id:"",width:88}],M={name:"",status:"all"},N=[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}];function K(e){var n;let{unitServiceData:i,refetch:o}=e;const t=(0,O.x6)({defaultOrderBy:"code"}),A=(0,u.useRef)(),U=(0,I.S)(),B=(0,S.K$)(),[T,L]=(0,u.useState)(M),{insuranseCosData:K,loading:Q}=(0,l.Vc)(),V=K.filter((e=>{var n;return!(null!==i&&void 0!==i&&null!==(n=i.insurance)&&void 0!==n&&n.some((n=>n._id===e._id)))})).filter((e=>"active"===e.status)),$=!(!T.startDate||!T.endDate)&&T.startDate.getTime()>T.endDate.getTime(),G=function(e){var n;let{inputData:i,comparator:o,filters:t,dateError:l}=e;const{status:r,name:a}=t,s=null===(n=i)||void 0===n?void 0:n.map(((e,n)=>[e,n]));null===s||void 0===s||s.sort(((e,n)=>{const i=o(e[0],n[0]);return 0!==i?i:e[1]-n[1]})),i=null===s||void 0===s?void 0:s.map((e=>e[0])),a&&(i=i.filter((e=>{var n,i,o,t,l,r,s,d;return(null===e||void 0===e?void 0:e.name_english)&&-1!==(null===e||void 0===e||null===(n=e.name_english)||void 0===n?void 0:n.toLowerCase().indexOf(a.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(i=e.name_arabic)||void 0===i?void 0:i.toLowerCase().indexOf(a.toLowerCase()))||(null===e||void 0===e||null===(o=e.type)||void 0===o?void 0:o.name_english)&&-1!==(null===e||void 0===e||null===(t=e.type)||void 0===t||null===(l=t.name_english)||void 0===l?void 0:l.toLowerCase().indexOf(a.toLowerCase()))||(null===e||void 0===e||null===(r=e.type)||void 0===r?void 0:r.name_arabic)&&-1!==(null===e||void 0===e||null===(s=e.type)||void 0===s||null===(d=s.name_arabic)||void 0===d?void 0:d.toLowerCase().indexOf(a.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===a||JSON.stringify(e.code)===a})));"all"!==r&&(i=i.filter((e=>e.status===r)));return i}({inputData:null===i||void 0===i?void 0:i.insurance,comparator:(0,O.sQ)(t.order,t.orderBy),filters:T,dateError:$}),{t:J}=(0,y.qM)(),Y=null===G||void 0===G?void 0:G.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage),X=t.dense?52:72,ee=!(null===T||void 0===T||!T.name)||"all"!==T.status,ne=!(null!==G&&void 0!==G&&G.length)&&ee||!(null!==G&&void 0!==G&&G.length),ie=(0,c.useReactToPrint)({content:()=>A.current}),oe=(0,u.useCallback)((async e=>{if(i.insurance.some((n=>n._id===e)))return void(0,d.yv)("this company already exist",{variant:"error"});const n=[...i.insurance,e];await(0,P.Z)({method:"PATCH",path:_.Hv.tables.unitservice(null===i||void 0===i?void 0:i._id),data:{insurance:n}}),o(),t.onUpdatePageDeleteRow(null===Y||void 0===Y?void 0:Y.length)}),[null===Y||void 0===Y?void 0:Y.length,t,o,null===i||void 0===i?void 0:i._id,null===i||void 0===i?void 0:i.insurance]),te=(0,u.useCallback)((async e=>{var n;const l=null===i||void 0===i||null===(n=i.insurance)||void 0===n?void 0:n.filter((n=>(null===n||void 0===n?void 0:n._id)!==e));await(0,P.Z)({method:"PATCH",path:_.Hv.tables.unitservice(null===i||void 0===i?void 0:i._id),data:{insurance:l}}),o(),t.onUpdatePageDeleteRow(null===Y||void 0===Y?void 0:Y.length)}),[null===Y||void 0===Y?void 0:Y.length,t,o,null===i||void 0===i?void 0:i._id,null===i||void 0===i?void 0:i.insurance]),le=(0,u.useCallback)(((e,n)=>{t.onResetPage(),L((i=>({...i,[e]:n})))}),[t]),re=(0,u.useCallback)((()=>{L(M)}),[]),ae=(0,u.useCallback)(((e,n)=>{le("status",n)}),[le]),se=null===i||void 0===i?void 0:i.name_english;return Q?(0,H.jsx)(r.a,{}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(j.Z,{maxWidth:!B.themeStretch&&"lg",children:[(0,H.jsx)(F.Z,{heading:"".concat(se," Insurance"),links:[{name:"dashboard",href:C.H.superadmin.root},{name:"Unit Services",href:C.H.superadmin.unitservices.root},{name:J("".concat(se," Insurance"))}],action:(0,H.jsx)(m.Z,{component:Z.r,onClick:U.onOpen,variant:"contained",startIcon:(0,H.jsx)(R.Z,{icon:"mingcute:add-line"}),children:"New Insurance"}),sx:{mb:{xs:3,md:5}}}),(0,H.jsxs)(p.Z,{children:[(0,H.jsx)(h.Z,{value:T.status,onChange:ae,sx:{px:2.5,boxShadow:e=>"inset 0 -2px 0 0 ".concat((0,x.Fq)(e.palette.grey[500],.08))},children:N.map((e=>{var n;return(0,H.jsx)(v.Z,{iconPosition:"end",value:e.value,label:e.label,icon:(0,H.jsxs)(k.Z,{variant:"all"===e.value||e.value===T.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&(null===i||void 0===i||null===(n=i.insurance)||void 0===n?void 0:n.length),"active"===e.value&&(null===i||void 0===i?void 0:i.insurance.filter((e=>"active"===e.status)).length),"inactive"===e.value&&(null===i||void 0===i?void 0:i.insurance.filter((e=>"inactive"===e.status)).length)]})},e.value)}))}),(0,H.jsx)(W.Z,{onPrint:ie,filters:T,onFilters:le,onDownload:()=>{const e=null===G||void 0===G?void 0:G.reduce(((e,n)=>{var i,o;return e.push({code:n.code,name:n.name_english,category:null===(i=n.category)||void 0===i?void 0:i.name_english,symptoms:null===(o=n.symptoms)||void 0===o?void 0:o.map((e=>null===e||void 0===e?void 0:e.name_english))}),e}),[]),n=a.P6.book_new(),i=a.P6.json_to_sheet(e);a.P6.book_append_sheet(n,i,"Sheet 1");const o=a.cW(n,{bookType:"xlsx",type:"array"}),t=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,s.saveAs)(t,"unitservicesTable.xlsx")},canReset:ee,onResetFilters:re}),ee&&(0,H.jsx)(q.Z,{filters:T,onFilters:le,onResetFilters:re,results:null===G||void 0===G?void 0:G.length,sx:{p:2.5,pt:0}}),(0,H.jsx)(b.Z,{children:(0,H.jsx)(D.Z,{children:(0,H.jsxs)(g.Z,{ref:A,size:t.dense?"small":"medium",children:[(0,H.jsx)(O.K,{order:t.order,orderBy:t.orderBy,headLabel:z,rowCount:null===G||void 0===G?void 0:G.length,numSelected:t.selected.length,onSort:t.onSort}),(0,H.jsxs)(w.Z,{children:[null===G||void 0===G||null===(n=G.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage))||void 0===n?void 0:n.map((e=>(0,H.jsx)(E,{row:e,filters:T,setFilters:L,onSelectRow:()=>t.onSelectRow(null===e||void 0===e?void 0:e._id),onDeleteRow:()=>te(null===e||void 0===e?void 0:e._id)},null===e||void 0===e?void 0:e._id))),(0,H.jsx)(O.$W,{height:X,emptyRows:(0,O.fQ)(t.page,t.rowsPerPage,null===i||void 0===i?void 0:i.insurance.length)}),(0,H.jsx)(O.et,{notFound:ne})]})]})})}),(0,H.jsx)(O.S_,{count:null===G||void 0===G?void 0:G.length,page:t.page,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onRowsPerPageChange:t.onChangeRowsPerPage,dense:t.dense,onChangeDense:t.onChangeDense})]})]}),(0,H.jsx)(I.Z,{open:U.open,onClose:U.onClose,arrow:"right-top",children:(0,H.jsx)("div",{style:{maxHeight:"150px",overflowY:"auto",scrollbarWidth:"thin",scrollbarColor:"darkgray lightgray"},children:null===V||void 0===V?void 0:V.map((e=>(0,H.jsx)(f.Z,{onClick:()=>oe(e._id),children:null===e||void 0===e?void 0:e.name_english})))})})]})}function Q(){const e=(0,t.UO)(),{id:n}=e,{data:i,loading:a,refetch:s}=(0,l.V5)(n),d=(null===i||void 0===i?void 0:i.name_english)||"unit service";return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(o.ql,{children:(0,H.jsxs)("title",{children:[" ",d," Accounting"]})}),a&&(0,H.jsx)(r.a,{}),!a&&(0,H.jsx)(K,{unitServiceData:i,refetch:s})]})}},81653:(e,n,i)=>{i.d(n,{Z:()=>p});var o=i(72791),t=i(36314),l=i(13838),r=i(82626),a=i(48550),s=i(13400),d=i(63466),c=i(76932),u=i(40268),v=i(24845),h=i(80184);function p(e){let{filters:n,onFilters:i,onPrint:p,onDownload:g,canReset:m,onResetFilters:x}=e;const f=(0,v.S)(),{t:j}=(0,c.qM)(),w=(0,o.useCallback)((e=>{i("name",e.target.value)}),[i]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(t.Z,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[(0,h.jsxs)(t.Z,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[(0,h.jsx)(a.Z,{fullWidth:!0,value:n.name,onChange:w,placeholder:j("Search name or number..."),InputProps:{startAdornment:(0,h.jsx)(d.Z,{position:"start",children:(0,h.jsx)(u.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),(0,h.jsx)(s.Z,{onClick:f.onOpen,children:(0,h.jsx)(u.Z,{icon:"eva:more-vertical-fill"})})]}),m&&(0,h.jsx)(l.Z,{color:"error",sx:{flexShrink:0},onClick:x,startIcon:(0,h.jsx)(u.Z,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]}),(0,h.jsxs)(v.Z,{open:f.open,onClose:f.onClose,arrow:"right-top",sx:{width:140},children:[(0,h.jsxs)(r.Z,{onClick:()=>{p(),f.onClose()},children:[(0,h.jsx)(u.Z,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),(0,h.jsxs)(r.Z,{onClick:()=>{g(),f.onClose()},children:[(0,h.jsx)(u.Z,{icon:"solar:import-bold"}),"Import"]})]})]})}},6385:(e,n,i)=>{i.d(n,{Z:()=>r});var o=i(55294),t=i(88329),l=i(33805);async function r(e){let{setData:n,setError:i,method:r,path:a,data:s}=e;const d="".concat(l.E0).concat(a),c=t.Z.get("user_token"),u=await(0,o.Z)({method:r,url:d,headers:{authorization:"Bearer ".concat(c)},data:s});return n&&n(u.data),i&&i(u.data),u}},88329:(e,n,i)=>{function o(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)e[o]=i[o]}return e}i.d(n,{Z:()=>t});var t=function e(n,i){function t(e,t,l){if("undefined"!==typeof document){"number"===typeof(l=o({},i,l)).expires&&(l.expires=new Date(Date.now()+864e5*l.expires)),l.expires&&(l.expires=l.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var a in l)l[a]&&(r+="; "+a,!0!==l[a]&&(r+="="+l[a].split(";")[0]));return document.cookie=e+"="+n.write(t,e)+r}}return Object.create({set:t,get:function(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var i=document.cookie?document.cookie.split("; "):[],o={},t=0;t<i.length;t++){var l=i[t].split("="),r=l.slice(1).join("=");try{var a=decodeURIComponent(l[0]);if(o[a]=n.read(r,a),e===a)break}catch(s){}}return e?o[e]:o}},remove:function(e,n){t(e,"",o({},n,{expires:-1}))},withAttributes:function(n){return e(this.converter,o({},this.attributes,n))},withConverter:function(n){return e(o({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(n)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}}]);
//# sourceMappingURL=616.1a12aaab.chunk.js.map
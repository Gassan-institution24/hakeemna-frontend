"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[9737],{2540:(e,n,t)=>{t.d(n,{l2:()=>r});var l=t(82599),a=t(54690),o=t(85375),s=t(30250);function r(e,n){const t=(new Date).getFullYear(),r=e?(0,l.Z)(e):null,i=n?(0,l.Z)(n):null,d=t===r&&t===i,c=!(!e||!n)&&(0,a.Z)(new Date(e),new Date(n)),u=!(!e||!n)&&(0,o.Z)(new Date(e),new Date(n));return d?u?c?(0,s.Mu)(n,"dd MMM yy"):"".concat((0,s.Mu)(e,"dd")," - ").concat((0,s.Mu)(n,"dd MMM yy")):"".concat((0,s.Mu)(e,"dd MMM")," - ").concat((0,s.Mu)(n,"dd MMM yy")):"".concat((0,s.Mu)(e,"dd MMM yy")," - ").concat((0,s.Mu)(n,"dd MMM yy"))}t(80184);t(72791)},27356:(e,n,t)=>{t.d(n,{Z:()=>i});var l=t(68870),a=t(36314),o=t(12065),s=t(4567),r=t(80184);function i(e){let{title:n,imgUrl:t,action:i,filled:d,description:c,sx:u,...h}=e;return(0,r.jsxs)(a.Z,{flexGrow:1,alignItems:"center",justifyContent:"center",sx:{px:3,height:1,...d&&{borderRadius:2,bgcolor:e=>(0,o.Fq)(e.palette.grey[500],.04),border:e=>"dashed 1px ".concat((0,o.Fq)(e.palette.grey[500],.08))},...u},...h,children:[(0,r.jsx)(l.Z,{component:"img",alt:"empty content",src:t||"/assets/icons/empty/ic_content.svg",sx:{width:1,maxWidth:160}}),n&&(0,r.jsx)(s.Z,{variant:"h6",component:"span",sx:{mt:1,color:"text.disabled",textalign:"center"},children:n}),c&&(0,r.jsx)(s.Z,{variant:"caption",sx:{mt:1,color:"text.disabled",textalign:"center"},children:c}),i&&i]})}},31092:(e,n,t)=>{t.d(n,{Z:()=>l.Z});var l=t(27356)},38062:(e,n,t)=>{function l(e,n,t){return e?Math.max(0,(1+e)*n-t):0}function a(e,n,t){return null===e[t]?1:null===n[t]||n[t]<e[t]?-1:n[t]>e[t]?1:0}function o(e,n){return"desc"===e?(e,t)=>a(e,t,n):(e,t)=>-a(e,t,n)}t.d(n,{$W:()=>p,K:()=>Z,et:()=>x,S_:()=>S,Z4:()=>C,fQ:()=>l,sQ:()=>o,x6:()=>r});var s=t(72791);function r(e){const[n,t]=(0,s.useState)(!(null===e||void 0===e||!e.defaultDense)),[l,a]=(0,s.useState)((null===e||void 0===e?void 0:e.defaultCurrentPage)||0),[o,r]=(0,s.useState)((null===e||void 0===e?void 0:e.defaultOrderBy)||"name"),[i,d]=(0,s.useState)((null===e||void 0===e?void 0:e.defaultRowsPerPage)||5),[c,u]=(0,s.useState)((null===e||void 0===e?void 0:e.defaultOrder)||"asc"),[h,x]=(0,s.useState)((null===e||void 0===e?void 0:e.defaultSelected)||[]),p=(0,s.useCallback)((e=>{""!==e&&(u(o===e&&"asc"===c?"desc":"asc"),r(e))}),[c,o]),g=(0,s.useCallback)((e=>{const n=h.includes(e)?h.filter((n=>n!==e)):[...h,e];x(n)}),[h]),v=(0,s.useCallback)((e=>{a(0),d(parseInt(e.target.value,10))}),[]),m=(0,s.useCallback)((e=>{t(e.target.checked)}),[]),j=(0,s.useCallback)(((e,n)=>{x(e?n:[])}),[]),f=(0,s.useCallback)(((e,n)=>{a(n)}),[]),Z=(0,s.useCallback)((()=>{a(0)}),[]),w=(0,s.useCallback)((e=>{x([]),l&&e<2&&a(l-1)}),[l]),b=(0,s.useCallback)((e=>{let{totalRows:n,totalRowsInPage:t,totalRowsFiltered:o}=e;const s=h.length;if(x([]),l)if(s===t)a(l-1);else if(s===o)a(0);else if(s>t){const e=Math.ceil((n-s)/i)-1;a(e)}}),[l,i,h.length]);return{dense:n,order:c,page:l,orderBy:o,rowsPerPage:i,selected:h,onSelectRow:g,onSelectAllRows:j,onSort:p,onChangePage:f,onChangeDense:m,onResetPage:Z,onChangeRowsPerPage:v,onUpdatePageDeleteRow:w,onUpdatePageDeleteRows:b,setPage:a,setDense:t,setOrder:u,setOrderBy:r,setSelected:x,setRowsPerPage:d}}var i=t(9195),d=t(68745),c=t(76932),u=t(31092),h=t(80184);function x(e){let{notFound:n,sx:t}=e;const{t:l}=(0,c.qM)(),{currentLang:a}=(0,c.nt)();a.value;return(0,h.jsx)(i.Z,{children:n?(0,h.jsx)(d.Z,{colSpan:12,children:(0,h.jsx)(u.Z,{filled:!0,title:l("No Data"),sx:{py:10,...t}})}):(0,h.jsx)(d.Z,{colSpan:12,sx:{p:0}})})}function p(e){let{emptyRows:n,height:t}=e;return n?(0,h.jsx)(i.Z,{sx:{...t&&{height:t*n}},children:(0,h.jsx)(d.Z,{colSpan:9})}):null}var g=t(68870),v=t(13034),m=t(56890),j=t(80720);const f={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function Z(e){let{order:n,orderBy:t,rowCount:l=0,headLabel:a,numSelected:o=0,onSort:s,onSelectAllRows:r,sx:c}=e;return(0,h.jsx)(m.Z,{sx:c,children:(0,h.jsxs)(i.Z,{children:[r&&(0,h.jsx)(d.Z,{padding:"checkbox",children:(0,h.jsx)(v.Z,{indeterminate:!!o&&o<l,checked:!!l&&o===l,onChange:e=>r(e.target.checked)})}),a.map((e=>(0,h.jsx)(d.Z,{align:e.align||"center",sortDirection:t===e.id&&n,sx:{width:e.width,minWidth:e.minWidth},lang:"ar",children:s?(0,h.jsxs)(j.Z,{hideSortIcon:!0,active:t===e.id,direction:t===e.id?n:"asc",onClick:()=>s(e.id),lang:"ar",children:[e.label,t===e.id?(0,h.jsx)(g.Z,{sx:{...f},children:"desc"===n?"sorted descending":"sorted ascending"}):null]}):e.label},e.id)))]})})}var w=t(36314),b=t(4567);function C(e){let{dense:n,action:t,rowCount:l,numSelected:a,onSelectAllRows:o,sx:s,color:r,...i}=e;const{t:d}=(0,c.qM)(),{currentLang:u}=(0,c.nt)();u.value;return a?(0,h.jsxs)(w.Z,{direction:"row",alignItems:"center",sx:{pl:1,pr:2,top:0,left:0,width:1,zIndex:9,height:58,position:"absolute",bgcolor:"".concat(r,".lighter"),...n&&{height:38},...s},...i,children:[(0,h.jsx)(v.Z,{indeterminate:!!a&&a<l,checked:!!l&&a===l,onChange:e=>o(e.target.checked)}),(0,h.jsxs)(b.Z,{variant:"subtitle2",sx:{ml:2,flexGrow:1,color:"".concat(r,".main"),...n&&{ml:3}},children:[a," ",d("selected")]}),t&&t]}):null}var y=t(89891),P=t(5446),_=t(25801);function S(e){let{dense:n,onChangeDense:t,rowsPerPageOptions:l=[5,10,25],sx:a,...o}=e;const{t:s}=(0,c.qM)();return(0,h.jsxs)(g.Z,{sx:{position:"relative",...a},children:[(0,h.jsx)(P.Z,{rowsPerPageOptions:l,component:"div",...o,sx:{borderTopColor:"transparent"}}),t&&(0,h.jsx)(_.Z,{label:s("dense"),control:(0,h.jsx)(y.Z,{checked:n,onChange:t}),sx:{pl:2,py:1.5,top:0,position:{sm:"absolute"}}})]})}},99737:(e,n,t)=>{t.r(n),t.d(n,{default:()=>H});var l=t(6907),a=t(19208),o=t(66833),s=t(35456),r=t(34045),i=t(64802),d=t(61146),c=t(72791),u=t(61474),h=t(2101),x=t(57621),p=t(79836),g=t(12065),v=t(89164),m=t(53382),j=t(39281),f=t(84954),Z=t(10261),w=t(25279),b=t(38062),C=t(76932),y=t(68870),P=t(10901),_=t(9195),S=t(68745),k=t(13400),R=t(30250),D=t(40268),M=t(24845),F=t(80184);function O(e){let{row:n,onEditRow:t,setFilters:l,filters:a}=e;const{code:o,department:s,appointment:r,employee:i,status:d,title:c,Body:u,Rate:h,created_at:x,user_creation:p,ip_address_user_creation:g}=n,{t:v}=(0,C.qM)(),m=(0,M.S)(),j=(0,M.S)(),Z=(0,F.jsxs)(_.Z,{hover:!0,children:[(0,F.jsx)(S.Z,{align:"center",children:o}),(0,F.jsx)(S.Z,{align:"center",onClick:()=>l({...a,name:null===s||void 0===s?void 0:s.name_english}),children:null===s||void 0===s?void 0:s.name_english}),(0,F.jsx)(S.Z,{align:"center",onClick:()=>l({...a,name:null===r||void 0===r?void 0:r.name_english}),children:null===r||void 0===r?void 0:r.name_english}),(0,F.jsx)(S.Z,{align:"center",onClick:()=>l({...a,name:null===i||void 0===i?void 0:i.name_english}),children:null===i||void 0===i?void 0:i.name_english}),(0,F.jsx)(S.Z,{align:"center",children:c}),(0,F.jsx)(S.Z,{align:"center",children:(0,F.jsx)(f.Z,{variant:"soft",color:("read"===d?"success":"unread"===d&&"error")||"default",children:d})}),(0,F.jsx)(S.Z,{align:"center",children:u}),(0,F.jsx)(S.Z,{children:(0,F.jsx)(P.Z,{size:"small",readOnly:!0,value:h,precision:.1,max:5})}),(0,F.jsx)(S.Z,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,F.jsx)(k.Z,{color:m.open?"inherit":"default",onClick:j.onOpen,children:(0,F.jsx)(D.Z,{icon:"carbon:data-quality-definition"})})})]});return(0,F.jsxs)(F.Fragment,{children:[Z,(0,F.jsxs)(M.Z,{open:j.open,onClose:j.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,F.jsx)(y.Z,{sx:{fontWeight:600},children:"Creation Time:"}),(0,F.jsx)(y.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,R.zM)(x)}),(0,F.jsx)(y.Z,{sx:{pt:1,fontWeight:600},children:"Creator:"}),(0,F.jsx)(y.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===p||void 0===p?void 0:p.email}),(0,F.jsx)(y.Z,{sx:{pt:1,fontWeight:600},children:"Creator IP:"}),(0,F.jsx)(y.Z,{sx:{pb:1},children:g})]})]})}var L=t(36314),B=t(13838),I=t(58406),W=t(13034),q=t(82626),z=t(48550),T=t(62861),A=t(68096),U=t(77196),E=t(63466);function G(e){let{filters:n,onFilters:t,canReset:l,onResetFilters:a}=e;const{t:o}=(0,C.qM)(),s=(0,c.useCallback)((e=>{t("name",e.target.value)}),[t]),r=(0,c.useCallback)((e=>{t("rate","string"===typeof e.target.value?e.target.value.split(","):e.target.value)}),[t]);return(0,F.jsxs)(L.Z,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[(0,F.jsxs)(A.Z,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[(0,F.jsx)(T.Z,{children:"rate"}),(0,F.jsx)(I.Z,{multiple:!0,value:n.rate,onChange:r,input:(0,F.jsx)(U.Z,{label:"Rate"}),renderValue:e=>e.map((e=>e)).join(", "),MenuProps:{PaperProps:{sx:{maxHeight:240}}},children:[1,2,3,4,5].map((e=>(0,F.jsxs)(q.Z,{value:e,children:[(0,F.jsx)(W.Z,{disableRipple:!0,size:"small",checked:n.rate.includes(e)}),(0,F.jsx)(P.Z,{size:"small",readOnly:!0,value:e,precision:.1,max:5})]},e)))})]}),(0,F.jsx)(L.Z,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:(0,F.jsx)(z.Z,{fullWidth:!0,value:n.name,onChange:s,placeholder:o("Search name or number..."),InputProps:{startAdornment:(0,F.jsx)(E.Z,{position:"start",children:(0,F.jsx)(D.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),l&&(0,F.jsx)(B.Z,{color:"error",sx:{flexShrink:0},onClick:a,startIcon:(0,F.jsx)(D.Z,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})}var Q=t(48566);const K=[{id:"code",label:"Code"},{id:"department",label:"Department"},{id:"appointments",label:"Appointments"},{id:"employees",label:"Employees"},{id:"title",label:"Title"},{id:"status",label:"Status"},{id:"Body",label:"Body"},{id:"Rate",label:"Rate"},{id:"",width:88}],$={name:"",status:"all",rate:[]},N=[{value:"all",label:"All"},{value:"read",label:"Read"},{value:"unread",label:"Unread"}];function V(e){let{unitServiceData:n}=e;const t=(0,b.x6)({defaultOrderBy:"code"}),l=(0,a.UO)(),{id:y}=l,P=(0,c.useRef)(),_=(0,w.K$)(),{feedbackData:S,loading:k}=(0,o.Ld)(y),[R,D]=(0,c.useState)($),M=!(!R.startDate||!R.endDate)&&R.startDate.getTime()>R.endDate.getTime(),L=function(e){var n;let{inputData:t,comparator:l,filters:a,dateError:o}=e;const{status:s,name:r,rate:i}=a,d=null===(n=t)||void 0===n?void 0:n.map(((e,n)=>[e,n]));null===d||void 0===d||d.sort(((e,n)=>{const t=l(e[0],n[0]);return 0!==t?t:e[1]-n[1]})),t=d.map((e=>e[0])),r&&(t=t.filter((e=>{var n,t,l,a,o,s,i,d,c,u,h,x,p,g,v,m,j,f,Z;return(null===e||void 0===e||null===(n=e.department)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(t=e.department)||void 0===t||null===(l=t.name_english)||void 0===l?void 0:l.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e||null===(a=e.department)||void 0===a?void 0:a.name_arabic)&&-1!==(null===e||void 0===e||null===(o=e.department)||void 0===o||null===(s=o.name_arabic)||void 0===s?void 0:s.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e||null===(i=e.appointment)||void 0===i?void 0:i.name_english)&&-1!==(null===e||void 0===e||null===(d=e.appointment)||void 0===d||null===(c=d.name_english)||void 0===c?void 0:c.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e||null===(u=e.appointment)||void 0===u?void 0:u.name_arabic)&&-1!==(null===e||void 0===e||null===(h=e.appointment)||void 0===h||null===(x=h.name_arabic)||void 0===x?void 0:x.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e||null===(p=e.employee)||void 0===p?void 0:p.name_english)&&-1!==(null===e||void 0===e||null===(g=e.employee)||void 0===g||null===(v=g.name_english)||void 0===v?void 0:v.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e||null===(m=e.employee)||void 0===m?void 0:m.name_arabic)&&-1!==(null===e||void 0===e||null===(j=e.employee)||void 0===j||null===(f=j.name_arabic)||void 0===f?void 0:f.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e?void 0:e.title)&&-1!==(null===e||void 0===e||null===(Z=e.title)||void 0===Z?void 0:Z.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===r||JSON.stringify(e.code)===r})));"all"!==s&&(t=t.filter((e=>e.status===s)));i.length>0&&(t=t.filter((e=>i.includes(e.Rate))));return t}({inputData:S,comparator:(0,b.sQ)(t.order,t.orderBy),filters:R,dateError:M}),{t:B}=(0,C.qM)(),I=t.dense?52:72,W=!(null===R||void 0===R||!R.name)||"all"!==R.status||R.rate.length>0,q=!L.length&&W||!L.length,z=(0,d.useReactToPrint)({content:()=>P.current}),T=(0,c.useCallback)(((e,n)=>{t.onResetPage(),D((t=>({...t,[e]:n})))}),[t]),A=(0,c.useCallback)((()=>{D($)}),[]),U=(0,c.useCallback)(((e,n)=>{T("status",n)}),[T]);null===n||void 0===n||n.name_english;return k?(0,F.jsx)(s.a,{}):(0,F.jsx)(v.Z,{maxWidth:!_.themeStretch&&"lg",children:(0,F.jsxs)(x.Z,{children:[(0,F.jsx)(h.Z,{value:R.status,onChange:U,sx:{px:2.5,boxShadow:e=>"inset 0 -2px 0 0 ".concat((0,g.Fq)(e.palette.grey[500],.08))},children:N.map((e=>(0,F.jsx)(u.Z,{iconPosition:"end",value:e.value,label:e.label,icon:(0,F.jsxs)(f.Z,{variant:"all"===e.value||e.value===R.status?"filled":"soft",color:("read"===e.value?"success":"unread"===e.value&&"error")||"default",children:["all"===e.value&&S.length,"read"===e.value&&S.filter((e=>"read"===e.status)).length,"unread"===e.value&&S.filter((e=>"unread"===e.status)).length]})},e.value)))}),(0,F.jsx)(G,{onPrint:z,filters:R,onFilters:T,onDownload:()=>{const e=L.reduce(((e,n)=>{var t,l;return e.push({code:n.code,name:n.name_english,category:null===(t=n.category)||void 0===t?void 0:t.name_english,symptoms:null===(l=n.symptoms)||void 0===l?void 0:l.map((e=>null===e||void 0===e?void 0:e.name_english))}),e}),[]),n=r.P6.book_new(),t=r.P6.json_to_sheet(e);r.P6.book_append_sheet(n,t,"Sheet 1");const l=r.cW(n,{bookType:"xlsx",type:"array"}),a=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,i.saveAs)(a,"unitservicesTable.xlsx")},canReset:W,onResetFilters:A}),W&&(0,F.jsx)(Q.Z,{filters:R,onFilters:T,onResetFilters:A,results:L.length,sx:{p:2.5,pt:0}}),(0,F.jsx)(j.Z,{children:(0,F.jsx)(Z.Z,{children:(0,F.jsxs)(p.Z,{ref:P,size:t.dense?"small":"medium",children:[(0,F.jsx)(b.K,{order:t.order,orderBy:t.orderBy,headLabel:K,rowCount:L.length,numSelected:t.selected.length,onSort:t.onSort}),(0,F.jsxs)(m.Z,{children:[L.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage).map((e=>(0,F.jsx)(O,{row:e,filters:R,setFilters:D,onSelectRow:()=>t.onSelectRow(e._id)},e._id))),(0,F.jsx)(b.$W,{height:I,emptyRows:(0,b.fQ)(t.page,t.rowsPerPage,S.length)}),(0,F.jsx)(b.et,{notFound:q})]})]})})}),(0,F.jsx)(b.S_,{count:L.length,page:t.page,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onRowsPerPageChange:t.onChangeRowsPerPage,dense:t.dense,onChangeDense:t.onChangeDense})]})})}function H(){const e=(0,a.UO)(),{id:n}=e,{data:t,loading:r}=(0,o.V5)(n),i=(null===t||void 0===t?void 0:t.name_english)||"unit service";return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(l.ql,{children:(0,F.jsxs)("title",{children:[" ",i," Feedback "]})}),r&&(0,F.jsx)(s.a,{}),!r&&(0,F.jsx)(V,{unitServiceData:t})]})}},48566:(e,n,t)=>{t.d(n,{Z:()=>u});var l=t(68870),a=t(85771),o=t(27938),s=t(36314),r=t(13838),i=t(40268),d=t(2540),c=t(80184);function u(e){let{filters:n,onFilters:t,onResetFilters:o,results:u,...x}=e;const p=(0,d.l2)(n.startDate,n.endDate);return(0,c.jsxs)(s.Z,{spacing:1.5,...x,children:[(0,c.jsxs)(l.Z,{sx:{typography:"body2"},children:[(0,c.jsx)("strong",{children:u}),(0,c.jsx)(l.Z,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),(0,c.jsxs)(s.Z,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:["all"!==n.status&&(0,c.jsx)(h,{label:"Status:",children:(0,c.jsx)(a.Z,{size:"small",label:n.status,onDelete:()=>{t("status","all")}})}),n.startDate&&n.endDate&&(0,c.jsx)(h,{label:"Date:",children:(0,c.jsx)(a.Z,{size:"small",label:p,onDelete:()=>{t("startDate",null),t("endDate",null)}})}),(0,c.jsx)(r.Z,{color:"error",onClick:o,startIcon:(0,c.jsx)(i.Z,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}function h(e){let{label:n,children:t,sx:a,...r}=e;return(0,c.jsxs)(s.Z,{component:o.Z,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...a},...r,children:[(0,c.jsx)(l.Z,{component:"span",sx:{typography:"subtitle2"},children:n}),(0,c.jsx)(s.Z,{spacing:1,direction:"row",flexWrap:"wrap",children:t})]})}}}]);
//# sourceMappingURL=9737.6dc98a81.chunk.js.map
"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[62226],{22698:(e,n,l)=>{l.d(n,{A:()=>z});var s=l(58168),o=l(98587),i=l(65043),t=l(58387),r=l(98610),a=l(88092),d=l(34535),c=l(98206),u=l(94496),p=l(67266),m=l(66734),x=l(70579);const h=(0,m.A)((0,x.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var v=l(96030);const g=["slots","slotProps"],j=(0,d.Ay)(v.A)((e=>{let{theme:n}=e;return(0,s.A)({display:"flex",marginLeft:`calc(${n.spacing(1)} * 0.5)`,marginRight:`calc(${n.spacing(1)} * 0.5)`},"light"===n.palette.mode?{backgroundColor:n.palette.grey[100],color:n.palette.grey[700]}:{backgroundColor:n.palette.grey[700],color:n.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,s.A)({},"light"===n.palette.mode?{backgroundColor:n.palette.grey[200]}:{backgroundColor:n.palette.grey[600]}),"&:active":(0,s.A)({boxShadow:n.shadows[0]},"light"===n.palette.mode?{backgroundColor:(0,p.tL)(n.palette.grey[200],.12)}:{backgroundColor:(0,p.tL)(n.palette.grey[600],.12)})})})),y=(0,d.Ay)(h)({width:24,height:16});const f=function(e){const{slots:n={},slotProps:l={}}=e,i=(0,o.A)(e,g),t=e;return(0,x.jsx)("li",{children:(0,x.jsx)(j,(0,s.A)({focusRipple:!0},i,{ownerState:t,children:(0,x.jsx)(y,(0,s.A)({as:n.CollapsedIcon,ownerState:t},l.collapsedIcon))}))})};var A=l(92532),b=l(72372);function w(e){return(0,b.Ay)("MuiBreadcrumbs",e)}const _=(0,A.A)("MuiBreadcrumbs",["root","ol","li","separator"]),k=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],C=(0,d.Ay)(u.A,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,n)=>[{[`& .${_.li}`]:n.li},n.root]})({}),q=(0,d.Ay)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,n)=>n.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),I=(0,d.Ay)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,n)=>n.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function S(e,n,l,s){return e.reduce(((o,i,t)=>(t<e.length-1?o=o.concat(i,(0,x.jsx)(I,{"aria-hidden":!0,className:n,ownerState:s,children:l},`separator-${t}`)):o.push(i),o)),[])}const z=i.forwardRef((function(e,n){const l=(0,c.b)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:u,component:p="nav",slots:m={},slotProps:h={},expandText:v="Show path",itemsAfterCollapse:g=1,itemsBeforeCollapse:j=1,maxItems:y=8,separator:A="/"}=l,b=(0,o.A)(l,k),[_,I]=i.useState(!1),z=(0,s.A)({},l,{component:p,expanded:_,expandText:v,itemsAfterCollapse:g,itemsBeforeCollapse:j,maxItems:y,separator:A}),R=(e=>{const{classes:n}=e;return(0,r.A)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},w,n)})(z),L=(0,a.A)({elementType:m.CollapsedIcon,externalSlotProps:h.collapsedIcon,ownerState:z}),Y=i.useRef(null),P=i.Children.toArray(d).filter((e=>i.isValidElement(e))).map(((e,n)=>(0,x.jsx)("li",{className:R.li,children:e},`child-${n}`)));return(0,x.jsx)(C,(0,s.A)({ref:n,component:p,color:"text.secondary",className:(0,t.A)(R.root,u),ownerState:z},b,{children:(0,x.jsx)(q,{className:R.ol,ref:Y,ownerState:z,children:S(_||y&&P.length<=y?P:(e=>j+g>=e.length?e:[...e.slice(0,j),(0,x.jsx)(f,{"aria-label":v,slots:{CollapsedIcon:m.CollapsedIcon},slotProps:{collapsedIcon:L},onClick:()=>{I(!0);const e=Y.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-g,e.length)])(P),R.separator,A,z)})}))}))},62226:(e,n,l)=>{l.r(n),l.d(n,{default:()=>m});var s=l(29490),o=l(77224),i=l(48407),t=l(67132),r=l(7625),a=l(60778),d=l(83858),c=l(92974),u=l(70579);function p(){const e=(0,t.g)(),{id:n}=e,{data:l}=(0,r.Oe9)(n),{t:s}=(0,a.WD)();return(0,u.jsxs)(o.A,{maxWidth:"xl",children:[(0,u.jsx)(d.A,{heading:s("update checklist"),links:[{name:s("dashboard"),href:i.f.employee.root},{name:s("checklists"),href:i.f.employee.checklist.root},{name:s("update")}],sx:{mb:{xs:3,md:5}}}),l&&(0,u.jsx)(c.A,{currentRow:l})]})}function m(){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(s.mg,{children:[(0,u.jsx)("title",{children:" Dashboard : Edit checklist"}),(0,u.jsx)("meta",{name:"description",content:"meta"})]}),(0,u.jsx)(p,{})]})}},83858:(e,n,l)=>{l.d(n,{A:()=>s.A});var s=l(91720)},91720:(e,n,l)=>{l.d(n,{A:()=>u});var s=l(81e3),o=l(88446),i=l(74600),t=l(94496),r=l(22698),a=l(65381),d=l(70579);function c(e){let{link:n,activeLast:l,disabled:i}=e;const t={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...i&&!l&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},r=(0,d.jsxs)(d.Fragment,{children:[n.icon&&(0,d.jsx)(s.A,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:n.icon}),n.name]});return n.href?(0,d.jsx)(o.A,{component:a.W,href:n.href,sx:t,children:r}):(0,d.jsxs)(s.A,{sx:t,children:[" ",r," "]})}function u(e){let{links:n,action:l,heading:a,moreLink:u,activeLast:m,sx:x,...h}=e;const v=n&&n[n.length-1].name;return(0,d.jsxs)(s.A,{sx:{...x},children:[(0,d.jsxs)(i.A,{direction:"row",alignItems:"center",children:[(0,d.jsxs)(s.A,{sx:{flexGrow:1,display:"flex",gap:{md:3},alignItems:{md:"center"},flexDirection:{xs:"column",md:"row"}},children:[a&&(0,d.jsx)(t.A,{textTransform:"capitalize",variant:"h4",gutterBottom:!0,children:a}),n&&!!n.length&&(0,d.jsx)(r.A,{separator:(0,d.jsx)(p,{}),...h,children:null===n||void 0===n?void 0:n.map(((e,n)=>(0,d.jsx)(c,{link:e,activeLast:m,disabled:e.name===v},n)))})]}),l&&(0,d.jsxs)(s.A,{sx:{flexShrink:0,textTransform:"capitalize"},children:[" ",l," "]})]}),!!u&&(0,d.jsx)(s.A,{sx:{mt:2},children:u.map(((e,n)=>(0,d.jsx)(o.A,{href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},n)))})]})}function p(){return(0,d.jsx)(s.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}},92974:(e,n,l)=>{l.d(n,{A:()=>S});var s=l(80899),o=l(46987),i=l(65043),t=l(18403),r=l(24858),a=l(70837),d=l(12110),c=l(74600),u=l(38246),p=l(77224),m=l(94496),x=l(94814),h=l(39336),v=l(81e3),g=l(49633),j=l(14256),y=l(17392),f=l(48407),A=l(67132),b=l(31673),w=l(75139),_=l(60778),k=l(7625),C=l(35151),q=l(59699),I=l(70579);function S(e){var n,l,j,y,S,R;let{currentRow:L}=e;const Y=(0,A.rd)(),{enqueueSnackbar:P}=(0,o.dh)(),{user:T}=(0,w.Z)(),{t:$}=(0,_.WD)(),{currentLang:B}=(0,_.jc)(),M="ar"===B.value,N=s.Ik().shape({title:s.Yj().nullable().required("title is required"),description:s.Yj(),unit_service:s.Yj().nullable(),department:s.Yj().nullable(),work_group:s.Yj().nullable(),general:s.lc(),questions:s.YO().of(s.Ik({question:s.Yj().required($("required field")),answer_way:s.Yj().required($("required field")),category:s.Yj(),options:s.YO().nullable()}))}),{workGroupsData:W}=(0,k.VnY)(null===T||void 0===T||null===(n=T.employee)||void 0===n||null===(l=n.employee_engagements)||void 0===l||null===(j=l[null===T||void 0===T?void 0:T.employee.selected_engagement])||void 0===j?void 0:j._id),D=(0,i.useMemo)((()=>({title:(null===L||void 0===L?void 0:L.title)||"",unit_service:(null===L||void 0===L?void 0:L.unit_service)||null,department:(null===L||void 0===L?void 0:L.department)||null,work_group:(null===L||void 0===L?void 0:L.work_group)||null,general:(null===L||void 0===L?void 0:L.general)||!1,description:(null===L||void 0===L?void 0:L.description)||"",questions:(null===L||void 0===L?void 0:L.questions)||[{question:"",answer_way:"Text",category:"",options:[""]}]})),[L]),F=(0,r.mN)({resolver:(0,t.t)(N),defaultValues:D}),{reset:O,handleSubmit:E,control:V,watch:Z,setValue:G,formState:{isSubmitting:H}}=F,X=Z(),{fields:J,append:K,remove:Q,move:U}=(0,r.jz)({control:V,name:"questions"});(0,i.useEffect)((()=>{var e,n,l,s;O({title:(null===L||void 0===L?void 0:L.title)||"",unit_service:(null===L||void 0===L?void 0:L.unit_service)||(null===T||void 0===T||null===(e=T.employee)||void 0===e||null===(n=e.employee_engagements)||void 0===n||null===(l=n[null===T||void 0===T?void 0:T.employee.selected_engagement])||void 0===l||null===(s=l.unit_service)||void 0===s?void 0:s._id),department:(null===L||void 0===L?void 0:L.department)||null,work_group:(null===L||void 0===L?void 0:L.work_group)||null,general:(null===L||void 0===L?void 0:L.general)||!1,description:(null===L||void 0===L?void 0:L.description)||"",questions:(null===L||void 0===L?void 0:L.questions)||[{question:"",answer_way:"Text",category:"",options:[""]}]})}),[L,O,null===T||void 0===T?void 0:T.employee]);const ee=E((async e=>{try{if(L&&L.user_creation===T._id)await b.Ay.patch(b.vZ.checklist.one(L._id),e),P($("updated successfuly"));else{var n,l,s;delete e._id;const o={...e,questions:e.questions.map((e=>({question:null===e||void 0===e?void 0:e.question,answer_way:null===e||void 0===e?void 0:e.answer_way,options:null===e||void 0===e?void 0:e.options}))),employee:null===T||void 0===T||null===(n=T.employee)||void 0===n||null===(l=n.employee_engagements)||void 0===l||null===(s=l[null===T||void 0===T?void 0:T.employee.selected_engagement])||void 0===s?void 0:s._id};await b.Ay.post(b.vZ.checklist.all,o),P($("created successfuly"))}O(),Y.push(f.f.employee.checklist.root)}catch(o){P(o.message,{variant:"error"}),console.error(o)}}));return(0,I.jsx)(p.A,{maxWidth:"xl",children:(0,I.jsxs)(q.Ay,{methods:F,children:[(0,I.jsx)(d.A,{children:(0,I.jsxs)(c.A,{direction:{xs:"column",md:"row"},spacing:2,sx:{width:1,p:3},alignItems:"center",children:[(0,I.jsxs)(c.A,{spacing:2,sx:{width:1},alignItems:"center",justifyContent:"flex-start",children:[(0,I.jsx)(q.o3,{name:"title",label:$("title"),sx:{width:{md:.8,xs:1}}}),(0,I.jsx)(q.o3,{size:"small",name:"description",label:$("description"),sx:{width:{md:.7,xs:1}}})]}),(0,I.jsxs)(c.A,{sx:{width:{md:.5,xs:1},border:"0.5px dotted black",padding:2},justifyContent:"flex-end",children:[(0,I.jsxs)(m.A,{variant:"caption",mb:2,children:[$("availability and privacy"),":"]}),(0,I.jsx)(q.SF,{name:"general",label:$("available for all hakeemna community"),onChange:()=>G("general",!X.general)}),(0,I.jsx)(q.SF,{name:"unit_service",label:$("available for your unit of service employees"),onChange:()=>{var e,n,l,s;return G("unit_service",X.unit_service?null:null===T||void 0===T||null===(e=T.employee)||void 0===e||null===(n=e.employee_engagements)||void 0===n||null===(l=n[null===T||void 0===T?void 0:T.employee.selected_engagement])||void 0===l||null===(s=l.unit_service)||void 0===s?void 0:s._id)}}),(null===T||void 0===T||null===(y=T.employee)||void 0===y||null===(S=y.employee_engagements)||void 0===S||null===(R=S[null===T||void 0===T?void 0:T.employee.selected_engagement])||void 0===R?void 0:R.department)&&(0,I.jsx)(q.SF,{name:"department",label:$("available for your department employees"),onChange:()=>{var e,n,l,s;return G("department",X.department?null:null===T||void 0===T||null===(e=T.employee)||void 0===e||null===(n=e.employee_engagements)||void 0===n||null===(l=n[null===T||void 0===T?void 0:T.employee.selected_engagement])||void 0===l||null===(s=l.department)||void 0===s?void 0:s._id)}}),(0,I.jsxs)(q.tX,{size:"small",name:"work_group",label:$("available for work group"),sx:{width:{md:1,xs:1},mt:2},children:[(0,I.jsx)(x.A,{sx:{textTransform:"capitalize"},value:null,children:$("all")}),(0,I.jsx)(h.A,{}),W.map(((e,n)=>(0,I.jsx)(x.A,{value:e._id,children:M?e.name_arabic:e.name_english},n)))]})]})]})}),(0,I.jsxs)(v.A,{sx:{p:3},children:[(0,I.jsxs)(m.A,{variant:"h6",sx:{color:"text.disabled",mb:3},children:[$("questions"),":"]}),(0,I.jsx)(a.JY,{onDragEnd:e=>{e.destination&&U(e.source.index,e.destination.index)},children:(0,I.jsx)(a.gL,{droppableId:"droppable-questions",children:e=>(0,I.jsxs)(c.A,{spacing:4,...e.droppableProps,ref:e.innerRef,children:[J.map(((e,n)=>(0,I.jsx)(a.sx,{draggableId:e.id,index:n,children:e=>(0,I.jsx)(d.A,{sx:{p:3},ref:e.innerRef,...e.draggableProps,...e.dragHandleProps,children:(0,I.jsx)(c.A,{alignItems:"flex-end",spacing:1.5,children:(0,I.jsxs)(c.A,{spacing:2,sx:{width:1},children:[(0,I.jsxs)(c.A,{direction:{xs:"column",md:"row"},justifyContent:"space-between",spacing:2,sx:{width:1},children:[(0,I.jsx)(q.o3,{size:"small",name:`questions[${n}].question`,label:$("question"),InputLabelProps:{shrink:!0},sx:{width:1}}),(0,I.jsx)(q.tX,{name:`questions[${n}].answer_way`,size:"small",label:$("answer way"),InputLabelProps:{shrink:!0},sx:{width:{md:.5,xs:1}},children:["Text","Yes No","Options"].map((e=>(0,I.jsx)(x.A,{value:e,children:$(e)},e)))}),(0,I.jsx)(q.o3,{size:"small",name:`questions[${n}].category`,label:$("category"),InputLabelProps:{shrink:!0},sx:{width:{md:.5,xs:1}}}),(0,I.jsx)(g.A,{size:"small",color:"error",onClick:()=>(e=>{Q(e)})(n),children:(0,I.jsx)(C.A,{icon:"solar:trash-bin-trash-bold"})})]}),"Options"===X.questions[n].answer_way&&(0,I.jsx)(c.A,{justifyContent:"flex-end",alignItems:"start",spacing:1,sx:{width:.8},children:(0,I.jsx)(z,{index:n})})]})})})},e.id))),e.placeholder]})})}),(0,I.jsx)(h.A,{sx:{my:3,borderStyle:"dashed"}}),(0,I.jsx)(c.A,{spacing:3,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"},children:(0,I.jsx)(g.A,{size:"small",color:"primary",startIcon:(0,I.jsx)(C.A,{icon:"mingcute:add-line"}),onClick:()=>{K({question:"",answer_way:"Text",options:[""]})},sx:{flexShrink:0},children:$("add item")})})]}),(0,I.jsx)(c.A,{justifyContent:"flex-end",direction:"row",spacing:2,sx:{mt:1},children:(0,I.jsx)(u.A,{variant:"contained",loading:H,onClick:ee,children:L&&L.user_creation===T._id?$("update"):$("add")})})]})})}function z(e){let{index:n}=e;const{control:l}=(0,r.xW)(),{t:s}=(0,_.WD)(),{fields:o,append:i,remove:t}=(0,r.jz)({control:l,name:`questions[${n}].options`});return(0,I.jsxs)(I.Fragment,{children:[o.map(((e,l)=>(0,I.jsxs)(c.A,{direction:"row",alignItems:"center",children:[(0,I.jsx)(j.A,{disabled:!0}),(0,I.jsx)(q.o3,{size:"small",variant:"standard",name:`questions[${n}].options[${l}]`}),(0,I.jsx)(c.A,{direction:"row",children:(0,I.jsx)(y.A,{size:"small",color:"error",onClick:()=>(e=>{t(e)})(l),children:(0,I.jsx)(C.A,{icon:"ic:round-close"})})})]},e.id))),(0,I.jsxs)(g.A,{color:"primary",size:"small",sx:{fontSize:12},onClick:()=>{i(" ")},children:[(0,I.jsx)(C.A,{icon:"ph:plus-bold"}),s("add option")]})]})}}}]);
//# sourceMappingURL=62226.7efd85ae.chunk.js.map
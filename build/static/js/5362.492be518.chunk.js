/*! For license information please see 5362.492be518.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[5362],{85362:(e,t,n)=>{n.d(t,{Vv:()=>ge,Wl:()=>Ee,Zc:()=>Se,q8:()=>ce,Jb:()=>ze,df:()=>Be,U$:()=>_e,WX:()=>Je,HS:()=>oe,d_:()=>H,JP:()=>we});var a=n(72791),o=n(57621),s=n(79836),l=n(13838),i=n(89164),r=n(53382),c=n(39281),d=n(38072),u=n(19208),h=n(22459),x=n(30250),g=n(10261),p=n(77008),v=n(25279),m=n(73379),j=n(38062),w=n(52007),Z=n.n(w),b=n(68870),f=n(9195),C=n(68745),_=n(13400),P=n(40268),y=n(24845),k=n(80184);function R(e){let{row:t,selected:n,onViewRow:a}=e;const{tableName:o}=t,s=(0,y.S)(),l=(0,k.jsxs)(f.Z,{hover:!0,selected:n,children:[(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(b.Z,{onClick:a,sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},children:o.split("_").join(" ")})}),(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(b.Z,{children:"Note"})}),(0,k.jsx)(C.Z,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,k.jsx)(_.Z,{onClick:a,color:s.open?"inherit":"default",children:(0,k.jsx)(P.Z,{icon:"majesticons:open"})})})]});return(0,k.jsx)(k.Fragment,{children:l})}R.propTypes={onViewRow:Z().func,row:Z().object,selected:Z().bool};var S=n(36314),F=n(48550),D=n(63466),A=n(76932);function T(e){let{filters:t,onFilters:n,canReset:o,onResetFilters:s}=e;const{t:i}=(0,A.qM)(),r=(0,a.useCallback)((e=>{n("name",e.target.value)}),[n]);return(0,k.jsxs)(S.Z,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[(0,k.jsx)(S.Z,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:(0,k.jsx)(F.Z,{fullWidth:!0,value:t.name,onChange:r,placeholder:i("Search name or number..."),InputProps:{startAdornment:(0,k.jsx)(D.Z,{position:"start",children:(0,k.jsx)(P.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),o&&(0,k.jsx)(l.Z,{color:"error",sx:{flexShrink:0},onClick:s,startIcon:(0,k.jsx)(P.Z,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})}function B(e){let{filters:t,onFilters:n,onResetFilters:a,results:o,...s}=e;return(0,k.jsx)(S.Z,{spacing:1.5,...s,children:(0,k.jsxs)(b.Z,{sx:{typography:"body2"},children:[(0,k.jsx)("strong",{children:o}),(0,k.jsx)(b.Z,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]})})}const I={name:"",status:"all",startDate:null,endDate:null};function H(){var e;const t=(0,j.x6)({defaultOrderBy:"code"}),n=(0,v.K$)(),w=(0,u.tv)(),Z=(0,h.k)(),[b,f]=(0,a.useState)(I),C=!(!b.startDate||!b.endDate)&&b.startDate.getTime()>b.endDate.getTime(),_=function(e){var t;let{inputData:n,comparator:a,filters:o,dateError:s}=e;const{status:l,name:i,startDate:r,endDate:c}=o,d=null===(t=n)||void 0===t?void 0:t.map(((e,t)=>[e,t]));d.sort(((e,t)=>{const n=a(e[0],t[0]);return 0!==n?n:e[1]-t[1]})),n=null===d||void 0===d?void 0:d.map((e=>e[0])),i&&(n=n.filter((e=>-1!==e.tableName.toLowerCase().indexOf(i.toLowerCase()))));"all"!==l&&(n=n.filter((e=>e.status===l)));s||r&&c&&(n=n.filter((e=>(0,x.IO)(e.createdAt)>=(0,x.IO)(r)&&(0,x.IO)(e.createdAt)<=(0,x.IO)(c))));return n}({inputData:[{tableName:"cities",documents:[]},{tableName:"surgeries",documents:[]},{tableName:"diseases",documents:[]},{tableName:"insurance_companies",documents:[]},{tableName:"unit_service_types",documents:[]},{tableName:"activities",documents:[]},{tableName:"employee_types",documents:[]},{tableName:"payment_methods",documents:[]},{tableName:"stakeholder_types",documents:[]},{tableName:"work_shifts",documents:[]},{tableName:"service_types",documents:[]},{tableName:"measurement_types",documents:[]},{tableName:"hospital_list",documents:[]},{tableName:"deduction_config",documents:[]},{tableName:"specialities",documents:[]},{tableName:"sub_specialities",documents:[]},{tableName:"countries",documents:[]},{tableName:"added_value_tax_GD",documents:[]},{tableName:"departments",documents:[]},{tableName:"medicines",documents:[]},{tableName:"unit_services",documents:[]},{tableName:"appointment_types",documents:[]},{tableName:"free_subscriptions",documents:[]},{tableName:"symptoms",documents:[]},{tableName:"patients",documents:[]},{tableName:"diets",documents:[]},{tableName:"currencies",documents:[]},{tableName:"analyses",documents:[]},{tableName:"medical_categories",documents:[]},{tableName:"medicines_families",documents:[]}],comparator:(0,j.sQ)(t.order,t.orderBy),filters:b,dateError:C}),P=t.dense?52:72,y=!!b.name||"all"!==b.status||!!b.startDate&&!!b.endDate,S=!(null!==_&&void 0!==_&&_.length)&&y||!(null!==_&&void 0!==_&&_.length),F=(0,a.useCallback)(((e,n)=>{t.onResetPage(),f((t=>({...t,[e]:n})))}),[t]),D=(0,a.useCallback)((()=>{f(I)}),[]),A=(0,a.useCallback)((e=>{w.push(d.H.superadmin.tables.details(e))}),[w]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.Z,{maxWidth:!n.themeStretch&&"lg",children:[(0,k.jsx)(m.Z,{heading:"Tables",links:[{name:"superadmin",href:d.H.superadmin.root},{name:"management tables",href:d.H.superadmin.tables.list},{name:"tables"}],sx:{mb:{xs:3,md:5}}}),(0,k.jsxs)(o.Z,{children:[(0,k.jsx)(T,{filters:b,onFilters:F,canReset:y,onResetFilters:D}),y&&(0,k.jsx)(B,{filters:b,onFilters:F,onResetFilters:D,results:null===_||void 0===_?void 0:_.length,sx:{p:2.5,pt:0}}),(0,k.jsx)(c.Z,{sx:{position:"relative",overflow:"unset"},children:(0,k.jsx)(g.Z,{children:(0,k.jsxs)(s.Z,{size:t.dense?"small":"medium",children:[(0,k.jsx)(j.K,{order:t.order,orderBy:t.orderBy,headLabel:[{id:"Table Name",label:"Table Name"},{id:"Notes",label:"Notes"},{id:"",width:190}],rowCount:_.length,numSelected:t.selected.length,onSort:t.onSort}),(0,k.jsxs)(r.Z,{children:[null===(e=_.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage))||void 0===e?void 0:e.map(((e,n)=>(0,k.jsx)(R,{row:e,selected:t.selected.includes(e.id),onViewRow:()=>A(e.tableName)},n))),(0,k.jsx)(j.$W,{height:P,emptyRows:(0,j.fQ)(t.page,t.rowsPerPage,null===_||void 0===_?void 0:_.length)}),(0,k.jsx)(j.et,{notFound:S})]})]})})}),(0,k.jsx)(j.S_,{count:null===_||void 0===_?void 0:_.length,page:t.page,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onRowsPerPageChange:t.onChangeRowsPerPage,dense:t.dense,onChangeDense:t.onChangeDense})]})]}),(0,k.jsx)(p.Q,{open:Z.value,onClose:Z.onFalse,title:"Delete",content:(0,k.jsxs)(k.Fragment,{children:["Are you sure want to delete ",(0,k.jsxs)("strong",{children:[" ",t.selected.length," "]})," items?"]}),action:(0,k.jsx)(l.Z,{variant:"contained",color:"error",onClick:()=>{Z.onFalse()},children:"Delete"})})]})}var W=n(64802),L=n(61146),E=n(4419),O=n(66833),N=n(84954),U=n(35456),Q=n(89731),z=n(6385);var M=n(65483),$=n(49172);var q=n(34045),K=n(61474),J=n(2101),V=n(20068),G=n(12065),X=n(82626),Y=n(13034);function ee(e){let{row:t,selected:n,onEditRow:a,onSelectRow:o,onInactivate:s,onActivate:i}=e;const{code:r,name_english:c,country:d,status:u,created_at:g,user_creation:v,ip_address_user_creation:m,updated_at:j,user_modification:w,ip_address_user_modification:Z,modifications_nums:R}=t,S=(0,h.k)(),F=(0,y.S)(),D=(0,y.S)(),A=(0,k.jsxs)(f.Z,{hover:!0,selected:n,children:[(0,k.jsx)(C.Z,{padding:"checkbox",children:(0,k.jsx)(Y.Z,{checked:n,onClick:o})}),(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(b.Z,{children:r})}),(0,k.jsx)(C.Z,{align:"center",children:c}),(0,k.jsx)(C.Z,{align:"center",children:null===d||void 0===d?void 0:d.name_english}),(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(N.Z,{variant:"soft",color:("active"===u?"success":"inactive"===u&&"error")||"default",children:u})}),(0,k.jsx)(C.Z,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,k.jsx)(_.Z,{color:F.open?"inherit":"default",onClick:F.onOpen,children:(0,k.jsx)(P.Z,{icon:"eva:more-vertical-fill"})})})]});return(0,k.jsxs)(k.Fragment,{children:[A,(0,k.jsxs)(y.Z,{open:F.open,onClose:F.onClose,arrow:"right-top",sx:{width:140},children:["active"===u?(0,k.jsxs)(X.Z,{onClick:()=>{s(),F.onClose()},sx:{color:"error.main"},children:[(0,k.jsx)(P.Z,{icon:"ic:baseline-pause"}),"Inactivate"]}):(0,k.jsxs)(X.Z,{onClick:()=>{i(),F.onClose()},sx:{color:"success.main"},children:[(0,k.jsx)(P.Z,{icon:"bi:play-fill"}),"activate"]}),(0,k.jsxs)(X.Z,{onClick:()=>{a(),F.onClose()},children:[(0,k.jsx)(P.Z,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,k.jsxs)(X.Z,{onClick:D.onOpen,children:[(0,k.jsx)(P.Z,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,k.jsxs)(y.Z,{open:D.open,onClose:D.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,k.jsx)(b.Z,{sx:{fontWeight:600},children:"Creation Time:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,x.zM)(g)}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Creator:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===v||void 0===v?void 0:v.email}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Creator IP:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:m}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,x.zM)(j)}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===w||void 0===w?void 0:w.email}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:Z}),(0,k.jsxs)(b.Z,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",R]})]}),(0,k.jsx)(p.Q,{open:S.value,onClose:S.onFalse,title:"Delete",content:"Are you sure want to delete?",action:(0,k.jsx)(l.Z,{variant:"contained",color:"error",onClick:s,children:"Delete"})})]})}const te=[{value:"all",label:"all"},{value:"active",label:"active"},{value:"inactive",label:"inactive"}],ne=[{id:"code",label:"Code"},{id:"name",label:"name"},{id:"country",label:"Country"},{id:"status",label:"Status"},{id:"",width:88}],ae={name:"",status:"all"};function oe(){const e=(0,j.x6)({defaultOrderBy:"code"}),t=(0,a.useRef)(),n=(0,v.K$)(),x=(0,u.tv)(),w=(0,h.k)(),Z=(0,h.k)(),{tableData:b,loading:f,refetch:C}=(0,O.Sf)(),[y,R]=(0,a.useState)(ae),S=!(!y.startDate||!y.endDate)&&y.startDate.getTime()>y.endDate.getTime(),F=function(e){let{inputData:t,comparator:n,filters:a,dateError:o}=e;const{status:s,name:l}=a,i=t.map(((e,t)=>[e,t]));i.sort(((e,t)=>{const a=n(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t=i.map((e=>e[0])),l&&(t=t.filter((e=>{var t,n,a,o,s;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(n=e.country)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(a=e.country)||void 0===a?void 0:a.name_english.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(o=e.country)||void 0===o?void 0:o.name_arabic)&&-1!==(null===e||void 0===e||null===(s=e.country)||void 0===s?void 0:s.name_arabic.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===l||JSON.stringify(e.code)===l})));"all"!==s&&(t=t.filter((e=>e.status===s)));return t}({inputData:b,comparator:(0,j.sQ)(e.order,e.orderBy),filters:y,dateError:S}),D=F.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),A=e.dense?52:72,T=!(null===y||void 0===y||!y.name)||"all"!==y.status,B=!F.length&&T||!F.length,I=(0,L.useReactToPrint)({content:()=>t.current}),H=(0,a.useCallback)(((t,n)=>{e.onResetPage(),R((e=>({...e,[t]:n})))}),[e]),X=(0,a.useCallback)((async t=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.city(t),"/updatestatus"),data:{status:"active"}}),C(),e.onUpdatePageDeleteRow(D.length)}),[D.length,e,C]),Y=(0,a.useCallback)((async t=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.city(t),"/updatestatus"),data:{status:"inactive"}}),C(),e.onUpdatePageDeleteRow(D.length)}),[D.length,e,C]),oe=(0,a.useCallback)((async()=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.cities,"/updatemanystatus"),data:{status:"active",ids:e.selected}}),C(),e.onUpdatePageDeleteRows({totalRows:b.length,totalRowsInPage:D.length,totalRowsFiltered:F.length})}),[F.length,D.length,e,b,C]),se=(0,a.useCallback)((async()=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.cities,"/updatemanystatus"),data:{status:"inactive",ids:e.selected}}),C(),e.onUpdatePageDeleteRows({totalRows:b.length,totalRowsInPage:D.length,totalRowsFiltered:F.length})}),[F.length,D.length,e,b,C]),le=(0,a.useCallback)((e=>{x.push(d.H.superadmin.tables.cities.edit(e))}),[x]),ie=(0,a.useCallback)((()=>{R(ae)}),[]),re=(0,a.useCallback)(((e,t)=>{H("status",t)}),[H]);return f?(0,k.jsx)(U.a,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.Z,{maxWidth:!n.themeStretch&&"lg",children:[(0,k.jsx)(m.Z,{heading:"Cities",links:[{name:"dashboard",href:d.H.superadmin.root},{name:"Tables",href:d.H.superadmin.tables.list},{name:"cities"}],action:(0,k.jsx)(l.Z,{component:E.r,href:d.H.superadmin.tables.cities.new,variant:"contained",startIcon:(0,k.jsx)(P.Z,{icon:"mingcute:add-line"}),children:"New City"}),sx:{mb:{xs:3,md:5}}}),(0,k.jsxs)(o.Z,{children:[(0,k.jsx)(J.Z,{value:y.status,onChange:re,sx:{px:2.5,boxShadow:e=>"inset 0 -2px 0 0 ".concat((0,G.Fq)(e.palette.grey[500],.08))},children:te.map((e=>(0,k.jsx)(K.Z,{iconPosition:"end",value:e.value,label:e.label,icon:(0,k.jsxs)(N.Z,{variant:"all"===e.value||e.value===y.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&b.length,"active"===e.value&&b.filter((e=>"active"===e.status)).length,"inactive"===e.value&&b.filter((e=>"inactive"===e.status)).length]})},e.value)))}),(0,k.jsx)(M.Z,{onPrint:I,filters:y,onFilters:H,onDownload:()=>{const e=F.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.P6.book_new(),n=q.P6.json_to_sheet(e);q.P6.book_append_sheet(t,n,"Sheet 1");const a=q.cW(t,{bookType:"xlsx",type:"array"}),o=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,W.saveAs)(o,"citiesTable.xlsx")},canReset:T,onResetFilters:ie}),T&&(0,k.jsx)($.Z,{filters:y,onFilters:H,onResetFilters:ie,results:F.length,sx:{p:2.5,pt:0}}),(0,k.jsxs)(c.Z,{children:[(0,k.jsx)(j.Z4,{numSelected:e.selected.length,rowCount:F.length,onSelectAllRows:t=>e.onSelectAllRows(t,F.map((e=>e._id))),action:(0,k.jsx)(k.Fragment,{children:F.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?(0,k.jsx)(V.Z,{title:"Activate all",children:(0,k.jsx)(_.Z,{color:"primary",onClick:w.onTrue,children:(0,k.jsx)(P.Z,{icon:"codicon:run-all"})})}):(0,k.jsx)(V.Z,{title:"Inactivate all",children:(0,k.jsx)(_.Z,{color:"error",onClick:Z.onTrue,children:(0,k.jsx)(P.Z,{icon:"iconoir:pause-solid"})})})}),color:F.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,k.jsx)(g.Z,{children:(0,k.jsxs)(s.Z,{ref:t,size:e.dense?"small":"medium",children:[(0,k.jsx)(j.K,{order:e.order,orderBy:e.orderBy,headLabel:ne,rowCount:F.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,F.map((e=>e._id)))}),(0,k.jsxs)(r.Z,{children:[F.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map((t=>(0,k.jsx)(ee,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onActivate:()=>X(t._id),onInactivate:()=>Y(t._id),onEditRow:()=>le(t._id)},t._id))),(0,k.jsx)(j.$W,{height:A,emptyRows:(0,j.fQ)(e.page,e.rowsPerPage,b.length)}),(0,k.jsx)(j.et,{notFound:B})]})]})})]}),(0,k.jsx)(j.S_,{count:F.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,k.jsx)(p.Q,{open:Z.value,onClose:Z.onFalse,title:"Inactivate",content:(0,k.jsxs)(k.Fragment,{children:["Are you sure want to Inactivate ",(0,k.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,k.jsx)(l.Z,{variant:"contained",color:"error",onClick:()=>{se(),Z.onFalse()},children:"Inactivate"})}),(0,k.jsx)(p.Q,{open:w.value,onClose:w.onFalse,title:"Activate",content:(0,k.jsxs)(k.Fragment,{children:["Are you sure want to Activate ",(0,k.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,k.jsx)(l.Z,{variant:"contained",color:"primary",onClick:()=>{oe(),w.onFalse()},children:"Activate"})})]})}function se(e){let{row:t,selected:n,onEditRow:a,onSelectRow:o,onInactivate:s,onActivate:l,filters:i,setFilters:r}=e;const{code:c,name_english:d,country:u,city:h,status:g,created_at:p,user_creation:v,ip_address_user_creation:m,updated_at:j,user_modification:w,ip_address_user_modification:Z,modifications_nums:R}=t,S=(0,y.S)(),F=(0,y.S)(),D=(0,k.jsxs)(f.Z,{hover:!0,selected:n,children:[(0,k.jsx)(C.Z,{padding:"checkbox",children:(0,k.jsx)(Y.Z,{checked:n,onClick:o})}),(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(b.Z,{children:c})}),(0,k.jsx)(C.Z,{align:"center",children:d}),(0,k.jsx)(C.Z,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r({...i,name:u.name_english}),children:null===u||void 0===u?void 0:u.name_english}),(0,k.jsx)(C.Z,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r({...i,name:h.name_english}),children:null===h||void 0===h?void 0:h.name_english}),(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(N.Z,{variant:"soft",color:("active"===g?"success":"inactive"===g&&"error")||"default",children:g})}),(0,k.jsx)(C.Z,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,k.jsx)(_.Z,{color:F.open?"inherit":"default",onClick:F.onOpen,children:(0,k.jsx)(P.Z,{icon:"eva:more-vertical-fill"})})})]});return(0,k.jsxs)(k.Fragment,{children:[D,(0,k.jsxs)(y.Z,{open:F.open,onClose:F.onClose,arrow:"right-top",sx:{width:140},children:["active"===g?(0,k.jsxs)(X.Z,{onClick:()=>{s(),F.onClose()},sx:{color:"error.main"},children:[(0,k.jsx)(P.Z,{icon:"ic:baseline-pause"}),"Inactivate"]}):(0,k.jsxs)(X.Z,{onClick:()=>{l(),F.onClose()},sx:{color:"success.main"},children:[(0,k.jsx)(P.Z,{icon:"bi:play-fill"}),"activate"]}),(0,k.jsxs)(X.Z,{onClick:()=>{a(),F.onClose()},children:[(0,k.jsx)(P.Z,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,k.jsxs)(X.Z,{onClick:S.onOpen,children:[(0,k.jsx)(P.Z,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,k.jsxs)(y.Z,{open:S.open,onClose:S.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,k.jsx)(b.Z,{sx:{fontWeight:600},children:"Creation Time:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,x.zM)(p)}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Creator:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===v||void 0===v?void 0:v.email}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Creator IP:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:m}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,x.zM)(j)}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===w||void 0===w?void 0:w.email}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:Z}),(0,k.jsxs)(b.Z,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",R]})]})]})}const le=[{value:"all",label:"all"},{value:"active",label:"active"},{value:"inactive",label:"inactive"}],ie=[{id:"code",label:"Code"},{id:"name",label:"Name"},{id:"country",label:"Country"},{id:"city",label:"city"},{id:"status",label:"Status"},{id:"",width:88}],re={name:"",status:"all"};function ce(){const e=(0,j.x6)({defaultOrderBy:"code"}),t=(0,a.useRef)(),n=(0,v.K$)(),x=(0,u.tv)(),w=(0,h.k)(),Z=(0,h.k)(),{hospitalsData:b,loading:f,refetch:C}=(0,O.VM)(),[y,R]=(0,a.useState)(re),S=!(!y.startDate||!y.endDate)&&y.startDate.getTime()>y.endDate.getTime(),F=function(e){let{inputData:t,comparator:n,filters:a,dateError:o}=e;const{status:s,name:l}=a,i=t.map(((e,t)=>[e,t]));i.sort(((e,t)=>{const a=n(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t=i.map((e=>e[0])),l&&(t=t.filter((e=>{var t,n,a,o,s,i,r,c,d;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(n=e.country)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(a=e.country)||void 0===a?void 0:a.name_english.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(o=e.country)||void 0===o?void 0:o.name_arabic)&&-1!==(null===e||void 0===e||null===(s=e.country)||void 0===s?void 0:s.name_arabic.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(i=e.city)||void 0===i?void 0:i.name_english)&&-1!==(null===e||void 0===e||null===(r=e.city)||void 0===r?void 0:r.name_english.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(c=e.city)||void 0===c?void 0:c.name_arabic)&&-1!==(null===e||void 0===e||null===(d=e.city)||void 0===d?void 0:d.name_arabic.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===l||JSON.stringify(e.code)===l})));"all"!==s&&(t=t.filter((e=>e.status===s)));return t}({inputData:b,comparator:(0,j.sQ)(e.order,e.orderBy),filters:y,dateError:S}),D=F.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),A=e.dense?52:72,T=!(null===y||void 0===y||!y.name)||"all"!==y.status,B=!F.length&&T||!F.length,I=(0,L.useReactToPrint)({content:()=>t.current}),H=(0,a.useCallback)(((t,n)=>{e.onResetPage(),R((e=>({...e,[t]:n})))}),[e]),X=(0,a.useCallback)((async t=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.hospital(t),"/updatestatus"),data:{status:"active"}}),C(),e.onUpdatePageDeleteRow(D.length)}),[D.length,e,C]),Y=(0,a.useCallback)((async t=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.hospital(t),"/updatestatus"),data:{status:"inactive"}}),C(),e.onUpdatePageDeleteRow(D.length)}),[D.length,e,C]),ee=(0,a.useCallback)((async()=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.hospitals,"/updatestatus"),data:{status:"active",ids:e.selected}}),C(),e.onUpdatePageDeleteRows({totalRows:b.length,totalRowsInPage:D.length,totalRowsFiltered:F.length})}),[F.length,D.length,e,b,C]),te=(0,a.useCallback)((async()=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.hospitals,"/updatestatus"),data:{status:"inactive",ids:e.selected}}),C(),e.onUpdatePageDeleteRows({totalRows:b.length,totalRowsInPage:D.length,totalRowsFiltered:F.length})}),[F.length,D.length,e,b,C]),ne=(0,a.useCallback)((e=>{x.push(d.H.superadmin.tables.hospitallist.edit(e))}),[x]),ae=(0,a.useCallback)((()=>{R(re)}),[]),oe=(0,a.useCallback)(((e,t)=>{H("status",t)}),[H]);return f?(0,k.jsx)(U.a,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.Z,{maxWidth:!n.themeStretch&&"lg",children:[(0,k.jsx)(m.Z,{heading:"Hospital List",links:[{name:"dashboard",href:d.H.superadmin.root},{name:"Tables",href:d.H.superadmin.tables.list},{name:"Hospital List"}],action:(0,k.jsx)(l.Z,{component:E.r,href:d.H.superadmin.tables.hospitallist.new,variant:"contained",startIcon:(0,k.jsx)(P.Z,{icon:"mingcute:add-line"}),children:"New Hospital"}),sx:{mb:{xs:3,md:5}}}),(0,k.jsxs)(o.Z,{children:[(0,k.jsx)(J.Z,{value:y.status,onChange:oe,sx:{px:2.5,boxShadow:e=>"inset 0 -2px 0 0 ".concat((0,G.Fq)(e.palette.grey[500],.08))},children:le.map((e=>(0,k.jsx)(K.Z,{iconPosition:"end",value:e.value,label:e.label,icon:(0,k.jsxs)(N.Z,{variant:"all"===e.value||e.value===y.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&b.length,"active"===e.value&&b.filter((e=>"active"===e.status)).length,"inactive"===e.value&&b.filter((e=>"inactive"===e.status)).length]})},e.value)))}),(0,k.jsx)(M.Z,{onPrint:I,filters:y,onFilters:H,onDownload:()=>{const e=F.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.P6.book_new(),n=q.P6.json_to_sheet(e);q.P6.book_append_sheet(t,n,"Sheet 1");const a=q.cW(t,{bookType:"xlsx",type:"array"}),o=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,W.saveAs)(o,"HospitalsTable.xlsx")},canReset:T,onResetFilters:ae}),T&&(0,k.jsx)($.Z,{filters:y,onFilters:H,onResetFilters:ae,results:F.length,sx:{p:2.5,pt:0}}),(0,k.jsxs)(c.Z,{children:[(0,k.jsx)(j.Z4,{numSelected:e.selected.length,rowCount:F.length,onSelectAllRows:t=>e.onSelectAllRows(t,F.map((e=>e._id))),action:(0,k.jsx)(k.Fragment,{children:F.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?(0,k.jsx)(V.Z,{title:"Activate all",children:(0,k.jsx)(_.Z,{color:"primary",onClick:w.onTrue,children:(0,k.jsx)(P.Z,{icon:"codicon:run-all"})})}):(0,k.jsx)(V.Z,{title:"Inactivate all",children:(0,k.jsx)(_.Z,{color:"error",onClick:Z.onTrue,children:(0,k.jsx)(P.Z,{icon:"iconoir:pause-solid"})})})}),color:F.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,k.jsx)(g.Z,{children:(0,k.jsxs)(s.Z,{ref:t,size:e.dense?"small":"medium",children:[(0,k.jsx)(j.K,{order:e.order,orderBy:e.orderBy,headLabel:ie,rowCount:F.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,F.map((e=>e._id)))}),(0,k.jsxs)(r.Z,{children:[F.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map((t=>(0,k.jsx)(se,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onActivate:()=>X(t._id),onInactivate:()=>Y(t._id),onEditRow:()=>ne(t._id)},t._id))),(0,k.jsx)(j.$W,{height:A,emptyRows:(0,j.fQ)(e.page,e.rowsPerPage,b.length)}),(0,k.jsx)(j.et,{notFound:B})]})]})})]}),(0,k.jsx)(j.S_,{count:F.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,k.jsx)(p.Q,{open:Z.value,onClose:Z.onFalse,title:"Inactivate",content:(0,k.jsxs)(k.Fragment,{children:["Are you sure want to Inactivate ",(0,k.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,k.jsx)(l.Z,{variant:"contained",color:"error",onClick:()=>{te(),Z.onFalse()},children:"Inactivate"})}),(0,k.jsx)(p.Q,{open:w.value,onClose:w.onFalse,title:"Activate",content:(0,k.jsxs)(k.Fragment,{children:["Are you sure want to Activate ",(0,k.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,k.jsx)(l.Z,{variant:"contained",color:"primary",onClick:()=>{ee(),w.onFalse()},children:"Activate"})})]})}function de(e){let{row:t,selected:n,onEditRow:a,onSelectRow:o,onInactivate:s,onActivate:i,filters:r,setFilters:c}=e;const{code:d,name_english:u,unit_service:g,department:v,status:m,created_at:j,user_creation:w,ip_address_user_creation:Z,updated_at:R,user_modification:S,ip_address_user_modification:F,modifications_nums:D}=t,A=(0,h.k)(),T=(0,y.S)(),B=(0,y.S)(),I=(0,k.jsxs)(f.Z,{hover:!0,selected:n,children:[(0,k.jsx)(C.Z,{padding:"checkbox",children:(0,k.jsx)(Y.Z,{checked:n,onClick:o})}),(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(b.Z,{children:d})}),(0,k.jsx)(C.Z,{align:"center",children:u}),(0,k.jsx)(C.Z,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>c({...r,name:g.name_english}),children:null===g||void 0===g?void 0:g.name_english}),(0,k.jsx)(C.Z,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>c({...r,name:v.name_english}),children:null===v||void 0===v?void 0:v.name_english}),(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(N.Z,{variant:"soft",color:("active"===m?"success":"inactive"===m&&"error")||"default",children:m})}),(0,k.jsx)(C.Z,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,k.jsx)(_.Z,{color:T.open?"inherit":"default",onClick:T.onOpen,children:(0,k.jsx)(P.Z,{icon:"eva:more-vertical-fill"})})})]});return(0,k.jsxs)(k.Fragment,{children:[I,(0,k.jsxs)(y.Z,{open:T.open,onClose:T.onClose,arrow:"right-top",sx:{width:140},children:["active"===m?(0,k.jsxs)(X.Z,{onClick:()=>{s(),T.onClose()},sx:{color:"error.main"},children:[(0,k.jsx)(P.Z,{icon:"ic:baseline-pause"}),"Inactivate"]}):(0,k.jsxs)(X.Z,{onClick:()=>{i(),T.onClose()},sx:{color:"success.main"},children:[(0,k.jsx)(P.Z,{icon:"bi:play-fill"}),"activate"]}),(0,k.jsxs)(X.Z,{onClick:()=>{a(),T.onClose()},children:[(0,k.jsx)(P.Z,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,k.jsxs)(X.Z,{onClick:B.onOpen,children:[(0,k.jsx)(P.Z,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,k.jsxs)(y.Z,{open:B.open,onClose:B.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,k.jsx)(b.Z,{sx:{fontWeight:600},children:"Creation Time:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,x.zM)(j)}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Creator:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===w||void 0===w?void 0:w.email}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Creator IP:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:Z}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,x.zM)(R)}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===S||void 0===S?void 0:S.email}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:F}),(0,k.jsxs)(b.Z,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",D]})]}),(0,k.jsx)(p.Q,{open:A.value,onClose:A.onFalse,title:"Delete",content:"Are you sure want to delete?",action:(0,k.jsx)(l.Z,{variant:"contained",color:"error",onClick:s,children:"Delete"})})]})}const ue=[{value:"all",label:"all"},{value:"active",label:"active"},{value:"inactive",label:"inactive"}],he=[{id:"code",label:"Code"},{id:"name",label:"Name"},{id:"unit_service",label:"Unit Service"},{id:"department",label:"Department"},{id:"status",label:"Status"},{id:"",width:88}],xe={name:"",status:"all"};function ge(){const e=(0,j.x6)({defaultOrderBy:"code"}),t=(0,a.useRef)(),n=(0,v.K$)(),x=(0,u.tv)(),w=(0,h.k)(),Z=(0,h.k)(),{activitiesData:b,loading:f,refetch:C}=(0,O.hG)(),[y,R]=(0,a.useState)(xe),S=!(!y.startDate||!y.endDate)&&y.startDate.getTime()>y.endDate.getTime(),F=function(e){var t;let{inputData:n,comparator:a,filters:o,dateError:s}=e;const{status:l,name:i}=o,r=null===(t=n)||void 0===t?void 0:t.map(((e,t)=>[e,t]));r.sort(((e,t)=>{const n=a(e[0],t[0]);return 0!==n?n:e[1]-t[1]})),n=r.map((e=>e[0])),i&&(n=n.filter((e=>{var t,n,a,o,s,l,r,c,d,u,h,x,g,p,v,m,j,w,Z,b;return(null===e||void 0===e?void 0:e.name_english)&&-1!==(null===e||void 0===e||null===(t=e.name_english)||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(a=e.name_arabic)||void 0===a||null===(o=a.toLowerCase())||void 0===o?void 0:o.indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(s=e.unit_service)||void 0===s?void 0:s.name_english)&&-1!==(null===e||void 0===e||null===(l=e.unit_service)||void 0===l||null===(r=l.name_english)||void 0===r||null===(c=r.toLowerCase())||void 0===c?void 0:c.indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(d=e.unit_service)||void 0===d?void 0:d.name_arabic)&&-1!==(null===e||void 0===e||null===(u=e.unit_service)||void 0===u||null===(h=u.name_arabic)||void 0===h||null===(x=h.toLowerCase())||void 0===x?void 0:x.indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(g=e.department)||void 0===g?void 0:g.name_english)&&-1!==(null===e||void 0===e||null===(p=e.department)||void 0===p||null===(v=p.name_english)||void 0===v||null===(m=v.toLowerCase())||void 0===m?void 0:m.indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(j=e.department)||void 0===j?void 0:j.name_english)&&-1!==(null===e||void 0===e||null===(w=e.department)||void 0===w||null===(Z=w.name_arabic)||void 0===Z||null===(b=Z.toLowerCase())||void 0===b?void 0:b.indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===i||JSON.stringify(e.code)===i})));"all"!==l&&(n=n.filter((e=>e.status===l)));return n}({inputData:b,comparator:(0,j.sQ)(e.order,e.orderBy),filters:y,dateError:S}),D=F.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),A=e.dense?52:72,T=!(null===y||void 0===y||!y.name)||"all"!==y.status,B=!F.length&&T||!F.length,I=(0,L.useReactToPrint)({content:()=>t.current}),H=(0,a.useCallback)(((t,n)=>{e.onResetPage(),R((e=>({...e,[t]:n})))}),[e]),X=(0,a.useCallback)((async t=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.activity(t),"/updatestatus"),data:{status:"active"}}),C(),e.onUpdatePageDeleteRow(D.length)}),[D.length,e,C]),Y=(0,a.useCallback)((async t=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.activity(t),"/updatestatus"),data:{status:"inactive"}}),C(),e.onUpdatePageDeleteRow(D.length)}),[D.length,e,C]),ee=(0,a.useCallback)((async()=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.activities,"/updatestatus"),data:{status:"active",ids:e.selected}}),C(),e.onUpdatePageDeleteRows({totalRows:b.length,totalRowsInPage:D.length,totalRowsFiltered:F.length})}),[F.length,D.length,e,b,C]),te=(0,a.useCallback)((async()=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.activities,"/updatestatus"),data:{status:"inactive",ids:e.selected}}),C(),e.onUpdatePageDeleteRows({totalRows:b.length,totalRowsInPage:D.length,totalRowsFiltered:F.length})}),[F.length,D.length,e,b,C]),ne=(0,a.useCallback)((e=>{x.push(d.H.superadmin.tables.activities.edit(e))}),[x]),ae=(0,a.useCallback)((()=>{R(xe)}),[]),oe=(0,a.useCallback)(((e,t)=>{H("status",t)}),[H]);return f?(0,k.jsx)(U.a,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.Z,{maxWidth:!n.themeStretch&&"lg",children:[(0,k.jsx)(m.Z,{heading:"Activities",links:[{name:"dashboard",href:d.H.superadmin.root},{name:"Tables",href:d.H.superadmin.tables.list},{name:"Activities"}],action:(0,k.jsx)(l.Z,{component:E.r,href:d.H.superadmin.tables.activities.new,variant:"contained",startIcon:(0,k.jsx)(P.Z,{icon:"mingcute:add-line"}),children:"New Activity"}),sx:{mb:{xs:3,md:5}}}),(0,k.jsxs)(o.Z,{children:[(0,k.jsx)(J.Z,{value:y.status,onChange:oe,sx:{px:2.5,boxShadow:e=>"inset 0 -2px 0 0 ".concat((0,G.Fq)(e.palette.grey[500],.08))},children:ue.map((e=>(0,k.jsx)(K.Z,{iconPosition:"end",value:e.value,label:e.label,icon:(0,k.jsxs)(N.Z,{variant:"all"===e.value||e.value===y.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&b.length,"active"===e.value&&b.filter((e=>"active"===e.status)).length,"inactive"===e.value&&b.filter((e=>"inactive"===e.status)).length]})},e.value)))}),(0,k.jsx)(M.Z,{onPrint:I,filters:y,onFilters:H,onDownload:()=>{const e=F.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.P6.book_new(),n=q.P6.json_to_sheet(e);q.P6.book_append_sheet(t,n,"Sheet 1");const a=q.cW(t,{bookType:"xlsx",type:"array"}),o=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,W.saveAs)(o,"ActivitiesTable.xlsx")},canReset:T,onResetFilters:ae}),T&&(0,k.jsx)($.Z,{filters:y,onFilters:H,onResetFilters:ae,results:F.length,sx:{p:2.5,pt:0}}),(0,k.jsxs)(c.Z,{children:[(0,k.jsx)(j.Z4,{numSelected:e.selected.length,rowCount:F.length,onSelectAllRows:t=>e.onSelectAllRows(t,F.map((e=>e._id))),action:(0,k.jsx)(k.Fragment,{children:F.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?(0,k.jsx)(V.Z,{title:"Activate all",children:(0,k.jsx)(_.Z,{color:"primary",onClick:w.onTrue,children:(0,k.jsx)(P.Z,{icon:"codicon:run-all"})})}):(0,k.jsx)(V.Z,{title:"Inactivate all",children:(0,k.jsx)(_.Z,{color:"error",onClick:Z.onTrue,children:(0,k.jsx)(P.Z,{icon:"iconoir:pause-solid"})})})}),color:F.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,k.jsx)(g.Z,{children:(0,k.jsxs)(s.Z,{ref:t,size:e.dense?"small":"medium",children:[(0,k.jsx)(j.K,{order:e.order,orderBy:e.orderBy,headLabel:he,rowCount:F.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,F.map((e=>e._id)))}),(0,k.jsxs)(r.Z,{children:[F.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map((t=>(0,k.jsx)(de,{row:t,selected:e.selected.includes(t._id),setFilters:R,filters:y,onSelectRow:()=>e.onSelectRow(t._id),onActivate:()=>X(t._id),onInactivate:()=>Y(t._id),onEditRow:()=>ne(t._id)},t._id))),(0,k.jsx)(j.$W,{height:A,emptyRows:(0,j.fQ)(e.page,e.rowsPerPage,b.length)}),(0,k.jsx)(j.et,{notFound:B})]})]})})]}),(0,k.jsx)(j.S_,{count:F.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,k.jsx)(p.Q,{open:Z.value,onClose:Z.onFalse,title:"Inactivate",content:(0,k.jsxs)(k.Fragment,{children:["Are you sure want to Inactivate ",(0,k.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,k.jsx)(l.Z,{variant:"contained",color:"error",onClick:()=>{te(),Z.onFalse()},children:"Inactivate"})}),(0,k.jsx)(p.Q,{open:w.value,onClose:w.onFalse,title:"Activate",content:(0,k.jsxs)(k.Fragment,{children:["Are you sure want to Activate ",(0,k.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,k.jsx)(l.Z,{variant:"contained",color:"primary",onClick:()=>{ee(),w.onFalse()},children:"Activate"})})]})}function pe(e){let{row:t,selected:n,onEditRow:a,onSelectRow:o,onInactivate:s,onActivate:l,filters:i,setFilters:r}=e;const{code:c,name_english:d,unit_service:u,start_time:h,end_time:g,status:p,created_at:v,user_creation:m,ip_address_user_creation:j,updated_at:w,user_modification:Z,ip_address_user_modification:R,modifications_nums:S}=t,F=(0,y.S)(),D=(0,y.S)(),A=(0,k.jsxs)(f.Z,{hover:!0,selected:n,children:[(0,k.jsx)(C.Z,{padding:"checkbox",children:(0,k.jsx)(Y.Z,{checked:n,onClick:o})}),(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(b.Z,{children:c})}),(0,k.jsx)(C.Z,{align:"center",children:d}),(0,k.jsx)(C.Z,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r({...i,name:u.name_english}),children:null===u||void 0===u?void 0:u.name_english}),(0,k.jsx)(C.Z,{align:"center",children:(0,x.Je)(h)}),(0,k.jsx)(C.Z,{align:"center",children:(0,x.Je)(g)}),(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(N.Z,{variant:"soft",color:("active"===p?"success":"inactive"===p&&"error")||"default",children:p})}),(0,k.jsx)(C.Z,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,k.jsx)(_.Z,{color:F.open?"inherit":"default",onClick:F.onOpen,children:(0,k.jsx)(P.Z,{icon:"eva:more-vertical-fill"})})})]});return(0,k.jsxs)(k.Fragment,{children:[A,(0,k.jsxs)(y.Z,{open:F.open,onClose:F.onClose,arrow:"right-top",sx:{width:140},children:["active"===p?(0,k.jsxs)(X.Z,{onClick:()=>{s(),F.onClose()},sx:{color:"error.main"},children:[(0,k.jsx)(P.Z,{icon:"ic:baseline-pause"}),"Inactivate"]}):(0,k.jsxs)(X.Z,{onClick:()=>{l(),F.onClose()},sx:{color:"success.main"},children:[(0,k.jsx)(P.Z,{icon:"bi:play-fill"}),"activate"]}),(0,k.jsxs)(X.Z,{onClick:()=>{a(),F.onClose()},children:[(0,k.jsx)(P.Z,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,k.jsxs)(X.Z,{onClick:D.onOpen,children:[(0,k.jsx)(P.Z,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,k.jsxs)(y.Z,{open:D.open,onClose:D.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,k.jsx)(b.Z,{sx:{fontWeight:600},children:"Creation Time:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,x.zM)(v)}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Creator:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===m||void 0===m?void 0:m.email}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Creator IP:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:j}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,x.zM)(w)}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===Z||void 0===Z?void 0:Z.email}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:R}),(0,k.jsxs)(b.Z,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",S]})]})]})}const ve=[{value:"all",label:"all"},{value:"active",label:"active"},{value:"inactive",label:"inactive"}],me=[{id:"code",label:"Code"},{id:"name",label:"Name"},{id:"unit_service",label:"Unit Service"},{id:"start_date",label:"Start Date"},{id:"end_date",label:"End Date"},{id:"status",label:"Status"},{id:"",width:88}],je={name:"",status:"all"};function we(){const e=(0,j.x6)({defaultOrderBy:"code"}),t=(0,a.useRef)(),n=(0,v.K$)(),x=(0,u.tv)(),w=(0,h.k)(),Z=(0,h.k)(),{workShiftsData:b,loading:f,refetch:C}=(0,O.PF)(),[y,R]=(0,a.useState)(je),S=!(!y.startDate||!y.endDate)&&y.startDate.getTime()>y.endDate.getTime(),F=function(e){let{inputData:t,comparator:n,filters:a,dateError:o}=e;const{status:s,name:l}=a,i=t.map(((e,t)=>[e,t]));i.sort(((e,t)=>{const a=n(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t=i.map((e=>e[0])),l&&(t=t.filter((e=>{var t,n,a,o,s;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(n=e.unit_service)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(a=e.unit_service)||void 0===a?void 0:a.name_english.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(o=e.unit_service)||void 0===o?void 0:o.name_arabic)&&-1!==(null===e||void 0===e||null===(s=e.unit_service)||void 0===s?void 0:s.name_arabic.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===l||JSON.stringify(e.code)===l})));"all"!==s&&(t=t.filter((e=>e.status===s)));return t}({inputData:b,comparator:(0,j.sQ)(e.order,e.orderBy),filters:y,dateError:S}),D=F.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),A=e.dense?52:72,T=!(null===y||void 0===y||!y.name)||"all"!==y.status,B=!F.length&&T||!F.length,I=(0,L.useReactToPrint)({content:()=>t.current}),H=(0,a.useCallback)(((t,n)=>{e.onResetPage(),R((e=>({...e,[t]:n})))}),[e]),X=(0,a.useCallback)((async t=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.workshift(t),"/updatestatus"),data:{status:"active"}}),C(),e.onUpdatePageDeleteRow(D.length)}),[D.length,e,C]),Y=(0,a.useCallback)((async t=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.workshift(t),"/updatestatus"),data:{status:"inactive"}}),C(),e.onUpdatePageDeleteRow(D.length)}),[D.length,e,C]),ee=(0,a.useCallback)((async()=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.workshifts,"/updatestatus"),data:{status:"active",ids:e.selected}}),C(),e.onUpdatePageDeleteRows({totalRows:b.length,totalRowsInPage:D.length,totalRowsFiltered:F.length})}),[F.length,D.length,e,b,C]),te=(0,a.useCallback)((async()=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.workshifts,"/updatestatus"),data:{status:"inactive",ids:e.selected}}),C(),e.onUpdatePageDeleteRows({totalRows:b.length,totalRowsInPage:D.length,totalRowsFiltered:F.length})}),[F.length,D.length,e,b,C]),ne=(0,a.useCallback)((e=>{x.push(d.H.superadmin.tables.workshifts.edit(e))}),[x]),ae=(0,a.useCallback)((()=>{R(je)}),[]),oe=(0,a.useCallback)(((e,t)=>{H("status",t)}),[H]);return f?(0,k.jsx)(U.a,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.Z,{maxWidth:!n.themeStretch&&"lg",children:[(0,k.jsx)(m.Z,{heading:"Work Shifts",links:[{name:"dashboard",href:d.H.superadmin.root},{name:"Tables",href:d.H.superadmin.tables.list},{name:"Work Shifts"}],action:(0,k.jsx)(l.Z,{component:E.r,href:d.H.superadmin.tables.workshifts.new,variant:"contained",startIcon:(0,k.jsx)(P.Z,{icon:"mingcute:add-line"}),children:"New Work Shift"}),sx:{mb:{xs:3,md:5}}}),(0,k.jsxs)(o.Z,{children:[(0,k.jsx)(J.Z,{value:y.status,onChange:oe,sx:{px:2.5,boxShadow:e=>"inset 0 -2px 0 0 ".concat((0,G.Fq)(e.palette.grey[500],.08))},children:ve.map((e=>(0,k.jsx)(K.Z,{iconPosition:"end",value:e.value,label:e.label,icon:(0,k.jsxs)(N.Z,{variant:"all"===e.value||e.value===y.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&b.length,"active"===e.value&&b.filter((e=>"active"===e.status)).length,"inactive"===e.value&&b.filter((e=>"inactive"===e.status)).length]})},e.value)))}),(0,k.jsx)(M.Z,{onPrint:I,filters:y,onFilters:H,onDownload:()=>{const e=F.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.P6.book_new(),n=q.P6.json_to_sheet(e);q.P6.book_append_sheet(t,n,"Sheet 1");const a=q.cW(t,{bookType:"xlsx",type:"array"}),o=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,W.saveAs)(o,"WorkShiftsTable.xlsx")},canReset:T,onResetFilters:ae}),T&&(0,k.jsx)($.Z,{filters:y,onFilters:H,onResetFilters:ae,results:F.length,sx:{p:2.5,pt:0}}),(0,k.jsxs)(c.Z,{children:[(0,k.jsx)(j.Z4,{numSelected:e.selected.length,rowCount:F.length,onSelectAllRows:t=>e.onSelectAllRows(t,F.map((e=>e._id))),action:(0,k.jsx)(k.Fragment,{children:F.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?(0,k.jsx)(V.Z,{title:"Activate all",children:(0,k.jsx)(_.Z,{color:"primary",onClick:w.onTrue,children:(0,k.jsx)(P.Z,{icon:"codicon:run-all"})})}):(0,k.jsx)(V.Z,{title:"Inactivate all",children:(0,k.jsx)(_.Z,{color:"error",onClick:Z.onTrue,children:(0,k.jsx)(P.Z,{icon:"iconoir:pause-solid"})})})}),color:F.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,k.jsx)(g.Z,{children:(0,k.jsxs)(s.Z,{ref:t,size:e.dense?"small":"medium",children:[(0,k.jsx)(j.K,{order:e.order,orderBy:e.orderBy,headLabel:me,rowCount:F.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,F.map((e=>e._id)))}),(0,k.jsxs)(r.Z,{children:[F.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map((t=>(0,k.jsx)(pe,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onActivate:()=>X(t._id),onInactivate:()=>Y(t._id),onEditRow:()=>ne(t._id)},t._id))),(0,k.jsx)(j.$W,{height:A,emptyRows:(0,j.fQ)(e.page,e.rowsPerPage,b.length)}),(0,k.jsx)(j.et,{notFound:B})]})]})})]}),(0,k.jsx)(j.S_,{count:F.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,k.jsx)(p.Q,{open:Z.value,onClose:Z.onFalse,title:"Inactivate",content:(0,k.jsxs)(k.Fragment,{children:["Are you sure want to Inactivate ",(0,k.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,k.jsx)(l.Z,{variant:"contained",color:"error",onClick:()=>{te(),Z.onFalse()},children:"Inactivate"})}),(0,k.jsx)(p.Q,{open:w.value,onClose:w.onFalse,title:"Activate",content:(0,k.jsxs)(k.Fragment,{children:["Are you sure want to Activate ",(0,k.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,k.jsx)(l.Z,{variant:"contained",color:"primary",onClick:()=>{ee(),w.onFalse()},children:"Activate"})})]})}function Ze(e){let{row:t,selected:n,onEditRow:a,onSelectRow:o,onInactivate:s,onActivate:l,filters:i,setFilters:r}=e;const{code:c,name_english:d,unit_service:u,work_shift:h,Measurement_type:g,Price_per_unit:p,status:v,created_at:m,user_creation:j,ip_address_user_creation:w,updated_at:Z,user_modification:R,ip_address_user_modification:S,modifications_nums:F}=t,D=(0,y.S)(),A=(0,y.S)(),T=(0,k.jsxs)(f.Z,{hover:!0,selected:n,children:[(0,k.jsx)(C.Z,{padding:"checkbox",children:(0,k.jsx)(Y.Z,{checked:n,onClick:o})}),(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(b.Z,{children:c})}),(0,k.jsx)(C.Z,{align:"center",children:d}),(0,k.jsx)(C.Z,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r({...i,name:u.name_english}),children:null===u||void 0===u?void 0:u.name_english}),(0,k.jsx)(C.Z,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r({...i,name:h.name_english}),children:null===h||void 0===h?void 0:h.name_english}),(0,k.jsx)(C.Z,{align:"center",children:p}),(0,k.jsx)(C.Z,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r({...i,name:g.name_english}),children:null===g||void 0===g?void 0:g.name_english}),(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(N.Z,{variant:"soft",color:("active"===v?"success":"inactive"===v&&"error")||"default",children:v})}),(0,k.jsx)(C.Z,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,k.jsx)(_.Z,{color:D.open?"inherit":"default",onClick:D.onOpen,children:(0,k.jsx)(P.Z,{icon:"eva:more-vertical-fill"})})})]});return(0,k.jsxs)(k.Fragment,{children:[T,(0,k.jsxs)(y.Z,{open:D.open,onClose:D.onClose,arrow:"right-top",sx:{width:140},children:["active"===v?(0,k.jsxs)(X.Z,{onClick:()=>{s(),D.onClose()},sx:{color:"error.main"},children:[(0,k.jsx)(P.Z,{icon:"ic:baseline-pause"}),"Inactivate"]}):(0,k.jsxs)(X.Z,{onClick:()=>{l(),D.onClose()},sx:{color:"success.main"},children:[(0,k.jsx)(P.Z,{icon:"bi:play-fill"}),"activate"]}),(0,k.jsxs)(X.Z,{onClick:()=>{a(),D.onClose()},children:[(0,k.jsx)(P.Z,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,k.jsxs)(X.Z,{onClick:A.onOpen,children:[(0,k.jsx)(P.Z,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,k.jsxs)(y.Z,{open:A.open,onClose:A.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,k.jsx)(b.Z,{sx:{fontWeight:600},children:"Creation Time:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,x.zM)(m)}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Creator:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===j||void 0===j?void 0:j.email}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Creator IP:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:w}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,x.zM)(Z)}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===R||void 0===R?void 0:R.email}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:S}),(0,k.jsxs)(b.Z,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",F]})]})]})}const be=[{value:"all",label:"all"},{value:"active",label:"active"},{value:"inactive",label:"inactive"}],fe=[{id:"code",label:"Code"},{id:"name",label:"Name"},{id:"unit_service",label:"Unit Service"},{id:"work_shift",label:"Work Shift"},{id:"Price_per_unit",label:"Price per unit"},{id:"Measurement_type",label:"Measurement type"},{id:"status",label:"Status"},{id:"",width:88}],Ce={name:"",status:"all"};function _e(){const e=(0,j.x6)({defaultOrderBy:"code"}),t=(0,a.useRef)(),n=(0,v.K$)(),x=(0,u.tv)(),w=(0,h.k)(),Z=(0,h.k)(),{serviceTypesData:b,loading:f,refetch:C}=(0,O.pv)(),[y,R]=(0,a.useState)(Ce),S=!(!y.startDate||!y.endDate)&&y.startDate.getTime()>y.endDate.getTime(),F=function(e){let{inputData:t,comparator:n,filters:a,dateError:o}=e;const{status:s,name:l}=a,i=t.map(((e,t)=>[e,t]));i.sort(((e,t)=>{const a=n(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t=i.map((e=>e[0])),l&&(t=t.filter((e=>{var t,n,a,o,s,i,r,c,d;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(n=e.unit_service)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(a=e.unit_service)||void 0===a?void 0:a.name_english.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(o=e.unit_service)||void 0===o?void 0:o.name_arabic)&&-1!==(null===e||void 0===e||null===(s=e.unit_service)||void 0===s?void 0:s.name_arabic.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(i=e.work_shift)||void 0===i?void 0:i.name_english)&&-1!==(null===e||void 0===e||null===(r=e.work_shift)||void 0===r?void 0:r.name_english.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(c=e.work_shift)||void 0===c?void 0:c.name_arabic)&&-1!==(null===e||void 0===e||null===(d=e.work_shift)||void 0===d?void 0:d.name_arabic.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===l||JSON.stringify(e.code)===l})));"all"!==s&&(t=t.filter((e=>e.status===s)));return t}({inputData:b,comparator:(0,j.sQ)(e.order,e.orderBy),filters:y,dateError:S}),D=F.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),A=e.dense?52:72,T=!(null===y||void 0===y||!y.name)||"all"!==y.status,B=!F.length&&T||!F.length,I=(0,L.useReactToPrint)({content:()=>t.current}),H=(0,a.useCallback)(((t,n)=>{e.onResetPage(),R((e=>({...e,[t]:n})))}),[e]),X=(0,a.useCallback)((async t=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.servicetype(t),"/updatestatus"),data:{status:"active"}}),C(),e.onUpdatePageDeleteRow(D.length)}),[D.length,e,C]),Y=(0,a.useCallback)((async t=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.servicetype(t),"/updatestatus"),data:{status:"inactive"}}),C(),e.onUpdatePageDeleteRow(D.length)}),[D.length,e,C]),ee=(0,a.useCallback)((async()=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.servicetypes,"/updatestatus"),data:{status:"active",ids:e.selected}}),C(),e.onUpdatePageDeleteRows({totalRows:b.length,totalRowsInPage:D.length,totalRowsFiltered:F.length})}),[F.length,D.length,e,b,C]),te=(0,a.useCallback)((async()=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.servicetypes,"/updatestatus"),data:{status:"inactive",ids:e.selected}}),C(),e.onUpdatePageDeleteRows({totalRows:b.length,totalRowsInPage:D.length,totalRowsFiltered:F.length})}),[F.length,D.length,e,b,C]),ne=(0,a.useCallback)((e=>{x.push(d.H.superadmin.tables.servicetypes.edit(e))}),[x]),ae=(0,a.useCallback)((()=>{R(Ce)}),[]),oe=(0,a.useCallback)(((e,t)=>{H("status",t)}),[H]);return f?(0,k.jsx)(U.a,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.Z,{maxWidth:!n.themeStretch&&"lg",children:[(0,k.jsx)(m.Z,{heading:"Service Types",links:[{name:"dashboard",href:d.H.superadmin.root},{name:"Tables",href:d.H.superadmin.tables.list},{name:"Service Types"}],action:(0,k.jsx)(l.Z,{component:E.r,href:d.H.superadmin.tables.servicetypes.new,variant:"contained",startIcon:(0,k.jsx)(P.Z,{icon:"mingcute:add-line"}),children:"New Service Type"}),sx:{mb:{xs:3,md:5}}}),(0,k.jsxs)(o.Z,{children:[(0,k.jsx)(J.Z,{value:y.status,onChange:oe,sx:{px:2.5,boxShadow:e=>"inset 0 -2px 0 0 ".concat((0,G.Fq)(e.palette.grey[500],.08))},children:be.map((e=>(0,k.jsx)(K.Z,{iconPosition:"end",value:e.value,label:e.label,icon:(0,k.jsxs)(N.Z,{variant:"all"===e.value||e.value===y.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&b.length,"active"===e.value&&b.filter((e=>"active"===e.status)).length,"inactive"===e.value&&b.filter((e=>"inactive"===e.status)).length]})},e.value)))}),(0,k.jsx)(M.Z,{onPrint:I,filters:y,onFilters:H,onDownload:()=>{const e=F.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.P6.book_new(),n=q.P6.json_to_sheet(e);q.P6.book_append_sheet(t,n,"Sheet 1");const a=q.cW(t,{bookType:"xlsx",type:"array"}),o=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,W.saveAs)(o,"ServiceTypesTable.xlsx")},canReset:T,onResetFilters:ae}),T&&(0,k.jsx)($.Z,{filters:y,onFilters:H,onResetFilters:ae,results:F.length,sx:{p:2.5,pt:0}}),(0,k.jsxs)(c.Z,{children:[(0,k.jsx)(j.Z4,{numSelected:e.selected.length,rowCount:F.length,onSelectAllRows:t=>e.onSelectAllRows(t,F.map((e=>e._id))),action:(0,k.jsx)(k.Fragment,{children:F.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?(0,k.jsx)(V.Z,{title:"Activate all",children:(0,k.jsx)(_.Z,{color:"primary",onClick:w.onTrue,children:(0,k.jsx)(P.Z,{icon:"codicon:run-all"})})}):(0,k.jsx)(V.Z,{title:"Inactivate all",children:(0,k.jsx)(_.Z,{color:"error",onClick:Z.onTrue,children:(0,k.jsx)(P.Z,{icon:"iconoir:pause-solid"})})})}),color:F.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,k.jsx)(g.Z,{children:(0,k.jsxs)(s.Z,{ref:t,size:e.dense?"small":"medium",children:[(0,k.jsx)(j.K,{order:e.order,orderBy:e.orderBy,headLabel:fe,rowCount:F.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,F.map((e=>e._id)))}),(0,k.jsxs)(r.Z,{children:[F.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map((t=>(0,k.jsx)(Ze,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onActivate:()=>X(t._id),onInactivate:()=>Y(t._id),onEditRow:()=>ne(t._id)},t._id))),(0,k.jsx)(j.$W,{height:A,emptyRows:(0,j.fQ)(e.page,e.rowsPerPage,b.length)}),(0,k.jsx)(j.et,{notFound:B})]})]})})]}),(0,k.jsx)(j.S_,{count:F.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,k.jsx)(p.Q,{open:Z.value,onClose:Z.onFalse,title:"Inactivate",content:(0,k.jsxs)(k.Fragment,{children:["Are you sure want to Inactivate ",(0,k.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,k.jsx)(l.Z,{variant:"contained",color:"error",onClick:()=>{te(),Z.onFalse()},children:"Inactivate"})}),(0,k.jsx)(p.Q,{open:w.value,onClose:w.onFalse,title:"Activate",content:(0,k.jsxs)(k.Fragment,{children:["Are you sure want to Activate ",(0,k.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,k.jsx)(l.Z,{variant:"contained",color:"primary",onClick:()=>{ee(),w.onFalse()},children:"Activate"})})]})}function Pe(e){let{row:t,selected:n,onEditRow:a,onSelectRow:o,onInactivate:s,onActivate:l,filters:i,setFilters:r}=e;const{code:c,name_english:d,unit_service:u,status:h,created_at:g,user_creation:p,ip_address_user_creation:v,updated_at:m,user_modification:j,ip_address_user_modification:w,modifications_nums:Z}=t,R=(0,y.S)(),S=(0,y.S)(),F=(0,k.jsxs)(f.Z,{hover:!0,selected:n,children:[(0,k.jsx)(C.Z,{padding:"checkbox",children:(0,k.jsx)(Y.Z,{checked:n,onClick:o})}),(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(b.Z,{children:c})}),(0,k.jsx)(C.Z,{align:"center",children:d}),(0,k.jsx)(C.Z,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r({...i,name:u.name_english}),children:null===u||void 0===u?void 0:u.name_english}),(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(N.Z,{variant:"soft",color:("active"===h?"success":"inactive"===h&&"error")||"default",children:h})}),(0,k.jsx)(C.Z,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,k.jsx)(_.Z,{color:S.open?"inherit":"default",onClick:S.onOpen,children:(0,k.jsx)(P.Z,{icon:"eva:more-vertical-fill"})})})]});return(0,k.jsxs)(k.Fragment,{children:[F,(0,k.jsxs)(y.Z,{open:S.open,onClose:S.onClose,arrow:"right-top",sx:{width:140},children:["active"===h?(0,k.jsxs)(X.Z,{onClick:()=>{s(),S.onClose()},sx:{color:"error.main"},children:[(0,k.jsx)(P.Z,{icon:"ic:baseline-pause"}),"Inactivate"]}):(0,k.jsxs)(X.Z,{onClick:()=>{l(),S.onClose()},sx:{color:"success.main"},children:[(0,k.jsx)(P.Z,{icon:"bi:play-fill"}),"activate"]}),(0,k.jsxs)(X.Z,{onClick:()=>{a(),S.onClose()},children:[(0,k.jsx)(P.Z,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,k.jsxs)(X.Z,{onClick:R.onOpen,children:[(0,k.jsx)(P.Z,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,k.jsxs)(y.Z,{open:R.open,onClose:R.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,k.jsx)(b.Z,{sx:{fontWeight:600},children:"Creation Time:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,x.zM)(g)}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Creator:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===p||void 0===p?void 0:p.email}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Creator IP:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:v}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,x.zM)(m)}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===j||void 0===j?void 0:j.email}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:w}),(0,k.jsxs)(b.Z,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",Z]})]})]})}const ye=[{value:"all",label:"all"},{value:"active",label:"active"},{value:"inactive",label:"inactive"}],ke=[{id:"code",label:"Code"},{id:"name",label:"Name"},{id:"unit_service",label:"Unit Service"},{id:"status",label:"Status"},{id:"",width:88}],Re={name:"",status:"all"};function Se(){const e=(0,j.x6)({defaultOrderBy:"code"}),t=(0,a.useRef)(),n=(0,v.K$)(),x=(0,u.tv)(),w=(0,h.k)(),Z=(0,h.k)(),{employeeTypesData:b,loading:f,refetch:C}=(0,O.A3)(),[y,R]=(0,a.useState)(Re),S=!(!y.startDate||!y.endDate)&&y.startDate.getTime()>y.endDate.getTime(),F=function(e){let{inputData:t,comparator:n,filters:a,dateError:o}=e;const{status:s,name:l}=a,i=t.map(((e,t)=>[e,t]));i.sort(((e,t)=>{const a=n(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t=i.map((e=>e[0])),l&&(t=t.filter((e=>{var t,n,a,o,s;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(n=e.unit_service)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(a=e.unit_service)||void 0===a?void 0:a.name_english.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(o=e.unit_service)||void 0===o?void 0:o.name_arabic)&&-1!==(null===e||void 0===e||null===(s=e.unit_service)||void 0===s?void 0:s.name_arabic.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===l||JSON.stringify(e.code)===l})));"all"!==s&&(t=t.filter((e=>e.status===s)));return t}({inputData:b,comparator:(0,j.sQ)(e.order,e.orderBy),filters:y,dateError:S}),D=F.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),A=e.dense?52:72,T=!(null===y||void 0===y||!y.name)||"all"!==y.status,B=!F.length&&T||!F.length,I=(0,L.useReactToPrint)({content:()=>t.current}),H=(0,a.useCallback)(((t,n)=>{e.onResetPage(),R((e=>({...e,[t]:n})))}),[e]),X=(0,a.useCallback)((async t=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.employeetype(t),"/updatestatus"),data:{status:"active"}}),C(),e.onUpdatePageDeleteRow(D.length)}),[D.length,e,C]),Y=(0,a.useCallback)((async t=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.employeetype(t),"/updatestatus"),data:{status:"inactive"}}),C(),e.onUpdatePageDeleteRow(D.length)}),[D.length,e,C]),ee=(0,a.useCallback)((async()=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.employeetypes,"/updatestatus"),data:{status:"active",ids:e.selected}}),C(),e.onUpdatePageDeleteRows({totalRows:b.length,totalRowsInPage:D.length,totalRowsFiltered:F.length})}),[F.length,D.length,e,b,C]),te=(0,a.useCallback)((async()=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.employeetypes,"/updatestatus"),data:{status:"inactive",ids:e.selected}}),C(),e.onUpdatePageDeleteRows({totalRows:b.length,totalRowsInPage:D.length,totalRowsFiltered:F.length})}),[F.length,D.length,e,b,C]),ne=(0,a.useCallback)((e=>{x.push(d.H.superadmin.tables.employeetypes.edit(e))}),[x]),ae=(0,a.useCallback)((()=>{R(Re)}),[]),oe=(0,a.useCallback)(((e,t)=>{H("status",t)}),[H]);return f?(0,k.jsx)(U.a,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.Z,{maxWidth:!n.themeStretch&&"lg",children:[(0,k.jsx)(m.Z,{heading:"Employee Types",links:[{name:"dashboard",href:d.H.superadmin.root},{name:"Tables",href:d.H.superadmin.tables.list},{name:"Employee Types"}],action:(0,k.jsx)(l.Z,{component:E.r,href:d.H.superadmin.tables.employeetypes.new,variant:"contained",startIcon:(0,k.jsx)(P.Z,{icon:"mingcute:add-line"}),children:"New Employee Type"}),sx:{mb:{xs:3,md:5}}}),(0,k.jsxs)(o.Z,{children:[(0,k.jsx)(J.Z,{value:y.status,onChange:oe,sx:{px:2.5,boxShadow:e=>"inset 0 -2px 0 0 ".concat((0,G.Fq)(e.palette.grey[500],.08))},children:ye.map((e=>(0,k.jsx)(K.Z,{iconPosition:"end",value:e.value,label:e.label,icon:(0,k.jsxs)(N.Z,{variant:"all"===e.value||e.value===y.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&b.length,"active"===e.value&&b.filter((e=>"active"===e.status)).length,"inactive"===e.value&&b.filter((e=>"inactive"===e.status)).length]})},e.value)))}),(0,k.jsx)(M.Z,{onPrint:I,filters:y,onFilters:H,onDownload:()=>{const e=F.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.P6.book_new(),n=q.P6.json_to_sheet(e);q.P6.book_append_sheet(t,n,"Sheet 1");const a=q.cW(t,{bookType:"xlsx",type:"array"}),o=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,W.saveAs)(o,"EmployeeTypesData.xlsx")},canReset:T,onResetFilters:ae}),T&&(0,k.jsx)($.Z,{filters:y,onFilters:H,onResetFilters:ae,results:F.length,sx:{p:2.5,pt:0}}),(0,k.jsxs)(c.Z,{children:[(0,k.jsx)(j.Z4,{numSelected:e.selected.length,rowCount:F.length,onSelectAllRows:t=>e.onSelectAllRows(t,F.map((e=>e._id))),action:(0,k.jsx)(k.Fragment,{children:F.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?(0,k.jsx)(V.Z,{title:"Activate all",children:(0,k.jsx)(_.Z,{color:"primary",onClick:w.onTrue,children:(0,k.jsx)(P.Z,{icon:"codicon:run-all"})})}):(0,k.jsx)(V.Z,{title:"Inactivate all",children:(0,k.jsx)(_.Z,{color:"error",onClick:Z.onTrue,children:(0,k.jsx)(P.Z,{icon:"iconoir:pause-solid"})})})}),color:F.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,k.jsx)(g.Z,{children:(0,k.jsxs)(s.Z,{ref:t,size:e.dense?"small":"medium",children:[(0,k.jsx)(j.K,{order:e.order,orderBy:e.orderBy,headLabel:ke,rowCount:F.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,F.map((e=>e._id)))}),(0,k.jsxs)(r.Z,{children:[F.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map((t=>(0,k.jsx)(Pe,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onActivate:()=>X(t._id),onInactivate:()=>Y(t._id),onEditRow:()=>ne(t._id)},t._id))),(0,k.jsx)(j.$W,{height:A,emptyRows:(0,j.fQ)(e.page,e.rowsPerPage,b.length)}),(0,k.jsx)(j.et,{notFound:B})]})]})})]}),(0,k.jsx)(j.S_,{count:F.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,k.jsx)(p.Q,{open:Z.value,onClose:Z.onFalse,title:"Inactivate",content:(0,k.jsxs)(k.Fragment,{children:["Are you sure want to Inactivate ",(0,k.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,k.jsx)(l.Z,{variant:"contained",color:"error",onClick:()=>{te(),Z.onFalse()},children:"Inactivate"})}),(0,k.jsx)(p.Q,{open:w.value,onClose:w.onFalse,title:"Activate",content:(0,k.jsxs)(k.Fragment,{children:["Are you sure want to Activate ",(0,k.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,k.jsx)(l.Z,{variant:"contained",color:"primary",onClick:()=>{ee(),w.onFalse()},children:"Activate"})})]})}function Fe(e){let{row:t,selected:n,onEditRow:a,onSelectRow:o,onInactivate:s,onActivate:l,filters:i,setFilters:r}=e;const{code:c,name_english:d,status:u,created_at:h,user_creation:g,ip_address_user_creation:p,updated_at:v,user_modification:m,ip_address_user_modification:j,modifications_nums:w}=t,Z=(0,y.S)(),R=(0,y.S)(),S=(0,k.jsxs)(f.Z,{hover:!0,selected:n,children:[(0,k.jsx)(C.Z,{padding:"checkbox",children:(0,k.jsx)(Y.Z,{checked:n,onClick:o})}),(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(b.Z,{children:c})}),(0,k.jsx)(C.Z,{align:"center",children:d}),(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(N.Z,{variant:"soft",color:("active"===u?"success":"inactive"===u&&"error")||"default",children:u})}),(0,k.jsx)(C.Z,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,k.jsx)(_.Z,{color:Z.open?"inherit":"default",onClick:Z.onOpen,children:(0,k.jsx)(P.Z,{icon:"eva:more-vertical-fill"})})})]});return(0,k.jsxs)(k.Fragment,{children:[S,(0,k.jsxs)(y.Z,{open:Z.open,onClose:Z.onClose,arrow:"right-top",sx:{width:140},children:["active"===u?(0,k.jsxs)(X.Z,{onClick:()=>{s(),Z.onClose()},sx:{color:"error.main"},children:[(0,k.jsx)(P.Z,{icon:"ic:baseline-pause"}),"Inactivate"]}):(0,k.jsxs)(X.Z,{onClick:()=>{l(),Z.onClose()},sx:{color:"success.main"},children:[(0,k.jsx)(P.Z,{icon:"bi:play-fill"}),"activate"]}),(0,k.jsxs)(X.Z,{onClick:()=>{a(),Z.onClose()},children:[(0,k.jsx)(P.Z,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,k.jsxs)(X.Z,{onClick:R.onOpen,children:[(0,k.jsx)(P.Z,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,k.jsxs)(y.Z,{open:R.open,onClose:R.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,k.jsx)(b.Z,{sx:{fontWeight:600},children:"Creation Time:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,x.zM)(h)}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Creator:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===g||void 0===g?void 0:g.email}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Creator IP:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:p}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,x.zM)(v)}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===m||void 0===m?void 0:m.email}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:j}),(0,k.jsxs)(b.Z,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",w]})]})]})}const De=[{value:"all",label:"all"},{value:"active",label:"active"},{value:"inactive",label:"inactive"}],Ae=[{id:"code",label:"Code"},{id:"name",label:"Name"},{id:"status",label:"Status"},{id:"",width:88}],Te={name:"",status:"all"};function Be(){const e=(0,j.x6)({defaultOrderBy:"code"}),t=(0,a.useRef)(),n=(0,v.K$)(),x=(0,u.tv)(),w=(0,h.k)(),Z=(0,h.k)(),{paymentMethodsData:b,loading:f,refetch:C}=(0,O.wf)(),[y,R]=(0,a.useState)(Te),S=!(!y.startDate||!y.endDate)&&y.startDate.getTime()>y.endDate.getTime(),F=function(e){let{inputData:t,comparator:n,filters:a,dateError:o}=e;const{status:s,name:l}=a,i=t.map(((e,t)=>[e,t]));i.sort(((e,t)=>{const a=n(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t=i.map((e=>e[0])),l&&(t=t.filter((e=>{var t;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===l||JSON.stringify(e.code)===l})));"all"!==s&&(t=t.filter((e=>e.status===s)));return t}({inputData:b,comparator:(0,j.sQ)(e.order,e.orderBy),filters:y,dateError:S}),D=F.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),A=e.dense?52:72,T=!(null===y||void 0===y||!y.name)||"all"!==y.status,B=!F.length&&T||!F.length,I=(0,L.useReactToPrint)({content:()=>t.current}),H=(0,a.useCallback)(((t,n)=>{e.onResetPage(),R((e=>({...e,[t]:n})))}),[e]),X=(0,a.useCallback)((async t=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.paymentmethod(t),"/updatestatus"),data:{status:"active"}}),C(),e.onUpdatePageDeleteRow(D.length)}),[D.length,e,C]),Y=(0,a.useCallback)((async t=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.paymentmethod(t),"/updatestatus"),data:{status:"inactive"}}),C(),e.onUpdatePageDeleteRow(D.length)}),[D.length,e,C]),ee=(0,a.useCallback)((async()=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.paymentmethods,"/updatestatus"),data:{status:"active",ids:e.selected}}),C(),e.onUpdatePageDeleteRows({totalRows:b.length,totalRowsInPage:D.length,totalRowsFiltered:F.length})}),[F.length,D.length,e,b,C]),te=(0,a.useCallback)((async()=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.paymentmethods,"/updatestatus"),data:{status:"inactive",ids:e.selected}}),C(),e.onUpdatePageDeleteRows({totalRows:b.length,totalRowsInPage:D.length,totalRowsFiltered:F.length})}),[F.length,D.length,e,b,C]),ne=(0,a.useCallback)((e=>{x.push(d.H.superadmin.tables.paymentmethods.edit(e))}),[x]),ae=(0,a.useCallback)((()=>{R(Te)}),[]),oe=(0,a.useCallback)(((e,t)=>{H("status",t)}),[H]);return f?(0,k.jsx)(U.a,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.Z,{maxWidth:!n.themeStretch&&"lg",children:[(0,k.jsx)(m.Z,{heading:"Payment Methods",links:[{name:"dashboard",href:d.H.superadmin.root},{name:"Tables",href:d.H.superadmin.tables.list},{name:"Payment Methods"}],action:(0,k.jsx)(l.Z,{component:E.r,href:d.H.superadmin.tables.paymentmethods.new,variant:"contained",startIcon:(0,k.jsx)(P.Z,{icon:"mingcute:add-line"}),children:"New Payment Method"}),sx:{mb:{xs:3,md:5}}}),(0,k.jsxs)(o.Z,{children:[(0,k.jsx)(J.Z,{value:y.status,onChange:oe,sx:{px:2.5,boxShadow:e=>"inset 0 -2px 0 0 ".concat((0,G.Fq)(e.palette.grey[500],.08))},children:De.map((e=>(0,k.jsx)(K.Z,{iconPosition:"end",value:e.value,label:e.label,icon:(0,k.jsxs)(N.Z,{variant:"all"===e.value||e.value===y.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&b.length,"active"===e.value&&b.filter((e=>"active"===e.status)).length,"inactive"===e.value&&b.filter((e=>"inactive"===e.status)).length]})},e.value)))}),(0,k.jsx)(M.Z,{onPrint:I,filters:y,onFilters:H,onDownload:()=>{const e=F.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.P6.book_new(),n=q.P6.json_to_sheet(e);q.P6.book_append_sheet(t,n,"Sheet 1");const a=q.cW(t,{bookType:"xlsx",type:"array"}),o=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,W.saveAs)(o,"PaymentMethodsTable.xlsx")},canReset:T,onResetFilters:ae}),T&&(0,k.jsx)($.Z,{filters:y,onFilters:H,onResetFilters:ae,results:F.length,sx:{p:2.5,pt:0}}),(0,k.jsxs)(c.Z,{children:[(0,k.jsx)(j.Z4,{numSelected:e.selected.length,rowCount:F.length,onSelectAllRows:t=>e.onSelectAllRows(t,F.map((e=>e._id))),action:(0,k.jsx)(k.Fragment,{children:F.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?(0,k.jsx)(V.Z,{title:"Activate all",children:(0,k.jsx)(_.Z,{color:"primary",onClick:w.onTrue,children:(0,k.jsx)(P.Z,{icon:"codicon:run-all"})})}):(0,k.jsx)(V.Z,{title:"Inactivate all",children:(0,k.jsx)(_.Z,{color:"error",onClick:Z.onTrue,children:(0,k.jsx)(P.Z,{icon:"iconoir:pause-solid"})})})}),color:F.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,k.jsx)(g.Z,{children:(0,k.jsxs)(s.Z,{ref:t,size:e.dense?"small":"medium",children:[(0,k.jsx)(j.K,{order:e.order,orderBy:e.orderBy,headLabel:Ae,rowCount:F.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,F.map((e=>e._id)))}),(0,k.jsxs)(r.Z,{children:[F.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map((t=>(0,k.jsx)(Fe,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onActivate:()=>X(t._id),onInactivate:()=>Y(t._id),onEditRow:()=>ne(t._id)},t._id))),(0,k.jsx)(j.$W,{height:A,emptyRows:(0,j.fQ)(e.page,e.rowsPerPage,b.length)}),(0,k.jsx)(j.et,{notFound:B})]})]})})]}),(0,k.jsx)(j.S_,{count:F.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,k.jsx)(p.Q,{open:Z.value,onClose:Z.onFalse,title:"Inactivate",content:(0,k.jsxs)(k.Fragment,{children:["Are you sure want to Inactivate ",(0,k.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,k.jsx)(l.Z,{variant:"contained",color:"error",onClick:()=>{te(),Z.onFalse()},children:"Inactivate"})}),(0,k.jsx)(p.Q,{open:w.value,onClose:w.onFalse,title:"Activate",content:(0,k.jsxs)(k.Fragment,{children:["Are you sure want to Activate ",(0,k.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,k.jsx)(l.Z,{variant:"contained",color:"primary",onClick:()=>{ee(),w.onFalse()},children:"Activate"})})]})}function Ie(e){let{row:t,selected:n,onEditRow:a,onSelectRow:o,onInactivate:s,onActivate:l,filters:i,setFilters:r}=e;const{code:c,name_english:d,unit_service:u,Employee:h,Service:g,type:p,Comment:v,percentage:m,status:j,created_at:w,user_creation:Z,ip_address_user_creation:R,updated_at:S,user_modification:F,ip_address_user_modification:D,modifications_nums:A}=t,T=(0,y.S)(),B=(0,y.S)(),I=(0,k.jsxs)(f.Z,{hover:!0,selected:n,children:[(0,k.jsx)(C.Z,{padding:"checkbox",children:(0,k.jsx)(Y.Z,{checked:n,onClick:o})}),(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(b.Z,{children:c})}),(0,k.jsx)(C.Z,{align:"center",children:d}),(0,k.jsx)(C.Z,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r({...i,name:null===u||void 0===u?void 0:u.name_english}),children:null===u||void 0===u?void 0:u.name_english}),(0,k.jsx)(C.Z,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r({...i,name:null===h||void 0===h?void 0:h.name_english}),children:null===h||void 0===h?void 0:h.name_english}),(0,k.jsx)(C.Z,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r({...i,name:null===g||void 0===g?void 0:g.name_english}),children:null===g||void 0===g?void 0:g.name_english}),(0,k.jsx)(C.Z,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r({...i,name:p}),children:null===p||void 0===p?void 0:p.name_english}),(0,k.jsx)(C.Z,{align:"center",children:v}),(0,k.jsx)(C.Z,{align:"center",children:m}),(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(N.Z,{variant:"soft",color:("active"===j?"success":"inactive"===j&&"error")||"default",children:j})}),(0,k.jsx)(C.Z,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,k.jsx)(_.Z,{color:B.open?"inherit":"default",onClick:B.onOpen,children:(0,k.jsx)(P.Z,{icon:"eva:more-vertical-fill"})})})]});return(0,k.jsxs)(k.Fragment,{children:[I,(0,k.jsxs)(y.Z,{open:B.open,onClose:B.onClose,arrow:"right-top",sx:{width:140},children:["active"===j?(0,k.jsxs)(X.Z,{onClick:()=>{s(),B.onClose()},sx:{color:"error.main"},children:[(0,k.jsx)(P.Z,{icon:"ic:baseline-pause"}),"Inactivate"]}):(0,k.jsxs)(X.Z,{onClick:()=>{l(),B.onClose()},sx:{color:"success.main"},children:[(0,k.jsx)(P.Z,{icon:"bi:play-fill"}),"activate"]}),(0,k.jsxs)(X.Z,{onClick:()=>{a(),B.onClose()},children:[(0,k.jsx)(P.Z,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,k.jsxs)(X.Z,{onClick:T.onOpen,children:[(0,k.jsx)(P.Z,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,k.jsxs)(y.Z,{open:T.open,onClose:T.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,k.jsx)(b.Z,{sx:{fontWeight:600},children:"Creation Time:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,x.zM)(w)}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Creator:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===Z||void 0===Z?void 0:Z.email}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Creator IP:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:R}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,x.zM)(S)}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===F||void 0===F?void 0:F.email}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:D}),(0,k.jsxs)(b.Z,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",A]})]})]})}const He=[{value:"all",label:"all"},{value:"active",label:"active"},{value:"inactive",label:"inactive"}],We=[{id:"code",label:"Code"},{id:"name",label:"Name"},{id:"unit_service",label:"Unit Service"},{id:"Employee",label:"Employee"},{id:"Service",label:"Service"},{id:"type",label:"type"},{id:"Comment",label:"Comment"},{id:"percentage",label:"percentage"},{id:"status",label:"Status"},{id:"",width:88}],Le={name:"",status:"all"};function Ee(){const e=(0,j.x6)({defaultOrderBy:"code"}),t=(0,a.useRef)(),n=(0,v.K$)(),x=(0,u.tv)(),w=(0,h.k)(),Z=(0,h.k)(),{deductionsData:b,loading:f,refetch:C}=(0,O.e6)(),[y,R]=(0,a.useState)(Le),S=!(!y.startDate||!y.endDate)&&y.startDate.getTime()>y.endDate.getTime(),F=function(e){var t;let{inputData:n,comparator:a,filters:o,dateError:s}=e;const{status:l,name:i}=o,r=null===(t=n)||void 0===t?void 0:t.map(((e,t)=>[e,t]));r.sort(((e,t)=>{const n=a(e[0],t[0]);return 0!==n?n:e[1]-t[1]})),n=r.map((e=>e[0])),i&&(n=n.filter((e=>{var t,n,a,o,s;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(n=e.unit_service)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(a=e.unit_service)||void 0===a?void 0:a.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(o=e.unit_service)||void 0===o?void 0:o.name_arabic)&&-1!==(null===e||void 0===e||null===(s=e.unit_service)||void 0===s?void 0:s.name_arabic.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===i||JSON.stringify(e.code)===i})));"all"!==l&&(n=n.filter((e=>e.status===l)));return n}({inputData:b,comparator:(0,j.sQ)(e.order,e.orderBy),filters:y,dateError:S}),D=F.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),A=e.dense?52:72,T=!(null===y||void 0===y||!y.name)||"all"!==y.status,B=!F.length&&T||!F.length,I=(0,L.useReactToPrint)({content:()=>t.current}),H=(0,a.useCallback)(((t,n)=>{e.onResetPage(),R((e=>({...e,[t]:n})))}),[e]),X=(0,a.useCallback)((async t=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.deduction(t),"/updatestatus"),data:{status:"active"}}),C(),e.onUpdatePageDeleteRow(D.length)}),[D.length,e,C]),Y=(0,a.useCallback)((async t=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.deduction(t),"/updatestatus"),data:{status:"inactive"}}),C(),e.onUpdatePageDeleteRow(D.length)}),[D.length,e,C]),ee=(0,a.useCallback)((async()=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.deductions,"/updatestatus"),data:{status:"active",ids:e.selected}}),C(),e.onUpdatePageDeleteRows({totalRows:b.length,totalRowsInPage:D.length,totalRowsFiltered:F.length})}),[F.length,D.length,e,b,C]),te=(0,a.useCallback)((async()=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.deductions,"/updatestatus"),data:{status:"inactive",ids:e.selected}}),C(),e.onUpdatePageDeleteRows({totalRows:b.length,totalRowsInPage:D.length,totalRowsFiltered:F.length})}),[F.length,D.length,e,b,C]),ne=(0,a.useCallback)((e=>{x.push(d.H.superadmin.tables.deductionconfig.edit(e))}),[x]),ae=(0,a.useCallback)((()=>{R(Le)}),[]),oe=(0,a.useCallback)(((e,t)=>{H("status",t)}),[H]);return f?(0,k.jsx)(U.a,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.Z,{maxWidth:!n.themeStretch&&"lg",children:[(0,k.jsx)(m.Z,{heading:"Deduction Config",links:[{name:"dashboard",href:d.H.superadmin.root},{name:"Tables",href:d.H.superadmin.tables.list},{name:"Deduction Config"}],action:(0,k.jsx)(l.Z,{component:E.r,href:d.H.superadmin.tables.deductionconfig.new,variant:"contained",startIcon:(0,k.jsx)(P.Z,{icon:"mingcute:add-line"}),children:"New Deduction Config"}),sx:{mb:{xs:3,md:5}}}),(0,k.jsxs)(o.Z,{children:[(0,k.jsx)(J.Z,{value:y.status,onChange:oe,sx:{px:2.5,boxShadow:e=>"inset 0 -2px 0 0 ".concat((0,G.Fq)(e.palette.grey[500],.08))},children:He.map((e=>(0,k.jsx)(K.Z,{iconPosition:"end",value:e.value,label:e.label,icon:(0,k.jsxs)(N.Z,{variant:"all"===e.value||e.value===y.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&b.length,"active"===e.value&&b.filter((e=>"active"===e.status)).length,"inactive"===e.value&&b.filter((e=>"inactive"===e.status)).length]})},e.value)))}),(0,k.jsx)(M.Z,{onPrint:I,filters:y,onFilters:H,onDownload:()=>{const e=F.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.P6.book_new(),n=q.P6.json_to_sheet(e);q.P6.book_append_sheet(t,n,"Sheet 1");const a=q.cW(t,{bookType:"xlsx",type:"array"}),o=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,W.saveAs)(o,"DeductionsTable.xlsx")},canReset:T,onResetFilters:ae}),T&&(0,k.jsx)($.Z,{filters:y,onFilters:H,onResetFilters:ae,results:F.length,sx:{p:2.5,pt:0}}),(0,k.jsxs)(c.Z,{children:[(0,k.jsx)(j.Z4,{numSelected:e.selected.length,rowCount:F.length,onSelectAllRows:t=>e.onSelectAllRows(t,F.map((e=>e._id))),action:(0,k.jsx)(k.Fragment,{children:F.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?(0,k.jsx)(V.Z,{title:"Activate all",children:(0,k.jsx)(_.Z,{color:"primary",onClick:w.onTrue,children:(0,k.jsx)(P.Z,{icon:"codicon:run-all"})})}):(0,k.jsx)(V.Z,{title:"Inactivate all",children:(0,k.jsx)(_.Z,{color:"error",onClick:Z.onTrue,children:(0,k.jsx)(P.Z,{icon:"iconoir:pause-solid"})})})}),color:F.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,k.jsx)(g.Z,{children:(0,k.jsxs)(s.Z,{ref:t,size:e.dense?"small":"medium",children:[(0,k.jsx)(j.K,{order:e.order,orderBy:e.orderBy,headLabel:We,rowCount:F.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,F.map((e=>e._id)))}),(0,k.jsxs)(r.Z,{children:[F.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map((t=>(0,k.jsx)(Ie,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onActivate:()=>X(t._id),onInactivate:()=>Y(t._id),onEditRow:()=>ne(t._id)},t._id))),(0,k.jsx)(j.$W,{height:A,emptyRows:(0,j.fQ)(e.page,e.rowsPerPage,b.length)}),(0,k.jsx)(j.et,{notFound:B})]})]})})]}),(0,k.jsx)(j.S_,{count:F.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,k.jsx)(p.Q,{open:Z.value,onClose:Z.onFalse,title:"Inactivate",content:(0,k.jsxs)(k.Fragment,{children:["Are you sure want to Inactivate ",(0,k.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,k.jsx)(l.Z,{variant:"contained",color:"error",onClick:()=>{te(),Z.onFalse()},children:"Inactivate"})}),(0,k.jsx)(p.Q,{open:w.value,onClose:w.onFalse,title:"Activate",content:(0,k.jsxs)(k.Fragment,{children:["Are you sure want to Activate ",(0,k.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,k.jsx)(l.Z,{variant:"contained",color:"primary",onClick:()=>{ee(),w.onFalse()},children:"Activate"})})]})}function Oe(e){let{row:t,selected:n,onEditRow:a,onSelectRow:o,onInactivate:s,onActivate:l,filters:i,setFilters:r}=e;const{code:c,symbol:d,name_english:u,status:h,created_at:g,user_creation:p,ip_address_user_creation:v,updated_at:m,user_modification:j,ip_address_user_modification:w,modifications_nums:Z}=t,R=(0,y.S)(),S=(0,y.S)(),F=(0,k.jsxs)(f.Z,{hover:!0,selected:n,children:[(0,k.jsx)(C.Z,{padding:"checkbox",children:(0,k.jsx)(Y.Z,{checked:n,onClick:o})}),(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(b.Z,{children:c})}),(0,k.jsx)(C.Z,{align:"center",children:d}),(0,k.jsx)(C.Z,{align:"center",children:u}),(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(N.Z,{variant:"soft",color:("active"===h?"success":"inactive"===h&&"error")||"default",children:h})}),(0,k.jsx)(C.Z,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,k.jsx)(_.Z,{color:S.open?"inherit":"default",onClick:S.onOpen,children:(0,k.jsx)(P.Z,{icon:"eva:more-vertical-fill"})})})]});return(0,k.jsxs)(k.Fragment,{children:[F,(0,k.jsxs)(y.Z,{open:S.open,onClose:S.onClose,arrow:"right-top",sx:{width:140},children:["active"===h?(0,k.jsxs)(X.Z,{onClick:()=>{s(),S.onClose()},sx:{color:"error.main"},children:[(0,k.jsx)(P.Z,{icon:"ic:baseline-pause"}),"Inactivate"]}):(0,k.jsxs)(X.Z,{onClick:()=>{l(),S.onClose()},sx:{color:"success.main"},children:[(0,k.jsx)(P.Z,{icon:"bi:play-fill"}),"activate"]}),(0,k.jsxs)(X.Z,{onClick:()=>{a(),S.onClose()},children:[(0,k.jsx)(P.Z,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,k.jsxs)(X.Z,{onClick:R.onOpen,children:[(0,k.jsx)(P.Z,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,k.jsxs)(y.Z,{open:R.open,onClose:R.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,k.jsx)(b.Z,{sx:{fontWeight:600},children:"Creation Time:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,x.zM)(g)}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Creator:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===p||void 0===p?void 0:p.email}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Creator IP:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:v}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,x.zM)(m)}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===j||void 0===j?void 0:j.email}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:w}),(0,k.jsxs)(b.Z,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",Z]})]})]})}const Ne=[{value:"all",label:"all"},{value:"active",label:"active"},{value:"inactive",label:"inactive"}],Ue=[{id:"code",label:"Code"},{id:"symbol",label:"Symbol"},{id:"name",label:"Name"},{id:"status",label:"Status"},{id:"",width:88}],Qe={name:"",status:"all"};function ze(){const e=(0,j.x6)({defaultOrderBy:"code"}),t=(0,a.useRef)(),n=(0,v.K$)(),x=(0,u.tv)(),w=(0,h.k)(),Z=(0,h.k)(),{measurmentTypesData:b,loading:f,refetch:C}=(0,O.k3)(),[y,R]=(0,a.useState)(Qe),S=!(!y.startDate||!y.endDate)&&y.startDate.getTime()>y.endDate.getTime(),F=function(e){let{inputData:t,comparator:n,filters:a,dateError:o}=e;const{status:s,name:l}=a,i=t.map(((e,t)=>[e,t]));i.sort(((e,t)=>{const a=n(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t=i.map((e=>e[0])),l&&(t=t.filter((e=>{var t;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===l||(null===e||void 0===e?void 0:e.symbol)===l||JSON.stringify(e.code)===l})));"all"!==s&&(t=t.filter((e=>e.status===s)));return t}({inputData:b,comparator:(0,j.sQ)(e.order,e.orderBy),filters:y,dateError:S}),D=F.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),A=e.dense?52:72,T=!(null===y||void 0===y||!y.name)||"all"!==y.status,B=!F.length&&T||!F.length,I=(0,L.useReactToPrint)({content:()=>t.current}),H=(0,a.useCallback)(((t,n)=>{e.onResetPage(),R((e=>({...e,[t]:n})))}),[e]),X=(0,a.useCallback)((async t=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.measurmenttype(t),"/updatestatus"),data:{status:"active"}}),C(),e.onUpdatePageDeleteRow(D.length)}),[D.length,e,C]),Y=(0,a.useCallback)((async t=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.measurmenttype(t),"/updatestatus"),data:{status:"inactive"}}),C(),e.onUpdatePageDeleteRow(D.length)}),[D.length,e,C]),ee=(0,a.useCallback)((async()=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.measurmenttypes,"/updatestatus"),data:{status:"active",ids:e.selected}}),C(),e.onUpdatePageDeleteRows({totalRows:b.length,totalRowsInPage:D.length,totalRowsFiltered:F.length})}),[F.length,D.length,e,b,C]),te=(0,a.useCallback)((async()=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.measurmenttypes,"/updatestatus"),data:{status:"inactive",ids:e.selected}}),C(),e.onUpdatePageDeleteRows({totalRows:b.length,totalRowsInPage:D.length,totalRowsFiltered:F.length})}),[F.length,D.length,e,b,C]),ne=(0,a.useCallback)((e=>{x.push(d.H.superadmin.tables.measurementtypes.edit(e))}),[x]),ae=(0,a.useCallback)((()=>{R(Qe)}),[]),oe=(0,a.useCallback)(((e,t)=>{H("status",t)}),[H]);return f?(0,k.jsx)(U.a,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.Z,{maxWidth:!n.themeStretch&&"lg",children:[(0,k.jsx)(m.Z,{heading:"Measurment Types",links:[{name:"dashboard",href:d.H.superadmin.root},{name:"Tables",href:d.H.superadmin.tables.list},{name:"Measurment Types"}],action:(0,k.jsx)(l.Z,{component:E.r,href:d.H.superadmin.tables.measurementtypes.new,variant:"contained",startIcon:(0,k.jsx)(P.Z,{icon:"mingcute:add-line"}),children:"New Measurment Type"}),sx:{mb:{xs:3,md:5}}}),(0,k.jsxs)(o.Z,{children:[(0,k.jsx)(J.Z,{value:y.status,onChange:oe,sx:{px:2.5,boxShadow:e=>"inset 0 -2px 0 0 ".concat((0,G.Fq)(e.palette.grey[500],.08))},children:Ne.map((e=>(0,k.jsx)(K.Z,{iconPosition:"end",value:e.value,label:e.label,icon:(0,k.jsxs)(N.Z,{variant:"all"===e.value||e.value===y.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&b.length,"active"===e.value&&b.filter((e=>"active"===e.status)).length,"inactive"===e.value&&b.filter((e=>"inactive"===e.status)).length]})},e.value)))}),(0,k.jsx)(M.Z,{onPrint:I,filters:y,onFilters:H,onDownload:()=>{const e=F.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.P6.book_new(),n=q.P6.json_to_sheet(e);q.P6.book_append_sheet(t,n,"Sheet 1");const a=q.cW(t,{bookType:"xlsx",type:"array"}),o=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,W.saveAs)(o,"MeasurmentTypesTable.xlsx")},canReset:T,onResetFilters:ae}),T&&(0,k.jsx)($.Z,{filters:y,onFilters:H,onResetFilters:ae,results:F.length,sx:{p:2.5,pt:0}}),(0,k.jsxs)(c.Z,{children:[(0,k.jsx)(j.Z4,{numSelected:e.selected.length,rowCount:F.length,onSelectAllRows:t=>e.onSelectAllRows(t,F.map((e=>e._id))),action:(0,k.jsx)(k.Fragment,{children:F.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?(0,k.jsx)(V.Z,{title:"Activate all",children:(0,k.jsx)(_.Z,{color:"primary",onClick:w.onTrue,children:(0,k.jsx)(P.Z,{icon:"codicon:run-all"})})}):(0,k.jsx)(V.Z,{title:"Inactivate all",children:(0,k.jsx)(_.Z,{color:"error",onClick:Z.onTrue,children:(0,k.jsx)(P.Z,{icon:"iconoir:pause-solid"})})})}),color:F.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,k.jsx)(g.Z,{children:(0,k.jsxs)(s.Z,{ref:t,size:e.dense?"small":"medium",children:[(0,k.jsx)(j.K,{order:e.order,orderBy:e.orderBy,headLabel:Ue,rowCount:F.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,F.map((e=>e._id)))}),(0,k.jsxs)(r.Z,{children:[F.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map((t=>(0,k.jsx)(Oe,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onActivate:()=>X(t._id),onInactivate:()=>Y(t._id),onEditRow:()=>ne(t._id)},t._id))),(0,k.jsx)(j.$W,{height:A,emptyRows:(0,j.fQ)(e.page,e.rowsPerPage,b.length)}),(0,k.jsx)(j.et,{notFound:B})]})]})})]}),(0,k.jsx)(j.S_,{count:F.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,k.jsx)(p.Q,{open:Z.value,onClose:Z.onFalse,title:"Inactivate",content:(0,k.jsxs)(k.Fragment,{children:["Are you sure want to Inactivate ",(0,k.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,k.jsx)(l.Z,{variant:"contained",color:"error",onClick:()=>{te(),Z.onFalse()},children:"Inactivate"})}),(0,k.jsx)(p.Q,{open:w.value,onClose:w.onFalse,title:"Activate",content:(0,k.jsxs)(k.Fragment,{children:["Are you sure want to Activate ",(0,k.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,k.jsx)(l.Z,{variant:"contained",color:"primary",onClick:()=>{ee(),w.onFalse()},children:"Activate"})})]})}function Me(e){let{row:t,selected:n,onEditRow:a,onSelectRow:o,onInactivate:s,onActivate:l,filters:i,setFilters:r}=e;const{code:c,name_english:d,unit_service:u,service:h,description:g,status:p,created_at:v,user_creation:m,ip_address_user_creation:j,updated_at:w,user_modification:Z,ip_address_user_modification:R,modifications_nums:S}=t,F=(0,y.S)(),D=(0,y.S)(),A=(0,k.jsxs)(f.Z,{hover:!0,selected:n,children:[(0,k.jsx)(C.Z,{padding:"checkbox",children:(0,k.jsx)(Y.Z,{checked:n,onClick:o})}),(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(b.Z,{children:c})}),(0,k.jsx)(C.Z,{align:"center",children:d}),(0,k.jsx)(C.Z,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r({...i,name:u.name_english}),children:null===u||void 0===u?void 0:u.name_english}),(0,k.jsx)(C.Z,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r({...i,name:h.name_english}),children:null===h||void 0===h?void 0:h.name_english}),(0,k.jsx)(C.Z,{align:"center",children:g}),(0,k.jsx)(C.Z,{align:"center",children:(0,k.jsx)(N.Z,{variant:"soft",color:("active"===p?"success":"inactive"===p&&"error")||"default",children:p})}),(0,k.jsx)(C.Z,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,k.jsx)(_.Z,{color:F.open?"inherit":"default",onClick:F.onOpen,children:(0,k.jsx)(P.Z,{icon:"eva:more-vertical-fill"})})})]});return(0,k.jsxs)(k.Fragment,{children:[A,(0,k.jsxs)(y.Z,{open:F.open,onClose:F.onClose,arrow:"right-top",sx:{width:140},children:["active"===p?(0,k.jsxs)(X.Z,{onClick:()=>{s(),F.onClose()},sx:{color:"error.main"},children:[(0,k.jsx)(P.Z,{icon:"ic:baseline-pause"}),"Inactivate"]}):(0,k.jsxs)(X.Z,{onClick:()=>{l(),F.onClose()},sx:{color:"success.main"},children:[(0,k.jsx)(P.Z,{icon:"bi:play-fill"}),"activate"]}),(0,k.jsxs)(X.Z,{onClick:()=>{a(),F.onClose()},children:[(0,k.jsx)(P.Z,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,k.jsxs)(X.Z,{onClick:D.onOpen,children:[(0,k.jsx)(P.Z,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,k.jsxs)(y.Z,{open:D.open,onClose:D.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,k.jsx)(b.Z,{sx:{fontWeight:600},children:"Creation Time:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,x.zM)(v)}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Creator:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===m||void 0===m?void 0:m.email}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Creator IP:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:j}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,x.zM)(w)}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===Z||void 0===Z?void 0:Z.email}),(0,k.jsx)(b.Z,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,k.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:R}),(0,k.jsxs)(b.Z,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",S]})]})]})}const $e=[{value:"all",label:"all"},{value:"active",label:"active"},{value:"inactive",label:"inactive"}],qe=[{id:"code",label:"Code"},{id:"name",label:"Name"},{id:"unit_service",label:"Unit Service"},{id:"service",label:"Service"},{id:"description",label:"Description"},{id:"status",label:"Status"},{id:"",width:88}],Ke={name:"",status:"all"};function Je(){const e=(0,j.x6)({defaultOrderBy:"code"}),t=(0,a.useRef)(),n=(0,v.K$)(),x=(0,u.tv)(),w=(0,h.k)(),Z=(0,h.k)(),{stakeholderTypesData:b,loading:f,refetch:C}=(0,O.At)(),[y,R]=(0,a.useState)(Ke),S=!(!y.startDate||!y.endDate)&&y.startDate.getTime()>y.endDate.getTime(),F=function(e){let{inputData:t,comparator:n,filters:a,dateError:o}=e;const{status:s,name:l}=a,i=t.map(((e,t)=>[e,t]));i.sort(((e,t)=>{const a=n(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t=i.map((e=>e[0])),l&&(t=t.filter((e=>{var t,n,a,o,s,i,r,c,d;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(n=e.unit_service)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(a=e.unit_service)||void 0===a?void 0:a.name_english.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(o=e.unit_service)||void 0===o?void 0:o.name_arabic)&&-1!==(null===e||void 0===e||null===(s=e.unit_service)||void 0===s?void 0:s.name_arabic.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(i=e.service)||void 0===i?void 0:i.name_english)&&-1!==(null===e||void 0===e||null===(r=e.service)||void 0===r?void 0:r.name_english.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(c=e.service)||void 0===c?void 0:c.name_arabic)&&-1!==(null===e||void 0===e||null===(d=e.service)||void 0===d?void 0:d.name_arabic.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===l||JSON.stringify(e.code)===l})));"all"!==s&&(t=t.filter((e=>e.status===s)));return t}({inputData:b,comparator:(0,j.sQ)(e.order,e.orderBy),filters:y,dateError:S}),D=F.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),A=e.dense?52:72,T=!(null===y||void 0===y||!y.name)||"all"!==y.status,B=!F.length&&T||!F.length,I=(0,L.useReactToPrint)({content:()=>t.current}),H=(0,a.useCallback)(((t,n)=>{e.onResetPage(),R((e=>({...e,[t]:n})))}),[e]),X=(0,a.useCallback)((async t=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.stakeholdertype(t),"/updatestatus"),data:{status:"active"}}),C(),e.onUpdatePageDeleteRow(D.length)}),[D.length,e,C]),Y=(0,a.useCallback)((async t=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.stakeholdertype(t),"/updatestatus"),data:{status:"inactive"}}),C(),e.onUpdatePageDeleteRow(D.length)}),[D.length,e,C]),ee=(0,a.useCallback)((async()=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.stakeholdertypes,"/updatestatus"),data:{status:"active",ids:e.selected}}),C(),e.onUpdatePageDeleteRows({totalRows:b.length,totalRowsInPage:D.length,totalRowsFiltered:F.length})}),[F.length,D.length,e,b,C]),te=(0,a.useCallback)((async()=>{await(0,z.Z)({method:"PATCH",path:"".concat(Q.Hv.tables.stakeholdertypes,"/updatestatus"),data:{status:"inactive",ids:e.selected}}),C(),e.onUpdatePageDeleteRows({totalRows:b.length,totalRowsInPage:D.length,totalRowsFiltered:F.length})}),[F.length,D.length,e,b,C]),ne=(0,a.useCallback)((e=>{x.push(d.H.superadmin.tables.stakeholdertypes.edit(e))}),[x]),ae=(0,a.useCallback)((()=>{R(Ke)}),[]),oe=(0,a.useCallback)(((e,t)=>{H("status",t)}),[H]);return f?(0,k.jsx)(U.a,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.Z,{maxWidth:!n.themeStretch&&"lg",children:[(0,k.jsx)(m.Z,{heading:"Stakeholder Types",links:[{name:"dashboard",href:d.H.superadmin.root},{name:"Tables",href:d.H.superadmin.tables.list},{name:"Stakeholder Types"}],action:(0,k.jsx)(l.Z,{component:E.r,href:d.H.superadmin.tables.stakeholdertypes.new,variant:"contained",startIcon:(0,k.jsx)(P.Z,{icon:"mingcute:add-line"}),children:"New Stakeholder Type"}),sx:{mb:{xs:3,md:5}}}),(0,k.jsxs)(o.Z,{children:[(0,k.jsx)(J.Z,{value:y.status,onChange:oe,sx:{px:2.5,boxShadow:e=>"inset 0 -2px 0 0 ".concat((0,G.Fq)(e.palette.grey[500],.08))},children:$e.map((e=>(0,k.jsx)(K.Z,{iconPosition:"end",value:e.value,label:e.label,icon:(0,k.jsxs)(N.Z,{variant:"all"===e.value||e.value===y.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&b.length,"active"===e.value&&b.filter((e=>"active"===e.status)).length,"inactive"===e.value&&b.filter((e=>"inactive"===e.status)).length]})},e.value)))}),(0,k.jsx)(M.Z,{onPrint:I,filters:y,onFilters:H,onDownload:()=>{const e=F.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.P6.book_new(),n=q.P6.json_to_sheet(e);q.P6.book_append_sheet(t,n,"Sheet 1");const a=q.cW(t,{bookType:"xlsx",type:"array"}),o=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,W.saveAs)(o,"StakeholderTypesTable.xlsx")},canReset:T,onResetFilters:ae}),T&&(0,k.jsx)($.Z,{filters:y,onFilters:H,onResetFilters:ae,results:F.length,sx:{p:2.5,pt:0}}),(0,k.jsxs)(c.Z,{children:[(0,k.jsx)(j.Z4,{numSelected:e.selected.length,rowCount:F.length,onSelectAllRows:t=>e.onSelectAllRows(t,F.map((e=>e._id))),action:(0,k.jsx)(k.Fragment,{children:F.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?(0,k.jsx)(V.Z,{title:"Activate all",children:(0,k.jsx)(_.Z,{color:"primary",onClick:w.onTrue,children:(0,k.jsx)(P.Z,{icon:"codicon:run-all"})})}):(0,k.jsx)(V.Z,{title:"Inactivate all",children:(0,k.jsx)(_.Z,{color:"error",onClick:Z.onTrue,children:(0,k.jsx)(P.Z,{icon:"iconoir:pause-solid"})})})}),color:F.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,k.jsx)(g.Z,{children:(0,k.jsxs)(s.Z,{ref:t,size:e.dense?"small":"medium",children:[(0,k.jsx)(j.K,{order:e.order,orderBy:e.orderBy,headLabel:qe,rowCount:F.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,F.map((e=>e._id)))}),(0,k.jsxs)(r.Z,{children:[F.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map((t=>(0,k.jsx)(Me,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onActivate:()=>X(t._id),onInactivate:()=>Y(t._id),onEditRow:()=>ne(t._id)},t._id))),(0,k.jsx)(j.$W,{height:A,emptyRows:(0,j.fQ)(e.page,e.rowsPerPage,b.length)}),(0,k.jsx)(j.et,{notFound:B})]})]})})]}),(0,k.jsx)(j.S_,{count:F.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,k.jsx)(p.Q,{open:Z.value,onClose:Z.onFalse,title:"Inactivate",content:(0,k.jsxs)(k.Fragment,{children:["Are you sure want to Inactivate ",(0,k.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,k.jsx)(l.Z,{variant:"contained",color:"error",onClick:()=>{te(),Z.onFalse()},children:"Inactivate"})}),(0,k.jsx)(p.Q,{open:w.value,onClose:w.onFalse,title:"Activate",content:(0,k.jsxs)(k.Fragment,{children:["Are you sure want to Activate ",(0,k.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,k.jsx)(l.Z,{variant:"contained",color:"primary",onClick:()=>{ee(),w.onFalse()},children:"Activate"})})]})}},6385:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(55294),o=n(88329),s=n(33805);async function l(e){let{setData:t,setError:n,method:l,path:i,data:r}=e;const c="".concat(s.E0).concat(i),d=o.Z.get("user_token"),u=await(0,a.Z)({method:l,url:c,headers:{authorization:"Bearer ".concat(d)},data:r});return t&&t(u.data),n&&n(u.data),u}},88329:(e,t,n)=>{function a(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)e[a]=n[a]}return e}n.d(t,{Z:()=>o});var o=function e(t,n){function o(e,o,s){if("undefined"!==typeof document){"number"===typeof(s=a({},n,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var i in s)s[i]&&(l+="; "+i,!0!==s[i]&&(l+="="+s[i].split(";")[0]));return document.cookie=e+"="+t.write(o,e)+l}}return Object.create({set:o,get:function(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],a={},o=0;o<n.length;o++){var s=n[o].split("="),l=s.slice(1).join("=");try{var i=decodeURIComponent(s[0]);if(a[i]=t.read(l,i),e===i)break}catch(r){}}return e?a[e]:a}},remove:function(e,t){o(e,"",a({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,a({},this.attributes,t))},withConverter:function(t){return e(a({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}}]);
//# sourceMappingURL=5362.492be518.chunk.js.map
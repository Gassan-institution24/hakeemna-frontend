"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[79844],{79844:(e,n,o)=>{o.r(n),o.d(n,{default:()=>q});var i=o(29490),r=o(11238),l=o(72450),t=o(93141),s=o(65043),a=o(12110),d=o(71806),c=o(49633),p=o(77224),h=o(73460),u=o(79650),x=o(1273),v=o(68738),m=o(39652),j=o(72221),_=o(94814),y=o(48407),g=o(65381),A=o(67132),f=o(7625),b=o(35151),w=o(51440),C=o(67555),L=o(83858),k=o(75950),P=o(46987),O=o(81e3),S=o(17392),W=o(74600),M=o(67784),T=o(51787),D=o(26353),R=o(57442),B=o(31673),E=o(34624),F=o(70579);function z(e){let{row:n,index:o,selected:i,onEditRow:r,showAll:l,onSelectRow:t}=e;const{code:a,unit_service_type:d,country:c,city:p,email:h,insurance:u,info:x,sector:j,commercial_name:y,province:g,address:A,phone_number_1:f,Phone_number_2:w,work_shift:C,constitution_objective:L,type_of_specialty_1:k,type_of_specialty_2:z,status:I,com_note:$,created_at:U,user_creation:N,ip_address_user_creation:q,updated_at:Z,user_modification:J,ip_address_user_modification:K,modifications_nums:G}=n,{enqueueSnackbar:H}=(0,P.dh)(),[Q,V]=(0,s.useState)($),X=(0,E.f)(),Y=(0,E.f)(),ee=(0,F.jsxs)(v.A,{hover:!0,index:o,sx:{backgroundColor:o%2?"background.lightgray":""},selected:i,children:[(0,F.jsx)(m.A,{align:"center",children:(0,F.jsx)(O.A,{children:a})}),(0,F.jsx)(m.A,{align:"center",children:d}),(0,F.jsx)(m.A,{align:"center",children:c}),(0,F.jsx)(m.A,{align:"center",children:p}),(0,F.jsx)(m.A,{align:"center",children:h}),(0,F.jsx)(m.A,{align:"center",children:j}),(0,F.jsx)(m.A,{align:"center",children:y}),(0,F.jsx)(m.A,{align:"center",children:g}),(0,F.jsx)(m.A,{align:"center",children:A}),(0,F.jsx)(m.A,{align:"center",children:(0,F.jsx)("a",{href:`tel:${f}`,children:f})}),(0,F.jsx)(m.A,{align:"center",children:(0,F.jsx)("a",{href:`tel:${w}`,children:w})}),(0,F.jsx)(m.A,{align:"center",children:(0,F.jsxs)(W.A,{direction:"row",justifyContent:"space-between",children:[(0,F.jsx)("a",{rel:"noreferrer",target:"_blank",style:{color:"green"},href:`tel:${f}`,children:(0,F.jsx)(b.A,{icon:"material-symbols:call"})}),(0,F.jsx)("a",{rel:"noreferrer",target:"_blank",style:{color:"green"},href:`sms:${f}`,children:(0,F.jsx)(b.A,{icon:"solar:chat-round-dots-bold"})}),(0,F.jsx)("a",{rel:"noreferrer",target:"_blank",style:{color:"green"},href:`https://wa.me/${f}`,children:(0,F.jsx)(b.A,{icon:"flowbite:whatsapp-solid"})})]})}),(0,F.jsx)(m.A,{align:"center",children:(0,F.jsxs)(M.A,{select:!0,fullWidth:!0,value:I,onChange:async e=>{try{await B.Ay.patch(B.vZ.companies.one(null===n||void 0===n?void 0:n._id),{status:e.target.value}),H("done")}catch(o){H("error",{variant:"error"})}},children:[(0,F.jsx)(_.A,{value:"not contact",children:"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u062a\u0648\u0627\u0635\u0644"}),(0,F.jsx)(_.A,{value:"agreed",children:"\u0642\u0628\u0648\u0644"}),(0,F.jsx)(_.A,{value:"refused",children:"\u0631\u0641\u0636"}),(0,F.jsx)(_.A,{value:"no number",children:"\u0644\u0627 \u064a\u0648\u062c\u062f \u0631\u0642\u0645 \u0644\u0644\u062a\u0648\u0627\u0635\u0644"}),(0,F.jsx)(_.A,{value:"wrong number",children:"\u0627\u0644\u0631\u0642\u0645 \u062e\u0627\u0637\u0626"})]})}),(0,F.jsx)(m.A,{align:"center",children:(0,F.jsx)(M.A,{fullWidth:!0,multiline:!0,value:Q,onChange:e=>V(e.target.value),InputProps:{endAdornment:(0,F.jsx)(T.A,{position:"end",children:(0,F.jsx)(S.A,{onClick:async()=>{try{await B.Ay.patch(B.vZ.companies.one(null===n||void 0===n?void 0:n._id),{com_note:Q}),H("done")}catch(e){H("error",{variant:"error"})}},edge:"end",children:(0,F.jsx)(b.A,{icon:"icon-park-solid:correct"})})})}})}),l&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(m.A,{align:"center",children:u}),(0,F.jsx)(m.A,{align:"center",children:x}),(0,F.jsx)(m.A,{align:"center",children:C}),(0,F.jsx)(m.A,{align:"center",children:L}),(0,F.jsx)(m.A,{align:"center",children:k}),(0,F.jsx)(m.A,{align:"center",children:z})]}),(0,F.jsx)(m.A,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,F.jsx)(S.A,{color:X.open?"inherit":"default",onClick:X.onOpen,children:(0,F.jsx)(b.A,{icon:"eva:more-vertical-fill"})})})]});return(0,F.jsxs)(F.Fragment,{children:[ee,(0,F.jsxs)(E.A,{open:X.open,onClose:X.onClose,arrow:"right-top",sx:{width:140},children:[(0,F.jsxs)(_.A,{lang:"ar",onClick:()=>{r(),X.onClose()},children:[(0,F.jsx)(b.A,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,F.jsxs)(_.A,{lang:"ar",onClick:Y.onOpen,children:[(0,F.jsx)(b.A,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,F.jsxs)(E.A,{open:Y.open,onClose:Y.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,F.jsx)(O.A,{sx:{fontWeight:600},children:"Creation Time:"}),(0,F.jsx)(O.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,F.jsx)(D.A,{primary:(0,R.ts)(U,"dd MMMMMMMM yyyy"),secondary:(0,R.ts)(U,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,F.jsx)(O.A,{sx:{pt:1,fontWeight:600},children:"created by:"}),(0,F.jsx)(O.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===N||void 0===N?void 0:N.email}),(0,F.jsx)(O.A,{sx:{pt:1,fontWeight:600},children:"created by IP:"}),(0,F.jsx)(O.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:q}),(0,F.jsx)(O.A,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,F.jsx)(O.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,F.jsx)(D.A,{primary:(0,R.ts)(Z,"dd MMMMMMMM yyyy"),secondary:(0,R.ts)(Z,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,F.jsx)(O.A,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,F.jsx)(O.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===J||void 0===J?void 0:J.email}),(0,F.jsx)(O.A,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,F.jsx)(O.A,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:K}),(0,F.jsxs)(O.A,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",G]})]})]})}var I=o(87396),$=o(15596);const U={name:"",USType:"",city:"",sector:"",province:"",speciality1:"",speciality2:""};function N(){const[e,n]=(0,s.useState)(!1),o=[{id:"code",label:"code"},{id:"unit_service_type",label:"unit_service_type"},{id:"country",label:"country"},{id:"city",label:"city"},{id:"email",label:"email"},{id:"sector",label:"sector"},{id:"commercial_name",label:"commercial_name"},{id:"province",label:"province"},{id:"address",label:"address"},{id:"phone_number_1",label:"phone_number_1"},{id:"Phone_number_2",label:"Phone_number_2"},{id:"",label:"communication"},{id:"status",label:"status",width:120},{id:"com_note",label:"com_note",width:200},e&&{id:"insurance",label:"insurance"},e&&{id:"info",label:"info"},e&&{id:"work_shift",label:"work_shift"},e&&{id:"constitution_objective",label:"constitution_objective"},e&&{id:"type_of_specialty_1",label:"type_of_specialty_1"},e&&{id:"type_of_specialty_2",label:"type_of_specialty_2"},e&&{id:"subscribe_to",label:"subscribe_to"},e&&{id:"social_network",label:"social_network"},e&&{id:"notes",label:"notes"},{id:"",width:50}].filter(Boolean),i=(0,k.K2)({defaultOrderBy:"code"}),P=(0,s.useRef)(),O=(0,A.rd)(),{companiesData:S,loading:W}=(0,f.rkc)(),[M,T]=(0,s.useState)(U),D=(0,A.ok)().get("upload_record");(0,s.useEffect)((()=>{D&&T((e=>({...e,name:D})))}),[D]);const R=!(!M.startDate||!M.endDate)&&M.startDate.getTime()>M.endDate.getTime(),B=function(e){let{inputData:n,comparator:o,filters:i,dateError:r}=e;const{name:l,USType:t,city:s,sector:a,province:d,speciality1:c,speciality2:p}=i,h=n.map(((e,n,o)=>[e,n]));h.sort(((e,n)=>{const i=o(e[0],n[0]);return 0!==i?i:e[1]-n[1]})),n=h.map(((e,n)=>e[0])),l&&(n=n.filter((e=>{var n,o,i,r,t,s,a,d,c,p,h,u,x;return(null===e||void 0===e?void 0:e.name_english)&&-1!==(null===e||void 0===e||null===(n=e.name_english)||void 0===n?void 0:n.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(o=e.name_arabic)||void 0===o?void 0:o.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.commercial_name)&&-1!==(null===e||void 0===e||null===(i=e.commercial_name)||void 0===i?void 0:i.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.province)&&-1!==(null===e||void 0===e||null===(r=e.province)||void 0===r?void 0:r.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.country)&&-1!==(null===e||void 0===e||null===(t=e.country)||void 0===t?void 0:t.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.city)&&-1!==(null===e||void 0===e||null===(s=e.city)||void 0===s?void 0:s.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.email)&&-1!==(null===e||void 0===e||null===(a=e.email)||void 0===a?void 0:a.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.phone_number_1)&&-1!==(null===e||void 0===e||null===(d=e.phone_number_1)||void 0===d?void 0:d.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.type_of_specialty_1)&&-1!==(null===e||void 0===e||null===(c=e.type_of_specialty_1)||void 0===c?void 0:c.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.type_of_specialty_2)&&-1!==(null===e||void 0===e||null===(p=e.type_of_specialty_2)||void 0===p?void 0:p.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.unit_service_type)&&-1!==(null===e||void 0===e||null===(h=e.unit_service_type)||void 0===h?void 0:h.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.sector)&&-1!==(null===e||void 0===e||null===(u=e.sector)||void 0===u?void 0:u.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.info)&&-1!==(null===e||void 0===e||null===(x=e.info)||void 0===x?void 0:x.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.upload_record)===l||(null===e||void 0===e?void 0:e._id)===l||JSON.stringify(e.code)===l})));t&&(n=n.filter((e=>{var n;return-1!==(null===(n=e.unit_service_type)||void 0===n?void 0:n.toLowerCase().indexOf(t.toLowerCase()))})));s&&(n=n.filter((e=>{var n;return-1!==(null===(n=e.city)||void 0===n?void 0:n.toLowerCase().indexOf(s.toLowerCase()))})));a&&(n=n.filter((e=>{var n;return-1!==(null===(n=e.sector)||void 0===n?void 0:n.toLowerCase().indexOf(a.toLowerCase()))})));d&&(n=n.filter((e=>{var n;return-1!==(null===(n=e.province)||void 0===n?void 0:n.toLowerCase().indexOf(d.toLowerCase()))})));c&&(n=n.filter((e=>{var n;return-1!==(null===(n=e.type_of_specialty_1)||void 0===n?void 0:n.toLowerCase().indexOf(c.toLowerCase()))})));p&&(n=n.filter((e=>{var n;return-1!==(null===(n=e.type_of_specialty_2)||void 0===n?void 0:n.toLowerCase().indexOf(p.toLowerCase()))})));return n}({inputData:S,comparator:(0,k.hz)(i.order,i.orderBy),filters:M,dateError:R}),E=!(null===M||void 0===M||!M.name),N=!B.length&&E||!B.length,q=(0,t.useReactToPrint)({content:()=>P.current}),Z=(0,s.useCallback)(((e,n)=>{i.onResetPage(),T((o=>({...o,[e]:n})))}),[i]),J=(0,s.useCallback)((e=>{O.push(y.f.superadmin.tables.companies.edit(e))}),[O]),K=(0,s.useCallback)((()=>{T(U)}),[]);if(W)return(0,F.jsx)(C.x,{});const G=[...new Set(B.map((e=>e.unit_service_type)))],H=[...new Set(B.map((e=>e.city)))],Q=[...new Set(B.map((e=>e.sector)))],V=[...new Set(B.map((e=>e.province)))];return(0,F.jsxs)(p.A,{maxWidth:"",children:[(0,F.jsx)(L.A,{heading:"companies",links:[{name:"dashboard",href:y.f.superadmin.root},{name:"Tables",href:y.f.superadmin.tables.list},{name:"companies"}],action:(0,F.jsx)(c.A,{component:g.W,href:y.f.superadmin.tables.companies.new,variant:"contained",startIcon:(0,F.jsx)(b.A,{icon:"mingcute:add-line"}),children:"New company"}),sx:{mb:{xs:3,md:5}}}),(0,F.jsxs)(a.A,{children:[(0,F.jsx)(I.A,{onPrint:q,filters:M,onFilters:Z,onDownload:()=>{const e=B.reduce(((e,n)=>(e.push({code:n.code,name:n.name_english,description:n.description}),e)),[]),n=r.Wp.book_new(),o=r.Wp.json_to_sheet(e);r.Wp.book_append_sheet(n,o,"Sheet 1");const i=r.M9(n,{bookType:"xlsx",type:"array"}),t=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,l.saveAs)(t,"companiesTable.xlsx")},canReset:E,onResetFilters:K}),(0,F.jsx)(x.A,{checked:e,onChange:()=>n(!e)}),"show all",E&&(0,F.jsx)($.A,{filters:M,onFilters:Z,onResetFilters:K,results:B.length,sx:{p:2.5,pt:0}}),(0,F.jsx)(u.A,{children:(0,F.jsx)(w.A,{sx:{height:"60vh",position:"relative"},children:(0,F.jsxs)(d.A,{ref:P,size:i.dense?"small":"medium",children:[(0,F.jsx)(k.er,{order:i.order,orderBy:i.orderBy,headLabel:o,rowCount:B.length,numSelected:i.selected.length,onSort:i.onSort,sx:{position:{sm:"sticky"},top:0,zIndex:{sm:5}}}),(0,F.jsxs)(h.A,{sx:{position:"relative"},children:[(0,F.jsxs)(v.A,{sx:{position:{sm:"sticky"},top:57,backgroundColor:"white"},children:[(0,F.jsx)(m.A,{}),(0,F.jsx)(m.A,{children:(0,F.jsxs)(j.A,{fullWidth:!0,size:"small",value:M.USType,onChange:e=>Z("USType",e.target.value),children:[(0,F.jsx)(_.A,{value:"",children:"all"}),G.map(((e,n)=>e&&(0,F.jsx)(_.A,{value:e,children:e},n)))]})}),(0,F.jsx)(m.A,{}),(0,F.jsx)(m.A,{children:(0,F.jsxs)(j.A,{fullWidth:!0,size:"small",value:M.city,onChange:e=>Z("city",e.target.value),children:[(0,F.jsx)(_.A,{value:"",children:"all"}),H.map(((e,n)=>e&&(0,F.jsx)(_.A,{value:e,children:e},n)))]})}),(0,F.jsx)(m.A,{}),(0,F.jsx)(m.A,{children:(0,F.jsxs)(j.A,{fullWidth:!0,size:"small",value:M.sector,onChange:e=>Z("sector",e.target.value),children:[(0,F.jsx)(_.A,{value:"",children:"all"}),Q.map(((e,n)=>e&&(0,F.jsx)(_.A,{value:e,children:e},n)))]})}),(0,F.jsx)(m.A,{}),(0,F.jsx)(m.A,{children:(0,F.jsxs)(j.A,{fullWidth:!0,size:"small",value:M.province,onChange:e=>Z("province",e.target.value),children:[(0,F.jsx)(_.A,{value:"",children:"all"}),V.map(((e,n)=>e&&(0,F.jsx)(_.A,{value:e,children:e},n)))]})}),(0,F.jsx)(m.A,{}),(0,F.jsx)(m.A,{}),(0,F.jsx)(m.A,{}),(0,F.jsx)(m.A,{}),(0,F.jsx)(m.A,{}),(0,F.jsx)(m.A,{}),e&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(m.A,{}),(0,F.jsx)(m.A,{}),(0,F.jsx)(m.A,{}),(0,F.jsx)(m.A,{}),(0,F.jsx)(m.A,{}),(0,F.jsx)(m.A,{}),(0,F.jsx)(m.A,{}),(0,F.jsx)(m.A,{}),(0,F.jsx)(m.A,{})]})]}),B.slice(i.page*i.rowsPerPage,i.page*i.rowsPerPage+i.rowsPerPage).map(((n,o)=>(0,F.jsx)(z,{index:o,row:n,showAll:e,selected:i.selected.includes(n._id),onSelectRow:()=>i.onSelectRow(n._id),onEditRow:()=>J(n._id)},o))),(0,F.jsx)(k.Sm,{notFound:N})]})]})})}),(0,F.jsx)(k.We,{count:B.length,page:i.page,setPage:i.setPage,rowsPerPage:i.rowsPerPage,onPageChange:i.onChangePage,onRowsPerPageChange:i.onChangeRowsPerPage,dense:i.dense,onChangeDense:i.onChangeDense})]})]})}function q(){return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(i.mg,{children:[(0,F.jsx)("title",{children:" Dashboard: companies Table"}),(0,F.jsx)("meta",{name:"description",content:"meta"})]}),(0,F.jsx)(N,{})]})}}}]);
//# sourceMappingURL=79844.626052be.chunk.js.map
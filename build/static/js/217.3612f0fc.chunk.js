"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[217],{65665:(e,n,a)=>{a.r(n),a.d(n,{default:()=>M});var t=a(6907),i=a(27031),o=a(8007),s=a(61134),l=a(72791),r=a(44695),d=a(36314),c=a(12258),p=a(61889),m=a(4567),u=a(57621),v=a(9585),x=a(89164),h=a(38072),g=a(19208),Z=a(38887),y=a(66664),j=a(99116),b=a(76932),f=a(8976),_=a(36093),w=a(32869),P=a(26405),T=a(80184);function C(){const{t:e}=(0,b.qM)(),n=[{label:e("read"),value:"read"},{label:e("create"),value:"create"},{label:e("edit"),value:"update"},{label:e("delete"),value:"delete"}],{emid:a}=(0,g.UO)(),{data:t}=(0,_.X7)(a),{user:i}=(0,f.E)(),C=(0,Z.F)("up","md"),{enqueueSnackbar:M}=(0,w.Ds)(),R=o.Ry().shape({employees:o.IX(),management_tables:o.IX(),appointments:o.IX(),appointment_configs:o.IX(),accounting:o.IX(),quality_control:o.IX(),permissions:o.IX()}),k=(0,l.useMemo)((()=>{var e,n,a,i,o,s,l,r,d,c,p,m,u,v;return{employees:(null===t||void 0===t||null===(e=t.acl)||void 0===e||null===(n=e.department)||void 0===n?void 0:n.employees)||[],management_tables:(null===t||void 0===t||null===(a=t.acl)||void 0===a||null===(i=a.department)||void 0===i?void 0:i.management_tables)||[],appointments:(null===t||void 0===t||null===(o=t.acl)||void 0===o||null===(s=o.department)||void 0===s?void 0:s.appointments)||[],appointment_configs:(null===t||void 0===t||null===(l=t.acl)||void 0===l||null===(r=l.department)||void 0===r?void 0:r.appointment_configs)||[],accounting:(null===t||void 0===t||null===(d=t.acl)||void 0===d||null===(c=d.department)||void 0===c?void 0:c.accounting)||[],quality_control:(null===t||void 0===t||null===(p=t.acl)||void 0===p||null===(m=p.department)||void 0===m?void 0:m.quality_control)||[],permissions:(null===t||void 0===t||null===(u=t.acl)||void 0===u||null===(v=u.department)||void 0===v?void 0:v.permissions)||[]}}),[t]),N=(0,s.cI)({mode:"onTouched",resolver:(0,r.X)(R),defaultValues:k}),{reset:S,handleSubmit:q,formState:{isSubmitting:H}}=N;(0,l.useEffect)((()=>{var e,n,a,i,o,s,l,r,d,c,p,m,u,v;S({employees:(null===t||void 0===t||null===(e=t.acl)||void 0===e||null===(n=e.department)||void 0===n?void 0:n.employees)||[],management_tables:(null===t||void 0===t||null===(a=t.acl)||void 0===a||null===(i=a.department)||void 0===i?void 0:i.management_tables)||[],appointments:(null===t||void 0===t||null===(o=t.acl)||void 0===o||null===(s=o.department)||void 0===s?void 0:s.appointments)||[],appointment_configs:(null===t||void 0===t||null===(l=t.acl)||void 0===l||null===(r=l.department)||void 0===r?void 0:r.appointment_configs)||[],accounting:(null===t||void 0===t||null===(d=t.acl)||void 0===d||null===(c=d.department)||void 0===c?void 0:c.accounting)||[],quality_control:(null===t||void 0===t||null===(p=t.acl)||void 0===p||null===(m=p.department)||void 0===m?void 0:m.quality_control)||[],permissions:(null===t||void 0===t||null===(u=t.acl)||void 0===u||null===(v=u.department)||void 0===v?void 0:v.permissions)||[]})}),[a,t]);const I=q((async e=>{try{const n=t.acl;n.department=e,y.ZP.patch(y.Hv.employee_engagements.one(a),{acl:n}),j.Z.emit("updated",{user:i,link:h.H.unitservice.employees.acl(a),msg:"updated a department employee permissions"}),M("Update success!")}catch(n){j.Z.emit("error",{error:n,user:i,location:window.location.pathname}),M("string"===typeof n?n:n.message,{variant:"error"}),console.error(n)}})),X=(0,T.jsxs)(T.Fragment,{children:[C&&(0,T.jsxs)(p.ZP,{md:4,children:[(0,T.jsx)(m.Z,{variant:"h6",sx:{mb:.5},children:"Permissions"}),(0,T.jsx)(m.Z,{variant:"body2",sx:{color:"text.secondary"},children:"giving or withdrowing permissions refered to all"}),(0,T.jsx)(m.Z,{variant:"body2",sx:{color:"text.secondary"},children:"department and all its work groups"})]}),(0,T.jsx)(p.ZP,{xs:12,md:8,children:(0,T.jsxs)(u.Z,{children:[!C&&(0,T.jsx)(v.Z,{title:"Permissions"}),(0,T.jsxs)(d.Z,{spacing:3,sx:{p:3},children:[(0,T.jsxs)(d.Z,{spacing:1,children:[(0,T.jsx)(m.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("employees")}),(0,T.jsx)(P.s2,{row:!0,spacing:4,name:"employees",options:n})]}),(0,T.jsxs)(d.Z,{spacing:1,children:[(0,T.jsx)(m.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("management tables")}),(0,T.jsx)(P.s2,{row:!0,spacing:4,name:"management_tables",options:n})]}),(0,T.jsxs)(d.Z,{spacing:1,children:[(0,T.jsx)(m.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("appointments")}),(0,T.jsx)(P.s2,{row:!0,spacing:4,name:"appointments",options:n})]}),(0,T.jsxs)(d.Z,{spacing:1,children:[(0,T.jsx)(m.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("appointment configuration")}),(0,T.jsx)(P.s2,{row:!0,spacing:4,name:"appointment_configs",options:n})]}),(0,T.jsxs)(d.Z,{spacing:1,children:[(0,T.jsx)(m.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("accounting")}),(0,T.jsx)(P.s2,{row:!0,spacing:4,name:"accounting",options:n})]}),(0,T.jsxs)(d.Z,{spacing:1,children:[(0,T.jsx)(m.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("quality control")}),(0,T.jsx)(P.s2,{row:!0,spacing:4,name:"quality_control",options:n})]}),(0,T.jsxs)(d.Z,{spacing:1,children:[(0,T.jsx)(m.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("permissions")}),(0,T.jsx)(P.s2,{row:!0,spacing:4,name:"permissions",options:n})]})]})]})})]}),z=(0,T.jsxs)(T.Fragment,{children:[C&&(0,T.jsx)(p.ZP,{md:4}),(0,T.jsx)(p.ZP,{xs:12,md:8,sx:{display:"flex",justifyContent:"flex-end"},children:(0,T.jsx)(c.Z,{type:"submit",variant:"contained",loading:H,sx:{m:2},children:"save changes"})})]});return(0,T.jsx)(x.Z,{maxWidth:"lg",children:(0,T.jsx)(P.ZP,{methods:N,onSubmit:I,children:(0,T.jsxs)(p.ZP,{container:!0,spacing:3,children:[X,z]})})})}function M(){return(0,T.jsxs)(i.Z,{category:"department",subcategory:"permissions",acl:"update",children:[(0,T.jsxs)(t.ql,{children:[(0,T.jsx)("title",{children:" department permissions "}),(0,T.jsx)("meta",{name:"description",content:"meta"})]}),(0,T.jsx)(C,{})]})}},9585:(e,n,a)=>{a.d(n,{Z:()=>b});var t=a(63366),i=a(87462),o=a(72791),s=a(59278),l=a(94419),r=a(4567),d=a(31402),c=a(66934),p=a(75878),m=a(21217);function u(e){return(0,m.Z)("MuiCardHeader",e)}const v=(0,p.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var x=a(80184);const h=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],g=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,n)=>(0,i.Z)({["& .".concat(v.title)]:n.title,["& .".concat(v.subheader)]:n.subheader},n.root)})({display:"flex",alignItems:"center",padding:16}),Z=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,n)=>n.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),y=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,n)=>n.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),j=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,n)=>n.content})({flex:"1 1 auto"}),b=o.forwardRef((function(e,n){const a=(0,d.Z)({props:e,name:"MuiCardHeader"}),{action:o,avatar:c,className:p,component:m="div",disableTypography:v=!1,subheader:b,subheaderTypographyProps:f,title:_,titleTypographyProps:w}=a,P=(0,t.Z)(a,h),T=(0,i.Z)({},a,{component:m,disableTypography:v}),C=(e=>{const{classes:n}=e;return(0,l.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},u,n)})(T);let M=_;null==M||M.type===r.Z||v||(M=(0,x.jsx)(r.Z,(0,i.Z)({variant:c?"body2":"h5",className:C.title,component:"span",display:"block"},w,{children:M})));let R=b;return null==R||R.type===r.Z||v||(R=(0,x.jsx)(r.Z,(0,i.Z)({variant:c?"body2":"body1",className:C.subheader,color:"text.secondary",component:"span",display:"block"},f,{children:R}))),(0,x.jsxs)(g,(0,i.Z)({className:(0,s.Z)(C.root,p),as:m,ref:n,ownerState:T},P,{children:[c&&(0,x.jsx)(Z,{className:C.avatar,ownerState:T,children:c}),(0,x.jsxs)(j,{className:C.content,ownerState:T,children:[M,R]}),o&&(0,x.jsx)(y,{className:C.action,ownerState:T,children:o})]}))}))},57621:(e,n,a)=>{a.d(n,{Z:()=>g});var t=a(87462),i=a(63366),o=a(72791),s=a(59278),l=a(94419),r=a(66934),d=a(31402),c=a(27938),p=a(75878),m=a(21217);function u(e){return(0,m.Z)("MuiCard",e)}(0,p.Z)("MuiCard",["root"]);var v=a(80184);const x=["className","raised"],h=(0,r.ZP)(c.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,n)=>n.root})((()=>({overflow:"hidden"}))),g=o.forwardRef((function(e,n){const a=(0,d.Z)({props:e,name:"MuiCard"}),{className:o,raised:r=!1}=a,c=(0,i.Z)(a,x),p=(0,t.Z)({},a,{raised:r}),m=(e=>{const{classes:n}=e;return(0,l.Z)({root:["root"]},u,n)})(p);return(0,v.jsx)(h,(0,t.Z)({className:(0,s.Z)(m.root,o),elevation:r?8:void 0,ref:n,ownerState:p},c))}))}}]);
//# sourceMappingURL=217.3612f0fc.chunk.js.map
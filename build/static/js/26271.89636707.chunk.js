"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[26271],{26271:(e,a,t)=>{t.r(a),t.d(a,{default:()=>u});var n=t(29490),r=t(67132),s=t(7625),i=t(67555),l=t(77224),o=t(48922),m=t(70579);function d(e){let{departmentData:a}=e;return(0,m.jsx)(l.A,{maxWidth:"xl",children:(0,m.jsx)(o.A,{departmentData:a})})}function u(){const e=(0,r.g)(),{depid:a}=e,{data:t,loading:l}=(0,s.UMH)(a);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(n.mg,{children:[(0,m.jsx)("title",{children:" New Work Group "}),(0,m.jsx)("meta",{name:"description",content:"meta"})]}),l&&(0,m.jsx)(i.x,{}),!l&&(0,m.jsx)(d,{departmentData:t})]})}},48922:(e,a,t)=>{t.d(a,{A:()=>$});var n=t(80899),r=t(53536),s=t(65043),i=t(24858),l=t(18403),o=t(81e3),m=t(12110),d=t(26487),u=t(74600),c=t(22075),p=t(38246),g=t(48407),_=t(67132),h=t(31673),v=t(91562),x=t(75139),b=t(60778),j=t(7625),y=t(94857),k=t(59699),f=t(70579);function $(e){let{departmentData:a,currentTable:t}=e;const $=(0,_.rd)(),{t:A}=(0,b.WD)(),{currentLang:w}=(0,b.jc)(),C="ar"===w.value,{id:S}=(0,_.g)(),{user:V}=(0,x.Z)(),{employeesData:q}=(0,j.$ln)(a._id),[D,G]=(0,s.useState)([]),{enqueueSnackbar:N}=(0,y.dh)(),O=n.Ik().shape({name_arabic:n.Yj().required("Name is required"),name_english:n.Yj().required("Name is required"),employees:n.YO().min(1,"Choose at least one option")}),W=(0,s.useMemo)((()=>({unit_service:S||a.unit_service._id,department:a._id,name_arabic:(null===t||void 0===t?void 0:t.name_arabic)||"",name_english:(null===t||void 0===t?void 0:t.name_english)||"",employees:(null===t||void 0===t?void 0:t.employees.map(((e,a)=>e.employee)))||[]})),[t,a,S]),Z=(0,i.mN)({mode:"all",resolver:(0,l.t)(O),defaultValues:W}),{reset:E,handleSubmit:F,formState:{isSubmitting:I}}=Z,T=F((async e=>{try{t?(await h.Ay.patch(h.vZ.work_groups.one(t._id),e),v.A.emit("updated",{data:e,user:V,link:g.f.superadmin.unitservices.departments.workGroups.root(S,a._id),msg:`updated work group <strong>${e.name_english||""}</strong> in <strong>${a.name_english}</strong> department`})):(await h.Ay.post(h.vZ.work_groups.all,e),v.A.emit("created",{data:e,user:V,link:g.f.superadmin.unitservices.departments.workGroups.root(S,a._id),msg:`created work group <strong>${e.name_english||""}</strong> in <strong>${a.name_english}</strong> department`,ar_msg:`\u0625\u0646\u0634\u0627\u0621 \u0645\u062c\u0645\u0648\u0639\u0629 \u0639\u0645\u0644 <strong>${e.name_arabic||""}</strong> \u0641\u064a \u0642\u0633\u0645 <strong>${a.name_arabic}</strong>`})),E(),N(A(t?"update success!":"create success!")),$.push(g.f.superadmin.unitservices.departments.workGroups.root(S,a._id))}catch(n){N(C&&`${n.arabic_message}`||`${n.message}`,{variant:"error"}),console.error(n)}}));return(0,f.jsx)(k.Ay,{methods:Z,onSubmit:T,children:(0,f.jsx)(c.A,{xs:12,maxWidth:"md",children:(0,f.jsxs)(m.A,{sx:{p:3},children:[(0,f.jsxs)(o.A,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"},children:[(0,f.jsx)(k.o3,{onChange:e=>{/^[a-zA-Z0-9\s,@#$!*_\-&^%.()]*$/.test(e.target.value)&&Z.setValue(e.target.name,e.target.value,{shouldValidate:!0})},name:"name_english",label:`${A("name english")} *`}),(0,f.jsx)(k.o3,{onChange:e=>{/^[\u0600-\u06FF0-9\s!@#$%^&*_\-().]*$/.test(e.target.value)&&Z.setValue(e.target.name,e.target.value,{shouldValidate:!0})},name:"name_arabic",label:`${A("name arabic")} *`}),(0,f.jsx)(k.j2,{name:"employees",label:`${A("employees")} *`,multiple:!0,disableCloseOnSelect:!0,options:q.filter((e=>!D.some((a=>(0,r.isEqual)(e,a))))),getOptionLabel:e=>e._id,renderOption:(e,a,t)=>{var n;return(0,s.createElement)("li",{lang:"ar",...e,key:t,value:a._id},C?null===(n=a.employee)||void 0===n?void 0:n.name_arabic:a.employee.name_english)},onChange:(e,a)=>{G(a),Z.setValue("employees",a,{shouldValidate:!0})},renderTags:(e,a)=>e.map(((e,t)=>{var n;return(0,s.createElement)(d.A,{...a({index:t}),key:t,label:C?null===(n=e.employee)||void 0===n?void 0:n.name_arabic:e.employee.name_english,size:"small",color:"info",variant:"soft"})}))})]}),(0,f.jsx)(u.A,{alignItems:"flex-end",sx:{mt:3},children:(0,f.jsx)(p.A,{type:"submit",tabIndex:-1,variant:"contained",loading:I,children:A(t?"save changes":"create")})})]})})})}}}]);
//# sourceMappingURL=26271.89636707.chunk.js.map
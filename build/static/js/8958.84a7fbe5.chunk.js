"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[8958],{91533:(e,n,a)=>{a.r(n),a.d(n,{default:()=>k});var i=a(6907),o=a(27031),s=a(8007),t=a(61134),r=a(72791),l=a(44695),d=a(36314),c=a(12258),p=a(61889),u=a(4567),m=a(57621),v=a(9585),h=a(89164),x=a(38072),g=a(19208),Z=a(38887),f=a(66664),y=a(99116),j=a(36093),b=a(76932),_=a(8976),w=a(32869),P=a(26405),C=a(80184);function T(){const{t:e}=(0,b.qM)(),n=[{label:e("read"),value:"read"},{label:e("create"),value:"create"},{label:e("edit"),value:"update"},{label:e("delete"),value:"delete"}],{emid:a,wgid:i}=(0,g.UO)(),{data:o}=(0,j.tB)(i),{user:T}=(0,_.E)(),k=(0,Z.F)("up","md"),{enqueueSnackbar:M}=(0,w.Ds)(),R=s.Ry().shape({appointments:s.IX(),appointment_configs:s.IX(),accounting:s.IX(),entrance_management:s.IX(),permissions:s.IX()}),N=(0,r.useMemo)((()=>{var e,n,i,s,t,r,l,d,c,p,u,m,v,h,x;return{appointments:(null===o||void 0===o||null===(e=o.employees)||void 0===e||null===(n=e.find((e=>e._id===a)))||void 0===n||null===(i=n.acl)||void 0===i?void 0:i.appointments)||[],appointment_configs:(null===o||void 0===o||null===(s=o.employees)||void 0===s||null===(t=s.find((e=>e._id===a)))||void 0===t||null===(r=t.acl)||void 0===r?void 0:r.appointment_configs)||[],accounting:(null===o||void 0===o||null===(l=o.employees)||void 0===l||null===(d=l.find((e=>e._id===a)))||void 0===d||null===(c=d.acl)||void 0===c?void 0:c.accounting)||[],entrance_management:(null===o||void 0===o||null===(p=o.employees)||void 0===p||null===(u=p.find((e=>e._id===a)))||void 0===u||null===(m=u.acl)||void 0===m?void 0:m.entrance_management)||[],permissions:(null===o||void 0===o||null===(v=o.employees)||void 0===v||null===(h=v.find((e=>e._id===a)))||void 0===h||null===(x=h.acl)||void 0===x?void 0:x.permissions)||[]}}),[o,a]),S=(0,t.cI)({mode:"onTouched",resolver:(0,l.X)(R),defaultValues:N}),{reset:H,handleSubmit:I,formState:{isSubmitting:X}}=S;(0,r.useEffect)((()=>{var e,n,i,s,t,r,l,d,c,p,u,m,v,h,x;H({appointments:(null===o||void 0===o||null===(e=o.employees)||void 0===e||null===(n=e.find((e=>e._id===a)))||void 0===n||null===(i=n.acl)||void 0===i?void 0:i.appointments)||[],appointment_configs:(null===o||void 0===o||null===(s=o.employees)||void 0===s||null===(t=s.find((e=>e._id===a)))||void 0===t||null===(r=t.acl)||void 0===r?void 0:r.appointment_configs)||[],accounting:(null===o||void 0===o||null===(l=o.employees)||void 0===l||null===(d=l.find((e=>e._id===a)))||void 0===d||null===(c=d.acl)||void 0===c?void 0:c.accounting)||[],entrance_management:(null===o||void 0===o||null===(p=o.employees)||void 0===p||null===(u=p.find((e=>e._id===a)))||void 0===u||null===(m=u.acl)||void 0===m?void 0:m.entrance_management)||[],permissions:(null===o||void 0===o||null===(v=o.employees)||void 0===v||null===(h=v.find((e=>e._id===a)))||void 0===h||null===(x=h.acl)||void 0===x?void 0:x.permissions)||[]})}),[a,o]);const z=I((async e=>{try{f.ZP.patch(f.Hv.work_groups.employee.acl(a),{acl:e}),y.Z.emit("updated",{user:T,link:x.H.unitservice.employees.acl(a),msg:"updated a department employee permissions"}),M("Update success!")}catch(n){y.Z.emit("error",{error:n,user:T,location:window.location.pathname}),M("string"===typeof n?n:n.message,{variant:"error"}),console.error(n)}})),q=(0,C.jsxs)(C.Fragment,{children:[k&&(0,C.jsxs)(p.ZP,{md:4,children:[(0,C.jsx)(u.Z,{variant:"h6",sx:{mb:.5},children:"Permissions"}),(0,C.jsx)(u.Z,{variant:"body2",sx:{color:"text.secondary"},children:"giving or withdrowing permissions refered to all"}),(0,C.jsx)(u.Z,{variant:"body2",sx:{color:"text.secondary"},children:"work group and all its employees"})]}),(0,C.jsx)(p.ZP,{xs:12,md:8,children:(0,C.jsxs)(m.Z,{children:[!k&&(0,C.jsx)(v.Z,{title:"Permissions"}),(0,C.jsxs)(d.Z,{spacing:3,sx:{p:3},children:[(0,C.jsxs)(d.Z,{spacing:1,children:[(0,C.jsx)(u.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("appointments")}),(0,C.jsx)(P.s2,{row:!0,spacing:4,name:"appointments",options:n})]}),(0,C.jsxs)(d.Z,{spacing:1,children:[(0,C.jsx)(u.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("appointment configuration")}),(0,C.jsx)(P.s2,{row:!0,spacing:4,name:"appointment_configs",options:n})]}),(0,C.jsxs)(d.Z,{spacing:1,children:[(0,C.jsx)(u.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("accounting")}),(0,C.jsx)(P.s2,{row:!0,spacing:4,name:"accounting",options:n})]}),(0,C.jsxs)(d.Z,{spacing:1,children:[(0,C.jsx)(u.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("entrance management")}),(0,C.jsx)(P.s2,{row:!0,spacing:4,name:"entrance_management",options:n})]}),(0,C.jsxs)(d.Z,{spacing:1,children:[(0,C.jsx)(u.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("permissions")}),(0,C.jsx)(P.s2,{row:!0,spacing:4,name:"permissions",options:n})]})]})]})})]}),F=(0,C.jsxs)(C.Fragment,{children:[k&&(0,C.jsx)(p.ZP,{md:4}),(0,C.jsx)(p.ZP,{xs:12,md:8,sx:{display:"flex",justifyContent:"flex-end"},children:(0,C.jsx)(c.Z,{type:"submit",variant:"contained",loading:X,sx:{m:2},children:"save changes"})})]});return(0,C.jsx)(h.Z,{maxWidth:"lg",children:(0,C.jsx)(P.ZP,{methods:S,onSubmit:z,children:(0,C.jsxs)(p.ZP,{container:!0,spacing:3,children:[q,F]})})})}function k(){return(0,C.jsxs)(o.Z,{category:"unit_service",subcategory:"permissions",acl:"update",children:[(0,C.jsxs)(i.ql,{children:[(0,C.jsx)("title",{children:" work group permissions "}),(0,C.jsx)("meta",{name:"description",content:"meta"})]}),(0,C.jsx)(T,{})]})}},9585:(e,n,a)=>{a.d(n,{Z:()=>j});var i=a(63366),o=a(87462),s=a(72791),t=a(59278),r=a(94419),l=a(4567),d=a(31402),c=a(66934),p=a(75878),u=a(21217);function m(e){return(0,u.Z)("MuiCardHeader",e)}const v=(0,p.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var h=a(80184);const x=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],g=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,n)=>(0,o.Z)({["& .".concat(v.title)]:n.title,["& .".concat(v.subheader)]:n.subheader},n.root)})({display:"flex",alignItems:"center",padding:16}),Z=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,n)=>n.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),f=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,n)=>n.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),y=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,n)=>n.content})({flex:"1 1 auto"}),j=s.forwardRef((function(e,n){const a=(0,d.Z)({props:e,name:"MuiCardHeader"}),{action:s,avatar:c,className:p,component:u="div",disableTypography:v=!1,subheader:j,subheaderTypographyProps:b,title:_,titleTypographyProps:w}=a,P=(0,i.Z)(a,x),C=(0,o.Z)({},a,{component:u,disableTypography:v}),T=(e=>{const{classes:n}=e;return(0,r.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},m,n)})(C);let k=_;null==k||k.type===l.Z||v||(k=(0,h.jsx)(l.Z,(0,o.Z)({variant:c?"body2":"h5",className:T.title,component:"span",display:"block"},w,{children:k})));let M=j;return null==M||M.type===l.Z||v||(M=(0,h.jsx)(l.Z,(0,o.Z)({variant:c?"body2":"body1",className:T.subheader,color:"text.secondary",component:"span",display:"block"},b,{children:M}))),(0,h.jsxs)(g,(0,o.Z)({className:(0,t.Z)(T.root,p),as:u,ref:n,ownerState:C},P,{children:[c&&(0,h.jsx)(Z,{className:T.avatar,ownerState:C,children:c}),(0,h.jsxs)(y,{className:T.content,ownerState:C,children:[k,M]}),s&&(0,h.jsx)(f,{className:T.action,ownerState:C,children:s})]}))}))},57621:(e,n,a)=>{a.d(n,{Z:()=>g});var i=a(87462),o=a(63366),s=a(72791),t=a(59278),r=a(94419),l=a(66934),d=a(31402),c=a(27938),p=a(75878),u=a(21217);function m(e){return(0,u.Z)("MuiCard",e)}(0,p.Z)("MuiCard",["root"]);var v=a(80184);const h=["className","raised"],x=(0,l.ZP)(c.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,n)=>n.root})((()=>({overflow:"hidden"}))),g=s.forwardRef((function(e,n){const a=(0,d.Z)({props:e,name:"MuiCard"}),{className:s,raised:l=!1}=a,c=(0,o.Z)(a,h),p=(0,i.Z)({},a,{raised:l}),u=(e=>{const{classes:n}=e;return(0,r.Z)({root:["root"]},m,n)})(p);return(0,v.jsx)(x,(0,i.Z)({className:(0,t.Z)(u.root,s),elevation:l?8:void 0,ref:n,ownerState:p},c))}))}}]);
//# sourceMappingURL=8958.84a7fbe5.chunk.js.map
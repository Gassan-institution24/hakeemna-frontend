"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[3582],{37539:(e,t,o)=>{o.d(t,{Hu:()=>d,Kj:()=>l,Lk:()=>s,MG:()=>c,iu:()=>i});var n=o(72791),r=o(44887),a=o(66664);function i(e){const t=[a.Hv.products.all,{params:e}],{data:o,isLoading:i,error:s,isValidating:d}=(0,r.ZP)(t,a._i);return(0,n.useMemo)((()=>({products:o||[],productsLoading:i,productsError:s,productsValidating:d,productsEmpty:!i&&!(null!==o&&void 0!==o&&o.length)})),[o,s,i,d])}function s(){const e=a.Hv.productcategories.all,{data:t,isLoading:o,error:i,isValidating:s}=(0,r.ZP)(e,a._i);return(0,n.useMemo)((()=>({productCat:t||[],productCatLoading:o,productCatError:i,productCatValidating:s,productCatEmpty:!o&&!(null!==t&&void 0!==t&&t.length)})),[t,i,o,s])}function d(e){const t=a.Hv.productcategories.one(e),{data:o,isLoading:i,error:s,isValidating:d}=(0,r.ZP)(t,a._i);return(0,n.useMemo)((()=>({data:o,productCatLoading:i,productCatError:s,productCatValidating:d,productCatEmpty:!i&&!(null!==o&&void 0!==o&&o.length)})),[o,s,i,d])}function l(e){const t=a.Hv.products.one(e),{data:o,isLoading:i,error:s,isValidating:d}=(0,r.ZP)(t,a._i);return(0,n.useMemo)((()=>({product:o,productLoading:i,productError:s,productValidating:d})),[o,s,i,d])}function c(e,t){const o=[a.Hv.products.stakeholder(e),{params:t}],{data:i,isLoading:s,error:d,isValidating:l}=(0,r.ZP)(o,a._i);return{...(0,n.useMemo)((()=>({productsData:(null===i||void 0===i?void 0:i.products)||[],length:(null===i||void 0===i?void 0:i.length)||0,loading:s,error:d,isValidating:l})),[i,d,s,l]),refetch:async()=>{await(0,r.JG)(o)}}}},33582:(e,t,o)=>{o.r(t),o.d(t,{default:()=>V});var n=o(6907),r=o(34045),a=o(64802),i=o(61146),s=o(72791),d=o(57621),l=o(79836),c=o(13838),p=o(10266),u=o(53382),g=o(39281),h=o(38072),x=o(4419),m=o(19208),y=o(40268),j=o(10261),f=o(35456),Z=o(73379),v=o(38062),_=o(37539),b=o(16386),w=o(16029),C=o(49900),P=o(82626),k=o(9195),L=o(68745),D=o(13400),E=o(24845),S=o(80184);function R(e){let{row:t,selected:o,onEditRow:n,onSelectRow:r,onInactivate:a,onActivate:i}=e;const{code:s,name_english:d,name_arabic:l,created_at:c,user_creation:p,ip_address_user_creation:u,updated_at:g,user_modification:h,ip_address_user_modification:x,modifications_nums:m}=t,j=(0,E.S)(),f=(0,E.S)(),Z=(0,S.jsxs)(k.Z,{hover:!0,selected:o,children:[(0,S.jsx)(L.Z,{align:"center",children:(0,S.jsx)(w.Z,{children:s})}),(0,S.jsx)(L.Z,{align:"center",children:d}),(0,S.jsx)(L.Z,{align:"center",children:l}),(0,S.jsx)(L.Z,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,S.jsx)(D.Z,{color:f.open?"inherit":"default",onClick:f.onOpen,children:(0,S.jsx)(y.Z,{icon:"eva:more-vertical-fill"})})})]});return(0,S.jsxs)(S.Fragment,{children:[Z,(0,S.jsxs)(E.Z,{open:f.open,onClose:f.onClose,arrow:"right-top",sx:{width:140},children:[(0,S.jsxs)(P.Z,{lang:"ar",onClick:()=>{n(),f.onClose()},children:[(0,S.jsx)(y.Z,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,S.jsxs)(P.Z,{lang:"ar",onClick:j.onOpen,children:[(0,S.jsx)(y.Z,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,S.jsxs)(E.Z,{open:j.open,onClose:j.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,S.jsx)(w.Z,{sx:{fontWeight:600},children:"Creation Time:"}),(0,S.jsx)(w.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,S.jsx)(C.Z,{primary:(0,b.Z)(new Date(c),"dd MMM yyyy"),secondary:(0,b.Z)(new Date(c),"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,S.jsx)(w.Z,{sx:{pt:1,fontWeight:600},children:"created by:"}),(0,S.jsx)(w.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===p||void 0===p?void 0:p.email}),(0,S.jsx)(w.Z,{sx:{pt:1,fontWeight:600},children:"created by IP:"}),(0,S.jsx)(w.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:u}),(0,S.jsx)(w.Z,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,S.jsx)(w.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,S.jsx)(C.Z,{primary:(0,b.Z)(new Date(g),"dd MMM yyyy"),secondary:(0,b.Z)(new Date(g),"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,S.jsx)(w.Z,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,S.jsx)(w.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===h||void 0===h?void 0:h.email}),(0,S.jsx)(w.Z,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,S.jsx)(w.Z,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:x}),(0,S.jsxs)(w.Z,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",m]})]})]})}var M=o(65483),T=o(49172);const W=[{id:"code",label:"Code"},{id:"name_english",label:"name"},{id:"name_arabic",label:"arabic name"},{id:"",width:88}],B={name:""};function H(){const e=(0,v.x6)({defaultOrderBy:"code"}),t=(0,s.useRef)(),o=(0,m.tv)(),{productCat:n,productCatLoading:b}=(0,_.Lk)(),[w,C]=(0,s.useState)(B),P=(0,m.lr)().get("upload_record");(0,s.useEffect)((()=>{P&&C((e=>({...e,name:P})))}),[P]);const k=!(!w.startDate||!w.endDate)&&w.startDate.getTime()>w.endDate.getTime(),L=function(e){let{inputData:t,comparator:o,filters:n,dateError:r}=e;const{status:a,name:i}=n,s=t.map(((e,t,o)=>[e,t]));s.sort(((e,t)=>{const n=o(e[0],t[0]);return 0!==n?n:e[1]-t[1]})),t=s.map(((e,t)=>e[0])),i&&(t=t.filter((e=>{var t,o;return-1!==(null===e||void 0===e||null===(t=e.name_english)||void 0===t?void 0:t.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(o=e.name_arabic)||void 0===o?void 0:o.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===i||(null===e||void 0===e?void 0:e.upload_record)===i||JSON.stringify(e.code)===i})));"all"!==a&&(t=t.filter((e=>e.status===a)));return t}({inputData:n,comparator:(0,v.sQ)(e.order,e.orderBy),filters:w,dateError:k}),D=e.dense?52:72,E=!(null===w||void 0===w||!w.name),H=!L.length&&E||!L.length,V=(0,i.useReactToPrint)({content:()=>t.current}),F=(0,s.useCallback)(((t,o)=>{e.onResetPage(),C((e=>({...e,[t]:o})))}),[e]),O=(0,s.useCallback)((()=>{C(B)}),[]),I=(0,s.useCallback)((e=>{o.push(h.H.superadmin.tables.productCat.edit(e))}),[o]);return b?(0,S.jsx)(f.a,{}):(0,S.jsxs)(p.Z,{maxWidth:"xl",children:[(0,S.jsx)(Z.Z,{heading:"product categories",links:[{name:"dashboard",href:h.H.superadmin.root},{name:"Tables",href:h.H.superadmin.tables.list},{name:"product categories"}],action:(0,S.jsx)(c.Z,{component:x.r,href:h.H.superadmin.tables.productCat.new,variant:"contained",startIcon:(0,S.jsx)(y.Z,{icon:"mingcute:add-line"}),children:"New product category"}),sx:{mb:{xs:3,md:5}}}),(0,S.jsxs)(d.Z,{children:[(0,S.jsx)(M.Z,{onPrint:V,filters:w,onFilters:F,onDownload:()=>{const e=L.reduce(((e,t)=>{var o;return e.push({code:t.code,name:t.name_english,country:null===(o=t.country)||void 0===o?void 0:o.name_english,status:t.status}),e}),[]),t=r.P6.book_new(),o=r.P6.json_to_sheet(e);r.P6.book_append_sheet(t,o,"Sheet 1");const n=r.cW(t,{bookType:"xlsx",type:"array"}),i=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,a.saveAs)(i,"countriesTable.xlsx")},canReset:E,onResetFilters:O}),E&&(0,S.jsx)(T.Z,{filters:w,onFilters:F,onResetFilters:O,results:L.length,sx:{p:2.5,pt:0}}),(0,S.jsxs)(g.Z,{children:[(0,S.jsx)(v.Z4,{numSelected:e.selected.length,rowCount:L.length}),(0,S.jsx)(j.Z,{children:(0,S.jsxs)(l.Z,{ref:t,size:e.dense?"small":"medium",children:[(0,S.jsx)(v.K,{order:e.order,orderBy:e.orderBy,headLabel:W,rowCount:L.length,numSelected:e.selected.length,onSort:e.onSort}),(0,S.jsxs)(u.Z,{children:[L.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map(((t,o)=>(0,S.jsx)(R,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onEditRow:()=>I(t._id)},o))),(0,S.jsx)(v.$W,{height:D,emptyRows:(0,v.fQ)(e.page,e.rowsPerPage,n.length)}),(0,S.jsx)(v.et,{notFound:H})]})]})})]}),(0,S.jsx)(v.S_,{count:L.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]})}function V(){return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(n.ql,{children:[(0,S.jsx)("title",{children:" Dashboard: product category Table"}),(0,S.jsx)("meta",{name:"description",content:"meta"})]}),(0,S.jsx)(H,{})]})}}}]);
//# sourceMappingURL=3582.04a180db.chunk.js.map
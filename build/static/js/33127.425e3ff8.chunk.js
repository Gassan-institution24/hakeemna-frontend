"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[33127],{12604:(e,i,n)=>{n.d(i,{A:()=>a});var t=n(79386),s=n(84402);const r=(0,n(92532).A)("MuiBox",["root"]),a=(0,s.A)({defaultClassName:r.root,generateClassName:t.A.generate})},33127:(e,i,n)=>{n.r(i),n.d(i,{default:()=>S});var t=n(29490),s=n(80899),r=n(24858),a=n(73216),l=n(46987),o=n(18403),c=n(65043),d=n(12604),p=n(96992),u=n(12110),m=n(94496),x=n(49633),h=n(83462),f=n(4219),j=n(35316),v=n(29347),g=n(67132),A=n(59229),y=n(31673),k=n(57442),C=n(7625),b=n(60778),_=n(54583),w=n(98250),F=n(59699),W=n(70579);function Y(){var e,i,n;const{t:t}=(0,b.WD)(),{currentLang:Y}=(0,b.jc)(),S="ar"===Y.value,{id:D}=(0,g.g)(),{medicalreports:E,refetch:z}=(0,C.Eau)(D),[I,M]=(0,c.useState)([]),$=(0,A.C)(),N=(0,a.Zp)(),O=s.Ik().shape({employee:s.Yj(),patient:s.Yj(),file:s.YO(),entrance_mangament:s.Yj(),description:s.Yj().required(t("Description is required")),department:s.Yj(),medical_report:s.Yj()}),T=(0,r.mN)({mode:"all",resolver:(0,o.t)(O),defaultValues:{file:[],description:""}}),{reset:q,handleSubmit:B,watch:L,setValue:R,formState:{isSubmitting:U}}=T,V=L();(0,c.useEffect)((()=>{E&&q({file:E.file||[],description:E.description||""})}),[E,q]);const K=(0,c.useCallback)((e=>{const i=V.file.filter((i=>i!==e));R("file",i),M(i)}),[R,V.file]),P=(0,c.useCallback)((()=>{R("file",[]),M([])}),[R]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(d.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,W.jsxs)(p.A,{component:u.A,sx:{p:3,width:"80%",display:"grid",gridTemplateColumns:{md:"1fr 1fr",xs:"1fr"}},children:[(0,W.jsxs)(d.A,{children:[(0,W.jsx)(m.A,{variant:"h3",children:null===E||void 0===E||null===(e=E.patient)||void 0===e?void 0:e.name_english}),(0,W.jsxs)(m.A,{sx:{fontWeight:600,p:2},children:[t("Date"),":\xa0 \xa0",(0,W.jsx)("span",{style:{color:"gray",fontWeight:400},children:(0,k.uK)(null===E||void 0===E?void 0:E.created_at)})]}),(0,W.jsxs)(m.A,{sx:{fontWeight:600,p:2},children:[t("Dr."),"\xa0",(0,W.jsx)("span",{style:{color:"gray",fontWeight:400},children:null===E||void 0===E||null===(i=E.employee)||void 0===i?void 0:i.name_english})," ","\xa0 added medical report"]}),(0,W.jsxs)(m.A,{sx:{fontWeight:600,p:2},children:[t("description"),":\xa0\xa0",(0,W.jsx)("span",{style:{color:"gray",fontWeight:400},children:null===E||void 0===E?void 0:E.description})," "]}),(0,W.jsxs)(x.A,{variant:"outlined",sx:{mt:2},onClick:()=>N(-1),children:[(0,W.jsx)(w.A,{icon:"icon-park:back"}),"\xa0 ",t("Back")]})]}),(0,W.jsxs)(d.A,{children:[(0,W.jsx)(d.A,{sx:{display:"grid",gridTemplateColumns:{md:"1fr 1fr",xs:"1fr"}},children:null===E||void 0===E||null===(n=E.file)||void 0===n?void 0:n.map(((e,i)=>(0,W.jsx)(_.A,{src:e,sx:{m:1}},i)))}),(0,W.jsxs)(x.A,{variant:"outlined",sx:{mt:2},onClick:$.onTrue,children:[(0,W.jsx)(w.A,{icon:"icon-park:edit-two"}),"\xa0 ",t("Update")]})]})]})}),(0,W.jsx)(h.A,{open:$.value,onClose:$.onFalse,children:(0,W.jsxs)(F.Ay,{methods:T,onSubmit:B((async e=>{try{const i=new FormData;Object.keys(e).forEach((n=>{Array.isArray(e[n])?e[n].forEach(((e,t)=>{i.append(`${n}[${t}]`,e)})):i.append(n,e[n])})),I.forEach(((e,n)=>{i.append(`file[${n}]`,e)})),await y.Ay.patch(`/api/examination/${D}`,e),(0,l.M8)("Prescription updated successfully",{variant:"success"}),N(-1),z(),q()}catch(i){console.error(i.message),(0,l.M8)("Error updating data",{variant:"error"})}})),children:[(0,W.jsx)(f.A,{sx:{color:"success.main",position:"relative",top:"10px"},children:S?"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u0637\u0628\u064a":"update medical report"}),(0,W.jsxs)(j.A,{children:[(0,W.jsx)(F.o3,{lang:"en",multiline:!0,name:"description",label:t("description"),sx:{mb:2,mt:2}}),(0,W.jsx)(F.Y4,{multiple:!0,autoFocus:!0,fullWidth:!0,name:"file",margin:"dense",sx:{mb:2},variant:"outlined",onDrop:e=>{const i=(()=>{const e=[".jpeg",".png",".jpg",".gif"];return{validateFile:i=>{const n=i.slice(i.lastIndexOf(".")).toLowerCase();return e.includes(n)},validateSize:e=>e<=3145728}})(e.reduce(((e,i)=>e+i.size),0));if(e.every((e=>i.validateFile(e.name)&&i.validateSize(e.size)))){const i=e;M((e=>[...e,...i])),R("file",[...V.file,...i])}else(0,l.M8)(t("Invalid file type or size"),{variant:"error"})},onRemove:K,onRemoveAll:P})]}),(0,W.jsxs)(v.A,{children:[(0,W.jsx)(x.A,{variant:"outlined",color:"inherit",onClick:$.onFalse,children:t("Cancel")}),(0,W.jsx)(x.A,{type:"submit",loading:U,variant:"contained",children:t("Upload")})]})]})})]})}function S(){return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(t.mg,{children:[(0,W.jsx)("title",{children:"record"}),(0,W.jsx)("meta",{name:"description",content:"meta"})]}),(0,W.jsx)(Y,{})]})}}}]);
//# sourceMappingURL=33127.425e3ff8.chunk.js.map
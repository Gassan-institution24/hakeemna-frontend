"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[5677],{25677:(e,n,i)=>{i.r(n),i.d(n,{default:()=>X});var s=i(6907),l=i(27031),o=i(72791),t=i(61474),r=i(2101),a=i(12065),d=i(57621),c=i(79836),u=i(89164),h=i(53382),x=i(39281),p=(i(4419),i(38072)),m=i(19208),g=i(8976),v=i(22459),j=i(61146),b=i(34045),f=i(64802),_=i(84954),Z=i(40268),w=i(10261),C=(i(77008),i(25279)),y=i(73379),P=i(38062),k=i(51642),S=i(6965),D=i(79572),R=(i(6385),i(89731),i(76932)),F=i(68870),L=i(82626),W=i(9195),O=i(68745),B=i(13400),q=i(30250),I=i(24845),M=i(80184);function z(e){let{row:n,onEditRow:i,setFilters:s,filters:l}=e;const{code:o,free_subscription:t,subscription:r,status:a,Start_date:d,End_date:c,Users_num:u,price:h,Payment_method:x,Payment_frequency:p,note:m,created_at:g,user_creation:v,ip_address_user_creation:j,updated_at:b,user_modification:f,ip_address_user_modification:w,modifications_nums:C}=n,{t:y}=(0,R.qM)(),P=(0,I.S)(),k=(0,I.S)(),S=(0,M.jsxs)(W.Z,{hover:!0,children:[(0,M.jsx)(O.Z,{lang:"ar",align:"center",children:o}),(0,M.jsx)(O.Z,{align:"center",onClick:()=>s({...l,name:null===t||void 0===t?void 0:t.name_english}),children:null===t||void 0===t?void 0:t.name_english}),(0,M.jsx)(O.Z,{align:"center",onClick:()=>s({...l,name:null===r||void 0===r?void 0:r.name_english}),children:null===r||void 0===r?void 0:r.name_english}),(0,M.jsx)(O.Z,{lang:"ar",align:"center",children:(0,M.jsx)(_.Z,{lang:"ar",variant:"soft",color:("active"===a?"success":"inactive"===a&&"error")||"default",children:y(a)})}),(0,M.jsx)(O.Z,{lang:"ar",align:"center",children:(0,q.zM)(d)}),(0,M.jsx)(O.Z,{lang:"ar",align:"center",children:(0,q.zM)(c)}),(0,M.jsx)(O.Z,{lang:"ar",align:"center",children:u}),(0,M.jsx)(O.Z,{lang:"ar",align:"center",children:h}),(0,M.jsx)(O.Z,{align:"center",onClick:()=>s({...l,name:null===x||void 0===x?void 0:x.name_english}),children:null===x||void 0===x?void 0:x.name_english}),(0,M.jsx)(O.Z,{lang:"ar",align:"center",children:p}),(0,M.jsx)(O.Z,{lang:"ar",align:"center",children:m}),(0,M.jsx)(O.Z,{lang:"ar",align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,M.jsx)(B.Z,{color:P.open?"inherit":"default",onClick:P.onOpen,children:(0,M.jsx)(Z.Z,{icon:"eva:more-vertical-fill"})})})]});return(0,M.jsxs)(M.Fragment,{children:[S,(0,M.jsxs)(I.Z,{open:P.open,onClose:P.onClose,arrow:"right-top",sx:{width:140},children:[(0,M.jsxs)(L.Z,{onClick:()=>{i(),P.onClose()},children:[(0,M.jsx)(Z.Z,{icon:"fluent:edit-32-filled"}),y("edit")]}),(0,M.jsxs)(L.Z,{onClick:k.onOpen,children:[(0,M.jsx)(Z.Z,{icon:"carbon:data-quality-definition"}),y("DDL")]})]}),(0,M.jsxs)(I.Z,{open:k.open,onClose:k.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,M.jsxs)(F.Z,{sx:{fontWeight:600},children:[y("creation time"),":"]}),(0,M.jsx)(F.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,q.zM)(g)}),(0,M.jsxs)(F.Z,{sx:{pt:1,fontWeight:600},children:[y("creator"),":"]}),(0,M.jsx)(F.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===v||void 0===v?void 0:v.email}),(0,M.jsxs)(F.Z,{sx:{pt:1,fontWeight:600},children:[y("creator IP"),":"]}),(0,M.jsx)(F.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:j}),(0,M.jsxs)(F.Z,{sx:{pt:1,fontWeight:600},children:[y("editing time"),":"]}),(0,M.jsx)(F.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,q.zM)(b)}),(0,M.jsxs)(F.Z,{sx:{pt:1,fontWeight:600},children:[y("editor"),":"]}),(0,M.jsx)(F.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===f||void 0===f?void 0:f.email}),(0,M.jsxs)(F.Z,{sx:{pt:1,fontWeight:600},children:[y("editor IP"),":"]}),(0,M.jsx)(F.Z,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:w}),(0,M.jsxs)(F.Z,{sx:{pt:1,fontWeight:600},children:[y("modifications no"),": ",C]})]})]})}var T=i(36314),E=i(13838),A=i(48550),U=i(63466);function G(e){let{filters:n,onFilters:i,onPrint:s,onDownload:l,canReset:t,onResetFilters:r}=e;const a=(0,I.S)(),{t:d}=(0,R.qM)(),c=(0,o.useCallback)((e=>{i("name",e.target.value)}),[i]);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(T.Z,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[(0,M.jsxs)(T.Z,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[(0,M.jsx)(A.Z,{fullWidth:!0,value:n.name,onChange:c,placeholder:d("Search name or number..."),InputProps:{startAdornment:(0,M.jsx)(U.Z,{position:"start",children:(0,M.jsx)(Z.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),(0,M.jsx)(B.Z,{onClick:a.onOpen,children:(0,M.jsx)(Z.Z,{icon:"eva:more-vertical-fill"})})]}),t&&(0,M.jsx)(E.Z,{color:"error",sx:{flexShrink:0},onClick:r,startIcon:(0,M.jsx)(Z.Z,{icon:"solar:trash-bin-trash-bold"}),children:d("clear")})]}),(0,M.jsxs)(I.Z,{open:a.open,onClose:a.onClose,arrow:"right-top",sx:{width:140},children:[(0,M.jsxs)(L.Z,{onClick:()=>{s(),a.onClose()},children:[(0,M.jsx)(Z.Z,{icon:"solar:printer-minimalistic-bold"}),d("print")]}),(0,M.jsxs)(L.Z,{onClick:()=>{l(),a.onClose()},children:[(0,M.jsx)(Z.Z,{icon:"solar:import-bold"}),"Import"]})]})]})}var H=i(85771),K=i(27938),N=i(2540);function Q(e){let{filters:n,onFilters:i,onResetFilters:s,results:l,...o}=e;const{t:t}=(0,R.qM)(),r=(0,N.l2)(n.startDate,n.endDate);return(0,M.jsxs)(T.Z,{spacing:1.5,...o,children:[(0,M.jsxs)(F.Z,{sx:{typography:"body2"},children:[(0,M.jsx)("strong",{children:l}),(0,M.jsx)(F.Z,{component:"span",sx:{color:"text.secondary",ml:.25},children:t("results found")})]}),(0,M.jsxs)(T.Z,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:["all"!==n.status&&(0,M.jsx)($,{label:t("status:"),children:(0,M.jsx)(H.Z,{size:"small",label:t(n.status),onDelete:()=>{i("status","all")}})}),n.startDate&&n.endDate&&(0,M.jsx)($,{label:t("date:"),children:(0,M.jsx)(H.Z,{size:"small",label:r,onDelete:()=>{i("startDate",null),i("endDate",null)}})}),(0,M.jsx)(E.Z,{color:"error",onClick:s,startIcon:(0,M.jsx)(Z.Z,{icon:"solar:trash-bin-trash-bold"}),children:t("clear")})]})]})}function $(e){let{label:n,children:i,sx:s,...l}=e;return(0,M.jsxs)(T.Z,{component:K.Z,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...s},...l,children:[(0,M.jsx)(F.Z,{component:"span",sx:{typography:"subtitle2"},children:n}),(0,M.jsx)(T.Z,{spacing:1,direction:"row",flexWrap:"wrap",children:i})]})}const J={name:"",status:"all"};function V(){var e,n;const{t:i}=(0,R.qM)(),s=[{id:"code",label:i("code")},{id:"free_subscription",label:i("free subscription")},{id:"subscription",label:i("subscription")},{id:"status",label:i("status")},{id:"Start_date",label:i("start date")},{id:"End_date",label:i("end date")},{id:"Users_num",label:i("users no")},{id:"price",label:i("price")},{id:"Payment_method",label:i("payment method")},{id:"Payment_frequency",label:i("payment frequency")},{id:"notes",label:i("notes")},{id:"",width:88}],{STATUS_OPTIONS:l}=(0,k.D)(),Z=(0,P.x6)({defaultOrderBy:"code"}),{user:F}=(0,g.E)(),L=(0,o.useRef)(),W=(0,C.K$)(),O=((0,v.k)(),(0,v.k)(),(0,m.tv)()),{licenseMovements:B,loading:q,refetch:I}=(0,D.Bb)(null===F||void 0===F||null===(e=F.employee)||void 0===e||null===(n=e.employee_engagements[null===F||void 0===F?void 0:F.employee.selected_engagement])||void 0===n?void 0:n.unit_service._id),[T,E]=(0,o.useState)(J),A=!(!T.startDate||!T.endDate)&&T.startDate.getTime()>T.endDate.getTime(),U=function(e){var n;let{inputData:i,comparator:s,filters:l,dateError:o}=e;const{status:t,name:r}=l,a=null===(n=i)||void 0===n?void 0:n.map(((e,n)=>[e,n]));null===a||void 0===a||a.sort(((e,n)=>{const i=s(e[0],n[0]);return 0!==i?i:e[1]-n[1]})),i=a.map((e=>e[0])),r&&(i=i.filter((e=>{var n,i,s,l,o,t,a,d,c,u,h,x,p,m,g,v,j,b;return(null===e||void 0===e||null===(n=e.free_subscription)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(i=e.free_subscription)||void 0===i||null===(s=i.name_english)||void 0===s?void 0:s.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e||null===(l=e.free_subscription)||void 0===l?void 0:l.name_arabic)&&-1!==(null===e||void 0===e||null===(o=e.free_subscription)||void 0===o||null===(t=o.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e||null===(a=e.subscription)||void 0===a?void 0:a.name_english)&&-1!==(null===e||void 0===e||null===(d=e.subscription)||void 0===d||null===(c=d.name_english)||void 0===c?void 0:c.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e||null===(u=e.subscription)||void 0===u?void 0:u.name_arabic)&&-1!==(null===e||void 0===e||null===(h=e.subscription)||void 0===h||null===(x=h.name_arabic)||void 0===x?void 0:x.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e||null===(p=e.Payment_method)||void 0===p?void 0:p.name_english)&&-1!==(null===e||void 0===e||null===(m=e.Payment_method)||void 0===m||null===(g=m.name_english)||void 0===g?void 0:g.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e||null===(v=e.Payment_method)||void 0===v?void 0:v.name_arabic)&&-1!==(null===e||void 0===e||null===(j=e.Payment_method)||void 0===j||null===(b=j.name_arabic)||void 0===b?void 0:b.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===r||JSON.stringify(e.code)===r})));"all"!==t&&(i=i.filter((e=>e.status===t)));return i}({inputData:B,comparator:(0,P.sQ)(Z.order,Z.orderBy),filters:T,dateError:A}),H=Z.dense?52:72,K=!(null===T||void 0===T||!T.name)||"all"!==T.status,N=!U.length&&K||!U.length,$=(0,j.useReactToPrint)({content:()=>L.current}),V=(0,o.useCallback)(((e,n)=>{Z.onResetPage(),E((i=>({...i,[e]:n})))}),[Z]),X=(0,o.useCallback)((e=>{O.push(p.H.superadmin.unitservices.editAccounting(e))}),[O]),Y=(0,o.useCallback)((()=>{E(J)}),[]),ee=(0,o.useCallback)(((e,n)=>{V("status",n)}),[V]);return q?(0,M.jsx)(S.a,{}):(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)(u.Z,{maxWidth:!W.themeStretch&&"lg",children:[(0,M.jsx)(y.Z,{heading:i("subscriptions"),links:[{name:i("dashboard"),href:p.H.dashboard.root},{name:i("subscriptions")}],sx:{mb:{xs:3,md:5}}}),(0,M.jsxs)(d.Z,{children:[(0,M.jsx)(r.Z,{value:T.status,onChange:ee,sx:{px:2.5,boxShadow:e=>"inset 0 -2px 0 0 ".concat((0,a.Fq)(e.palette.grey[500],.08))},children:l.map((e=>(0,M.jsx)(t.Z,{iconPosition:"end",value:e.value,label:e.label,icon:(0,M.jsxs)(_.Z,{lang:"ar",variant:"all"===e.value||e.value===T.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&B.length,"active"===e.value&&B.filter((e=>"active"===e.status)).length,"inactive"===e.value&&B.filter((e=>"inactive"===e.status)).length]})},e.value)))}),(0,M.jsx)(G,{onPrint:$,filters:T,onFilters:V,onDownload:()=>{const e=U.reduce(((e,n)=>{var i,s;return e.push({code:n.code,name:n.name_english,category:null===(i=n.category)||void 0===i?void 0:i.name_english,symptoms:null===(s=n.symptoms)||void 0===s?void 0:s.map((e=>null===e||void 0===e?void 0:e.name_english))}),e}),[]),n=b.P6.book_new(),i=b.P6.json_to_sheet(e);b.P6.book_append_sheet(n,i,"Sheet 1");const s=b.cW(n,{bookType:"xlsx",type:"array"}),l=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,f.saveAs)(l,"unitservicesTable.xlsx")},canReset:K,onResetFilters:Y}),K&&(0,M.jsx)(Q,{filters:T,onFilters:V,onResetFilters:Y,results:U.length,sx:{p:2.5,pt:0}}),(0,M.jsx)(x.Z,{children:(0,M.jsx)(w.Z,{children:(0,M.jsxs)(c.Z,{ref:L,size:Z.dense?"small":"medium",children:[(0,M.jsx)(P.K,{order:Z.order,orderBy:Z.orderBy,headLabel:s,rowCount:U.length,numSelected:Z.selected.length,onSort:Z.onSort}),(0,M.jsxs)(h.Z,{children:[U.slice(Z.page*Z.rowsPerPage,Z.page*Z.rowsPerPage+Z.rowsPerPage).map((e=>(0,M.jsx)(z,{row:e,filters:T,setFilters:E,onSelectRow:()=>Z.onSelectRow(e._id),onEditRow:()=>X(e._id)},e._id))),(0,M.jsx)(P.$W,{height:H,emptyRows:(0,P.fQ)(Z.page,Z.rowsPerPage,B.length)}),(0,M.jsx)(P.et,{notFound:N})]})]})})}),(0,M.jsx)(P.S_,{count:U.length,page:Z.page,rowsPerPage:Z.rowsPerPage,onPageChange:Z.onChangePage,onRowsPerPageChange:Z.onChangeRowsPerPage,dense:Z.dense,onChangeDense:Z.onChangeDense})]})]})})}function X(){return(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)(l.Z,{hasContent:!0,category:"unit_service",subcategory:"subscriptions",acl:"read",children:[(0,M.jsx)(s.ql,{children:(0,M.jsx)("title",{children:"Subscriptions"})}),(0,M.jsx)(V,{})]})})}}}]);
//# sourceMappingURL=5677.e627756e.chunk.js.map
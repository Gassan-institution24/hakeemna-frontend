"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[2244],{82007:(e,t,i)=>{i.d(t,{Z:()=>o});var a=i(61134),n=i(80184);function o(e){let{children:t,onSubmit:i,methods:o}=e;return(0,n.jsx)(a.RV,{...o,children:(0,n.jsx)("form",{onSubmit:i,children:t})})}},80639:(e,t,i)=>{i.d(t,{Z:()=>c});var a=i(72791),n=i(87087),o=i(16029),r=i(13967),l=i(12065);function s(){return{"4/3":"calc(100% / 4 * 3)","3/4":"calc(100% / 3 * 4)","6/4":"calc(100% / 6 * 4)","4/6":"calc(100% / 4 * 6)","16/9":"calc(100% / 16 * 9)","9/16":"calc(100% / 9 * 16)","21/9":"calc(100% / 21 * 9)","9/21":"calc(100% / 9 * 21)","1/1":"100%"}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1/1"]}var d=i(80184);const c=(0,a.forwardRef)(((e,t)=>{let{ratio:i,overlay:a,disabledEffect:c=!1,alt:m,src:p,afterLoad:h,delayTime:u,threshold:x,beforeLoad:v,delayMethod:g,placeholder:b,wrapperProps:f,scrollPosition:j,effect:y="blur",visibleByDefault:Z,wrapperClassName:w,useIntersectionObserver:_,sx:k,...S}=e;const C=(0,r.Z)(),F=!!a&&{"&:before":{content:"''",top:0,left:0,width:1,height:1,zIndex:1,position:"absolute",background:a||(0,l.Fq)(C.palette.grey[900],.48)}},B=(0,d.jsx)(o.Z,{component:n.LazyLoadImage,alt:m,src:p,afterLoad:h,delayTime:u,threshold:x,beforeLoad:v,delayMethod:g,placeholder:b,wrapperProps:f,scrollPosition:j,visibleByDefault:Z,effect:c?void 0:y,useIntersectionObserver:_,wrapperClassName:w||"component-image-wrapper",placeholderSrc:c?"/assets/transparent.png":"/assets/placeholder.svg",sx:{width:1,height:1,objectFit:"cover",verticalAlign:"bottom",...!!i&&{top:0,left:0,position:"absolute"}}});return(0,d.jsx)(o.Z,{ref:t,component:"span",className:"component-image",sx:{overflow:"hidden",position:"relative",verticalAlign:"bottom",display:"inline-block",...!!i&&{width:1},"& span.component-image-wrapper":{width:1,height:1,verticalAlign:"bottom",backgroundSize:"cover !important",...!!i&&{pt:s(i)}},...F,...k},...S,children:B})}))},41364:(e,t,i)=>{i.d(t,{Z:()=>a.Z});var a=i(80639)},82244:(e,t,i)=>{i.r(t),i.d(t,{default:()=>L});var a=i(6907),n=i(78644),o=i(4567),r=i(13838),l=i(8976),s=i(76119),d=i(8007),c=i(72791),m=i(61134),p=i(44695),h=i(16029),u=i(1503),x=i(5574),v=i(15581),g=i(4110),b=i(62861),f=i(68096),j=i(65661),y=i(97123),Z=i(39157),w=i(22459),_=i(66664),k=i(41364),S=i(32869),C=i(82007),F=i(80184);function B(e){var t;let{employeesData:i}=e;const{enqueueSnackbar:a}=(0,S.Ds)(),{t:B}=(0,n.qM)(),{currentLang:D}=(0,n.nt)(),L="ar"===D.value,P=d.Ry().shape({Body:d.Z_(),Selection:d.Z_().nullable()}),[W,R]=(0,c.useState)(),{user:T}=(0,l.E)(),{appointmentsData:z}=(0,s.BLB)(null===T||void 0===T||null===(t=T.patient)||void 0===t?void 0:t._id),I=(0,m.cI)({mode:"onTouched",resolver:(0,p.X)(P),defaultValues:{Body:"",Selection:null}}),{register:q,handleSubmit:O,formState:{isSubmitting:A}}=I,E=(0,w.k)(!0),[M,N]=c.useState(void 0),V=["Neglectful treatment","Employee Behavior","Cleanliness","Price"],H=(e,t)=>{N(t)},{fullWidth:X}=(0,c.useState)(!1),{maxWidth:G}=(0,c.useState)("xs");return(0,F.jsx)(x.Z,{open:E.value,maxWidth:G,onClose:E.onTrue,fullWidth:X,children:(0,F.jsxs)(C.Z,{methods:I,onSubmit:O((async e=>{try{var t,n;const o={...e,Selection:M,Rate:W,patient:null===T||void 0===T?void 0:T.patient._id,appointment:z._id,department:null===(t=z.department)||void 0===t?void 0:t._id,employee:null===(n=i.employee)||void 0===n?void 0:n._id};await _.ZP.post("api/feedback",o),await _.ZP.patch("api/appointments/".concat(z._id),{hasFeedback:!0}),E.onFalse(),a(B("Thanks for your cooperation"),{variant:"success"}),setTimeout((()=>{window.location.reload()}),1e3)}catch(o){console.error(o.message),a(L&&o.arabic_message||o.message,{variant:"error"})}})),children:[(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textalign:"center",margin:"20px",gap:"10px"},children:[(0,F.jsx)(j.Z,{children:B("Rate your appointment")}),(0,F.jsx)(k.Z,{src:"https://cdn.altibbi.com/cdn/large/0/10/logo_1296490409_651.gif",sx:{width:"60px",height:"60px",border:1,borderRadius:"50px"}}),(0,F.jsx)(v.Z,{size:"large",precision:1,max:5,name:"Rate",value:W,onChange:e=>{R(parseFloat(e.target.value))}})]}),W<5?(0,F.jsx)(Z.Z,{children:(0,F.jsxs)(h.Z,{component:"form",noValidate:!0,children:[(0,F.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:null===V||void 0===V?void 0:V.map(((e,t,i)=>{return(0,F.jsx)("div",{children:(0,F.jsxs)(h.Z,{sx:{fontSize:{md:"15px",xs:"9px"},fontWeight:{md:"400",xs:"bolder"}},children:[(0,F.jsx)(u.Z,{...(a=e,{checked:M===a,onChange:e=>H(e,a),value:a,name:"color-radio-button-demo",inputProps:{"aria-label":a}}),name:"Selection"}),e]})},i);var a}))}),(0,F.jsxs)(f.Z,{sx:{my:5,minWidth:"100%"},children:[(0,F.jsx)(b.Z,{htmlFor:"max-width",children:"Other"}),(0,F.jsx)(g.Z,{id:"max-width",...q("Body")})]})]})}):(0,F.jsxs)(Z.Z,{children:[(0,F.jsx)(o.Z,{sx:{ml:2,mb:1,fontSize:15},children:B("We hope that everything was to your satisfaction")}),(0,F.jsx)(h.Z,{component:"form",noValidate:!0,children:(0,F.jsxs)(f.Z,{sx:{my:3,minWidth:"100%"},children:[(0,F.jsx)(b.Z,{htmlFor:"max-width",children:"Other"}),(0,F.jsx)(g.Z,{id:"max-width",...q("Body")})]})})]}),(0,F.jsxs)(y.Z,{children:[(0,F.jsx)(r.Z,{onClick:async()=>{try{await _.ZP.patch("api/appointments/".concat(z._id),{hasFeedback:!0}),E.onFalse()}catch(e){console.error(e.message)}},loading:A,variant:"outlined",color:"inherit",type:"submit",children:B("Skip")}),(0,F.jsx)(r.Z,{type:"submit",variant:"contained",children:B("Submit")})]})]})})}function D(){var e,t;const{user:i}=(0,l.E)(),{appointmentsData:a}=(0,s.BLB)(null===i||void 0===i||null===(e=i.patient)||void 0===e?void 0:e._id),{employeesData:n}=(0,s.HO3)(null===a||void 0===a||null===(t=a.unit_service)||void 0===t?void 0:t._id),d=new Date;return!1===(null===a||void 0===a?void 0:a.hasFeedback)&&d>(null===a||void 0===a?void 0:a.start_time)?null===n||void 0===n?void 0:n.map(((e,t)=>(0,F.jsx)(B,{employeesData:e},t))):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(o.Z,{children:"Are you coming?"}),(0,F.jsx)(r.Z,{variant:"contained",sx:{bgcolor:"success.main",width:"100px",mb:3},onClick:()=>{alert("ok")},children:"yes"}),(0,F.jsx)(r.Z,{variant:"contained",sx:{bgcolor:"success.main",width:"100px"},onClick:()=>{alert("ok")},children:"no"})]})}function L(){const{t:e}=(0,n.qM)();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(a.ql,{children:[(0,F.jsx)("title",{children:e("watingroom")}),(0,F.jsx)("meta",{name:"description",content:"meta"})]}),(0,F.jsx)(D,{})]})}}}]);
//# sourceMappingURL=2244.27572442.chunk.js.map
"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[81260,96301],{3900:(e,i,n)=>{n.d(i,{A:()=>t});n(65043);var l=n(66734),o=n(70579);const t=(0,l.A)((0,o.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft")},20986:(e,i,n)=>{n.d(i,{Ch:()=>a,cF:()=>r,m:()=>c,sG:()=>s});var l=n(65043),o=n(40799),t=n(39556),d=n(31673);function a(e){const i=[d.vZ.sickleave.all,{params:e}],{data:n,isLoading:a,error:r,isValidating:s}=(0,o.Ay)(i,d.GO);return{...(0,l.useMemo)((()=>({data:n,loading:a,error:r,validating:s,empty:!a&&!(null!==n&&void 0!==n&&n.length)})),[n,r,a,s]),refetch:async()=>{await(0,t.j)(i)}}}function r(e){const i=d.vZ.sickleave.one(e),{data:n,isLoading:a,error:r,isValidating:s}=(0,o.Ay)(i,d.GO);return{...(0,l.useMemo)((()=>({data:n,loading:a,error:r,validating:s,empty:!a&&!(null!==n&&void 0!==n&&n.length)})),[n,r,a,s]),refetch:async()=>{await(0,t.j)(i)}}}function s(e){const i=d.vZ.sickleave.onee(e),{data:n,isLoading:a,error:r,isValidating:s}=(0,o.Ay)(i,d.GO);return{...(0,l.useMemo)((()=>({data:n,loading:a,error:r,validating:s,empty:!a&&!(null!==n&&void 0!==n&&n.length)})),[n,r,a,s]),refetch:async()=>{await(0,t.j)(i)}}}function c(e){const i=d.vZ.sickleave.entrance(e),{data:n,isLoading:a,error:r,isValidating:s}=(0,o.Ay)(i,d.GO);return{...(0,l.useMemo)((()=>({data:n,loading:a,error:r,validating:s,empty:!a&&!(null!==n&&void 0!==n&&n.length)})),[n,r,a,s]),refetch:async()=>{await(0,t.j)(i)}}}},38974:(e,i,n)=>{n.d(i,{d:()=>o});var l=n(65043);function o(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const[n,o]=(0,l.useState)(e);return(0,l.useEffect)((()=>{const n=setTimeout((()=>{o(e)}),i);return()=>{clearTimeout(n)}}),[e,i]),n}},51639:(e,i,n)=>{n.d(i,{A:()=>t});n(65043);var l=n(66734),o=n(70579);const t=(0,l.A)((0,o.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight")},68413:(e,i,n)=>{n.d(i,{G:()=>a,o:()=>d});var l=n(40799),o=n(65043),t=n(31673);function d(e){const i=t.vZ.adjustabledocument.employee(e),{data:n,isLoading:d,error:a,isValidating:r}=(0,l.Ay)(i,t.GO);return(0,o.useMemo)((()=>({adjustabledocument:n,loading:d,error:a,validating:r,empty:!d&&!(null!==n&&void 0!==n&&n.length)})),[n,a,d,r])}function a(e){const i=t.vZ.adjustabledocument.one(e),{data:n,isLoading:d,error:a,isValidating:r}=(0,l.Ay)(i,t.GO);return(0,o.useMemo)((()=>({adjustabledocument:n,loading:d,error:a,validating:r,empty:!d&&!(null!==n&&void 0!==n&&n.length)})),[n,a,d,r])}},81260:(e,i,n)=>{n.r(i),n.d(i,{default:()=>M});var l=n(80899),o=n(46987),t=n(65043),d=n(18403),a=n(24858),r=n(84284),s=n(49633),c=n(94496),v=n(83462),u=n(4219),m=n(35316),p=n(45376),_=n(67784),x=n(1273),h=n(39336),j=n(29347),g=n(48407),y=n(67132),A=n(59229),f=n(38974),b=n(31673),w=n(75139),C=n(60778),k=n(7625),F=n(35151),S=n(59699),D=n(70579);function M(e){var i,n,M,E,$,Y,I,L;let{Entrance:O}=e;const{user:T}=(0,w.Z)(),W=(0,y.rd)(),{prescriptionData:Z,refetch:q}=(0,k.AY1)(null===O||void 0===O?void 0:O._id),N=(0,A.C)(),[V,z]=(0,t.useState)(),R=(0,f.d)(V),{medicinesData:P}=(0,k.N_9)({select:"trade_name concentration",search:R}),{t:G}=(0,C.WD)(),{currentLang:J}=(0,C.jc)(),U="ar"===J.value,[B,K]=(0,t.useState)(null),[X,H]=(0,t.useState)([{id:0}]),Q=()=>{K(null)},ee=()=>{var e,i;const n={id:X.length,employee:(null===T||void 0===T||null===(e=T.employee)||void 0===e?void 0:e._id)||"",patient:(null===O||void 0===O||null===(i=O.patient)||void 0===i?void 0:i._id)||"",unit_service_patient:null===O||void 0===O?void 0:O.unit_service_patient,entrance_mangament:(null===O||void 0===O?void 0:O._id)||"",Start_time:new Date,End_time:new Date,Frequency_per_day:"",Num_days:0,Doctor_Comments:""};H((e=>[...e,n])),re(`prescriptions[${X.length}]`,n)},ie=l.Ik().shape({employee:l.Yj(),patient:l.Yj(),medicines:l.Yj(),Start_time:l.gl(),End_time:l.gl(),Frequency_per_day:l.Yj(),entrance_mangament:l.Yj(),Doctor_Comments:l.Yj(),chronic:l.zM(),Drugs_report:l.Yj(),medical_report:l.Yj()}),ne={prescriptions:[{employee:(null===T||void 0===T||null===(i=T.employee)||void 0===i?void 0:i._id)||"",patient:(null===O||void 0===O||null===(n=O.patient)||void 0===n?void 0:n._id)||"",unit_service:null===T||void 0===T||null===(M=T.employee)||void 0===M||null===(E=M.employee_engagements)||void 0===E||null===($=E[T.employee.selected_engagement])||void 0===$||null===(Y=$.unit_service)||void 0===Y?void 0:Y._id,unit_service_patient:null===O||void 0===O?void 0:O.unit_service_patient,entrance_mangament:(null===O||void 0===O?void 0:O._id)||"",Start_time:new Date,End_time:new Date,Frequency_per_day:"",Num_days:0,medicines:null,Doctor_Comments:""}]},le=(0,a.mN)({mode:"all",resolver:(0,d.t)(ie),defaultValues:ne}),{reset:oe,handleSubmit:te,control:de,watch:ae,setValue:re,formState:{isSubmitting:se}}=le,ce=null===(I=ae("prescriptions"))||void 0===I?void 0:I.map(((e,i)=>ae(`prescriptions[${i}].Start_time`))),ve=null===(L=ae("prescriptions"))||void 0===L?void 0:L.map(((e,i)=>ae(`prescriptions[${i}].End_time`)));(0,t.useEffect)((()=>{ce.forEach(((e,i)=>{const n=ve[i];if(e&&n){const l=new Date(e),o=new Date(n),t=Math.ceil((o-l)/864e5);re(`prescriptions[${i}].Num_days`,t>0?t:0)}}))}),[ce,ve,re]);return(0,t.useEffect)((()=>{var e,i,n,l,o,t;oe({prescriptions:[{employee:(null===T||void 0===T||null===(e=T.employee)||void 0===e?void 0:e._id)||"",patient:(null===O||void 0===O||null===(i=O.patient)||void 0===i?void 0:i._id)||"",unit_service:null===T||void 0===T||null===(n=T.employee)||void 0===n||null===(l=n.employee_engagements)||void 0===l||null===(o=l[T.employee.selected_engagement])||void 0===o||null===(t=o.unit_service)||void 0===t?void 0:t._id,unit_service_patient:null===O||void 0===O?void 0:O.unit_service_patient,entrance_mangament:(null===O||void 0===O?void 0:O._id)||"",Start_time:new Date,End_time:new Date,Frequency_per_day:"",Num_days:0,medicines:null,Doctor_Comments:""}]})}),[T,O,oe]),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(s.A,{variant:"outlined",color:"success",onClick:N.onTrue,sx:{m:2},children:[G("Add prescription"),(0,D.jsx)(F.A,{icon:"mingcute:add-line"})]}),null===Z||void 0===Z?void 0:Z.map(((e,i)=>{var n;return(0,D.jsxs)(c.A,{variant:"h6",sx:{bgcolor:"#fff",m:2,border:2,borderRadius:2,borderColor:"#EDEFF2",p:2},children:[null===e||void 0===e||null===(n=e.medicines)||void 0===n?void 0:n.map(((e,i)=>{var n;return(0,D.jsx)("ul",{style:{listStyleType:"none",display:"flex",flexDirection:"column"},children:(0,D.jsx)("li",{children:null===e||void 0===e||null===(n=e.medicines)||void 0===n?void 0:n.trade_name},i)})})),(0,D.jsx)("br",{}),(0,D.jsxs)(s.A,{onMouseOver:()=>{return i=null===e||void 0===e?void 0:e._id,void K(i);var i},onMouseOut:Q,onClick:()=>{return i=null===e||void 0===e?void 0:e._id,void W.push(g.f.employee.prescription(i));var i},sx:{m:1},children:[G("View")," \xa0"," ",(0,D.jsx)(F.A,{icon:B===(null===e||void 0===e?void 0:e._id)?"emojione:eye":"tabler:eye-closed"})]}),(0,D.jsxs)(s.A,{onClick:()=>(async e=>{await b.Ay.delete(b.vZ.prescription.one(e)),(0,o.M8)(G("Field removed successfully"),{variant:"success"}),q(),oe()})(null===e||void 0===e?void 0:e._id),children:[G("Remove")," \xa0 ",(0,D.jsx)(F.A,{icon:"flat-color-icons:delete-database"})]})]},i)})),(0,D.jsx)(v.A,{open:N.value,onClose:N.onFalse,children:(0,D.jsxs)(S.Ay,{methods:le,onSubmit:te((async e=>{try{const d=e.prescriptions.map((e=>({...e})));var i,n,l,t;if(N.value)await b.Ay.post(b.vZ.history.all,{patient:null===O||void 0===O||null===(i=O.patient)||void 0===i?void 0:i._id,unit_service_patient:null===O||void 0===O?void 0:O.unit_service_patient,name_english:"a prescription has been added",name_arabic:"\u062a\u0645 \u0627\u0631\u0641\u0627\u0642 \u0648\u0635\u0641\u0629 \u0637\u0628\u064a\u0629",sub_english:`prescription from ${null===O||void 0===O||null===(n=O.service_unit)||void 0===n?void 0:n.name_english}`,sub_arabic:`\u0648\u0635\u0641\u0629 \u0637\u0628\u064a\u0629 \u0645\u0646 ${null===O||void 0===O||null===(l=O.service_unit)||void 0===l?void 0:l.name_arabic}`,actual_date:null===O||void 0===O?void 0:O.created_at,title:"prescription",service_unit:null===O||void 0===O||null===(t=O.service_unit)||void 0===t?void 0:t._id}),await b.Ay.post("/api/drugs",d),await b.Ay.patch(`/api/entrance/${null===O||void 0===O?void 0:O._id}`,{Drugs_report_status:!0}),(0,o.M8)(G("Prescription uploaded successfully"),{variant:"success"}),N.onFalse(),q(),oe(),H([{id:0}])}catch(d){console.error(d.message),(0,o.M8)("Error uploading data",{variant:"error"})}})),children:[(0,D.jsx)(u.A,{sx:{color:"success.main",position:"relative",top:"10px"},children:U?"\u0627\u0636\u0627\u0641\u0629 \u0648\u0635\u0641\u0629 \u0637\u0628\u064a\u0629":"add prescription"}),(0,D.jsxs)(m.A,{children:[null===X||void 0===X?void 0:X.map(((e,i)=>(0,D.jsxs)("div",{children:[(0,D.jsx)(p.A,{sx:{minWidth:300,flex:1,my:2},options:P,onBlur:()=>z(),onChange:(e,n)=>re(`prescriptions[${i}].medicines`,null===n||void 0===n?void 0:n._id),getOptionLabel:e=>e.trade_name+" "+e.concentration||"",onInputChange:(e,i)=>{z(i)},renderInput:e=>(0,D.jsx)(_.A,{...e,label:G("medicine"),variant:"outlined"})}),(0,D.jsx)(S.o3,{name:`prescriptions[${i}].Frequency_per_day`,label:G("Frequency per day"),sx:{mb:2}}),(0,D.jsx)(S.o3,{name:`prescriptions[${i}].Num_days`,label:G("Number of days"),sx:{mb:2}}),(0,D.jsx)(a.xI,{name:`prescriptions[${i}].Start_time`,control:de,render:e=>{let{field:i,fieldState:{error:n}}=e;return(0,D.jsx)(r.l,{...i,label:G("Start time"),sx:{mb:2},slotProps:{textField:{fullWidth:!0,error:!!n,helperText:null===n||void 0===n?void 0:n.message}}})}}),(0,D.jsx)(a.xI,{name:`prescriptions[${i}].End_time`,control:de,render:e=>{let{field:n,fieldState:{error:l}}=e;return(0,D.jsx)(r.l,{...n,label:G("End time"),sx:{mb:2},shouldDisableDate:e=>{const n=ae(`prescriptions[${i}].Start_time`);return n&&e<new Date(n)},slotProps:{textField:{fullWidth:!0,error:!!l,helperText:null===l||void 0===l?void 0:l.message}}})}}),(0,D.jsx)(a.xI,{name:`prescriptions[${i}].Doctor_Comments`,control:de,render:e=>{let{field:i,fieldState:{error:n}}=e;return(0,D.jsx)(S.o3,{...i,label:G("doctor comment"),multiline:!0,sx:{mb:2},error:!!n,helperText:null===n||void 0===n?void 0:n.message})}}),(0,D.jsx)(a.xI,{name:`prescriptions[${i}].chronic`,control:de,render:e=>{let{field:i}=e;return(0,D.jsx)(x.A,{...i,checked:i.value,onChange:e=>i.onChange(e.target.checked)})}}),(0,D.jsx)(c.A,{sx:{color:"text.secondary",mt:{md:-3,xs:-2.3},ml:{md:8,xs:4},typography:"caption",fontSize:{md:15,xs:10}},children:G("chronic")}),(0,D.jsx)(s.A,{onClick:()=>{return i=e.id,H((e=>e.filter((e=>e.id!==i)))),void re("prescriptions",X.filter((e=>e.id!==i)));var i},sx:{mt:2,mb:2},variant:"outlined",disabled:1===X.length,children:G("Remove Prescription")}),i===X.length-1&&(0,D.jsx)(s.A,{onClick:ee,sx:{ml:2,bgcolor:"success.main",display:"inline"},variant:"contained",children:G("Add more")})]},e.id))),(0,D.jsx)(h.A,{})]}),(0,D.jsxs)(j.A,{children:[(0,D.jsx)(s.A,{variant:"outlined",color:"inherit",onClick:N.onFalse,children:G("Cancel")}),(0,D.jsx)(s.A,{type:"submit",loading:se,variant:"contained",children:G("Upload")})]})]})})]})}},85733:(e,i,n)=>{n.r(i),n.d(i,{default:()=>ue});var l=n(73216),o=n(69369),t=n(30344),d=n(12110),a=n(81e3),r=n(49633),s=n(39336),c=n(8555),v=n(90310),u=n(94496),m=n(69872),p=n(32116),_=n(53797),x=n(98029),h=n(27634),j=n(25570),g=n(48407),y=n(67132),A=n(75139),f=n(60778),b=n(68413),w=n(7625),C=n(35151),k=n(24858),F=n(65043),S=n(46987),D=n(83462),M=n(4219),E=n(35316),$=n(29347),Y=n(67784),I=n(72221),L=n(94814),O=n(59229),T=n(31673),W=n(54583);const Z=n.p+"static/media/next.4215be07df297ec9cd46.png";var q=n(70579);const N=e=>{if(!e)return"";return e.split(" ").reduce(((e,i,n)=>e+i+((n+1)%20===0?"<br />":" ")),"")};function V(){var e,i,n,l,o,t;const[s,c]=(0,F.useState)(""),[m,p]=(0,F.useState)(""),_=(0,O.C)(!1),[x]=(0,F.useState)(""),{t:h}=(0,f.WD)(),{currentLang:j}=(0,f.jc)(),b="ar"===j.value,{id:C}=(0,y.g)(),{Entrance:V,refetch:z}=(0,w.Jid)(C,{populate:"all"}),{user:R}=(0,A.Z)(),P=(0,y.rd)(),G=(0,k.mN)({mode:"all"}),{roomsData:J}=(0,w.Kuq)(null===R||void 0===R||null===(e=R.employee)||void 0===e||null===(i=e.employee_engagements)||void 0===i||null===(n=i[null===R||void 0===R||null===(o=R.employee)||void 0===o?void 0:o.selected_engagement])||void 0===n||null===(l=n.unit_service)||void 0===l?void 0:l._id),{medicalreportsdata:U}=(0,w.Igg)(C),{doctorreportsdata:B}=(0,w.Ado)(C),{prescriptionData:K}=(0,w.AY1)(C),X=null===U||void 0===U?void 0:U.map((e=>e._id)),H=null===B||void 0===B?void 0:B.map((e=>e._id)),Q=null===K||void 0===K?void 0:K.map((e=>e._id)),{reset:ee}=G;return(0,F.useEffect)((()=>{var e,i,n,l,o,t,d;ee({employee:null===R||void 0===R||null===(e=R.employee)||void 0===e?void 0:e._id,patient:null===V||void 0===V||null===(i=V.patient)||void 0===i?void 0:i._id,unit_service_patient:null===V||void 0===V?void 0:V.unit_service_patient,service_unit:null===V||void 0===V||null===(n=V.service_unit)||void 0===n?void 0:n._id,unit_service:null===R||void 0===R||null===(l=R.employee)||void 0===l||null===(o=l.employee_engagements)||void 0===o||null===(t=o[R.employee.selected_engagement])||void 0===t||null===(d=t.unit_service)||void 0===d?void 0:d._id,appointment:null===V||void 0===V?void 0:V.appointmentId})}),[R,V,ee]),(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(D.A,{open:_.value,maxWidth:"md",onClose:_.onTrue,children:[(0,q.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",margin:"10px",width:b?"250px":"400px"},children:[(0,q.jsx)(M.A,{children:h("Are you sure")}),(0,q.jsx)(W.A,{src:Z,alt:"Processing",sx:{width:"200px",height:"200px"}})]}),(0,q.jsx)(E.A,{children:(0,q.jsxs)(u.A,{sx:{mb:1,fontSize:15},children:[h("please confirm moving the patient to ")," ",b?null===m||void 0===m?void 0:m.name_arabic:null===m||void 0===m?void 0:m.name_english]})}),(0,q.jsxs)($.A,{children:[(0,q.jsx)(r.A,{color:"inherit",size:"small",variant:"outlined",sx:{mr:1,border:e=>`1px solid ${(0,v.X4)(e.palette.common.white,.48)}`},onClick:()=>_.onFalse(),children:h("Cancel")}),(0,q.jsx)(r.A,{size:"small",color:"info",variant:"contained",sx:{bgcolor:"info.dark"},onClick:()=>{_.onFalse(),(async e=>{try{var i;await T.Ay.patch(`/api/entrance/${null===V||void 0===V?void 0:V._id}`,{Last_activity_atended:null===V||void 0===V?void 0:V.Next_activity,Next_activity:null===e||void 0===e||null===(i=e.activities)||void 0===i?void 0:i._id,note:s,rooms:null===e||void 0===e?void 0:e._id}),await T.Ay.patch(`/api/rooms/${null===e||void 0===e?void 0:e._id}`,{patient:null,entranceMangament:null}),P.push(g.f.employee.appointmentsToday)}catch(n){console.error(n.message),(0,S.M8)("Error updating status",{variant:"error"})}})(m)},children:h("Confirm")})]})]}),(0,q.jsxs)(d.A,{sx:{display:{md:"flex",xs:"grid"},gridTemplateColumns:"1fr",gap:{md:15,xs:1}},children:[(0,q.jsxs)(a.A,{sx:{m:2},children:[(0,q.jsx)(u.A,{variant:"h6",children:h("Last activity")}),(0,q.jsx)(u.A,{children:null===V||void 0===V||null===(t=V.Last_activity_atended)||void 0===t?void 0:t.name_english}),(0,q.jsx)(u.A,{variant:"h6",sx:{mt:2},children:h("Doctor Message")}),(0,q.jsx)(u.A,{dangerouslySetInnerHTML:{__html:N((null===V||void 0===V?void 0:V.note)||"")}})]}),(0,q.jsxs)(a.A,{sx:{m:2},children:[(0,q.jsx)(u.A,{variant:"h6",children:h("Next Activity")}),(0,q.jsx)(a.A,{sx:{mb:9},children:(0,q.jsxs)(a.A,{children:[(0,q.jsx)(Y.A,{onChange:e=>c(e.target.value),placeholder:h("Add Message"),fullWidth:!0,multiline:!0,rows:2,sx:{mb:2}}),(0,q.jsxs)(I.A,{sx:{width:150,height:35},value:x,displayEmpty:!0,children:[(0,q.jsx)(L.A,{value:"",disabled:!0,sx:{display:"none"},children:h("Choose")}),null===J||void 0===J?void 0:J.map(((e,i)=>{var n,l,o,t,d,a;const r=Array.isArray(e.employee)?e.employee.map((e=>e.name_english)).join(", "):"";return(0,q.jsx)(L.A,{onClick:()=>{var i,n;(null===V||void 0===V||null===(i=V.Current_activity)||void 0===i?void 0:i.name_english)!==(null===e||void 0===e||null===(n=e.activities)||void 0===n?void 0:n.name_english)&&(p(e),_.onTrue())},variant:"contained",sx:{bgcolor:(null===V||void 0===V||null===(n=V.Current_activity)||void 0===n?void 0:n.name_english)===(null===e||void 0===e||null===(l=e.activities)||void 0===l?void 0:l.name_english)?"":"success.main",m:2},disabled:(null===V||void 0===V||null===(o=V.Current_activity)||void 0===o?void 0:o.name_english)===(null===e||void 0===e||null===(t=e.activities)||void 0===t?void 0:t.name_english),children:(null===V||void 0===V||null===(d=V.Current_activity)||void 0===d?void 0:d.name_english)===(null===e||void 0===e||null===(a=e.activities)||void 0===a?void 0:a.name_english)?`${null===e||void 0===e?void 0:e.name_english} (Current) ${r}`:`Go to ${null===e||void 0===e?void 0:e.name_english} ${r}`},i)}))]}),(0,q.jsx)(r.A,{onClick:()=>(async()=>{try{var e,i,n,l,o,t,d,a,r,c,v;await T.Ay.patch(`/api/entrance/${null===V||void 0===V?void 0:V._id}`,{Patient_attended:!0,note:s}),await T.Ay.patch(`/api/appointments/${null===V||void 0===V?void 0:V.appointmentId}`,{finished_or_not:!0}),await T.Ay.post("/api/feedback",{unit_service:null===R||void 0===R||null===(e=R.employee)||void 0===e||null===(i=e.employee_engagements)||void 0===i||null===(n=i[R.employee.selected_engagement])||void 0===n||null===(l=n.unit_service)||void 0===l?void 0:l._id,appointment:null===V||void 0===V?void 0:V.appointmentId,employee:null===R||void 0===R||null===(o=R.employee)||void 0===o?void 0:o._id,patient:null===V||void 0===V||null===(t=V.patient)||void 0===t?void 0:t._id,unit_service_patient:null===V||void 0===V?void 0:V.unit_service_patient}),await T.Ay.post("/api/medrecord/",{appointmentId:null===V||void 0===V?void 0:V.appointmentId,Appointment_date:null===V||void 0===V?void 0:V.Appointment_date,unit_service:null===R||void 0===R||null===(d=R.employee)||void 0===d||null===(a=d.employee_engagements)||void 0===a||null===(r=a[R.employee.selected_engagement])||void 0===r||null===(c=r.unit_service)||void 0===c?void 0:c._id,service_unit:null===V||void 0===V?void 0:V.service_unit,patient:null===V||void 0===V||null===(v=V.patient)||void 0===v?void 0:v._id,unit_service_patient:null===V||void 0===V?void 0:V.unit_service_patient,medical_report:X,doctor_report:H,Drugs_report:Q}),(0,S.M8)("appointment finished",{variant:"success"}),z(),P.push(g.f.employee.appointmentsToday)}catch(u){console.error(u.message),(0,S.M8)("something went wrong",{variant:"error"})}})(),variant:"contained",sx:{bgcolor:"error.main",ml:2},children:h("end appointment")})]})})]})]})]})}var z=n(77224),R=n(74600),P=n(29013),G=n(40360),J=n(80899),U=n(18403),B=n(84284),K=n(20986),X=n(59699),H=n(87410);function Q(e){var i,n;let{patient:l,unit_service_patient:o,service_unit:t}=e;const{t:d}=(0,f.WD)(),{currentLang:a}=(0,f.jc)(),{id:s}=(0,y.g)(),c="ar"===a.value,v=(0,O.C)(),{data:m,refetch:p}=(0,K.m)(s),{user:_}=(0,A.Z)(),[x,h]=(0,F.useState)(null),j=(0,y.rd)(),b=J.Ik().shape({employee:J.Yj(),patient:J.Yj(),description:J.Yj(),unit_services:J.Yj(),Medical_sick_leave_start:J.gl(),entrance_mangament:J.Yj(),Medical_sick_leave_end:J.gl()}),w={employee:null===_||void 0===_||null===(i=_.employee)||void 0===i?void 0:i._id,patient:null===l||void 0===l?void 0:l._id,unit_services:t,entrance_mangament:s},Y=(0,k.mN)({mode:"all",resolver:(0,U.t)(b),defaultValues:w}),I=()=>{h(null)},{reset:L,handleSubmit:W,control:Z,formState:{isSubmitting:N}}=Y;(0,F.useEffect)((()=>{var e;L({employee:null===_||void 0===_||null===(e=_.employee)||void 0===e?void 0:e._id,patient:null===l||void 0===l?void 0:l._id,unit_service_patient:o,unit_services:t,entrance_mangament:s})}),[null===_||void 0===_||null===(n=_.employee)||void 0===n?void 0:n._id,L,null===l||void 0===l?void 0:l._id,t,s,o]);return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(r.A,{variant:"outlined",color:"success",onClick:v.onTrue,sx:{mt:1},children:[d("Add sick leave"),(0,q.jsx)(C.A,{icon:"mingcute:add-line"})]}),null===m||void 0===m?void 0:m.map(((e,i)=>{var n,l;return(0,q.jsxs)(u.A,{variant:"h6",sx:{bgcolor:"#fff",m:2,border:2,borderRadius:2,borderColor:"#EDEFF2",p:2},children:[c?`\u0642\u0627\u0645 ${null===e||void 0===e||null===(n=e.employee)||void 0===n?void 0:n.name_arabic} \u0628\u0627\u0636\u0627\u0641\u0629 \u0627\u062c\u0627\u0632\u0629 \u0645\u0631\u0636\u064a\u0629`:`${null===e||void 0===e||null===(l=e.employee)||void 0===l?void 0:l.name_english} has add ${null===e||void 0===e?void 0:e.description} medical report`,(0,q.jsx)("br",{}),(0,q.jsxs)(r.A,{onClick:()=>(async e=>{await T.Ay.delete(T.vZ.sickleave.onee(e),{Activation:!1}),(0,S.M8)("Feild removed successfully",{variant:"success"}),p(),L()})(null===e||void 0===e?void 0:e._id),children:[d("Remove")," \xa0 ",(0,q.jsx)(C.A,{icon:"flat-color-icons:delete-database"})]}),(0,q.jsxs)(r.A,{onMouseOver:()=>{return i=null===e||void 0===e?void 0:e._id,void h(i);var i},onMouseOut:I,onClick:()=>{return i=null===e||void 0===e?void 0:e._id,void j.push(g.f.employee.sickleave(i));var i},sx:{m:1},children:[d("View")," \xa0"," ",(0,q.jsx)(C.A,{icon:x===(null===e||void 0===e?void 0:e._id)?"emojione:eye":"tabler:eye-closed"})]})]},i)})),(0,q.jsx)(D.A,{open:v.value,onClose:v.onFalse,children:(0,q.jsxs)(H.A,{methods:Y,onSubmit:W((async e=>{try{await T.Ay.post("/api/sickleave",e),(0,S.M8)("sick leave created successfully",{variant:"success"}),v.onFalse(),p(),L()}catch(i){console.error(i.message)}})),children:[(0,q.jsx)(M.A,{sx:{color:"success.main",position:"relative",top:"10px"},children:c?"\u0627\u0636\u0627\u0641\u0629 \u0627\u062c\u0627\u0632\u0629 \u0645\u0631\u0636\u064a\u0629":"add sick leave"}),(0,q.jsxs)(E.A,{children:[(0,q.jsx)(k.xI,{name:"Medical_sick_leave_start",control:Z,render:e=>{let{field:i,fieldState:{error:n}}=e;return(0,q.jsx)(B.l,{...i,label:d("Medical sick leave start*"),sx:{mb:2},slotProps:{textField:{fullWidth:!0,error:!!n,helperText:null===n||void 0===n?void 0:n.message}}})}}),(0,q.jsx)(k.xI,{name:"Medical_sick_leave_end",control:Z,render:e=>{let{field:i,fieldState:{error:n}}=e;return(0,q.jsx)(B.l,{...i,label:d("Medical sick leave end*"),sx:{mb:2},slotProps:{textField:{fullWidth:!0,error:!!n,helperText:null===n||void 0===n?void 0:n.message}}})}}),(0,q.jsx)(X.o3,{name:"description",multiline:!0,label:d("description")})]}),(0,q.jsxs)($.A,{children:[(0,q.jsx)(r.A,{variant:"outlined",color:"inherit",onClick:v.onFalse,children:d("Cancel")}),(0,q.jsx)(r.A,{type:"submit",variant:"contained",loading:N,children:d("Upload")})]})]})})]})}var ee=n(81260);function ie(){var e,i,n,l,o,t,d,a;const{t:s}=(0,f.WD)(),{currentLang:c}=(0,f.jc)(),v="ar"===c.value,{id:m}=(0,y.g)(),{Entrance:p}=(0,w.Jid)(m,{populate:"all"}),{medRecord:_}=(0,w.DcF)(null===p||void 0===p||null===(e=p.service_unit)||void 0===e?void 0:e._id,null===p||void 0===p||null===(i=p.patient)||void 0===i?void 0:i._id,null===p||void 0===p?void 0:p.unit_service_patient),[x,h]=(0,F.useState)(null),j=(0,y.rd)(),{doctorreportsdata:b,refetch:Y}=(0,w.Ado)(m),I=_&&_.length>0?_[0].sequence_number:null,L=(0,O.C)(),{user:W}=(0,A.Z)(),Z=J.Ik().shape({employee:J.Yj(),patient:J.Yj(),file:J.YO(),entrance_mangament:J.Yj(),description:J.Yj(),department:J.Yj(),Drugs_report:J.Yj(),medical_report:J.Yj()}),N={employee:null===W||void 0===W||null===(n=W.employee)||void 0===n?void 0:n._id,patient:null===p||void 0===p||null===(l=p.patient)||void 0===l?void 0:l._id,unit_service_patient:null===p||void 0===p?void 0:p.unit_service_patient,entrance_mangament:null===p||void 0===p?void 0:p._id,service_unit:null===p||void 0===p?void 0:p.service_unit,unit_service:null===W||void 0===W||null===(o=W.employee)||void 0===o||null===(t=o.employee_engagements)||void 0===t||null===(d=t[W.employee.selected_engagement])||void 0===d||null===(a=d.unit_service)||void 0===a?void 0:a._id,file:[]},V=(0,k.mN)({mode:"all",resolver:(0,U.t)(Z),defaultValues:N}),{reset:z,handleSubmit:R,watch:P,setValue:G,formState:{isSubmitting:B}}=V,K=P();(0,F.useEffect)((()=>{var e,i,n,l,o,t;z({employee:null===W||void 0===W||null===(e=W.employee)||void 0===e?void 0:e._id,patient:null===p||void 0===p||null===(i=p.patient)||void 0===i?void 0:i._id,unit_service_patient:null===p||void 0===p?void 0:p.unit_service_patient,unit_service:null===W||void 0===W||null===(n=W.employee)||void 0===n||null===(l=n.employee_engagements)||void 0===l||null===(o=l[W.employee.selected_engagement])||void 0===o||null===(t=o.unit_service)||void 0===t?void 0:t._id,service_unit:null===p||void 0===p?void 0:p.service_unit,entrance_mangament:null===p||void 0===p?void 0:p._id,file:[]})}),[W,p,z]);const Q=(0,F.useCallback)((e=>{const i=K.file.filter((i=>i!==e));G("file",i)}),[G,K.file]),ee=(0,F.useCallback)((()=>{G("file",[])}),[G]),ie=()=>{h(null)};return(0,q.jsxs)(q.Fragment,{children:[I?(0,q.jsx)("sapn",{style:{color:"#00B8D9"},children:I}):"",(0,q.jsx)("br",{}),(0,q.jsxs)(r.A,{variant:"outlined",color:"success",onClick:L.onTrue,sx:{m:2},children:[s("Add to patient file"),(0,q.jsx)(C.A,{icon:"mingcute:add-line"})]}),null===b||void 0===b?void 0:b.map(((e,i)=>{var n,l;return(0,q.jsxs)(u.A,{variant:"h6",sx:{bgcolor:"#fff",m:2,border:2,borderRadius:2,borderColor:"#EDEFF2",p:2},children:[v?`\u0642\u0627\u0645 ${null===e||void 0===e||null===(n=e.employee)||void 0===n?void 0:n.name_arabic} \u0628\u0627\u0636\u0627\u0641\u0627\u062a \u062a\u0642\u0631\u064a\u0631 \u062c\u062f\u064a\u062f \u0627\u0644\u0649 \u0645\u0644\u0641 \u0627\u0644\u0645\u0631\u064a\u0636`:`${null===e||void 0===e||null===(l=e.employee)||void 0===l?void 0:l.name_english} has add ${null===e||void 0===e?void 0:e.description} medical report`,(0,q.jsx)("br",{}),(0,q.jsxs)(r.A,{onClick:()=>(async e=>{await T.Ay.patch(T.vZ.doctorreport.one(e),{Activation:!1}),(0,S.M8)("Feild removed successfully",{variant:"success"}),Y(),z()})(null===e||void 0===e?void 0:e._id),children:[s("Remove")," \xa0 ",(0,q.jsx)(C.A,{icon:"flat-color-icons:delete-database"})]}),(0,q.jsxs)(r.A,{onMouseOver:()=>{return i=null===e||void 0===e?void 0:e._id,void h(i);var i},onMouseOut:ie,onClick:()=>{return i=null===e||void 0===e?void 0:e._id,void j.push(g.f.employee.Doctorreport(i));var i},sx:{m:1},children:[s("View")," \xa0"," ",(0,q.jsx)(C.A,{icon:x===(null===e||void 0===e?void 0:e._id)?"emojione:eye":"tabler:eye-closed"})]})]},i)})),(0,q.jsx)(D.A,{open:L.value,onClose:L.onFalse,children:(0,q.jsxs)(H.A,{methods:V,onSubmit:R((async e=>{try{const i=new FormData;Object.keys(e).forEach((n=>{Array.isArray(e[n])?e[n].forEach(((e,l)=>{i.append(`${n}[${l}]`,e)})):i.append(n,e[n])})),await T.Ay.post("/api/doctorreport",i),(0,S.M8)("Medical report uploaded successfully",{variant:"success"}),Y(),L.onFalse(),z()}catch(i){console.error(i.message),(0,S.M8)("Error uploading data",{variant:"error"})}})),children:[(0,q.jsx)(M.A,{sx:{color:"success.main",position:"relative",top:"10px"},children:v?"\u0627\u0636\u0641 \u0627\u0644\u0649 \u0645\u0644\u0641 \u0627\u0644\u0645\u0631\u064a\u0636":"add to patient file"}),(0,q.jsxs)(E.A,{children:[(0,q.jsx)(X.o3,{lang:"en",multiline:!0,name:"description",label:s("description"),rows:10,sx:{mb:2,mt:2}}),(0,q.jsx)(X.Y4,{multiple:!0,autoFocus:!0,fullWidth:!0,name:"file",margin:"dense",sx:{mb:2},variant:"outlined",onDrop:e=>{const i=(()=>{const e=[".jpeg",".png",".jpg",".gif"];return{validateFile:i=>{const n=i.slice(i.lastIndexOf(".")).toLowerCase();return e.includes(n)},validateSize:e=>e<=3145728}})(e.reduce(((e,i)=>e+i.size),0));if(e.every((e=>i.validateFile(e.name)&&i.validateSize(e.size)))){const i=e;G("file",[...K.file,...i])}else(0,S.M8)(s("Invalid file type or size"),{variant:"error"})},onRemove:Q,onRemoveAll:ee})]}),(0,q.jsxs)($.A,{children:[(0,q.jsx)(r.A,{variant:"outlined",color:"inherit",onClick:L.onFalse,children:s("Cancel")}),(0,q.jsx)(r.A,{type:"submit",loading:B,variant:"contained",children:s("Upload")})]})]})})]})}function ne(){var e,i,n,l;const{t:o}=(0,f.WD)(),{currentLang:t}=(0,f.jc)(),d="ar"===t.value,{id:a}=(0,y.g)(),{Entrance:s}=(0,w.Jid)(a,{populate:"all"}),[c,v]=(0,F.useState)(null),m=(0,y.rd)(),{medicalreportsdata:p,refetch:_}=(0,w.Igg)(a),x=(0,O.C)(),{user:h}=(0,A.Z)(),j=J.Ik().shape({employee:J.Yj(),patient:J.Yj(),unit_service:J.Yj(),file:J.YO(),entrance_mangament:J.Yj(),description:J.Yj(),department:J.Yj(),Drugs_report:J.Yj(),medical_report:J.Yj()}),b={employee:null===h||void 0===h||null===(e=h.employee)||void 0===e?void 0:e._id,patient:null===s||void 0===s||null===(i=s.patient)||void 0===i?void 0:i._id,unit_service_patient:null===s||void 0===s?void 0:s.unit_service_patient,entrance_mangament:null===s||void 0===s?void 0:s._id,service_unit:null===s||void 0===s||null===(n=s.service_unit)||void 0===n?void 0:n._id,unit_service:null===s||void 0===s||null===(l=s.service_unit)||void 0===l?void 0:l._id,file:[]},Y=(0,k.mN)({mode:"all",resolver:(0,U.t)(j),defaultValues:b}),{reset:I,handleSubmit:L,watch:W,setValue:Z,formState:{isSubmitting:N}}=Y,V=W();(0,F.useEffect)((()=>{var e,i,n;I({employee:null===h||void 0===h||null===(e=h.employee)||void 0===e?void 0:e._id,patient:null===s||void 0===s||null===(i=s.patient)||void 0===i?void 0:i._id,unit_service_patient:null===s||void 0===s?void 0:s.unit_service_patient,service_unit:null===s||void 0===s?void 0:s.service_unit,entrance_mangament:null===s||void 0===s?void 0:s._id,unit_service:null===s||void 0===s||null===(n=s.service_unit)||void 0===n?void 0:n._id,file:[]})}),[h,s,I]);const z=(0,F.useCallback)((e=>{const i=V.file.filter((i=>i!==e));Z("file",i)}),[Z,V.file]),R=(0,F.useCallback)((()=>{Z("file",[])}),[Z]),P=()=>{v(null)};return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(r.A,{variant:"outlined",color:"success",onClick:x.onTrue,sx:{m:2},children:[o("Add medical report"),(0,q.jsx)(C.A,{icon:"mingcute:add-line"})]}),null===p||void 0===p?void 0:p.map(((e,i)=>{var n,l;return(0,q.jsxs)(u.A,{variant:"h6",sx:{bgcolor:"#fff",m:2,border:2,borderRadius:2,borderColor:"#EDEFF2",p:2},children:[d?`\u0642\u0627\u0645 ${null===e||void 0===e||null===(n=e.employee)||void 0===n?void 0:n.name_arabic} \u0628\u0627\u0636\u0627\u0641\u0629 \u062a\u0642\u0631\u064a\u0631 \u0637\u0628\u064a \u062c\u062f\u064a\u062f`:`${null===e||void 0===e||null===(l=e.employee)||void 0===l?void 0:l.name_english} has add ${null===e||void 0===e?void 0:e.description} medical report`,(0,q.jsx)("br",{}),(0,q.jsxs)(r.A,{onClick:()=>(async e=>{await T.Ay.delete(T.vZ.medicalreports.one(e)),(0,S.M8)("Feild removed successfully",{variant:"success"}),_(),I()})(null===e||void 0===e?void 0:e._id),children:[o("Remove")," \xa0 ",(0,q.jsx)(C.A,{icon:"flat-color-icons:delete-database"})]}),(0,q.jsxs)(r.A,{onMouseOver:()=>{return i=null===e||void 0===e?void 0:e._id,void v(i);var i},onMouseOut:P,onClick:()=>{return i=null===e||void 0===e?void 0:e._id,void m.push(g.f.employee.Mediaclreport(i));var i},sx:{m:1},children:[o("View")," \xa0"," ",(0,q.jsx)(C.A,{icon:c===(null===e||void 0===e?void 0:e._id)?"emojione:eye":"tabler:eye-closed"})]})]},i)})),(0,q.jsx)(D.A,{open:x.value,onClose:x.onFalse,children:(0,q.jsxs)(H.A,{methods:Y,onSubmit:L((async e=>{try{var i,n,l,o;const t=new FormData;Object.keys(e).forEach((i=>{Array.isArray(e[i])?e[i].forEach(((e,n)=>{t.append(`${i}[${n}]`,e)})):t.append(i,e[i])})),await T.Ay.post(T.vZ.history.all,{patient:null===s||void 0===s||null===(i=s.patient)||void 0===i?void 0:i._id,unit_service_patient:null===s||void 0===s?void 0:s.unit_service_patient,name_english:"A medical report has been added",name_arabic:"\u062a\u0645 \u0627\u0631\u0641\u0627\u0642 \u062a\u0642\u0631\u064a\u0631 \u0637\u0628\u064a",sub_english:`Medical report from ${null===s||void 0===s||null===(n=s.service_unit)||void 0===n?void 0:n.name_english}`,sub_arabic:`\u062a\u0642\u0631\u064a\u0631 \u0637\u0628\u064a \u0645\u0646 ${null===s||void 0===s||null===(l=s.service_unit)||void 0===l?void 0:l.name_arabic}`,actual_date:null===s||void 0===s?void 0:s.created_at,title:"medical report",service_unit:null===s||void 0===s||null===(o=s.service_unit)||void 0===o?void 0:o._id}),await T.Ay.post("/api/examination",t),await T.Ay.patch(`/api/entrance/${a}`,{medical_report_status:!0}),(0,S.M8)("Medical report uploaded successfully",{variant:"success"}),_(),x.onFalse(),I()}catch(t){console.error(t.message),(0,S.M8)("Error uploading data",{variant:"error"})}})),children:[(0,q.jsx)(M.A,{sx:{color:"success.main",position:"relative",top:"10px"},children:d?"\u0627\u0636\u0627\u0641\u0629 \u062a\u0642\u0631\u064a\u0631 \u0637\u0628\u064a  ":"add medical report"}),(0,q.jsxs)(E.A,{children:[(0,q.jsx)(X.o3,{lang:"en",multiline:!0,name:"description",label:o("description"),rows:10,sx:{mb:2,mt:2}}),(0,q.jsx)(X.Y4,{multiple:!0,autoFocus:!0,fullWidth:!0,name:"file",margin:"dense",sx:{mb:2},variant:"outlined",onDrop:e=>{const i=(()=>{const e=[".jpeg",".png",".jpg",".gif"];return{validateFile:i=>{const n=i.slice(i.lastIndexOf(".")).toLowerCase();return e.includes(n)},validateSize:e=>e<=3145728}})(e.reduce(((e,i)=>e+i.size),0));if(e.every((e=>i.validateFile(e.name)&&i.validateSize(e.size)))){const i=e.filter((e=>!V.file.some((i=>i.name===e.name))));Z("file",[...V.file,...i])}else(0,S.M8)(o("Invalid file type or size"),{variant:"error"})},onRemove:z,onRemoveAll:R})]}),(0,q.jsxs)($.A,{children:[(0,q.jsx)(r.A,{variant:"outlined",color:"inherit",onClick:x.onFalse,children:o("Cancel")}),(0,q.jsx)(r.A,{type:"submit",loading:N,variant:"contained",children:o("Upload")})]})]})})]})}function le(e){let{patient:i,unit_service_patient:n,service_unit:o}=e;const[t,r]=(0,F.useState)("one"),s=(0,l.g)(),{id:c}=s,{t:v}=(0,f.WD)(),{Entrance:u}=(0,w.Jid)(c,{populate:"all"}),m=[{value:"one",title:"Patient file",label:(0,q.jsx)(ie,{})},{value:"two",title:"prescription",label:(0,q.jsx)(ee.default,{Entrance:u})},{value:"three",title:"medical report",label:(0,q.jsx)(ne,{})},{value:"four",title:"sick leave",label:(0,q.jsx)(Q,{patient:i,service_unit:o,unit_service_patient:n})}],p=(0,F.useCallback)(((e,i)=>{r(i)}),[]);return(0,q.jsx)(d.A,{sx:{mt:3},children:(0,q.jsx)(z.A,{sx:{my:2},children:(0,q.jsxs)(R.A,{spacing:2,sx:{width:"100%"},children:[(0,q.jsx)(P.A,{value:t,onChange:p,children:m.map((e=>(0,q.jsx)(G.A,{value:e.value,label:v(e.title)},e.value)))}),m.map((e=>e.value===t&&(0,q.jsx)(a.A,{sx:{p:2,borderRadius:1,bgcolor:"background.neutral"},children:e.label},e.value)))]})})})}var oe=n(69413),te=n(99784),de=n(1273),ae=n(78492),re=n(14256);function se(){var e,i,n,o,t,s;const c=(0,l.g)(),{id:v}=c,{t:m}=(0,f.WD)(),[p,_]=(0,F.useState)(null),{user:x}=(0,A.Z)(),{Entrance:h}=(0,w.Jid)(v,{populate:"all"}),{CheckListData:j}=(0,w.dFm)(null===x||void 0===x||null===(e=x.employee)||void 0===e||null===(i=e.employee_engagements)||void 0===i||null===(n=i[null===x||void 0===x?void 0:x.employee.selected_engagement])||void 0===n?void 0:n._id),{data:g}=(0,w.Oe9)(p),{answer:y,refetch:b}=(0,w.fEu)(v),C=J.Ik().shape({question:J.Yj(),employee:J.Yj(),entrance:J.Yj(),patient:J.Yj(),answer:J.gl()}),D={patient:null===h||void 0===h||null===(o=h.patient)||void 0===o?void 0:o._id,unit_service_patient:null===h||void 0===h?void 0:h.unit_service_patient,employee:null===x||void 0===x||null===(t=x.employee)||void 0===t?void 0:t._id,entrance:v},M=(0,k.mN)({mode:"all",resolver:(0,U.t)(C),defaultValues:D}),{reset:E,handleSubmit:$,control:I,formState:{isSubmitting:L}}=M;return(0,F.useEffect)((()=>{var e,i;E({patient:null===h||void 0===h||null===(e=h.patient)||void 0===e?void 0:e._id,unit_service_patient:null===h||void 0===h?void 0:h.unit_service_patient,employee:null===x||void 0===x||null===(i=x.employee)||void 0===i?void 0:i._id,entrance:null===h||void 0===h?void 0:h._id})}),[x,h,E]),(0,q.jsx)(d.A,{sx:{mt:3},children:(0,q.jsxs)(a.A,{sx:{display:"flex"},children:[(0,q.jsx)(a.A,{sx:{width:"70%",p:2},children:(0,q.jsxs)(a.A,{sx:{height:"400px",overflowY:"auto"},children:[(0,q.jsx)(a.A,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:null===j||void 0===j?void 0:j.map(((e,i)=>(0,q.jsxs)(r.A,{sx:{mt:2,ml:2,bgcolor:"#EDEFF2"},onClick:()=>_(null===e||void 0===e?void 0:e._id),children:[null===e||void 0===e?void 0:e.title," "]},i)))}),(0,q.jsxs)(H.A,{methods:M,onSubmit:$((async e=>{try{await T.Ay.post("/api/answersandquestiones",e),(0,S.M8)("New question created successfully",{variant:"success"}),E(),b()}catch(i){console.error(i.message)}})),children:[(0,q.jsxs)(a.A,{sx:{m:3},children:[(0,q.jsxs)(a.A,{sx:{display:"flex",flexWrap:"wrap",borderBottom:.5,mt:2,mb:2},children:[(0,q.jsx)(u.A,{children:null===g||void 0===g?void 0:g.title}),g&&(0,q.jsx)(u.A,{sx:{p:1,bgcolor:"#EDEFF2",width:"100%",mt:2},children:null===g||void 0===g?void 0:g.description})]}),null===g||void 0===g||null===(s=g.questions)||void 0===s?void 0:s.map(((e,i)=>(0,q.jsxs)(a.A,{sx:{display:"block"},children:["Text"===(null===e||void 0===e?void 0:e.answer_way)&&(0,q.jsx)(k.xI,{name:`answer_${null===e||void 0===e?void 0:e._id}`,control:I,render:i=>{let{field:n}=i;return(0,q.jsx)(Y.A,{...n,sx:{m:2,width:"80%"},fullWidth:!0,label:null===e||void 0===e?void 0:e.question})}}),"Options"===(null===e||void 0===e?void 0:e.answer_way)&&(0,q.jsxs)(a.A,{sx:{m:2},children:[(0,q.jsx)(u.A,{children:null===e||void 0===e?void 0:e.question}),(0,q.jsx)(k.xI,{name:`answer_${null===e||void 0===e?void 0:e._id}`,control:I,render:i=>{var n;let{field:l}=i;return(0,q.jsx)(oe.A,{children:null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.map(((e,i)=>{var n;return(0,q.jsx)(te.A,{control:(0,q.jsx)(de.A,{checked:(null===(n=l.value)||void 0===n?void 0:n.includes(e))||!1,onChange:i=>{const n=l.value||[];i.target.checked?l.onChange([...n,e]):l.onChange(n.filter((i=>i!==e)))}}),label:e},i)}))})}})]}),"Yes No"===(null===e||void 0===e?void 0:e.answer_way)&&(0,q.jsxs)(a.A,{sx:{m:2,border:1,p:2},children:[(0,q.jsx)(u.A,{sx:{m:2},children:null===e||void 0===e?void 0:e.question}),(0,q.jsx)(k.xI,{name:`answer_${null===e||void 0===e?void 0:e._id}`,control:I,render:e=>{let{field:i}=e;return(0,q.jsxs)(ae.A,{...i,children:[(0,q.jsx)(te.A,{value:"Yes",control:(0,q.jsx)(re.A,{}),label:"Yes"}),(0,q.jsx)(te.A,{value:"No",control:(0,q.jsx)(re.A,{}),label:"No"})]})}})]})]},i)))]}),g&&(0,q.jsx)(r.A,{type:"submit",disabled:L,variant:"contained",sx:{m:3},children:m("save")})]})]})}),(0,q.jsxs)(a.A,{sx:{width:"30%",p:2,borderLeft:1,borderColor:"divider"},children:[(0,q.jsx)(u.A,{sx:{textAlign:"center",mb:2},variant:"h4",children:m("Answers")}),null===y||void 0===y?void 0:y.map(((e,i)=>{var n;return(0,q.jsxs)(u.A,{children:[null===e||void 0===e||null===(n=e.question)||void 0===n?void 0:n.question,":"," ",(0,q.jsx)("span",{style:{fontSize:13},children:null===e||void 0===e?void 0:e.answer})]},i)}))]})]})})}function ce(){var e,i,n,o,t;const s=(0,l.g)(),{id:c}=s,{t:v}=(0,f.WD)(),{user:m}=(0,A.Z)(),[p,_]=(0,F.useState)([]),{serviceTypesData:x}=(0,w.qQl)(null===m||void 0===m||null===(e=m.employee)||void 0===e||null===(i=e.employee_engagements)||void 0===i||null===(n=i[null===m||void 0===m||null===(t=m.employee)||void 0===t?void 0:t.selected_engagement])||void 0===n||null===(o=n.unit_service)||void 0===o?void 0:o._id);return(0,q.jsxs)(d.A,{sx:{mt:2},children:[(0,q.jsxs)(a.A,{children:[(0,q.jsx)(u.A,{sx:{m:2},children:v("Select the services you provided to the patient for billing purposes.")}),null===x||void 0===x?void 0:x.map((e=>(0,q.jsxs)(a.A,{sx:{m:2},children:[null===e||void 0===e?void 0:e.name_english,(0,q.jsx)(de.A,{size:"small",name:"Provided_service",color:"success",sx:{position:"relative"},onChange:i=>((e,i)=>{_((n=>i?[...n,null===e||void 0===e?void 0:e._id]:n.filter((i=>i!==e._id))))})(e,i.target.checked)})]},e._id)))]}),(0,q.jsx)(r.A,{type:"submit",variant:"contained",onClick:async()=>{try{await T.Ay.patch(`/api/entrance/${c}`,{Service_types:p}),(0,S.M8)(v("Services provided added successfully"),{variant:"success"})}catch(e){console.error(e.message)}},sx:{m:2},children:v("Upload")})]})}function ve(e){var i,n,l;let{patient:o,unit_service_patient:t}=e;const{t:s}=(0,f.WD)(),c=(0,O.C)(),{user:v}=(0,A.Z)(),{adjustabledocument:m}=(0,b.o)(null===v||void 0===v||null===(i=v.employee)||void 0===i?void 0:i._id),[p,_]=(0,F.useState)(null),x=null===v||void 0===v||null===(n=v.employee)||void 0===n||null===(l=n.employee_engagements)||void 0===l?void 0:l[v.employee.selected_engagement];return(0,q.jsxs)(d.A,{sx:{mt:2},children:[(0,q.jsxs)(a.A,{children:[(0,q.jsx)(u.A,{sx:{m:2},children:s("Choose an Adjustable document And send it to the patients")}),null===m||void 0===m?void 0:m.map(((e,i)=>(0,q.jsxs)(r.A,{onClick:()=>{return i=null===e||void 0===e?void 0:e._id,void _((e=>e===i?null:i));var i},sx:{m:1,backgroundColor:p===(null===e||void 0===e?void 0:e._id)?"info.main":"initial",color:p===(null===e||void 0===e?void 0:e._id)?"white":"initial"},children:["- ",null===e||void 0===e?void 0:e.title]},i)))]}),(0,q.jsx)(r.A,{type:"submit",variant:"contained",onClick:async()=>{try{var e;await T.Ay.post("/api/instructions",{patient:null===o||void 0===o?void 0:o._id,unit_service_patient:t,adjustable_documents:p,unit_service:null===x||void 0===x||null===(e=x.unit_service)||void 0===e?void 0:e._id}),(0,S.M8)("adjustable document sent successfully",{variant:"success"}),c.onFalse()}catch(i){console.error(i.message)}},disabled:!p,sx:{m:2},children:s("Upload")})]})}function ue(){var e,i,n,k,F,S,D,M,E,$,Y,I,L,O,T;const W=(0,l.g)(),{user:Z}=(0,A.Z)(),{id:N}=W,{Entrance:z}=(0,w.Jid)(N,{populate:"all"}),{medRecord:R}=(0,w.DcF)(null===z||void 0===z||null===(e=z.service_unit)||void 0===e?void 0:e._id,null===z||void 0===z||null===(i=z.patient)||void 0===i?void 0:i._id,null===z||void 0===z?void 0:z.unit_service_patient),{data:P}=(0,w.J02)(null===z||void 0===z||null===(n=z.patient)||void 0===n?void 0:n._id),{CheckListData:G}=(0,w.dFm)(null===Z||void 0===Z||null===(k=Z.employee)||void 0===k||null===(F=k.employee_engagements)||void 0===F||null===(S=F[Z.employee.selected_engagement])||void 0===S?void 0:S._id),{adjustabledocument:J}=(0,b.o)(null===Z||void 0===Z||null===(D=Z.employee)||void 0===D?void 0:D._id),{serviceTypesData:U}=(0,w.qQl)(null===Z||void 0===Z||null===(M=Z.employee)||void 0===M||null===(E=M.employee_engagements)||void 0===E||null===($=E[null===Z||void 0===Z||null===(I=Z.employee)||void 0===I?void 0:I.selected_engagement])||void 0===$||null===(Y=$.unit_service)||void 0===Y?void 0:Y._id),{t:B}=(0,f.WD)(),{currentLang:K}=(0,f.jc)(),X="ar"===K.value,H=(0,o.u)(),Q=(0,t.A)(H.breakpoints.down("sm")),ee=(0,y.rd)(),ie=R&&(null===R||void 0===R?void 0:R.length)>0?R[0].sequence_number:null,ne=[(null===R||void 0===R?void 0:R.length)>0&&{key:0,title:(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)("span",{style:{backgroundColor:"#22C55E",color:"white",padding:6,borderRadius:10},children:[B("Visits history")," ",ie]}),(0,q.jsx)(d.A,{sx:{mt:2},children:(0,q.jsx)(a.A,{sx:{maxHeight:400,overflowY:"auto",overflowX:"hidden"},children:R&&(0,q.jsxs)(a.A,{children:[(0,q.jsx)(r.A,{onClick:()=>{return e=N,void ee.push(g.f.employee.recored(e));var e},sx:{width:"100%",m:1},children:X?`\u0627\u0636\u063a\u0637 \u0644\u0639\u0631\u0636 \u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0632\u064a\u0627\u0631\u0629 \u0644 ${null===z||void 0===z||null===(L=z.patient)||void 0===L?void 0:L.name_arabic}`:(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("span",{style:{color:"#22C55E"},children:"Click\xa0"})," to view all"," ",null===z||void 0===z||null===(O=z.patient)||void 0===O?void 0:O.name_english," Visits history"]})}),(0,q.jsx)(s.A,{})]})})})]}),icon:(0,q.jsx)(C.A,{icon:"healthicons:medical-records-outline",width:25})},(null===G||void 0===G?void 0:G.length)>0&&{key:1,title:(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("span",{style:{backgroundColor:"#22C55E",color:"white",padding:6,borderRadius:10},children:B("Choose a Check List")}),(0,q.jsx)(se,{})]}),icon:(0,q.jsx)(C.A,{icon:"octicon:checklist-16",width:23})},{key:7,title:(0,q.jsxs)(q.Fragment,{children:[B("Upload files"),(0,q.jsx)("br",{}),(0,q.jsx)(le,{patient:P,unit_service_patient:null===z||void 0===z?void 0:z.unit_service_patient,service_unit:null===z||void 0===z||null===(T=z.service_unit)||void 0===T?void 0:T._id})]}),icon:(0,q.jsx)(C.A,{icon:"mingcute:folders-fill",width:25})},(null===J||void 0===J?void 0:J.length)>0&&{key:5,title:(0,q.jsxs)(q.Fragment,{children:[B("Adjustable document")," (",B("optional"),") ",(0,q.jsx)("br",{}),(0,q.jsx)(ve,{patient:P,unit_service_patient:null===z||void 0===z?void 0:z.unit_service_patient})]}),icon:(0,q.jsx)(C.A,{icon:"mingcute:document-fill",width:24})},U>0&&{key:6,title:(0,q.jsxs)(q.Fragment,{children:[B("Services provided"),(0,q.jsx)("br",{}),(0,q.jsx)(ce,{patient:P})]}),icon:(0,q.jsx)(C.A,{icon:"hugeicons:give-pill",width:25})}].filter(Boolean).map(((e,i)=>({...e,color:i%2===0?"primary":"info"}))),oe=e=>(0,q.jsx)(c.A,{sx:{p:3,bgcolor:e=>(0,v.X4)(e.palette.grey[500],.12),width:"100%"},children:(0,q.jsx)(u.A,{variant:"subtitle2",children:e.title})}),te=Array(14).fill((0,q.jsx)("br",{}));return Q?(0,q.jsxs)("div",{children:[ne.map((e=>(0,q.jsx)("div",{style:{marginBottom:"16px"},children:oe(e)},e.key)))," ",te.map((e=>(0,q.jsx)(q.Fragment,{children:e}))),(0,q.jsx)(a.A,{sx:{position:"fixed",bottom:0,width:"100%"},children:(0,q.jsx)(V,{})})]}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(m.A,{position:"alternate",children:ne.map((e=>(0,q.jsxs)(p.A,{children:[(0,q.jsxs)(_.A,{children:[(0,q.jsx)(x.A,{color:e.color,children:e.icon}),(0,q.jsx)(h.A,{})]}),(0,q.jsx)(j.A,{children:oe(e)})]},e.key)))}),te.map((e=>(0,q.jsx)(q.Fragment,{children:e}))),(0,q.jsx)(a.A,{sx:{position:"fixed",bottom:0,width:"100%"},children:(0,q.jsx)(V,{})})]})}}}]);
//# sourceMappingURL=96301.6cbdcac3.chunk.js.map
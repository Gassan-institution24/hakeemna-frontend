"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[5220],{38563:(e,n,l)=>{l.d(n,{Z:()=>m});var t=l(16029),i=l(50533),o=l(53767),a=l(4567),s=l(93517),r=l(4419),d=l(80184);function c(e){let{link:n,activeLast:l,disabled:o}=e;const a={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...o&&!l&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},s=(0,d.jsxs)(d.Fragment,{children:[n.icon&&(0,d.jsx)(t.Z,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:n.icon}),n.name]});return n.href?(0,d.jsx)(i.Z,{component:r.r,href:n.href,sx:a,children:s}):(0,d.jsxs)(t.Z,{sx:a,children:[" ",s," "]})}function m(e){let{links:n,action:l,heading:r,moreLink:m,activeLast:p,sx:v,...x}=e;const h=n&&n[n.length-1].name;return(0,d.jsxs)(t.Z,{sx:{...v},children:[(0,d.jsxs)(o.Z,{direction:"row",alignItems:"center",children:[(0,d.jsxs)(t.Z,{sx:{flexGrow:1,display:"flex",gap:3,alignItems:"center"},children:[r&&(0,d.jsx)(a.Z,{variant:"h4",gutterBottom:!0,children:r}),n&&!!n.length&&(0,d.jsx)(s.Z,{separator:(0,d.jsx)(u,{}),...x,children:null===n||void 0===n?void 0:n.map(((e,n)=>(0,d.jsx)(c,{link:e,activeLast:p,disabled:e.name===h},n)))})]}),l&&(0,d.jsxs)(t.Z,{sx:{flexShrink:0},children:[" ",l," "]})]}),!!m&&(0,d.jsx)(t.Z,{sx:{mt:2},children:m.map(((e,n)=>(0,d.jsx)(i.Z,{href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},n)))})]})}function u(){return(0,d.jsx)(t.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}},73379:(e,n,l)=>{l.d(n,{Z:()=>t.Z});var t=l(38563)},93971:(e,n,l)=>{function t(){return{handleAddNew:e=>{const n=(window.screen.availWidth-700)/2,l=(window.screen.availHeight-600)/2,t="width=".concat(700,",height=").concat(600,",left=").concat(n,",top=").concat(l),i=window.open(e,"_blank",t);if(i){const e=sessionStorage;i.sessionStorage.clear(),Object.keys(e).forEach((n=>{i.sessionStorage.setItem(n,e[n])}))}else console.error("Popup blocked. Please allow popups for this site.")}}}l.d(n,{A:()=>t})},45220:(e,n,l)=>{l.d(n,{Z:()=>$});var t=l(8007),i=l(61134),o=l(6165),a=l.n(o),s=l(72791),r=l(44695),d=l(57621),c=l(53767),m=l(10266),u=l(12258),p=l(63515),v=l(4567),x=l(16029),h=l(13239),_=l(38072),g=l(19208),y=l(22459),f=l(66664),j=l(99116),b=l(8976),Z=l(76119),w=l(78644),k=l(68697),S=l(32869),C=l(77008),T=l(73379),I=l(39454),z=l(94721),D=l(82626),F=l(63466),P=l(17003),q=l(93971),M=l(30250),W=l(40268),A=l(80184);function L(e){var n,l,t,o,a;let{appointmentConfigData:s,setAppointTime:r}=e;const{t:d}=(0,w.qM)(),{currentLang:m}=(0,w.nt)(),u="ar"===m.value,p=[{value:"saturday",label:d("Saturday")},{value:"sunday",label:d("Sunday")},{value:"monday",label:d("Monday")},{value:"tuesday",label:d("Tuesday")},{value:"wednesday",label:d("Wednesday")},{value:"thursday",label:d("Thursday")},{value:"friday",label:d("Friday")}],{control:h,watch:g,trigger:y}=(0,i.Gc)(),{handleAddNew:f}=(0,q.A)(),j=g(),{myunitTime:S}=(0,M.lf)(),{user:C}=(0,b.E)(),{workGroupsData:T}=(0,Z.Sue)(null===C||void 0===C||null===(n=C.employee)||void 0===n||null===(l=n.employee_engagements)||void 0===l||null===(t=l[C.employee.selected_engagement])||void 0===t?void 0:t._id),{workShiftsData:L}=(0,Z.mxf)(null===C||void 0===C||null===(o=C.employee)||void 0===o||null===(a=o.employee_engagements[null===C||void 0===C?void 0:C.employee.selected_engagement])||void 0===a?void 0:a.unit_service._id);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(z.Z,{flexItem:!0,sx:{borderStyle:"solid"}}),(0,A.jsxs)(c.Z,{sx:{p:3},children:[(0,A.jsxs)(c.Z,{spacing:2,direction:{xs:"column",sm:"row"},sx:{p:3,width:{xs:"100%",md:"auto"}},children:[(0,A.jsx)(i.Qr,{name:"start_date",control:h,render:e=>{let{field:n,fieldState:{error:l}}=e;return(0,A.jsx)(P.M,{label:"".concat(d("start date")," *"),value:S(j.start_date),onChange:e=>{var l,t,i,o;const a=(0,I.Z)(e,(null===C||void 0===C||null===(l=C.employee)||void 0===l||null===(t=l.employee_engagements[null===C||void 0===C?void 0:C.employee.selected_engagement])||void 0===t||null===(i=t.unit_service)||void 0===i||null===(o=i.country)||void 0===o?void 0:o.time_zone)||Intl.DateTimeFormat().resolvedOptions().timeZone);n.onChange(a)},slotProps:{textField:{fullWidth:!0,error:!!l,helperText:null===l||void 0===l?void 0:l.message}}})}}),(0,A.jsx)(i.Qr,{name:"end_date",control:h,render:e=>{let{field:n,fieldState:{error:l}}=e;return(0,A.jsx)(P.M,{label:d("end date"),value:S(j.end_date),onChange:e=>{var l,t,i,o;const a=(0,I.Z)(e,(null===C||void 0===C||null===(l=C.employee)||void 0===l||null===(t=l.employee_engagements[null===C||void 0===C?void 0:C.employee.selected_engagement])||void 0===t||null===(i=t.unit_service)||void 0===i||null===(o=i.country)||void 0===o?void 0:o.time_zone)||Intl.DateTimeFormat().resolvedOptions().timeZone);n.onChange(a)},slotProps:{textField:{fullWidth:!0,error:!!l,helperText:null===l||void 0===l?void 0:l.message}}})}})]}),(0,A.jsxs)(c.Z,{spacing:2,direction:{xs:"column",sm:"row"},sx:{px:3,pb:3,width:{xs:"100%",md:"auto"}},children:[(0,A.jsxs)(k.Cc,{size:"small",name:"work_shift",label:"".concat(d("work shift")," *"),InputLabelProps:{shrink:!0},PaperPropsSx:{textTransform:"capitalize"},disabled:Boolean(s),children:[L.map(((e,n)=>(0,A.jsx)(D.Z,{value:e._id,children:u?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n))),(0,A.jsx)(z.Z,{}),(0,A.jsxs)(D.Z,{sx:{display:"flex",justifyContent:"flex-end",gap:1,fontWeight:600},onClick:()=>f(_.H.unitservice.tables.workshifts.new),children:[(0,A.jsx)(v.Z,{lang:"ar",variant:"body2",sx:{color:"info.main"},children:d("Add new")}),(0,A.jsx)(W.Z,{icon:"material-symbols:new-window-sharp"})]})]}),(0,A.jsxs)(k.Cc,{size:"small",name:"work_group",label:"".concat(d("work group")," *"),InputLabelProps:{shrink:!0},PaperPropsSx:{textTransform:"capitalize"},disabled:Boolean(s),children:[T&&(null===T||void 0===T?void 0:T.map(((e,n)=>(0,A.jsx)(D.Z,{value:e._id,children:u?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))),(0,A.jsx)(z.Z,{}),(0,A.jsxs)(D.Z,{sx:{display:"flex",justifyContent:"flex-end",gap:1,fontWeight:600},onClick:()=>f(_.H.unitservice.tables.workgroups.new),children:[(0,A.jsx)(v.Z,{lang:"ar",variant:"body2",sx:{color:"info.main"},children:d("Add new")}),(0,A.jsx)(W.Z,{icon:"material-symbols:new-window-sharp"})]})]}),(0,A.jsx)(k.au,{fullWidth:!0,step:"5",name:"appointment_time",label:d("appointment duration time"),type:"number",lang:"ar",onBlur:e=>{r(e.target.value),y("appointment_time")},size:"small",InputLabelProps:{shrink:!0},InputProps:{endAdornment:(0,A.jsx)(F.Z,{position:"end",children:(0,A.jsx)(x.Z,{lang:"ar",sx:{fontSize:"0.8rem"},children:d("min")})})}}),(0,A.jsx)(k.au,{lang:"ar",size:"small",InputProps:{startAdornment:(0,A.jsx)(F.Z,{position:"start",children:(0,A.jsx)(x.Z,{sx:{fontSize:"0.8rem"},children:u?"\u0644\u0628\u0639\u062f":"for the next"})}),endAdornment:(0,A.jsx)(F.Z,{position:"end",children:(0,A.jsx)(x.Z,{sx:{fontSize:"0.8rem"},children:u?"\u0623\u064a\u0627\u0645":"days"})})},name:"config_frequency",label:d("configuration frequency"),type:"number",inputProps:{min:0,max:30,textAlign:"center"},InputLabelProps:{shrink:!0}})]}),(0,A.jsxs)(v.Z,{variant:"p",sx:{color:"text.secondary",mb:3,fontWeight:"700",textTransform:"capitalize"},children:[u?"\u0627\u0644\u0639\u0637\u0644 \u0627\u0644\u0623\u0633\u0628\u0648\u0639\u064a\u0629":"Weekly Days Off",":"]}),(0,A.jsx)(c.Z,{spacing:2,direction:{xs:"column",sm:"row"},sx:{p:3},children:(0,A.jsx)(k.s2,{size:"small",name:"weekend",options:p,sx:{display:"grid",gridTemplateColumns:{md:"repeat(7, 1fr)",sm:"repeat(4, 1fr)",xs:"repeat(2, 1fr)"}}})})]})]})}var E=l(13838),R=l(13400);function H(){const{t:e}=(0,w.qM)(),{currentLang:n}=(0,w.nt)(),l="ar"===n.value,{myunitTime:t}=(0,M.lf)(),{user:o}=(0,b.E)(),{control:a,watch:s}=(0,i.Gc)(),{fields:r,append:d,remove:m}=(0,i.Dq)({control:a,name:"holidays"}),u=s();return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(z.Z,{flexItem:!0,sx:{borderStyle:"solid"}}),(0,A.jsxs)(x.Z,{sx:{p:3},children:[(0,A.jsxs)(v.Z,{variant:"p",sx:{color:"text.secondary",mb:3,fontWeight:"700",textTransform:"capitalize"},children:[l?"\u0627\u0644\u0639\u0637\u0644":"Holidays",":"]}),(0,A.jsx)(c.Z,{sx:{mt:3},divider:(0,A.jsx)(z.Z,{flexItem:!0,sx:{borderStyle:"dashed"}}),spacing:2,children:r.map(((n,l)=>(0,A.jsx)(c.Z,{alignItems:"flex-start",spacing:1.5,sx:{width:{xs:"100%",md:"auto"}},children:(0,A.jsxs)(c.Z,{direction:{xs:"column",md:"row"},spacing:2,sx:{width:{xs:"100%",md:"auto"}},children:[(0,A.jsx)(k.au,{lang:"ar",size:"small",name:"holidays[".concat(l,"].description"),label:e("description")}),(0,A.jsx)(i.Qr,{name:"holidays[".concat(l,"].date"),control:a,render:n=>{let{field:i,fieldState:{error:a}}=n;return(0,A.jsx)(P.M,{label:e("date"),value:t(u.holidays[l].date),onChange:e=>{var n,l,t,a;const s=(0,I.Z)(e,(null===o||void 0===o||null===(n=o.employee)||void 0===n||null===(l=n.employee_engagements[null===o||void 0===o?void 0:o.employee.selected_engagement])||void 0===l||null===(t=l.unit_service)||void 0===t||null===(a=t.country)||void 0===a?void 0:a.time_zone)||Intl.DateTimeFormat().resolvedOptions().timeZone);i.onChange(s)},slotProps:{textField:{size:"small",fullWidth:!0,error:!!a,helperText:null===a||void 0===a?void 0:a.message}}})}}),(0,A.jsx)(R.Z,{sx:{justifySelf:"flex-end",alignSelf:"flex-end",width:35},size:"small",color:"error",onClick:()=>(e=>{m(e)})(l),children:(0,A.jsx)(W.Z,{icon:"solar:trash-bin-trash-bold"})})]})},l)))}),(0,A.jsx)(z.Z,{sx:{mt:3,mb:1,borderStyle:"dashed"}}),(0,A.jsx)(c.Z,{spacing:3,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"},children:(0,A.jsx)(E.Z,{size:"small",color:"primary",startIcon:(0,A.jsx)(W.Z,{icon:"tdesign:plus"}),sx:{padding:1},onClick:()=>{d({date:null,description:""})},children:l?"\u0625\u0636\u0627\u0641\u0629 \u0623\u064a\u0627\u0645 \u0639\u0637\u0644":"add holiday"})})]})]})}var O=l(58406),N=l(13034),B=l(62861),Q=l(68096),G=l(47071),X=l(86778),V=l(35456),J=l(56125);function U(e){let{ParentIndex:n,open:l,appointmenttypesData:t,serviceTypesData:o,setAppointmentsNum:a}=e;const{t:s}=(0,w.qM)(),{currentLang:r}=(0,w.nt)(),d="ar"===r.value,{myunitTime:m}=(0,M.lf)(),{user:u}=(0,b.E)(),{control:p,watch:h}=(0,i.Gc)(),{fields:_,append:g,remove:y}=(0,i.Dq)({control:p,name:"days_details[".concat(n,"].appointments")}),f=h(),j=e=>{const n=null===o||void 0===o?void 0:o.filter((n=>null===e||void 0===e?void 0:e.includes(n._id)));return null===n||void 0===n?void 0:n.map((e=>d?e.name_arabic:e.name_english)).join(", ")};return(0,A.jsx)(J.Z,{in:l,sx:{bgcolor:"background.neutral"},children:(0,A.jsxs)(x.Z,{sx:{px:2,pb:0},children:[f.days_details[n].appointments&&f.days_details[n].appointments.length>0&&(0,A.jsxs)(v.Z,{variant:"p",lang:"ar",sx:{color:"text.disabled",mb:3,fontSize:14},children:[s("appointments"),":"]}),(0,A.jsx)(c.Z,{sx:{mt:3},divider:(0,A.jsx)(z.Z,{flexItem:!0,sx:{borderStyle:"dashed"}}),spacing:3,alignItems:"flex-end",children:_.map(((e,l)=>(0,A.jsx)(c.Z,{alignItems:"center",flexWrap:"wrap",spacing:1.5,sx:{width:"80%"},children:(0,A.jsxs)(c.Z,{direction:{xs:"column",md:"row"},spacing:2,sx:{width:"100%"},children:[(0,A.jsx)(k.Cc,{size:"small",InputLabelProps:{shrink:!0},name:"days_details[".concat(n,"].appointments[").concat(l,"].appointment_type"),label:"".concat(s("appointment type")," *"),children:null===t||void 0===t?void 0:t.map(((e,n)=>(0,A.jsx)(D.Z,{value:e._id,children:d?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))}),(0,A.jsx)(i.Qr,{name:"days_details[".concat(n,"].appointments[").concat(l,"].start_time"),control:p,render:e=>{var t;let{field:i,fieldState:{error:o}}=e;return(0,A.jsx)(X.d,{lang:"ar",minutesStep:"5",label:s("start time"),value:m(null===(t=f.days_details[n].appointments[l])||void 0===t?void 0:t.start_time),onChange:e=>{var n,l,t,o;const a=(0,I.Z)(e,(null===u||void 0===u||null===(n=u.employee)||void 0===n||null===(l=n.employee_engagements[null===u||void 0===u?void 0:u.employee.selected_engagement])||void 0===l||null===(t=l.unit_service)||void 0===t||null===(o=t.country)||void 0===o?void 0:o.time_zone)||Intl.DateTimeFormat().resolvedOptions().timeZone);i.onChange(a)},slotProps:{textField:{size:"small",fullWidth:!0,error:!!o,helperText:null===o||void 0===o?void 0:o.message}}})}}),(0,A.jsx)(i.Qr,{name:"days_details[".concat(n,"].appointments[").concat(l,"].service_types"),control:p,render:e=>{let{field:t,fieldState:{error:i}}=e;return(0,A.jsxs)(Q.Z,{error:!!i,size:"small",sx:{width:"100%",shrink:!0},children:[(0,A.jsxs)(B.Z,{shrink:!0,children:[" ",s("service types")," "]}),(0,A.jsx)(O.Z,{...t,multiple:!0,id:"multiple-days_details[".concat(n,"].appointments[").concat(l,"].service_types"),label:s("service types"),renderValue:j,children:null===o||void 0===o?void 0:o.map(((e,n)=>{var l;const i=null===t||void 0===t||null===(l=t.value)||void 0===l?void 0:l.includes(e._id);return(0,A.jsxs)(D.Z,{value:e._id,children:[(0,A.jsx)(N.Z,{size:"small",disableRipple:!0,checked:i}),d?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english]},n)}))}),!!i&&(0,A.jsx)(G.Z,{error:!!i,children:null===i||void 0===i?void 0:i.message})]})}}),(0,A.jsx)(k.jb,{size:"small",InputLabelProps:{shrink:!0},name:"days_details[".concat(n,"].appointments[").concat(l,"].online_available"),label:(0,A.jsx)(v.Z,{lang:"ar",sx:{fontSize:12},children:s("online avaliable")})}),(0,A.jsx)(R.Z,{size:"small",color:"error",sx:{justifySelf:{xs:"flex-end"},alignSelf:{xs:"flex-end"},width:35},onClick:()=>(e=>{y(e),a((e=>({...e,[n]:e[n]-1})))})(l),children:(0,A.jsx)(W.Z,{icon:"solar:trash-bin-trash-bold"})})]})},l)))}),(0,A.jsx)(z.Z,{sx:{mt:f.days_details[n].appointments&&f.days_details[n].appointments.length>0?3:0,mb:1,borderStyle:"dashed"}}),(0,A.jsx)(c.Z,{spacing:3,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"},children:(0,A.jsx)(E.Z,{size:"small",color:"primary",startIcon:(0,A.jsx)(W.Z,{icon:"tdesign:plus"}),sx:{padding:1},onClick:()=>{const e=f.days_details[n].appointments?f.days_details[n].appointments[f.days_details[n].appointments.length-1]:null,l=new Date(e?null===e||void 0===e?void 0:e.start_time:f.days_details[n].work_start_time);e&&l.setMinutes(l.getMinutes()+f.appointment_time);const t={appointment_type:null,start_time:null,price:null,online_available:!0,service_types:[],...e,start_time:l};g(t),a((e=>({...e,[n]:e[n]+1})))},children:d?"\u0625\u0636\u0627\u0641\u0629 \u0645\u0648\u0627\u0639\u064a\u062f \u0628\u0627\u0644\u062a\u0641\u0635\u064a\u0644":"Add Detailed Appointment"})})]})})}function K(e){var n,l;let{setErrorMsg:t,appointTime:o}=e;const{t:a}=(0,w.qM)(),{currentLang:r}=(0,w.nt)(),d="ar"===r.value,{myunitTime:m}=(0,M.lf)(),u=(0,y.k)(),{handleAddNew:p}=(0,q.A)(),h=[{value:"saturday",label:a("Saturday")},{value:"sunday",label:a("Sunday")},{value:"monday",label:a("Monday")},{value:"tuesday",label:a("Tuesday")},{value:"wednesday",label:a("Wednesday")},{value:"thursday",label:a("Thursday")},{value:"friday",label:a("Friday")}],{control:g,setValue:f,watch:j,setError:S,clearErrors:C}=(0,i.Gc)(),{fields:T,append:F,remove:P}=(0,i.Dq)({control:g,name:"days_details"}),L=j(),{user:H}=(0,b.E)(),[J,K]=(0,s.useState)({}),[Y,$]=(0,s.useState)({}),{appointmenttypesData:ee}=(0,Z.o5E)(),{serviceTypesData:ne}=(0,Z.UL2)(null===H||void 0===H||null===(n=H.employee)||void 0===n||null===(l=n.employee_engagements[null===H||void 0===H?void 0:H.employee.selected_engagement])||void 0===l?void 0:l.unit_service._id),le=(0,s.useMemo)((()=>{var e;return null===(e=h.filter((e=>!L.weekend.includes(e.value)&&!L.days_details.some((n=>n.day===e.value))))[0])||void 0===e?void 0:e.value}),[L.days_details,L.weekend]),te=(0,s.useCallback)((()=>{try{if(!le)throw Error("No valid date to create");const e={day:"",work_start_time:null,work_end_time:null,break_start_time:null,break_end_time:null,appointments:[],service_types:[],appointment_type:null},n=L.days_details?L.days_details[L.days_details.length-1]:[],l={...e,...n,day:le};F(l)}catch(e){console.error(e),t(e.message),window.scrollTo({top:0,behavior:"smooth"})}}),[L.days_details,le]),ie=(0,s.useCallback)((e=>{try{if(u.onTrue(),C(),!L.appointment_time)return f("days_details[".concat(e,"].appointments"),[]),void S("appointment_time");if(!L.days_details[e].work_start_time)return f("days_details[".concat(e,"].appointments"),[]),void S("days_details[".concat(e,"].work_start_time"));if(!L.days_details[e].work_end_time)return f("days_details[".concat(e,"].appointments"),[]),void S("days_details[".concat(e,"].work_end_time"));const n=[],l=60*L.appointment_time*1e3,t=L.days_details[e],i=new Date(t.work_start_time).getTime();let o=new Date(t.work_end_time).getTime(),a=t.break_start_time?new Date(t.break_start_time).getTime():null,s=t.break_end_time?new Date(t.break_end_time).getTime():null;i>=o&&(o+=864e5),a&&i>a&&(a+=864e5),a&&s&&a>s&&(s+=864e5);let r=i;for(;r+l<=o;)!a||!s||r+l<=a||r>=s?(n.push({appointment_type:t.appointment_type,start_time:r,online_available:!0,service_types:t.service_types}),r+=l):r+=l;f("days_details[".concat(e,"].appointments"),n),K({...J,[e]:!0}),u.onFalse()}catch(n){console.error(n),u.onFalse(),t(n.message),window.scrollTo({top:0,behavior:"smooth"})}}),[L.appointment_time,L.days_details]),oe=(0,s.useCallback)((e=>{const n=null===ne||void 0===ne?void 0:ne.filter((n=>null===e||void 0===e?void 0:e.includes(null===n||void 0===n?void 0:n._id)));return null===n||void 0===n?void 0:n.map((e=>d?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english)).join(", ")}),[ne,d]),ae=(0,s.useCallback)((e=>{const n=L.days_details[e];if(null!==n&&void 0!==n&&n.appointments.length)return null===n||void 0===n?void 0:n.appointments.length;const l=60*L.appointment_time*1e3,t=new Date(n.work_start_time).getTime();let i=new Date(n.work_end_time).getTime(),o=new Date(n.break_start_time).getTime(),a=new Date(n.break_end_time).getTime();return t>i&&(i+=864e5),t>o&&(o+=864e5),t>a&&(a+=864e5),t<a&&t<=o&&i>=a&&i>o?Math.floor((i-t-(a-o))/l)||0:t<a&&t<=o&&i<=a&&i>o?Math.floor((i-t-(i-o))/l)||0:Math.floor((i-t)/l)||0}),[L.appointment_time,L.days_details]);return(0,s.useEffect)((()=>{if(o)for(let e=0;e<L.days_details.length;e+=1)ie(e)}),[o]),u.value?(0,A.jsx)(V.a,{}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(z.Z,{flexItem:!0,sx:{borderStyle:"solid"}}),(0,A.jsxs)(x.Z,{sx:{p:3},children:[(0,A.jsxs)(v.Z,{variant:"p",sx:{color:"text.secondary",mb:3,fontWeight:"700",textTransform:"capitalize"},children:[d?"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u064a\u0648\u0645":"Days Details",":"]}),(0,A.jsx)(c.Z,{sx:{mt:3},divider:(0,A.jsx)(z.Z,{flexItem:!0,sx:{borderStyle:"dashed"}}),spacing:3,children:T.map(((e,n)=>{var l,t;return(0,A.jsxs)(c.Z,{spacing:1.5,sx:{width:"100%"},children:[(0,A.jsxs)(c.Z,{direction:{xs:"column",md:"column"},spacing:2,sx:{width:"100%",mt:2},children:[(0,A.jsxs)(c.Z,{direction:{xs:"column",md:"row"},spacing:2,sx:{width:"100%",mt:2},children:[(0,A.jsx)(k.Cc,{disabled:!(null!==L&&void 0!==L&&null!==(l=L.weekend)&&void 0!==l&&l.includes(null===(t=L.days_details[n])||void 0===t?void 0:t.day)),InputLabelProps:{shrink:!0},size:"small",name:"days_details[".concat(n,"].day"),label:a("day"),children:h.filter((e=>!L.weekend.includes(e.value)&&!L.days_details.some((l=>{var t;return l.day===e.value&&(null===(t=L.days_details[n])||void 0===t?void 0:t.day)!==e.value})))).map(((e,n)=>(0,A.jsx)(D.Z,{value:e.value,children:e.label},n)))}),(0,A.jsx)(k.Cc,{size:"small",InputLabelProps:{shrink:!0},name:"days_details[".concat(n,"].appointment_type"),onChange:e=>{f("days_details[".concat(n,"].appointment_type"),e.target.value),ie(n)},label:"".concat(a("appointment type")," *"),children:null===ee||void 0===ee?void 0:ee.map(((e,n)=>(0,A.jsx)(D.Z,{value:e._id,children:d?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))}),(0,A.jsx)(i.Qr,{name:"days_details[".concat(n,"].service_types"),control:g,render:e=>{let{field:l,fieldState:{error:t}}=e;return(0,A.jsxs)(Q.Z,{error:!!t,size:"small",sx:{width:"100%",shrink:!0},children:[(0,A.jsxs)(B.Z,{shrink:!0,children:[" ",a("service types")," "]}),(0,A.jsxs)(O.Z,{...l,multiple:!0,id:"multiple-days_details[".concat(n,"].service_types"),label:a("service types"),onChange:e=>{f("days_details[".concat(n,"].service_types"),e.target.value),ie(n)},renderValue:oe,children:[null===ne||void 0===ne?void 0:ne.map(((e,n)=>{var t;const i=null===l||void 0===l||null===(t=l.value)||void 0===t?void 0:t.includes(e._id);return(0,A.jsxs)(D.Z,{value:e._id,children:[(0,A.jsx)(N.Z,{size:"small",disableRipple:!0,checked:i}),d?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english]},n)})),(0,A.jsx)(z.Z,{}),(0,A.jsxs)(D.Z,{sx:{display:"flex",justifyContent:"flex-end",gap:1,fontWeight:600},onClick:()=>p(_.H.unitservice.tables.services.new),children:[(0,A.jsx)(v.Z,{lang:"ar",variant:"body2",sx:{color:"info.main"},children:a("Add new")}),(0,A.jsx)(W.Z,{icon:"material-symbols:new-window-sharp"})]})]}),!!t&&(0,A.jsx)(G.Z,{error:!!t,children:null===t||void 0===t?void 0:t.message})]})}}),(0,A.jsx)(k.au,{lang:"ar",disabled:!0,size:"small",name:"days_details[".concat(n,"].appointment_number"),label:a("appointments number"),InputLabelProps:{shrink:!0},value:Y[n]||ae(n)})]}),(0,A.jsxs)(c.Z,{direction:{xs:"column",md:"row"},spacing:2,sx:{width:"100%",mt:2},children:[(0,A.jsx)(i.Qr,{name:"days_details[".concat(n,"].work_start_time"),control:g,render:e=>{var l;let{field:t,fieldState:{error:i}}=e;return(0,A.jsx)(X.d,{lang:"ar",minutesStep:"5",label:a("work start time"),value:m(null===(l=L.days_details[n])||void 0===l?void 0:l.work_start_time),onChange:e=>{var l,i,o,a;const s=(0,I.Z)(e,(null===H||void 0===H||null===(l=H.employee)||void 0===l||null===(i=l.employee_engagements[null===H||void 0===H?void 0:H.employee.selected_engagement])||void 0===i||null===(o=i.unit_service)||void 0===o||null===(a=o.country)||void 0===a?void 0:a.time_zone)||Intl.DateTimeFormat().resolvedOptions().timeZone);t.onChange(s),f("days_details[".concat(n,"].work_end_time"),null),ie(n)},slotProps:{textField:{size:"small",fullWidth:!0,error:!!i,helperText:null===i||void 0===i?void 0:i.message}}})}}),(0,A.jsx)(i.Qr,{name:"days_details[".concat(n,"].work_end_time"),control:g,render:e=>{var l;let{field:t,fieldState:{error:i}}=e;return(0,A.jsx)(X.d,{lang:"ar",minutesStep:"5",label:a("work end time"),value:m(null===(l=L.days_details[n])||void 0===l?void 0:l.work_end_time),onChange:e=>{var l,i,o,a;const s=(0,I.Z)(e,(null===H||void 0===H||null===(l=H.employee)||void 0===l||null===(i=l.employee_engagements[null===H||void 0===H?void 0:H.employee.selected_engagement])||void 0===i||null===(o=i.unit_service)||void 0===o||null===(a=o.country)||void 0===a?void 0:a.time_zone)||Intl.DateTimeFormat().resolvedOptions().timeZone);t.onChange(s),ie(n)},slotProps:{textField:{size:"small",fullWidth:!0,error:!!i,helperText:null===i||void 0===i?void 0:i.message}}})}}),(0,A.jsx)(i.Qr,{name:"days_details[".concat(n,"].break_start_time"),control:g,render:e=>{var l;let{field:t,fieldState:{error:i}}=e;return(0,A.jsx)(X.d,{lang:"ar",minutesStep:"5",label:a("break start time"),value:m(null===(l=L.days_details[n])||void 0===l?void 0:l.break_start_time),onChange:e=>{var l,i,o,a;const s=(0,I.Z)(e,(null===H||void 0===H||null===(l=H.employee)||void 0===l||null===(i=l.employee_engagements[null===H||void 0===H?void 0:H.employee.selected_engagement])||void 0===i||null===(o=i.unit_service)||void 0===o||null===(a=o.country)||void 0===a?void 0:a.time_zone)||Intl.DateTimeFormat().resolvedOptions().timeZone);f("days_details[".concat(n,"].break_end_time"),null),t.onChange(s),ie(n)},slotProps:{textField:{size:"small",fullWidth:!0,error:!!i,helperText:null===i||void 0===i?void 0:i.message}}})}}),(0,A.jsx)(i.Qr,{name:"days_details[".concat(n,"].break_end_time"),control:g,render:e=>{var l;let{field:t,fieldState:{error:i}}=e;return(0,A.jsx)(X.d,{lang:"ar",minutesStep:"5",label:a("break end time"),value:m(null===(l=L.days_details[n])||void 0===l?void 0:l.break_end_time),onChange:e=>{var l,i,o,a;const s=(0,I.Z)(e,(null===H||void 0===H||null===(l=H.employee)||void 0===l||null===(i=l.employee_engagements[null===H||void 0===H?void 0:H.employee.selected_engagement])||void 0===i||null===(o=i.unit_service)||void 0===o||null===(a=o.country)||void 0===a?void 0:a.time_zone)||Intl.DateTimeFormat().resolvedOptions().timeZone);t.onChange(s),ie(n)},slotProps:{textField:{size:"small",fullWidth:!0,error:!!i,helperText:null===i||void 0===i?void 0:i.message}}})}})]}),(0,A.jsxs)(c.Z,{direction:{xs:"column",md:"row"},spacing:.2,sx:{justifySelf:{xs:"flex-end"},alignSelf:{xs:"flex-end"}},children:[(0,A.jsx)(R.Z,{size:"small",color:"error",onClick:()=>(e=>{P(e)})(n),children:(0,A.jsx)(W.Z,{icon:"solar:trash-bin-trash-bold"})}),(0,A.jsx)(R.Z,{size:"small",onClick:()=>ie(n),children:(0,A.jsx)(W.Z,{icon:"zondicons:refresh"})}),(0,A.jsx)(R.Z,{size:"small",onClick:()=>K({...J,[n]:!J[n]}),children:(0,A.jsx)(W.Z,{icon:J[n]?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"})})]})]}),(0,A.jsx)(U,{setAppointmentsNum:$,serviceTypesData:ne,appointmenttypesData:ee,open:J[n],ParentIndex:n})]},n)}))}),(0,A.jsx)(z.Z,{sx:{mt:3,mb:1,borderStyle:"dashed"}}),(0,A.jsx)(c.Z,{spacing:3,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"},children:(0,A.jsx)(E.Z,{size:"small",color:"primary",startIcon:(0,A.jsx)(W.Z,{icon:"tdesign:plus"}),sx:{padding:1},onClick:te,children:d?"\u0625\u0636\u0627\u0641\u0629 \u064a\u0648\u0645 \u062c\u062f\u064a\u062f":"add new day"})})]})]})}function Y(){const{t:e}=(0,w.qM)(),{currentLang:n}=(0,w.nt)(),l="ar"===n.value,{myunitTime:t}=(0,M.lf)(),{user:o}=(0,b.E)(),{control:a,watch:s,setValue:r}=(0,i.Gc)(),{fields:d,append:m,remove:u}=(0,i.Dq)({control:a,name:"long_holidays"}),p=s();return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(z.Z,{flexItem:!0,sx:{borderStyle:"solid"}}),(0,A.jsxs)(x.Z,{sx:{p:3},children:[(0,A.jsxs)(v.Z,{variant:"p",sx:{color:"text.secondary",mb:3,fontWeight:"700",textTransform:"capitalize"},children:[l?"\u0639\u0637\u0644 \u0637\u0648\u064a\u0644\u0629":"Long Holidays",":"]}),(0,A.jsx)(c.Z,{sx:{mt:3},divider:(0,A.jsx)(z.Z,{flexItem:!0,sx:{borderStyle:"dashed"}}),spacing:3,children:d.map(((n,l)=>(0,A.jsx)(c.Z,{alignItems:"flex-start",spacing:1.5,sx:{width:{xs:"100%",md:"auto"}},children:(0,A.jsxs)(c.Z,{direction:{xs:"column",md:"row"},spacing:2,sx:{width:{xs:"100%",md:"auto"}},children:[(0,A.jsx)(k.au,{lang:"ar",size:"small",name:"long_holidays[".concat(l,"].description"),label:e("description")}),(0,A.jsx)(i.Qr,{name:"long_holidays[".concat(l,"].start_date"),control:a,render:n=>{let{field:i,fieldState:{error:a}}=n;return(0,A.jsx)(P.M,{label:e("start date"),value:t(p.long_holidays[l].start_date),onChange:e=>{var n,t,a,s;const d=(0,I.Z)(e,(null===o||void 0===o||null===(n=o.employee)||void 0===n||null===(t=n.employee_engagements[null===o||void 0===o?void 0:o.employee.selected_engagement])||void 0===t||null===(a=t.unit_service)||void 0===a||null===(s=a.country)||void 0===s?void 0:s.time_zone)||Intl.DateTimeFormat().resolvedOptions().timeZone);r("long_holidays[".concat(l,"].end_date"),d),i.onChange(d)},slotProps:{textField:{size:"small",fullWidth:!0,error:!!a,helperText:null===a||void 0===a?void 0:a.message}}})}}),(0,A.jsx)(i.Qr,{name:"long_holidays[".concat(l,"].end_date"),control:a,render:n=>{let{field:i,fieldState:{error:a}}=n;return(0,A.jsx)(P.M,{label:e("end date"),value:t(p.long_holidays[l].end_date),onChange:e=>{var n,l,t,a;const s=(0,I.Z)(e,(null===o||void 0===o||null===(n=o.employee)||void 0===n||null===(l=n.employee_engagements[null===o||void 0===o?void 0:o.employee.selected_engagement])||void 0===l||null===(t=l.unit_service)||void 0===t||null===(a=t.country)||void 0===a?void 0:a.time_zone)||Intl.DateTimeFormat().resolvedOptions().timeZone);i.onChange(s)},slotProps:{textField:{size:"small",fullWidth:!0,error:!!a,helperText:null===a||void 0===a?void 0:a.message}}})}}),(0,A.jsx)(R.Z,{size:"small",color:"error",sx:{justifySelf:"flex-end",alignSelf:"flex-end",width:35},onClick:()=>(e=>{u(e)})(l),children:(0,A.jsx)(W.Z,{icon:"solar:trash-bin-trash-bold"})})]})},l)))}),(0,A.jsx)(z.Z,{sx:{mt:3,mb:1,borderStyle:"dashed"}}),(0,A.jsx)(c.Z,{spacing:1,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"},children:(0,A.jsx)(E.Z,{size:"small",color:"primary",startIcon:(0,A.jsx)(W.Z,{icon:"tdesign:plus"}),sx:{padding:1},onClick:()=>{m({start_date:null,end_date:null,description:""})},children:l?"\u0625\u0636\u0627\u0641\u0629 \u0639\u0637\u0644 \u0637\u0648\u064a\u0644\u0629":"add long holiday"})})]})]})}function $(e){var n,l,o;let{appointmentConfigData:I,refetch:z,loading:D}=e;const F=(0,g.tv)(),{t:P}=(0,w.qM)(),{currentLang:q}=(0,w.nt)(),M="ar"===q.value,{user:W}=(0,b.E)(),E=(0,Z.X79)(null===W||void 0===W||null===(n=W.employee)||void 0===n||null===(l=n.employee_engagements)||void 0===l||null===(o=l[W.employee.selected_engagement])||void 0===o?void 0:o._id).data,[R,O]=(0,s.useState)(0),[N,B]=(0,s.useState)([]),[Q,G]=(0,s.useState)(),{enqueueSnackbar:X}=(0,S.Ds)(),V=(0,y.k)(!1),J=(0,y.k)(!1),U=(0,y.k)(),$=(0,y.k)(),ee=t.Ry().shape({weekend:t.IX(),start_date:t.hT().nullable(),end_date:t.hT().nullable(),appointment_time:t.Rx().required("Appointment Time is required").min(5,"Appointment Time must be at least 5").max(180,"Appointment Time must be at most 180"),config_frequency:t.Rx().required("Configuration Frequency is required").min(1,"must be at least 1").max(360,"must be at most 360"),holidays:t.IX(),long_holidays:t.IX().of(t.Ry().shape({start_date:t.hT().nullable(),end_date:t.hT().nullable(),description:t.Z_().nullable()})),work_group:t.Z_().required("Work Group is required"),work_shift:t.Z_().required("Work Shift is required"),days_details:t.IX().of(t.Ry().shape({day:t.Z_().required("Day is required"),work_start_time:t.hT().nullable().required("work start time is required"),work_end_time:t.hT().nullable().required("work end time is required"),appointments:t.IX(),service_types:t.IX(),appointment_type:t.Z_().nullable()}))}),ne=(0,s.useMemo)((()=>{var e,n,l,t,i,o,a,s;return{unit_service:(null===I||void 0===I?void 0:I.unit_service._id)||(null===W||void 0===W||null===(e=W.employee)||void 0===e||null===(n=e.employee_engagements[null===W||void 0===W?void 0:W.employee.selected_engagement])||void 0===n?void 0:n.unit_service._id),department:(null===E||void 0===E||null===(l=E.department)||void 0===l?void 0:l._id)||(null===W||void 0===W||null===(t=W.employee)||void 0===t||null===(i=t.employee_engagements[null===W||void 0===W?void 0:W.employee.selected_engagement])||void 0===i||null===(o=i.department)||void 0===o?void 0:o._id),start_date:(null===I||void 0===I?void 0:I.start_date)||null,end_date:(null===I||void 0===I?void 0:I.end_date)||null,weekend:(null===I||void 0===I?void 0:I.weekend)||[],appointment_time:(null===I||void 0===I?void 0:I.appointment_time)||null,config_frequency:(null===I||void 0===I?void 0:I.config_frequency)||null,holidays:(null===I||void 0===I?void 0:I.holidays)||[{description:"",date:null}],long_holidays:(null===I||void 0===I?void 0:I.long_holidays)||[{description:"",start_date:null,end_date:null}],work_group:(null===I||void 0===I||null===(a=I.work_group)||void 0===a?void 0:a._id)||null,work_shift:(null===I||void 0===I||null===(s=I.work_shift)||void 0===s?void 0:s._id)||null,days_details:(null===I||void 0===I?void 0:I.days_details)||[{day:"saturday",work_start_time:null,work_end_time:null,break_start_time:null,break_end_time:null,appointments:[],service_types:[],appointment_type:null}]}}),[I,null===W||void 0===W?void 0:W.employee,null===E||void 0===E?void 0:E.department]),le=(0,i.cI)({mode:"onTouched",resolver:(0,r.X)(ee),defaultValues:ne}),{handleSubmit:te,formState:{isSubmitting:ie,errors:oe}}=le,ae=te((async e=>{$.onTrue();const n=new Date,l=new Date(n.getTime()+24*e.config_frequency*60*60*1e3);try{var t,i,o;if(I)!e.start_date&&!e.end_date||new Date(e.end_date)>n&&(new Date(e.start_date)<=n||new Date(e.start_date)<l)?(B(e),U.onTrue()):(await f.ZP.patch("".concat(f.Hv.appointment_configs.all,"/").concat(null===I||void 0===I?void 0:I._id),e),F.push(_.H.employee.appointmentconfiguration.root));else J.onTrue(),await f.ZP.post(f.Hv.appointment_configs.all,e),j.Z.emit("created",{data:e,user:W,link:_.H.unitservice.employees.appointmentconfig.root(null===W||void 0===W||null===(t=W.employee)||void 0===t||null===(i=t.employee_engagements)||void 0===i||null===(o=i[W.employee.selected_engagement])||void 0===o?void 0:o._id),msg:"created an appointment config <strong>".concat(e.name_english||"","</strong>"),ar_msg:"\u0625\u0646\u0634\u0627\u0621 \u0625\u0639\u062f\u0627\u062f\u062a \u0645\u0648\u0627\u0639\u064a\u062f <strong>".concat(e.name_english||"","</strong>")}),J.onFalse(),F.push(_.H.employee.appointmentconfiguration.root),X(P("added successfully!"));$.onFalse(),console.info("DATA",JSON.stringify(e,null,2))}catch(a){G("string"===typeof a?a:a.message),window.scrollTo({top:0,behavior:"smooth"}),console.error(a),J.onFalse(),$.onFalse(),X(M?a.arabic_message:a.message,{variant:"error"})}}));return(0,s.useEffect)((()=>{Object.keys(oe).length&&G(Object.keys(oe).map(((e,n)=>{var l;return null===oe||void 0===oe||null===(l=oe[e])||void 0===l?void 0:l.message})).join("<br>"))}),[oe]),(0,s.useEffect)((()=>{var e,n,l,t,i,o,a;I&&le.reset({unit_service:(null===I||void 0===I?void 0:I.unit_service)||(null===W||void 0===W||null===(e=W.employee)||void 0===e||null===(n=e.employee_engagements[null===W||void 0===W?void 0:W.employee.selected_engagement])||void 0===n?void 0:n.unit_service._id),department:(null===E||void 0===E||null===(l=E.department)||void 0===l?void 0:l._id)||(null===W||void 0===W||null===(t=W.employee.employee_engagements[null===W||void 0===W?void 0:W.employee.selected_engagement])||void 0===t||null===(i=t.department)||void 0===i?void 0:i._id),start_date:(null===I||void 0===I?void 0:I.start_date)||null,end_date:(null===I||void 0===I?void 0:I.end_date)||null,weekend:(null===I||void 0===I?void 0:I.weekend)||[],appointment_time:(null===I||void 0===I?void 0:I.appointment_time)||null,config_frequency:(null===I||void 0===I?void 0:I.config_frequency)||null,holidays:(null===I||void 0===I?void 0:I.holidays)||[{description:"",date:null}],long_holidays:(null===I||void 0===I?void 0:I.long_holidays)||[{description:"",start_date:null,end_date:null}],work_group:(null===(o=I.work_group)||void 0===o?void 0:o._id)||null,work_shift:(null===(a=I.work_shift)||void 0===a?void 0:a._id)||null,days_details:I.days_details||[{day:"",work_start_time:null,work_end_time:null,break_start_time:null,break_end_time:null,appointments:[]}]})}),[I,W,null===E||void 0===E?void 0:E.department]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(m.Z,{maxWidth:"lg",children:[(0,A.jsx)(T.Z,{heading:P("appointment configuration"),links:[{name:P("dashboard"),href:_.H.dashboard.root},{name:P("appointment configuration")}],sx:{mb:{xs:3,md:5}}}),(0,A.jsxs)(k.ZP,{methods:le,children:[!D&&(0,A.jsxs)(d.Z,{children:[!!Q&&(0,A.jsx)(p.Z,{sx:{borderRadius:0},severity:"error",children:(0,A.jsxs)("div",{children:[" ",Q," "]})}),(0,A.jsx)(L,{setAppointTime:O,appointmentConfigData:I}),(0,A.jsx)(K,{setErrorMsg:G,appointTime:R}),(0,A.jsx)(H,{}),(0,A.jsx)(Y,{})]}),(0,A.jsx)(c.Z,{justifyContent:"flex-end",direction:"row",spacing:2,sx:{mt:3},children:(0,A.jsx)(u.Z,{variant:"contained",loading:ie||V.value||J.value,onClick:ae,children:P("save")})})]})]}),(0,A.jsx)(C.Q,{disabled:J.value,open:J.value||U.value,onClose:U.onFalse,title:J.value?"Creating appointments...":"Do you want to change your existance appointments?",content:J.value?(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(a(),{options:{strings:["It might take several minutes..","We are getting appointments ready..","We are almost done.."],autoStart:!0,loop:!0,deleteSpeed:5,cursor:"",delay:20}})}):(0,A.jsxs)(A.Fragment,{children:[M?(0,A.jsxs)(v.Z,{variant:"body2",component:"p",sx:{mt:1,color:"text.disabled"},children:["\u0627\u0636\u063a\u0637 ",(0,A.jsx)("strong",{children:" \u0646\u0639\u0645 "})," \u0644\u062a\u063a\u064a\u064a\u0631 \u0627\u0644\u0645\u0648\u0627\u0639\u064a\u062f \u0627\u0644\u0645\u0646\u0634\u0623\u0629"]}):(0,A.jsxs)(v.Z,{variant:"body2",component:"p",sx:{mt:1,color:"text.disabled"},children:["press",(0,A.jsx)("strong",{children:" yes"})," to change existance appointments"]}),M?(0,A.jsxs)(v.Z,{variant:"body2",component:"p",sx:{mt:1,color:"text.disabled"},children:["\u0627\u0636\u063a\u0637 ",(0,A.jsx)("strong",{children:" \u0644\u0627 "})," \u0644\u062d\u0641\u0638 \u0627\u0644\u0627\u0639\u062f\u0627\u062f\u0627\u062a \u0644\u0644\u0628\u062f\u0621 \u0645\u0646 \u0627\u0644\u0645\u0648\u0627\u0639\u064a\u062f \u0627\u0644\u062a\u064a \u064a\u0631\u0627\u062f \u0625\u0646\u0634\u0627\u0626\u0647\u0627"]}):(0,A.jsxs)(v.Z,{variant:"body2",component:"p",sx:{mt:1,color:"text.disabled"},children:["press",(0,A.jsx)("strong",{children:" No"})," to start changing when creating new appointments"]})]}),withoutCancel:J.value,action:(0,A.jsxs)(A.Fragment,{children:[J.value&&(0,A.jsx)(x.Z,{height:"40",sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,A.jsx)(h.Z,{size:24,color:"primary"})}),!J.value&&(0,A.jsx)(u.Z,{variant:"contained",loading:J.value,color:"warning",onClick:async()=>{J.onTrue();try{await f.ZP.patch("".concat(f.Hv.appointment_configs.all,"/").concat(null===I||void 0===I?void 0:I._id),{...N,ImmediateEdit:!0}),J.onFalse(),U.onFalse(),X(P("updated successfully!")),F.push(_.H.employee.appointmentconfiguration.root)}catch(e){console.error(e),G("string"===typeof e?e:e.message),window.scrollTo({top:0,behavior:"smooth"}),J.onFalse(),U.onFalse(),X(M?e.arabic_message:e.message,{variant:"error"})}},children:P("yes")}),!J.value&&(0,A.jsx)(u.Z,{disabled:J.value,loading:V.value,variant:"contained",color:"success",onClick:async()=>{V.onTrue();try{await f.ZP.patch("".concat(f.Hv.appointment_configs.all,"/").concat(null===I||void 0===I?void 0:I._id),{...N,ImmediateEdit:!1}),X(P("updated successfully!")),V.onFalse(),U.onFalse(),F.push(_.H.employee.appointmentconfiguration.root)}catch(e){console.error(e),G("string"===typeof e?e:e.message),window.scrollTo({top:0,behavior:"smooth"}),V.onFalse(),U.onFalse(),X(M?e.arabic_message:e.message,{variant:"error"})}},children:P("no")})]})})]})}},93517:(e,n,l)=>{l.d(n,{Z:()=>z});var t=l(87462),i=l(63366),o=l(72791),a=(l(57441),l(59278)),s=l(50385),r=l(20838),d=l(66934),c=l(31402),m=l(4567),u=l(54131),p=l(74223),v=l(80184);const x=(0,p.Z)((0,v.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var h=l(95080);const _=["slots","slotProps"],g=(0,d.ZP)(h.Z)((e=>{let{theme:n}=e;return(0,t.Z)({display:"flex",marginLeft:"calc(".concat(n.spacing(1)," * 0.5)"),marginRight:"calc(".concat(n.spacing(1)," * 0.5)")},"light"===n.palette.mode?{backgroundColor:n.palette.grey[100],color:n.palette.grey[700]}:{backgroundColor:n.palette.grey[700],color:n.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,t.Z)({},"light"===n.palette.mode?{backgroundColor:n.palette.grey[200]}:{backgroundColor:n.palette.grey[600]}),"&:active":(0,t.Z)({boxShadow:n.shadows[0]},"light"===n.palette.mode?{backgroundColor:(0,u._4)(n.palette.grey[200],.12)}:{backgroundColor:(0,u._4)(n.palette.grey[600],.12)})})})),y=(0,d.ZP)(x)({width:24,height:16});const f=function(e){const{slots:n={},slotProps:l={}}=e,o=(0,i.Z)(e,_),a=e;return(0,v.jsx)("li",{children:(0,v.jsx)(g,(0,t.Z)({focusRipple:!0},o,{ownerState:a,children:(0,v.jsx)(y,(0,t.Z)({as:n.CollapsedIcon,ownerState:a},l.collapsedIcon))}))})};var j=l(59703),b=l(64657);function Z(e){return(0,b.ZP)("MuiBreadcrumbs",e)}const w=(0,j.Z)("MuiBreadcrumbs",["root","ol","li","separator"]),k=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],S=(0,d.ZP)(m.Z,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,n)=>[{["& .".concat(w.li)]:n.li},n.root]})({}),C=(0,d.ZP)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,n)=>n.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),T=(0,d.ZP)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,n)=>n.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function I(e,n,l,t){return e.reduce(((i,o,a)=>(a<e.length-1?i=i.concat(o,(0,v.jsx)(T,{"aria-hidden":!0,className:n,ownerState:t,children:l},"separator-".concat(a))):i.push(o),i)),[])}const z=o.forwardRef((function(e,n){const l=(0,c.Z)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:m,component:u="nav",slots:p={},slotProps:x={},expandText:h="Show path",itemsAfterCollapse:_=1,itemsBeforeCollapse:g=1,maxItems:y=8,separator:j="/"}=l,b=(0,i.Z)(l,k),[w,T]=o.useState(!1),z=(0,t.Z)({},l,{component:u,expanded:w,expandText:h,itemsAfterCollapse:_,itemsBeforeCollapse:g,maxItems:y,separator:j}),D=(e=>{const{classes:n}=e;return(0,r.Z)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},Z,n)})(z),F=(0,s.y)({elementType:p.CollapsedIcon,externalSlotProps:x.collapsedIcon,ownerState:z}),P=o.useRef(null),q=o.Children.toArray(d).filter((e=>o.isValidElement(e))).map(((e,n)=>(0,v.jsx)("li",{className:D.li,children:e},"child-".concat(n))));return(0,v.jsx)(S,(0,t.Z)({ref:n,component:u,color:"text.secondary",className:(0,a.Z)(D.root,m),ownerState:z},b,{children:(0,v.jsx)(C,{className:D.ol,ref:P,ownerState:z,children:I(w||y&&q.length<=y?q:(e=>g+_>=e.length?e:[...e.slice(0,g),(0,v.jsx)(f,{"aria-label":h,slots:{CollapsedIcon:p.CollapsedIcon},slotProps:{collapsedIcon:F},onClick:()=>{T(!0);const e=P.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-_,e.length)])(q),D.separator,j,z)})}))}))}}]);
//# sourceMappingURL=5220.e7ac91d3.chunk.js.map
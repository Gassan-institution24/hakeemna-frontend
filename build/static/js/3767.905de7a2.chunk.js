"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[3767],{3767:(e,a,n)=>{n.r(a),n.d(a,{default:()=>u});var t=n(29490),r=n(67132),s=n(7625),i=n(68719),l=n(67555),o=n(77224),d=n(78214),m=n(70579);function c(e){let{departmentData:a}=e;return(0,m.jsx)(o.A,{maxWidth:"xl",children:(0,m.jsx)(d.A,{departmentData:a})})}function u(){const e=(0,r.g)(),{id:a}=e,{data:n,loading:o}=(0,s.UMH)(a);return(0,m.jsxs)(i.A,{category:"department",subcategory:"management_tables",acl:"create",children:[(0,m.jsxs)(t.mg,{children:[(0,m.jsxs)("title",{children:[n.name_english||"Deartment"," : Add Room "]}),(0,m.jsx)("meta",{name:"description",content:"meta"})]}),o&&(0,m.jsx)(l.x,{}),!o&&(0,m.jsx)(c,{departmentData:n})]})}},78214:(e,a,n)=>{n.d(a,{A:()=>b});var t=n(80899),r=n(24858),s=n(65043),i=n(18403),l=n(81e3),o=n(12110),d=n(74600),m=n(22075),c=n(38246),u=n(48407),g=n(67132),_=n(31673),h=n(91562),v=n(75139),p=n(60778),x=n(94857),f=n(59699),j=n(70579);function b(e){let{departmentData:a,currentTable:n}=e;const b=(0,g.rd)(),{t:A}=(0,p.WD)(),{currentLang:$}=(0,p.jc)(),y="ar"===$.value,{user:k}=(0,v.Z)(),{enqueueSnackbar:C}=(0,x.dh)(),D=t.Ik().shape({name_arabic:t.Yj().required(A("required field")),name_english:t.Yj().required(A("required field")),general_info:t.Yj()}),q=(0,s.useMemo)((()=>{var e,t,r;return{unit_service:null===k||void 0===k||null===(e=k.employee)||void 0===e||null===(t=e.employee_engagements)||void 0===t||null===(r=t[null===k||void 0===k?void 0:k.employee.selected_engagement])||void 0===r?void 0:r.unit_service._id,name_arabic:(null===n||void 0===n?void 0:n.name_arabic)||"",name_english:(null===n||void 0===n?void 0:n.name_english)||"",department:a._id,general_info:(null===n||void 0===n?void 0:n.general_info)||""}}),[n,a,null===k||void 0===k?void 0:k.employee]),w=(0,r.mN)({mode:"all",resolver:(0,i.t)(D),defaultValues:q}),S=e=>{/^[a-zA-Z0-9\s,@#$!*_\-&^%.()]*$/.test(e.target.value)&&w.setValue(e.target.name,e.target.value,{shouldValidate:!0})},{reset:V,handleSubmit:Z,formState:{isSubmitting:E,errors:I}}=w;(0,s.useEffect)((()=>{Object.keys(I).length&&Object.keys(I).forEach(((e,a)=>{var n;return C(`${e}: ${(null===I||void 0===I||null===(n=I[e])||void 0===n?void 0:n.message)||"error"}`,{variant:"error"})}))}),[I,C]);const W=Z((async e=>{try{n?(await _.Ay.patch(_.vZ.rooms.one(n._id),{department:a._id,...e}),h.A.emit("updated",{data:e,user:k,link:u.f.unitservice.departments.rooms.root(a._id),msg:`updated room <strong>${e.name_english||""}</strong> in <strong>${a.name_english}</strong> department`}),b.push(u.f.unitservice.departments.rooms.root(a._id))):(await _.Ay.post(_.vZ.rooms.all,{department:a._id,...e}),h.A.emit("created",{data:e,user:k,link:u.f.unitservice.departments.rooms.root(a._id),msg:`created room <strong>${e.name_english||""}</strong> into <strong>${a.name_english}</strong> department`,ar_msg:`\u0625\u0646\u0634\u0627\u0621 \u063a\u0631\u0641\u0629 <strong>${e.name_arabic||""}</strong> \u0641\u064a \u0642\u0633\u0645 <strong>${a.name_arabic}</strong>`})),V(),C(A(n?"update success!":"create success!"))}catch(t){C(y&&`${t.arabic_message}`||`${t.message}`,{variant:"error"}),console.error(t)}}));return(0,s.useEffect)((()=>{V(q)}),[q,V]),(0,j.jsx)(f.Ay,{methods:w,onSubmit:W,children:(0,j.jsx)(m.A,{container:!0,spacing:3,children:(0,j.jsx)(m.A,{xs:12,maxWidth:"md",children:(0,j.jsxs)(o.A,{sx:{p:3},children:[(0,j.jsxs)(l.A,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,j.jsx)(f.o3,{onChange:S,name:"name_english",label:`${A("name english")} *`}),(0,j.jsx)(f.o3,{onChange:e=>{/^[\u0600-\u06FF0-9\s!@#$%^&*_\-().]*$/.test(e.target.value)&&w.setValue(e.target.name,e.target.value,{shouldValidate:!0})},name:"name_arabic",label:`${A("name arabic")} *`}),(0,j.jsx)(f.o3,{onChange:S,name:"general_info",label:A("general info")})]}),(0,j.jsx)(d.A,{alignItems:"flex-end",sx:{mt:3},children:(0,j.jsx)(c.A,{type:"submit",tabIndex:-1,variant:"contained",loading:E,children:A(n?"save changes":"create")})})]})})})})}}}]);
//# sourceMappingURL=3767.905de7a2.chunk.js.map
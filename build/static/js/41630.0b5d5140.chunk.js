"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[41630],{41630:(e,a,n)=>{n.r(a),n.d(a,{default:()=>c});var t=n(29490),r=n(67132),s=n(68719),i=n(7625),o=n(67555),l=n(77224),d=n(78214),m=n(70579);function u(e){let{roomData:a,departmentData:n}=e;return(0,m.jsx)(l.A,{maxWidth:"xl",children:a&&n&&(0,m.jsx)(d.A,{departmentData:n,currentTable:a})})}function c(){const e=(0,r.g)(),{id:a,acid:n}=e,l=(0,i.UMH)(a).data,{data:d,loading:c}=(0,i.nIn)(n);return(0,m.jsxs)(s.A,{category:"department",subcategory:"management_tables",acl:"update",children:[(0,m.jsxs)(t.mg,{children:[(0,m.jsxs)("title",{children:[l.name_english||"Deartment"," : Edit Room "]}),(0,m.jsx)("meta",{name:"description",content:"meta"})]}),c&&(0,m.jsx)(o.x,{}),!c&&(0,m.jsx)(u,{roomData:d,departmentData:l})]})}},78214:(e,a,n)=>{n.d(a,{A:()=>b});var t=n(80899),r=n(24858),s=n(65043),i=n(18403),o=n(81e3),l=n(12110),d=n(74600),m=n(22075),u=n(38246),c=n(48407),g=n(67132),_=n(31673),h=n(91562),v=n(75139),p=n(60778),x=n(94857),f=n(59699),j=n(70579);function b(e){let{departmentData:a,currentTable:n}=e;const b=(0,g.rd)(),{t:A}=(0,p.WD)(),{currentLang:$}=(0,p.jc)(),y="ar"===$.value,{user:k}=(0,v.Z)(),{enqueueSnackbar:D}=(0,x.dh)(),C=t.Ik().shape({name_arabic:t.Yj().required(A("required field")),name_english:t.Yj().required(A("required field")),general_info:t.Yj()}),q=(0,s.useMemo)((()=>{var e,t,r;return{unit_service:null===k||void 0===k||null===(e=k.employee)||void 0===e||null===(t=e.employee_engagements)||void 0===t||null===(r=t[null===k||void 0===k?void 0:k.employee.selected_engagement])||void 0===r?void 0:r.unit_service._id,name_arabic:(null===n||void 0===n?void 0:n.name_arabic)||"",name_english:(null===n||void 0===n?void 0:n.name_english)||"",department:a._id,general_info:(null===n||void 0===n?void 0:n.general_info)||""}}),[n,a,null===k||void 0===k?void 0:k.employee]),w=(0,r.mN)({mode:"all",resolver:(0,i.t)(C),defaultValues:q}),S=e=>{/^[a-zA-Z0-9\s,@#$!*_\-&^%.()]*$/.test(e.target.value)&&w.setValue(e.target.name,e.target.value,{shouldValidate:!0})},{reset:V,handleSubmit:E,formState:{isSubmitting:I,errors:Z}}=w;(0,s.useEffect)((()=>{Object.keys(Z).length&&Object.keys(Z).forEach(((e,a)=>{var n;return D(`${e}: ${(null===Z||void 0===Z||null===(n=Z[e])||void 0===n?void 0:n.message)||"error"}`,{variant:"error"})}))}),[Z,D]);const T=E((async e=>{try{n?(await _.Ay.patch(_.vZ.rooms.one(n._id),{department:a._id,...e}),h.A.emit("updated",{data:e,user:k,link:c.f.unitservice.departments.rooms.root(a._id),msg:`updated room <strong>${e.name_english||""}</strong> in <strong>${a.name_english}</strong> department`}),b.push(c.f.unitservice.departments.rooms.root(a._id))):(await _.Ay.post(_.vZ.rooms.all,{department:a._id,...e}),h.A.emit("created",{data:e,user:k,link:c.f.unitservice.departments.rooms.root(a._id),msg:`created room <strong>${e.name_english||""}</strong> into <strong>${a.name_english}</strong> department`,ar_msg:`\u0625\u0646\u0634\u0627\u0621 \u063a\u0631\u0641\u0629 <strong>${e.name_arabic||""}</strong> \u0641\u064a \u0642\u0633\u0645 <strong>${a.name_arabic}</strong>`})),V(),D(A(n?"update success!":"create success!"))}catch(t){D(y&&`${t.arabic_message}`||`${t.message}`,{variant:"error"}),console.error(t)}}));return(0,s.useEffect)((()=>{V(q)}),[q,V]),(0,j.jsx)(f.Ay,{methods:w,onSubmit:T,children:(0,j.jsx)(m.A,{container:!0,spacing:3,children:(0,j.jsx)(m.A,{xs:12,maxWidth:"md",children:(0,j.jsxs)(l.A,{sx:{p:3},children:[(0,j.jsxs)(o.A,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,j.jsx)(f.o3,{onChange:S,name:"name_english",label:`${A("name english")} *`}),(0,j.jsx)(f.o3,{onChange:e=>{/^[\u0600-\u06FF0-9\s!@#$%^&*_\-().]*$/.test(e.target.value)&&w.setValue(e.target.name,e.target.value,{shouldValidate:!0})},name:"name_arabic",label:`${A("name arabic")} *`}),(0,j.jsx)(f.o3,{onChange:S,name:"general_info",label:A("general info")})]}),(0,j.jsx)(d.A,{alignItems:"flex-end",sx:{mt:3},children:(0,j.jsx)(u.A,{type:"submit",tabIndex:-1,variant:"contained",loading:I,children:A(n?"save changes":"create")})})]})})})})}}}]);
//# sourceMappingURL=41630.0b5d5140.chunk.js.map
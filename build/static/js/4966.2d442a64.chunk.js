/*! For license information please see 4966.2d442a64.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[4966],{73379:(e,n,o)=>{o.d(n,{Z:()=>i.Z});var i=o(38563)},64966:(e,n,o)=>{o.r(n),o.d(n,{default:()=>Q});var i=o(6907),l=o(19208),t=o(8966),a=o(6965),r=o(34045),s=o(64802),d=o(84802),c=o(61146),u=o(72791),v=o(61474),h=o(2101),p=o(57621),m=o(79836),g=o(13838),x=o(12065),f=o(82626),j=o(89164),w=o(53382),b=o(39281),_=o(38072),C=o(4419),Z=o(89731),k=o(6385),P=o(76932),y=o(84954),D=o(40268),R=o(10261),S=o(25279),F=o(73379),I=o(24845),O=o(38062),A=o(52007),B=o.n(A),T=o(9195),U=o(68745),L=o(13400),H=o(80184);function E(e){let{row:n,onDeleteRow:o,setFilters:i,filters:l}=e;const{code:t,name_english:a,type:r,status:s,webpage:d,phone:c,address:u,created_at:v,user_creation:h,ip_address_user_creation:p,updated_at:m,user_modification:g,ip_address_user_modification:x,modifications_nums:f}=n,{t:j}=(0,P.qM)(),w=((0,I.S)(),(0,I.S)(),(0,H.jsxs)(T.Z,{hover:!0,children:[(0,H.jsx)(U.Z,{align:"center",children:t}),(0,H.jsx)(U.Z,{children:a}),(0,H.jsx)(U.Z,{align:"center",onClick:()=>i({...l,name:null===r||void 0===r?void 0:r.name_english}),children:null===r||void 0===r?void 0:r.name_english}),(0,H.jsx)(U.Z,{align:"center",children:(0,H.jsx)(y.Z,{variant:"soft",color:("active"===s?"success":"inactive"===s&&"error")||"default",children:s})}),(0,H.jsx)(U.Z,{align:"center",children:d}),(0,H.jsx)(U.Z,{align:"center",children:c}),(0,H.jsx)(U.Z,{align:"center",children:u}),(0,H.jsx)(U.Z,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,H.jsx)(L.Z,{sx:{color:"error.main"},onClick:o,children:(0,H.jsx)(D.Z,{icon:"mi:delete"})})})]}));return(0,H.jsx)(H.Fragment,{children:w})}E.propTypes={setFilters:B().func,onDeleteRow:B().func,row:B().object,filters:B().object};var W=o(25202),q=o(99443);const z=[{id:"code",label:"Code"},{id:"name_english",label:"Name"},{id:"type",label:"Type"},{id:"status",label:"Status"},{id:"webpage",label:"Webpage"},{id:"phone",label:"Phone"},{id:"address",label:"Address"},{id:"",width:88}],M={name:"",status:"all"},N=[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}];function K(e){var n,o,i;let{stakeholderData:l,refetch:A}=e;const B=(0,O.x6)({defaultOrderBy:"code"}),T=(0,u.useRef)(),U=(0,S.K$)(),L=(0,I.S)(),[K,Q]=(0,u.useState)(M),{insuranseCosData:$,loading:G}=(0,t.Vc)(),J=null===$||void 0===$||null===(n=$.filter((e=>{var n;return!(null!==l&&void 0!==l&&null!==(n=l.insurance)&&void 0!==n&&n.some((n=>n._id===e._id)))})))||void 0===n?void 0:n.filter((e=>"active"===e.status)),V=!(!K.startDate||!K.endDate)&&K.startDate.getTime()>K.endDate.getTime(),Y=function(e){var n;let{inputData:o,comparator:i,filters:l,dateError:t}=e;const{status:a,name:r}=l,s=null===(n=o)||void 0===n?void 0:n.map(((e,n)=>[e,n]));var d,c;null===s||void 0===s||s.sort(((e,n)=>{const o=i(e[0],n[0]);return 0!==o?o:e[1]-n[1]})),o=null===s||void 0===s?void 0:s.map((e=>e[0])),r&&(o=null===(d=o)||void 0===d?void 0:d.filter((e=>{var n,o,i,l,t,a,s,d;return(null===e||void 0===e?void 0:e.name_english)&&-1!==(null===e||void 0===e||null===(n=e.name_english)||void 0===n?void 0:n.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(o=e.name_arabic)||void 0===o?void 0:o.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e||null===(i=e.type)||void 0===i?void 0:i.name_english)&&-1!==(null===e||void 0===e||null===(l=e.type)||void 0===l||null===(t=l.name_english)||void 0===t?void 0:t.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e||null===(a=e.type)||void 0===a?void 0:a.name_arabic)&&-1!==(null===e||void 0===e||null===(s=e.type)||void 0===s||null===(d=s.name_arabic)||void 0===d?void 0:d.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===r||JSON.stringify(e.code)===r})));"all"!==a&&(o=null===(c=o)||void 0===c?void 0:c.filter((e=>e.status===a)));return o}({inputData:null===l||void 0===l?void 0:l.insurance,comparator:(0,O.sQ)(B.order,B.orderBy),filters:K,dateError:V}),{t:X}=(0,P.qM)(),ee=null===Y||void 0===Y?void 0:Y.slice(B.page*B.rowsPerPage,B.page*B.rowsPerPage+B.rowsPerPage),ne=B.dense?52:72,oe=!(null===K||void 0===K||!K.name)||"all"!==K.status,ie=!(null!==Y&&void 0!==Y&&Y.length)&&oe||!(null!==Y&&void 0!==Y&&Y.length),le=(0,c.useReactToPrint)({content:()=>T.current}),te=(0,u.useCallback)((async e=>{if(l.insurance.some((n=>n._id===e)))return void(0,d.yv)("this company already exist",{variant:"error"});const n=[...l.insurance,e];await(0,k.Z)({method:"PATCH",path:Z.Hv.tables.stakeholder(null===l||void 0===l?void 0:l._id),data:{insurance:n}}),A(),B.onUpdatePageDeleteRow(null===ee||void 0===ee?void 0:ee.length)}),[null===ee||void 0===ee?void 0:ee.length,B,A,null===l||void 0===l?void 0:l._id,null===l||void 0===l?void 0:l.insurance]),ae=(0,u.useCallback)((async e=>{var n;const o=null===l||void 0===l||null===(n=l.insurance)||void 0===n?void 0:n.filter((n=>(null===n||void 0===n?void 0:n._id)!==e));await(0,k.Z)({method:"PATCH",path:Z.Hv.tables.stakeholder(null===l||void 0===l?void 0:l._id),data:{insurance:o}}),A(),B.onUpdatePageDeleteRow(null===ee||void 0===ee?void 0:ee.length)}),[null===ee||void 0===ee?void 0:ee.length,B,A,null===l||void 0===l?void 0:l._id,null===l||void 0===l?void 0:l.insurance]),re=(0,u.useCallback)(((e,n)=>{B.onResetPage(),Q((o=>({...o,[e]:n})))}),[B]),se=(0,u.useCallback)((()=>{Q(M)}),[]),de=(0,u.useCallback)(((e,n)=>{re("status",n)}),[re]),ce=(null===l||void 0===l?void 0:l.name_english)||"Stakeholder";return G?(0,H.jsx)(a.a,{}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(j.Z,{maxWidth:!U.themeStretch&&"lg",children:[(0,H.jsx)(F.Z,{heading:"".concat(ce," Insurance"),links:[{name:"dashboard",href:_.H.superadmin.root},{name:X("stakeholders"),href:_.H.superadmin.stakeholders.root},{name:X("".concat(ce," Insurance"))}],action:(0,H.jsx)(g.Z,{component:C.r,onClick:L.onOpen,variant:"contained",startIcon:(0,H.jsx)(D.Z,{icon:"mingcute:add-line"}),children:"New Insurance"}),sx:{mb:{xs:3,md:5}}}),(0,H.jsxs)(p.Z,{children:[(0,H.jsx)(h.Z,{value:K.status,onChange:de,sx:{px:2.5,boxShadow:e=>"inset 0 -2px 0 0 ".concat((0,x.Fq)(e.palette.grey[500],.08))},children:N.map((e=>{var n,o,i,t,a;return(0,H.jsx)(v.Z,{iconPosition:"end",value:e.value,label:e.label,icon:(0,H.jsxs)(y.Z,{variant:"all"===e.value||e.value===K.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&(null===l||void 0===l||null===(n=l.insurance)||void 0===n?void 0:n.length),"active"===e.value&&(null===l||void 0===l||null===(o=l.insurance)||void 0===o||null===(i=o.filter((e=>"active"===e.status)))||void 0===i?void 0:i.length),"inactive"===e.value&&(null===l||void 0===l||null===(t=l.insurance)||void 0===t||null===(a=t.filter((e=>"inactive"===e.status)))||void 0===a?void 0:a.length)]})},e.value)}))}),(0,H.jsx)(W.Z,{onPrint:le,filters:K,onFilters:re,onDownload:()=>{const e=null===Y||void 0===Y?void 0:Y.reduce(((e,n)=>{var o,i;return e.push({code:null===n||void 0===n?void 0:n.code,name:null===n||void 0===n?void 0:n.name_english,category:null===(o=n.category)||void 0===o?void 0:o.name_english,symptoms:null===(i=n.symptoms)||void 0===i?void 0:i.map((e=>null===e||void 0===e?void 0:e.name_english))}),e}),[]),n=r.P6.book_new(),o=r.P6.json_to_sheet(e);r.P6.book_append_sheet(n,o,"Sheet 1");const i=r.cW(n,{bookType:"xlsx",type:"array"}),l=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,s.saveAs)(l,"unitservicesTable.xlsx")},canReset:oe,onResetFilters:se}),oe&&(0,H.jsx)(q.Z,{filters:K,onFilters:re,onResetFilters:se,results:null===Y||void 0===Y?void 0:Y.length,sx:{p:2.5,pt:0}}),(0,H.jsx)(b.Z,{children:(0,H.jsx)(R.Z,{children:(0,H.jsxs)(m.Z,{ref:T,size:B.dense?"small":"medium",children:[(0,H.jsx)(O.K,{order:B.order,orderBy:B.orderBy,headLabel:z,rowCount:null===Y||void 0===Y?void 0:Y.length,numSelected:B.selected.length,onSort:B.onSort}),(0,H.jsxs)(w.Z,{children:[null===Y||void 0===Y||null===(o=Y.slice(B.page*B.rowsPerPage,B.page*B.rowsPerPage+B.rowsPerPage))||void 0===o?void 0:o.map((e=>(0,H.jsx)(E,{row:e,filters:K,setFilters:Q,onSelectRow:()=>B.onSelectRow(null===e||void 0===e?void 0:e._id),onDeleteRow:()=>ae(null===e||void 0===e?void 0:e._id)},null===e||void 0===e?void 0:e._id))),(0,H.jsx)(O.$W,{height:ne,emptyRows:(0,O.fQ)(B.page,B.rowsPerPage,null===l||void 0===l||null===(i=l.insurance)||void 0===i?void 0:i.length)}),(0,H.jsx)(O.et,{notFound:ie})]})]})})}),(0,H.jsx)(O.S_,{count:null===Y||void 0===Y?void 0:Y.length,page:B.page,rowsPerPage:B.rowsPerPage,onPageChange:B.onChangePage,onRowsPerPageChange:B.onChangeRowsPerPage,dense:B.dense,onChangeDense:B.onChangeDense})]})]}),(0,H.jsx)(I.Z,{open:L.open,onClose:L.onClose,arrow:"right-top",children:(0,H.jsx)("div",{style:{maxHeight:"150px",overflowY:"auto",scrollbarWidth:"thin",scrollbarColor:"darkgray lightgray"},children:null===J||void 0===J?void 0:J.map((e=>(0,H.jsx)(f.Z,{onClick:()=>te(e._id),children:null===e||void 0===e?void 0:e.name_english})))})})]})}function Q(){const e=(0,l.UO)(),{id:n}=e,{data:o,loading:r,refetch:s}=(0,t.Db)(n),d=(null===o||void 0===o?void 0:o.name_english)||"Stackeholder";return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(i.ql,{children:(0,H.jsxs)("title",{children:[" stakeholders: ",d," Insurance "]})}),r&&(0,H.jsx)(a.a,{}),!r&&(0,H.jsx)(K,{stakeholderData:o,refetch:s})]})}},25202:(e,n,o)=>{o.d(n,{Z:()=>p});var i=o(72791),l=o(36314),t=o(13838),a=o(82626),r=o(48550),s=o(13400),d=o(63466),c=o(76932),u=o(40268),v=o(24845),h=o(80184);function p(e){let{filters:n,onFilters:o,onPrint:p,onDownload:m,canReset:g,onResetFilters:x}=e;const f=(0,v.S)(),{t:j}=(0,c.qM)(),w=(0,i.useCallback)((e=>{o("name",e.target.value)}),[o]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(l.Z,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[(0,h.jsxs)(l.Z,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[(0,h.jsx)(r.Z,{fullWidth:!0,value:n.name,onChange:w,placeholder:j("Search name or number..."),InputProps:{startAdornment:(0,h.jsx)(d.Z,{position:"start",children:(0,h.jsx)(u.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),(0,h.jsx)(s.Z,{onClick:f.onOpen,children:(0,h.jsx)(u.Z,{icon:"eva:more-vertical-fill"})})]}),g&&(0,h.jsx)(t.Z,{color:"error",sx:{flexShrink:0},onClick:x,startIcon:(0,h.jsx)(u.Z,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]}),(0,h.jsxs)(v.Z,{open:f.open,onClose:f.onClose,arrow:"right-top",sx:{width:140},children:[(0,h.jsxs)(a.Z,{onClick:()=>{p(),f.onClose()},children:[(0,h.jsx)(u.Z,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),(0,h.jsxs)(a.Z,{onClick:()=>{m(),f.onClose()},children:[(0,h.jsx)(u.Z,{icon:"solar:import-bold"}),"Import"]})]})]})}},6385:(e,n,o)=>{o.d(n,{Z:()=>a});var i=o(55294),l=o(88329),t=o(33805);async function a(e){let{setData:n,setError:o,method:a,path:r,data:s}=e;const d="".concat(t.E0).concat(r),c=l.Z.get("user_token"),u=await(0,i.Z)({method:a,url:d,headers:{authorization:"Bearer ".concat(c)},data:s});return n&&n(u.data),o&&o(u.data),u}},88329:(e,n,o)=>{function i(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var i in o)e[i]=o[i]}return e}o.d(n,{Z:()=>l});var l=function e(n,o){function l(e,l,t){if("undefined"!==typeof document){"number"===typeof(t=i({},o,t)).expires&&(t.expires=new Date(Date.now()+864e5*t.expires)),t.expires&&(t.expires=t.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var r in t)t[r]&&(a+="; "+r,!0!==t[r]&&(a+="="+t[r].split(";")[0]));return document.cookie=e+"="+n.write(l,e)+a}}return Object.create({set:l,get:function(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var o=document.cookie?document.cookie.split("; "):[],i={},l=0;l<o.length;l++){var t=o[l].split("="),a=t.slice(1).join("=");try{var r=decodeURIComponent(t[0]);if(i[r]=n.read(a,r),e===r)break}catch(s){}}return e?i[e]:i}},remove:function(e,n){l(e,"",i({},n,{expires:-1}))},withAttributes:function(n){return e(this.converter,i({},this.attributes,n))},withConverter:function(n){return e(i({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(n)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}}]);
//# sourceMappingURL=4966.2d442a64.chunk.js.map
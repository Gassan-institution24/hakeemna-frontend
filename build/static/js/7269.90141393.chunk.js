"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[7269],{38563:(e,n,a)=>{a.d(n,{Z:()=>m});var l=a(16029),i=a(50533),t=a(53767),r=a(4567),o=a(93517),s=a(4419),d=a(80184);function c(e){let{link:n,activeLast:a,disabled:t}=e;const r={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...t&&!a&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},o=(0,d.jsxs)(d.Fragment,{children:[n.icon&&(0,d.jsx)(l.Z,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:n.icon}),n.name]});return n.href?(0,d.jsx)(i.Z,{component:s.r,href:n.href,sx:r,children:o}):(0,d.jsxs)(l.Z,{sx:r,children:[" ",o," "]})}function m(e){let{links:n,action:a,heading:s,moreLink:m,activeLast:u,sx:v,...h}=e;const g=n&&n[n.length-1].name;return(0,d.jsxs)(l.Z,{sx:{...v},children:[(0,d.jsxs)(t.Z,{direction:"row",alignItems:"center",children:[(0,d.jsxs)(l.Z,{sx:{flexGrow:1,display:"flex",gap:{md:3},alignItems:{md:"center"},flexDirection:{xs:"column",md:"row"}},children:[s&&(0,d.jsx)(r.Z,{textTransform:"capitalize",variant:"h4",gutterBottom:!0,children:s}),n&&!!n.length&&(0,d.jsx)(o.Z,{separator:(0,d.jsx)(p,{}),...h,children:null===n||void 0===n?void 0:n.map(((e,n)=>(0,d.jsx)(c,{link:e,activeLast:u,disabled:e.name===g},n)))})]}),a&&(0,d.jsxs)(l.Z,{sx:{flexShrink:0,textTransform:"capitalize"},children:[" ",a," "]})]}),!!m&&(0,d.jsx)(l.Z,{sx:{mt:2},children:m.map(((e,n)=>(0,d.jsx)(i.Z,{href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},n)))})]})}function p(){return(0,d.jsx)(l.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}},73379:(e,n,a)=>{a.d(n,{Z:()=>l.Z});var l=a(38563)},22595:(e,n,a)=>{a.d(n,{Z:()=>R});var l=a(8007),i=a(61134),t=a(24413),r=a(72791),o=a(44695),s=a(16029),d=a(57621),c=a(53767),m=a(24308),p=a(13400),u=a(12258),v=a(63466),h=a(63515),g=a(82626),x=a(94721),_=a(4567),b=a(38072),y=a(19208),f=a(22459),Z=a(93971),j=a(66664),w=a(99116),C=a(8976),k=a(81164),S=a(66630),P=a(40268),I=a(32869),q=a(24461),T=a(80184);function R(e){var n,a,R,A,M;let{currentTable:B}=e;const L=(0,y.tv)(),{t:z}=(0,k.qM)(),{currentLang:E}=(0,k.nt)(),F="ar"===E.value,{user:H}=(0,C.E)(),{countriesData:N}=(0,S.Rpj)(),{employeeTypesData:O}=(0,S.Fg6)(),{specialtiesData:V}=(0,S._5i)(),{departmentsData:D}=(0,S.PbZ)(null===H||void 0===H||null===(n=H.employee)||void 0===n||null===(a=n.employee_engagements)||void 0===a||null===(R=a[null===H||void 0===H||null===(M=H.employee)||void 0===M?void 0:M.selected_engagement])||void 0===R||null===(A=R.unit_service)||void 0===A?void 0:A._id),{enqueueSnackbar:G}=(0,I.useSnackbar)(),{handleAddNew:U}=(0,Z.A)(),[$,W]=(0,r.useState)(""),X=l.Ry().shape({department:l.Z_().nullable(),employee_type:l.Z_().required(z("required field")),email:l.Z_().required(z("required field")),name_english:l.Z_().required(z("required field")),name_arabic:l.Z_().required(z("required field")),nationality:l.Z_().required(z("required field")),address:l.Z_(),phone:l.Z_().required(z("required field")).test("is-valid-phone",z("Invalid phone number"),(e=>(0,t.Cs)(e))),speciality:l.Z_().nullable(),gender:l.Z_().required(z("required field")),birth_date:l.Z_(),visibility_US_page:l.Xg(),visibility_online_appointment:l.Xg(),password:l.Z_().min(8,"".concat(z("must be at least")," 8")),confirmPassword:l.Z_().oneOf([l.iH("password"),null],z("Passwords must match")).min(8,"".concat(z("must be at least")," 8"))}),Y=(0,r.useMemo)((()=>{var e,n,a,l,i;return{unit_service:(null===B||void 0===B||null===(e=B.unit_service)||void 0===e?void 0:e._id)||(null===H||void 0===H||null===(n=H.employee)||void 0===n||null===(a=n.employee_engagements[null===H||void 0===H?void 0:H.employee.selected_engagement])||void 0===a?void 0:a.unit_service._id),department:(null===B||void 0===B||null===(l=B.department)||void 0===l?void 0:l._id)||"",employee_type:(null===B||void 0===B||null===(i=B.employee_type)||void 0===i?void 0:i._id)||"",email:(null===B||void 0===B?void 0:B.email)||"",name_english:(null===B||void 0===B?void 0:B.name_english)||"",name_arabic:(null===B||void 0===B?void 0:B.name_arabic)||"",nationality:(null===B||void 0===B?void 0:B.nationality)||"",address:(null===B||void 0===B?void 0:B.address)||"",phone:(null===B||void 0===B?void 0:B.phone)||"",speciality:(null===B||void 0===B?void 0:B.speciality)||"",gender:(null===B||void 0===B?void 0:B.gender)||"",visibility_US_page:(null===B||void 0===B?void 0:B.visibility_US_page)||!1,visibility_online_appointment:(null===B||void 0===B?void 0:B.visibility_online_appointment)||!1,birth_date:(null===B||void 0===B?void 0:B.birth_date)||"",password:(null===B||void 0===B?void 0:B.password)||"",confirmPassword:(null===B||void 0===B?void 0:B.confirmPassword)||""}}),[B,null===H||void 0===H?void 0:H.employee]),J=(0,f.k)(),K=(0,i.cI)({mode:"onTouched",resolver:(0,o.X)(X),defaultValues:Y}),Q=e=>{/^[a-zA-Z0-9\s,@#$!*_\-&^%.()]*$/.test(e.target.value)&&K.setValue(e.target.name,e.target.value,{shouldValidate:!0})},{reset:ee,handleSubmit:ne,formState:{isSubmitting:ae,errors:le}}=K;(0,r.useEffect)((()=>{Object.keys(le).length&&Object.keys(le).forEach(((e,n)=>{var a;return G("".concat(e,": ").concat((null===le||void 0===le||null===(a=le[e])||void 0===a?void 0:a.message)||"error"),{variant:"error"})}))}),[le,G]);const ie=ne((async e=>{try{var n,a,l,i;const t=await j.ZP.post(j.Hv.auth.register,{role:"employee",userName:e.name_english,...e});w.Z.emit("created",{data:e,user:H,link:b.H.unitservice.employees.root,msg:"created an employee <strong>".concat(e.name_english||"","</strong>")}),ee(),L.push(null!==(n=t.data)&&void 0!==n&&null!==(a=n.engagement)&&void 0!==a&&a._id?b.H.unitservice.employees.acl(null===(l=t.data)||void 0===l||null===(i=l.engagement)||void 0===i?void 0:i._id):b.H.unitservice.employees.root),G(z(B?"update success!":"create success!"))}catch(t){console.error(t),G(F&&"".concat(t.arabic_message)||"".concat(t.message),{variant:"error"}),W("string"===typeof t?t:t.message)}}));return(0,T.jsx)(q.ZP,{methods:K,onSubmit:ie,children:(0,T.jsx)(m.Z,{container:!0,spacing:3,children:(0,T.jsx)(m.Z,{xs:12,maxWidth:"md",children:(0,T.jsxs)(d.Z,{sx:{p:3},children:[!!$&&(0,T.jsx)(h.Z,{sx:{mb:3},severity:"error",children:(0,T.jsx)("div",{dangerouslySetInnerHTML:{__html:$}})}),(0,T.jsxs)(s.Z,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,T.jsx)(q.au,{onChange:Q,name:"name_english",label:"".concat(z("Full name in English")," *")}),(0,T.jsx)(q.au,{onChange:e=>{/^[\u0600-\u06FF0-9\s!@#$%^&*_\-()]*$/.test(e.target.value)&&K.setValue(e.target.name,e.target.value,{shouldValidate:!0})},name:"name_arabic",label:"".concat(z("Full name in Arabic")," *")}),(0,T.jsx)(q.Y_,{name:"phone",label:z("phone number")}),(0,T.jsx)(q.Cc,{name:"nationality",label:"".concat(z("nationality")," *"),children:N.map(((e,n)=>(0,T.jsx)(g.Z,{lang:"ar",value:e._id,children:F?e.name_arabic:e.name_english},n)))}),(0,T.jsxs)(q.Cc,{name:"department",label:z("department"),children:[D.map(((e,n)=>(0,T.jsx)(g.Z,{lang:"ar",value:e._id,children:F?e.name_arabic:e.name_english},n))),(0,T.jsx)(x.Z,{}),(0,T.jsxs)(g.Z,{lang:"ar",sx:{display:"flex",justifyContent:"flex-end",gap:1,fontWeight:600},onClick:()=>U(b.H.unitservice.departments.new),children:[(0,T.jsx)(_.Z,{variant:"body2",sx:{color:"info.main"},children:z("Add new")}),(0,T.jsx)(P.Z,{icon:"material-symbols:new-window-sharp"})]})]}),(0,T.jsx)(q.Fl,{name:"employee_type",label:z("employee type"),options:O.map((e=>e._id)),getOptionLabel:e=>{var n;return null===(n=O.find((n=>n._id===e)))||void 0===n?void 0:n[F?"name_arabic":"name_english"]},renderOption:(e,n,a)=>{var l;return(0,r.createElement)("li",{...e,key:a,value:n},null===(l=O.find((e=>e._id===n)))||void 0===l?void 0:l[F?"name_arabic":"name_english"])}}),(0,T.jsx)(q.Fl,{name:"speciality",label:"".concat(z("speciality")," *"),options:V.map((e=>e._id)),getOptionLabel:e=>{var n;return null===(n=V.find((n=>n._id===e)))||void 0===n?void 0:n[F?"name_arabic":"name_english"]},renderOption:(e,n,a)=>{var l;return(0,r.createElement)("li",{...e,key:a,value:n},null===(l=V.find((e=>e._id===n)))||void 0===l?void 0:l[F?"name_arabic":"name_english"])}}),(0,T.jsxs)(q.Cc,{name:"gender",label:"".concat(z("gender")," *"),children:[(0,T.jsx)(g.Z,{lang:"ar",value:"male",children:z("male")}),(0,T.jsx)(g.Z,{lang:"ar",value:"female",children:z("female")})]}),(0,T.jsx)(q.jb,{sx:{px:2},name:"visibility_US_page",label:(0,T.jsx)(_.Z,{sx:{fontSize:12},children:z("visible on online page")})}),(0,T.jsx)(q.jb,{sx:{px:2},name:"visibility_online_appointment",label:(0,T.jsx)(_.Z,{sx:{fontSize:12},children:z("visible in online appointments")})})]}),(0,T.jsxs)(s.Z,{rowGap:3,columnGap:2,display:"grid",mt:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"},children:[(0,T.jsx)(q.au,{onChange:Q,name:"address",label:z("address")}),(0,T.jsx)(q.au,{name:"email",label:"".concat(z("email")," *")}),(0,T.jsx)(q.au,{name:"password",label:"".concat(z("password")," *"),type:J.value?"text":"password",InputProps:{endAdornment:(0,T.jsx)(v.Z,{position:"end",children:(0,T.jsx)(p.Z,{onClick:J.onToggle,edge:"end",children:(0,T.jsx)(P.Z,{icon:J.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),(0,T.jsx)(q.au,{name:"confirmPassword",label:"".concat(z("confirm password")," *"),type:J.value?"text":"password",InputProps:{endAdornment:(0,T.jsx)(v.Z,{position:"end",children:(0,T.jsx)(p.Z,{onClick:J.onToggle,edge:"end",children:(0,T.jsx)(P.Z,{icon:J.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}})]}),(0,T.jsx)(c.Z,{alignItems:"flex-end",sx:{mt:3},children:(0,T.jsx)(u.Z,{type:"submit",tabIndex:-1,variant:"contained",loading:ae,children:z(B?"save changes":"create")})})]})})})})}},93517:(e,n,a)=>{a.d(n,{Z:()=>q});var l=a(87462),i=a(63366),t=a(72791),r=(a(57441),a(59278)),o=a(50385),s=a(20838),d=a(66934),c=a(31402),m=a(4567),p=a(54131),u=a(74223),v=a(80184);const h=(0,u.Z)((0,v.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var g=a(95080);const x=["slots","slotProps"],_=(0,d.ZP)(g.Z)((e=>{let{theme:n}=e;return(0,l.Z)({display:"flex",marginLeft:"calc(".concat(n.spacing(1)," * 0.5)"),marginRight:"calc(".concat(n.spacing(1)," * 0.5)")},"light"===n.palette.mode?{backgroundColor:n.palette.grey[100],color:n.palette.grey[700]}:{backgroundColor:n.palette.grey[700],color:n.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,l.Z)({},"light"===n.palette.mode?{backgroundColor:n.palette.grey[200]}:{backgroundColor:n.palette.grey[600]}),"&:active":(0,l.Z)({boxShadow:n.shadows[0]},"light"===n.palette.mode?{backgroundColor:(0,p._4)(n.palette.grey[200],.12)}:{backgroundColor:(0,p._4)(n.palette.grey[600],.12)})})})),b=(0,d.ZP)(h)({width:24,height:16});const y=function(e){const{slots:n={},slotProps:a={}}=e,t=(0,i.Z)(e,x),r=e;return(0,v.jsx)("li",{children:(0,v.jsx)(_,(0,l.Z)({focusRipple:!0},t,{ownerState:r,children:(0,v.jsx)(b,(0,l.Z)({as:n.CollapsedIcon,ownerState:r},a.collapsedIcon))}))})};var f=a(59703),Z=a(64657);function j(e){return(0,Z.ZP)("MuiBreadcrumbs",e)}const w=(0,f.Z)("MuiBreadcrumbs",["root","ol","li","separator"]),C=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],k=(0,d.ZP)(m.Z,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,n)=>[{["& .".concat(w.li)]:n.li},n.root]})({}),S=(0,d.ZP)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,n)=>n.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),P=(0,d.ZP)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,n)=>n.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function I(e,n,a,l){return e.reduce(((i,t,r)=>(r<e.length-1?i=i.concat(t,(0,v.jsx)(P,{"aria-hidden":!0,className:n,ownerState:l,children:a},"separator-".concat(r))):i.push(t),i)),[])}const q=t.forwardRef((function(e,n){const a=(0,c.Z)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:m,component:p="nav",slots:u={},slotProps:h={},expandText:g="Show path",itemsAfterCollapse:x=1,itemsBeforeCollapse:_=1,maxItems:b=8,separator:f="/"}=a,Z=(0,i.Z)(a,C),[w,P]=t.useState(!1),q=(0,l.Z)({},a,{component:p,expanded:w,expandText:g,itemsAfterCollapse:x,itemsBeforeCollapse:_,maxItems:b,separator:f}),T=(e=>{const{classes:n}=e;return(0,s.Z)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},j,n)})(q),R=(0,o.y)({elementType:u.CollapsedIcon,externalSlotProps:h.collapsedIcon,ownerState:q}),A=t.useRef(null),M=t.Children.toArray(d).filter((e=>t.isValidElement(e))).map(((e,n)=>(0,v.jsx)("li",{className:T.li,children:e},"child-".concat(n))));return(0,v.jsx)(k,(0,l.Z)({ref:n,component:p,color:"text.secondary",className:(0,r.Z)(T.root,m),ownerState:q},Z,{children:(0,v.jsx)(S,{className:T.ol,ref:A,ownerState:q,children:I(w||b&&M.length<=b?M:(e=>_+x>=e.length?e:[...e.slice(0,_),(0,v.jsx)(y,{"aria-label":g,slots:{CollapsedIcon:u.CollapsedIcon},slotProps:{collapsedIcon:R},onClick:()=>{P(!0);const e=A.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-x,e.length)])(M),T.separator,f,q)})}))}))}}]);
//# sourceMappingURL=7269.90141393.chunk.js.map
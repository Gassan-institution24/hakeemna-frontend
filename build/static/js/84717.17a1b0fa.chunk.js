"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[84717],{31821:(e,n,l)=>{l.d(n,{A:()=>j});l(65043);var i=l(80899),t=l(24858),a=l(18403),o=l(83462),s=l(81e3),r=l(49633),d=l(4219),c=l(29347),u=l(35316),p=l(31673),h=l(75139),m=l(60778),g=l(94857),v=l(59699),x=l(70579);function j(e){var n,l,j,b,y,f;let{open:A,onClose:_,refetch:w,analysisData:P}=e;const{user:C}=(0,h.Z)(),{t:k}=(0,m.WD)(),{currentLang:S}=(0,m.jc)(),D="ar"===S.value,{enqueueSnackbar:W}=(0,g.dh)(),M=i.Ik().shape({file:i.gl(),name:i.Yj().required("File name is required"),note:i.Yj().nullable(),analysis:i.YO(),appointment:i.Yj().nullable()}),R={file:null,name:"",note:"",patient:null===P||void 0===P?void 0:P.patient,appointment:null===P||void 0===P?void 0:P.appointment,unit_service:null===C||void 0===C||null===(n=C.employee)||void 0===n||null===(l=n.employee_engagements)||void 0===l||null===(j=l[C.employee.selected_engagement])||void 0===j?void 0:j.unit_service._id,employee:null===C||void 0===C||null===(b=C.employee)||void 0===b||null===(y=b.employee_engagements)||void 0===y||null===(f=y[C.employee.selected_engagement])||void 0===f?void 0:f._id,analysis:[]},T=(0,t.mN)({mode:"all",resolver:(0,a.t)(M),defaultValues:R}),{setValue:L,reset:I,handleSubmit:Y,formState:{isSubmitting:F}}=T;return(0,x.jsx)(o.A,{open:A,onClose:_,children:(0,x.jsxs)(v.Ay,{methods:T,onSubmit:Y((async e=>{const n={...e,type:"analysis",description:e.note},l=new FormData;Object.keys(n).forEach((e=>{Array.isArray(n[e])?n[e].forEach((n=>{l.append(e,n)})):l.append(e,n[e])}));try{await p.Ay.post(p.vZ.medicalreports.all,l),W("uploaded sucessfully"),_(),I(),w()}catch(i){W(D&&`${i.arabic_message}`||`${i.message}`,{variant:"error"})}})),children:[(0,x.jsx)(d.A,{sx:{mb:2},children:k("upload medical analysis")}),(0,x.jsx)(u.A,{children:(0,x.jsxs)(s.A,{sx:{p:2},children:[(0,x.jsx)(v.o3,{name:"name",label:k("File name"),sx:{mb:2}}),(0,x.jsx)(v.Y4,{multiple:!0,fullWidth:!0,name:"file",sx:{mb:2},variant:"outlined",onDrop:e=>{L("file",e)}}),(0,x.jsx)(v.o3,{name:"note",label:k("More information")})]})}),(0,x.jsxs)(c.A,{children:[(0,x.jsx)(r.A,{onClick:_,variant:"outlined",color:"inherit",children:k("Cancel")}),(0,x.jsx)(r.A,{type:"submit",loading:F,variant:"contained",children:k("Upload")})]})]})})}},33546:(e,n,l)=>{l.d(n,{A:()=>r});var i=l(81e3),t=l(74600),a=l(90310),o=l(94496),s=l(70579);function r(e){let{title:n,imgUrl:l,action:r,filled:d,description:c,sx:u,...p}=e;return(0,s.jsxs)(t.A,{flexGrow:1,alignItems:"center",justifyContent:"center",sx:{px:3,height:1,...d&&{borderRadius:2,bgcolor:e=>(0,a.X4)(e.palette.grey[500],.04),border:e=>`dashed 1px ${(0,a.X4)(e.palette.grey[500],.08)}`},...u},...p,children:[(0,s.jsx)(i.A,{component:"img",alt:"empty content",src:l||"/assets/icons/empty/ic_content.svg",sx:{width:1,maxWidth:160}}),n&&(0,s.jsx)(o.A,{variant:"h6",component:"span",sx:{mt:1,color:"text.disabled",textAlign:"center"},children:n}),c&&(0,s.jsx)(o.A,{variant:"caption",sx:{mt:1,color:"text.disabled",textAlign:"center"},children:c}),r&&r]})}},44847:(e,n,l)=>{l.d(n,{A:()=>i.A});var i=l(33546)},75950:(e,n,l)=>{function i(e,n,l){return null===e[l]?1:null===n[l]||n[l]<e[l]?-1:n[l]>e[l]?1:0}function t(e,n){return"desc"===e?(e,l)=>i(e,l,n):(e,l)=>-i(e,l,n)}l.d(n,{er:()=>j,Sm:()=>p,We:()=>k,Uv:()=>f,hz:()=>t,K2:()=>o});var a=l(65043);function o(e){const[n,l]=(0,a.useState)(!(null===e||void 0===e||!e.defaultDense)),[i,t]=(0,a.useState)((null===e||void 0===e?void 0:e.defaultCurrentPage)||0),[o,s]=(0,a.useState)((null===e||void 0===e?void 0:e.defaultOrderBy)||"created_at"),[r,d]=(0,a.useState)((null===e||void 0===e?void 0:e.defaultRowsPerPage)||10),[c,u]=(0,a.useState)((null===e||void 0===e?void 0:e.defaultOrder)||"desc"),[p,h]=(0,a.useState)((null===e||void 0===e?void 0:e.defaultSelected)||[]),m=(0,a.useCallback)((e=>{""!==e&&(u(o===e&&"asc"===c?"desc":"asc"),s(e))}),[c,o]),g=(0,a.useCallback)((e=>{const n=p.includes(e)?p.filter((n=>n!==e)):[...p,e];h(n)}),[p]),v=(0,a.useCallback)((e=>{t(0),d(parseInt(e.target.value,10))}),[]),x=(0,a.useCallback)((e=>{l(e.target.checked)}),[]),j=(0,a.useCallback)(((e,n)=>{h(e?n:[])}),[]),b=(0,a.useCallback)(((e,n)=>{t(n)}),[]),y=(0,a.useCallback)((()=>{t(0)}),[]),f=(0,a.useCallback)((e=>{h([]),i&&e<2&&t(i-1)}),[i]),A=(0,a.useCallback)((e=>{let{totalRows:n,totalRowsInPage:l,totalRowsFiltered:a}=e;const o=p.length;if(h([]),i)if(o===l)t(i-1);else if(o===a)t(0);else if(o>l){const e=Math.ceil((n-o)/r)-1;t(e)}}),[i,r,p.length]);return{dense:n,order:c,page:i,orderBy:o,rowsPerPage:r,selected:p,onSelectRow:g,onSelectAllRows:j,onSort:m,onChangePage:b,onChangeDense:x,onResetPage:y,onChangeRowsPerPage:v,onUpdatePageDeleteRow:f,onUpdatePageDeleteRows:A,setPage:t,setDense:l,setOrder:u,setOrderBy:s,setSelected:h,setRowsPerPage:d}}var s=l(68738),r=l(39652),d=l(60778),c=l(44847),u=l(70579);function p(e){let{notFound:n,sx:l}=e;const{t:i}=(0,d.WD)();return(0,u.jsx)(s.A,{children:n?(0,u.jsx)(r.A,{colSpan:12,children:(0,u.jsx)(c.A,{filled:!0,title:i("No Data"),sx:{py:10,...l}})}):(0,u.jsx)(r.A,{colSpan:12,sx:{p:0}})})}var h=l(81e3),m=l(1273),g=l(84882),v=l(58093);const x={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function j(e){let{order:n,orderBy:l,rowCount:i=0,headLabel:t,numSelected:a=0,onSort:o,onSelectAllRows:c,sx:p}=e;const{t:j}=(0,d.WD)();return(0,u.jsx)(g.A,{sx:p,children:(0,u.jsxs)(s.A,{children:[c&&(0,u.jsx)(r.A,{padding:"checkbox",children:(0,u.jsx)(m.A,{indeterminate:!!a&&a<i,checked:!!i&&a===i,onChange:e=>c(e.target.checked)})}),t.map(((e,i)=>(0,u.jsx)(r.A,{align:e.align||"center",sortDirection:l===e.id&&n,sx:{width:e.width,minWidth:e.minWidth},children:o?(0,u.jsxs)(v.A,{hideSortIcon:!0,active:l===e.id,direction:l===e.id?n:"asc",onClick:()=>o(e.id),sx:{textTransform:"capitalize"},children:[j(e.label),l===e.id?(0,u.jsx)(h.A,{sx:{...x},children:"desc"===n?"sorted descending":"sorted ascending"}):null]}):j(e.label)},i)))]})})}var b=l(74600),y=l(94496);function f(e){let{dense:n,action:l,rowCount:i,numSelected:t,onSelectAllRows:a,sx:o,color:s,...r}=e;const{t:c}=(0,d.WD)();return t?(0,u.jsxs)(b.A,{direction:"row",alignItems:"center",sx:{pl:1,pr:2,top:0,left:0,width:1,zIndex:9,height:58,position:"absolute",bgcolor:`${s}.lighter`,...n&&{height:38},...o},...r,children:[(0,u.jsx)(m.A,{indeterminate:!!t&&t<i,checked:!!i&&t===i,onChange:e=>a(e.target.checked)}),(0,u.jsxs)(y.A,{variant:"subtitle2",sx:{ml:2,flexGrow:1,color:`${s}.main`,...n&&{ml:3}},children:[t," ",c("selected")]}),l&&l]}):null}var A=l(19042),_=l(72221),w=l(94814),P=l(79266),C=l(99784);function k(e){let{dense:n,count:l,page:i,onChangeDense:t,rowsPerPage:a,setPage:o,rowsPerPageOptions:s=[5,10,25,50],sx:r,...c}=e;const{t:p}=(0,d.WD)();return(0,u.jsxs)(h.A,{sx:{position:"relative",...r},children:[(0,u.jsx)(P.A,{showFirstButton:!0,showLastButton:!0,rowsPerPageOptions:s,component:"div",count:l,page:i,rowsPerPage:a,...c,sx:{borderTopColor:"transparent"}}),t&&(0,u.jsx)(C.A,{label:p("dense"),control:(0,u.jsx)(A.A,{checked:n,onChange:t}),sx:{pl:2,py:1.5,top:0,position:{sm:"absolute"}}}),o&&(0,u.jsx)(C.A,{label:p("page"),control:(0,u.jsx)(_.A,{value:i,onChange:e=>o(e.target.value),variant:"filled",sx:{height:0,width:68,mr:1,backgroundColor:"white",".MuiSelect-select":{paddingTop:1,paddingBottom:1,lineHeight:"40px"}},children:Array.from({length:Math.ceil(l/a)},((e,n)=>(0,u.jsx)(w.A,{value:n,children:n+1},n)))}),sx:{ml:18,my:2,top:5,position:{sm:"absolute"}}})]})}},84717:(e,n,l)=>{l.r(n),l.d(n,{default:()=>he});var i=l(29490),t=l(60778),a=l(73216),o=l(65043),s=l(77224),r=l(12110),d=l(74600),c=l(81045),u=l(94496),p=l(81e3),h=l(29013),m=l(40360),g=l(7625),v=l(59331),x=l(68342),j=l(39722),b=l(85792),y=l(20448),f=l(88110),A=l(88446),_=l(57442),w=l(75139),P=l(70579);function C(e){var n,l,i,a,o;let{patient:c}=e;const{t:p}=(0,t.WD)(),{user:h}=(0,w.Z)(),{data:m}=(0,g.gmm)({unit_service:null===h||void 0===h||null===(n=h.employee)||void 0===n||null===(l=n.employee_engagements)||void 0===l||null===(i=l[h.employee.selected_engagement])||void 0===i||null===(a=i.unit_service)||void 0===a?void 0:a._id,patient:null===c||void 0===c||null===(o=c.patient)||void 0===o?void 0:o._id,unit_service_patient:null===c||void 0===c?void 0:c._id});return(0,P.jsx)(s.A,{maxWidth:"xl",children:null===m||void 0===m?void 0:m.map(((e,n)=>{var l;return(0,P.jsxs)(r.A,{sx:{py:3,px:5,mb:2},children:[(0,P.jsx)(d.A,{direction:"row",justifyContent:"flex-end",children:(0,P.jsx)(u.A,{variant:"subtitle2",children:(0,_.ts)(e.created_at)})}),(0,P.jsxs)(d.A,{gap:1,mt:1,ml:1,children:[(0,P.jsx)(u.A,{textTransform:"none",variant:"body2",dangerouslySetInnerHTML:{__html:e.description}}),(0,P.jsx)(d.A,{direction:"row",gap:1,children:null===(l=e.file)||void 0===l?void 0:l.map((e=>(0,P.jsx)(A.A,{href:e,target:"_blank",sx:{fontSize:14},children:e.name||p("file")})))})]})]},n)}))})}var k=l(80899),S=l(24858),D=l(18403),W=l(94113),M=l(94814),R=l(22075),T=l(84284),L=l(38246),I=l(31673),Y=l(94857),F=l(59699);function O(e){var n,l,i;let{patient:a}=e;const{enqueueSnackbar:s}=(0,Y.dh)(),{countriesData:c}=(0,g.oOq)({select:"name_english name_arabic"}),{t:u}=(0,t.WD)(),[h,m]=(0,o.useState)(a.mobile_num1),[v,x]=(0,o.useState)(a.mobile_num2),j=k.Ik().shape({name_english:k.Yj(),name_arabic:k.Yj(),email:k.Yj(),height:k.Yj(),weight:k.Yj(),mobile_num1:k.Yj(),mobile_num2:k.Yj(),is_on_eating_diet:k.Yj().nullable(),nationality:k.Yj().nullable(),country:k.Yj().nullable(),gender:k.Yj().nullable(),birth_date:k.gl().nullable(),city:k.Yj().nullable(),address:k.Yj(),sport_exercises:k.Yj(),smoking:k.Yj()}),b={name_english:(null===a||void 0===a?void 0:a.name_english)||"",name_arabic:(null===a||void 0===a?void 0:a.name_arabic)||"",email:(null===a||void 0===a?void 0:a.email)||"",gender:(null===a||void 0===a?void 0:a.gender)||"",birth_date:null!==a&&void 0!==a&&a.birth_date?new Date(a.birth_date):null,height:(null===a||void 0===a?void 0:a.height)||"",weight:(null===a||void 0===a?void 0:a.weight)||"",mobile_num1:(null===a||void 0===a?void 0:a.mobile_num1)||"",mobile_num2:(null===a||void 0===a?void 0:a.mobile_num2)||"",nationality:(null===a||void 0===a||null===(n=a.nationality)||void 0===n?void 0:n._id)||(null===a||void 0===a?void 0:a.nationality)||null,country:(null===a||void 0===a||null===(l=a.country)||void 0===l?void 0:l._id)||(null===a||void 0===a?void 0:a.country)||null,city:(null===a||void 0===a||null===(i=a.city)||void 0===i?void 0:i._id)||(null===a||void 0===a?void 0:a.city)||null,address:(null===a||void 0===a?void 0:a.address)||"",sport_exercises:(null===a||void 0===a?void 0:a.sport_exercises)||"",smoking:(null===a||void 0===a?void 0:a.smoking)||"",other_medication_notes:(null===a||void 0===a?void 0:a.other_medication_notes)||""},y=(0,S.mN)({mode:"all",resolver:(0,D.t)(j),defaultValues:b}),{handleSubmit:f,control:A,watch:_,formState:{isSubmitting:w}}=y,{tableData:C}=(0,g.RmE)(_().country,{select:"name_english name_arabic"});return(0,P.jsx)(F.Ay,{methods:y,onSubmit:f((async e=>{try{await I.Ay.patch(`${I.vZ.usPatients.one(null===a||void 0===a?void 0:a._id)}`,e),s(`${u("Profile updated successfully")}`,{variant:"success"}),setTimeout((()=>{window.location.reload()}),1e3)}catch(n){s("string"===typeof n?n:n.message,{variant:"error"})}})),children:(0,P.jsx)(R.A,{container:!0,spacing:3,children:(0,P.jsx)(R.A,{xs:12,md:8,children:(0,P.jsxs)(r.A,{sx:{p:3},children:[(0,P.jsxs)(p.A,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,P.jsx)(F.o3,{name:"name_english",label:u("name in english"),onChange:e=>{/^[a-zA-Z0-9\s,@#$!*_\-&^%.()]*$/.test(e.target.value)&&y.setValue(e.target.name,e.target.value,{shouldValidate:!0})}}),(0,P.jsx)(F.o3,{name:"name_arabic",label:u("Name in arabic"),onChange:e=>{/^[\u0600-\u06FF0-9\s!@#$%^&*_\-().]*$/.test(e.target.value)&&y.setValue(e.target.name,e.target.value,{shouldValidate:!0})}}),(0,P.jsx)(W.fD,{label:u("Mobile Number"),forceCallingCode:!0,defaultCountry:"JO",value:h,onChange:e=>{(0,W.l0)(e),m(e),y.setValue("mobile_num1",e)}}),(0,P.jsx)(W.fD,{label:u("Alternative Mobile Number"),forceCallingCode:!0,defaultCountry:"JO",value:v,onChange:e=>{(0,W.l0)(e),x(e),y.setValue("mobile_num2",e)}}),(0,P.jsx)(F.o3,{name:"email",label:u("Email Address"),disabled:!0}),(0,P.jsx)(F.tX,{label:u("nationality"),fullWidth:!0,name:"nationality",InputLabelProps:{shrink:!0},PaperPropsSx:{textTransform:"capitalize"},children:c.map(((e,n)=>(0,P.jsx)(M.A,{lang:"ar",value:e._id,children:e.name_english},n)))}),(0,P.jsx)(F.tX,{label:u("residence country"),fullWidth:!0,name:"country",InputLabelProps:{shrink:!0},PaperPropsSx:{textTransform:"capitalize"},children:c.map(((e,n)=>(0,P.jsx)(M.A,{lang:"ar",value:e._id,children:e.name_english},n)))}),(0,P.jsx)(F.tX,{label:u("city"),fullWidth:!0,name:"city",InputLabelProps:{shrink:!0},PaperPropsSx:{textTransform:"capitalize"},children:C.map(((e,n)=>(0,P.jsx)(M.A,{lang:"ar",value:e._id,children:e.name_english},n)))}),(0,P.jsx)(F.o3,{name:"address",label:u("Address")}),(0,P.jsx)(F.tX,{label:u("gender"),fullWidth:!0,name:"gender",InputLabelProps:{shrink:!0},PaperPropsSx:{textTransform:"capitalize"},children:["male","female"].map(((e,n)=>(0,P.jsx)(M.A,{lang:"ar",value:e,children:e},n)))}),(0,P.jsx)(S.xI,{name:"birth_date",control:A,render:e=>{let{field:n,fieldState:{error:l}}=e;return(0,P.jsx)(T.l,{...n,label:u("birth date"),sx:{mb:2},slotProps:{textField:{fullWidth:!0,error:!!l,helperText:null===l||void 0===l?void 0:l.message}}})}}),(0,P.jsx)(F.o3,{name:"height",label:(0,P.jsxs)("span",{children:[u("Height"),(0,P.jsx)("span",{style:{color:"green",fontWeight:600},children:"/"})," ",u("cm")]})}),(0,P.jsx)(F.o3,{name:"weight",label:(0,P.jsxs)("span",{children:[u("Weight"),(0,P.jsx)("span",{style:{color:"green",fontWeight:600},children:"/"})," ",u("kg")]})}),(0,P.jsx)(F.tX,{label:u("Sport Exercises"),fullWidth:!0,name:"sport_exercises",InputLabelProps:{shrink:!0},PaperPropsSx:{textTransform:"capitalize"},children:["0","once a week","twice a week","3-4 times a week","often"].map(((e,n)=>(0,P.jsx)(M.A,{lang:"ar",value:e,children:u(e)},n)))}),(0,P.jsx)(F.tX,{label:u("On Diet"),fullWidth:!0,name:"is_on_eating_diet",InputLabelProps:{shrink:!0},PaperPropsSx:{textTransform:"capitalize"},children:["Yes","No"].map(((e,n)=>(0,P.jsx)(M.A,{lang:"ar",value:e,children:u(e)},n)))}),(0,P.jsx)(F.tX,{label:u("Smoking"),fullWidth:!0,name:"smoking",InputLabelProps:{shrink:!0},PaperPropsSx:{textTransform:"capitalize"},children:["not smoker","light smoker","heavy smoker"].map(((e,n)=>(0,P.jsx)(M.A,{lang:"ar",value:e,children:u(e)},n)))}),(0,P.jsx)(F.o3,{name:"other_medication_notes",label:u("More information")})]}),(0,P.jsx)(d.A,{spacing:3,alignItems:"flex-end",sx:{mt:3},children:(0,P.jsx)(L.A,{type:"submit",tabIndex:-1,variant:"contained",loading:w,children:u("Save Changes")})})]})})})})}function B(e){var n,l,i,a;let{patient:o}=e;const{t:c}=(0,t.WD)(),{currentLang:h}=(0,t.jc)(),m="ar"===h.value,g=o.patient?o.patient:o;return(0,P.jsx)(s.A,{maxWidth:"xl",children:(0,P.jsx)(r.A,{sx:{px:4,py:4},children:(0,P.jsxs)(p.A,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,P.jsxs)(d.A,{children:[(0,P.jsx)(u.A,{variant:"subtitle2",children:c("drug allergies")}),(0,P.jsx)("ul",{children:null===g||void 0===g||null===(n=g.drug_allergies)||void 0===n?void 0:n.map(((e,n)=>(0,P.jsx)("li",{children:m?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))})]}),(0,P.jsxs)(d.A,{children:[(0,P.jsx)(u.A,{variant:"subtitle2",children:c("diseases")}),(0,P.jsx)("ul",{children:null===g||void 0===g||null===(l=g.diseases)||void 0===l?void 0:l.map(((e,n)=>(0,P.jsx)("li",{children:m?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))})]}),(0,P.jsxs)(d.A,{children:[(0,P.jsx)(u.A,{variant:"subtitle2",children:c("surgeries")}),(0,P.jsx)("ul",{children:null===g||void 0===g||null===(i=g.surgeries)||void 0===i?void 0:i.map(((e,n)=>(0,P.jsx)("li",{children:m?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))})]}),(0,P.jsxs)(d.A,{children:[(0,P.jsx)(u.A,{variant:"subtitle2",children:c("medicines")}),(0,P.jsx)("ul",{children:null===g||void 0===g||null===(a=g.medicines)||void 0===a?void 0:a.map(((e,n)=>{var l,i;return(0,P.jsx)("li",{children:m?null===e||void 0===e||null===(l=e.medicine)||void 0===l?void 0:l.name_arabic:null===e||void 0===e||null===(i=e.medicine)||void 0===i?void 0:i.name_english},n)}))})]})]})})})}var $=l(71806),z=l(49633),X=l(77739),V=l(73460),q=l(17392),U=l(26240),Z=l(90310),G=l(79650),N=l(48407),E=l(67132),H=l(59229),J=l(16236),K=l(35151),Q=l(51440),ee=l(70074),ne=l(75950),le=l(45837),ie=l(69525),te=l(68738),ae=l(39652),oe=l(26353),se=l(34624),re=l(31821);function de(e){let{row:n,selected:l,refetch:i,onSelectRow:a,onViewRow:o,onCancelRow:s,onDeleteRow:r}=e;const{_id:d,sequence_number:c,appointment_type:u,work_group:h,patient:m,note:g,start_time:x,medicalAnalysis:j,status:b,created_at:y,user_creation:f,ip_address_user_creation:A,updated_at:w,user_modification:C,ip_address_user_modification:k,modifications_nums:S}=n,{t:D}=(0,t.WD)(),{currentLang:W}=(0,t.jc)(),R="ar"===W.value,{isMedLab:T}=(0,v.A)(),L=(0,se.f)(),I=(0,se.f)(),Y=(0,H.C)();return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(te.A,{hover:!0,selected:l,children:[(0,P.jsx)(ae.A,{align:"center",children:(0,P.jsx)(oe.A,{primary:(0,le.A)(new Date(x))&&(0,ie.A)(new Date(x),"dd MMMMMMMM yyyy"),secondary:(0,le.A)(new Date(x))&&(0,ie.A)(new Date(x),"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),(0,P.jsx)(ae.A,{align:"center",children:c}),(0,P.jsx)(ae.A,{align:"center",children:R?null===u||void 0===u?void 0:u.name_arabic:null===u||void 0===u?void 0:u.name_english}),(0,P.jsx)(ae.A,{align:"center",children:R?null===h||void 0===h?void 0:h.name_arabic:null===h||void 0===h?void 0:h.name_english}),(0,P.jsx)(ae.A,{align:"center",children:g}),T&&(0,P.jsx)(ae.A,{align:"center",children:(0,P.jsx)(K.A,{icon:j?"eva:checkmark-fill":"mingcute:close-line",width:16})}),(0,P.jsx)(ae.A,{align:"center",children:(0,P.jsx)(J.A,{variant:"soft",color:("processing"===b?"info":"arrived"===b&&"success")||"late"===b&&"warning"||"booked"===b&&"info"||"finished"===b&&"success"||"not arrived"===b&&"error"||"canceled"===b&&"warning"||"available"===b&&"secondary"||"not booked"===b&&"secondary"||"default",children:D(b)})}),(0,P.jsxs)(ae.A,{align:"right",sx:{px:1},children:[T&&!j&&(0,P.jsx)(q.A,{lang:"ar",onClick:Y.onTrue,children:(0,P.jsx)(K.A,{icon:"octicon:upload-16"})}),(0,P.jsx)(q.A,{color:L.open?"inherit":"default",onClick:L.onOpen,children:(0,P.jsx)(K.A,{icon:"eva:more-vertical-fill"})})]})]}),(0,P.jsxs)(se.A,{open:L.open,onClose:L.onClose,arrow:"right-top",children:["available"===b&&(0,P.jsxs)(M.A,{lang:"ar",onClick:()=>{s(),L.onClose()},sx:{color:"error.main"},children:[(0,P.jsx)(K.A,{icon:"mdi:bell-cancel"}),D("cancel")]}),(0,P.jsxs)(M.A,{lang:"ar",onClick:I.onOpen,children:[(0,P.jsx)(K.A,{icon:"carbon:data-quality-definition"}),D("DDL")]}),T&&!j&&(0,P.jsxs)(M.A,{lang:"ar",onClick:Y.onTrue,children:[(0,P.jsx)(K.A,{icon:"octicon:upload-16"}),D("upload analysis")]})]}),(0,P.jsxs)(se.A,{open:I.open,onClose:I.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,P.jsxs)(p.A,{sx:{fontWeight:600},children:[D("creation time"),":"]}),(0,P.jsx)(p.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(oe.A,{primary:(0,_.ts)(y,"dd MMMMMMMM yyyy"),secondary:(0,_.ts)(y,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsxs)(p.A,{sx:{pt:1,fontWeight:600},children:[D("created by"),":"]}),(0,P.jsx)(p.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===f||void 0===f?void 0:f.email}),(0,P.jsxs)(p.A,{sx:{pt:1,fontWeight:600},children:[D("created by IP"),":"]}),(0,P.jsx)(p.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:A}),(0,P.jsxs)(p.A,{sx:{pt:1,fontWeight:600},children:[D("editing time"),":"]}),(0,P.jsx)(p.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(oe.A,{primary:(0,_.ts)(w,"dd MMMMMMMM yyyy"),secondary:(0,_.ts)(w,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsxs)(p.A,{sx:{pt:1,fontWeight:600},children:[D("editor"),":"]}),(0,P.jsx)(p.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===C||void 0===C?void 0:C.email}),(0,P.jsxs)(p.A,{sx:{pt:1,fontWeight:600},children:[D("editor IP"),":"]}),(0,P.jsx)(p.A,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:k}),(0,P.jsxs)(p.A,{sx:{pt:1,fontWeight:600},children:[D("modifications no"),": ",S]})]}),(0,P.jsx)(re.A,{open:Y.value,onClose:Y.onFalse,analysisData:{patient:(null===m||void 0===m?void 0:m._id)||m,appointment:d},refetch:i})]})}const ce={name:"",status:"pending",startDate:null,endDate:null};function ue(e){var n,l,i,a,d;let{patient:c}=e;const u=(0,U.A)(),{t:p}=(0,t.WD)(),{isMedLab:x}=(0,v.A)(),j=[{id:"start_time",label:p("start time")},{id:"sequence_number",label:p("sequence")},{id:"appointment_type",label:p("appointment type")},{id:"work_group",label:p("work group")},{id:"note",label:p("note")},x&&{id:"medicalAnalysis",label:p("medical analysis")},{id:"status",label:p("status")},{id:""}].filter(Boolean),b=(0,E.rd)(),{user:y}=(0,w.Z)(),f=(0,ne.K2)({defaultOrderBy:"code"}),A=(0,H.C)(),{appointmentsData:C,refetch:k}=(0,g.XaR)(null===y||void 0===y||null===(n=y.employee)||void 0===n||null===(l=n.employee_engagements)||void 0===l||null===(i=l[y.employee.selected_engagement])||void 0===i||null===(a=i.unit_service)||void 0===a?void 0:a._id,null===c||void 0===c||null===(d=c.patient)||void 0===d?void 0:d._id,null===c||void 0===c?void 0:c._id),[S,D]=(0,o.useState)(ce),W=!(!S.startDate||!S.endDate)&&S.startDate.getTime()>S.endDate.getTime(),M=function(e){let{inputData:n,comparator:l,filters:i,dateError:t}=e;const{name:a,status:o,startDate:s,endDate:r}=i,d=n.map(((e,n,l)=>[e,n]));d.sort(((e,n)=>{const i=l(e[0],n[0]);return 0!==i?i:e[1]-n[1]})),n=d.map(((e,n)=>e[0])),a&&(n=n.filter((e=>{var n,l,i,t;return(null===e||void 0===e||null===(n=e.unit_service)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(l=e.unit_service)||void 0===l?void 0:l.name_english.toLowerCase().indexOf(a.toLowerCase()))||(null===e||void 0===e||null===(i=e.unit_service)||void 0===i?void 0:i.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.unit_service)||void 0===t?void 0:t.name_arabic.toLowerCase().indexOf(a.toLowerCase()))||(null===e||void 0===e?void 0:e.name_english)&&-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(a.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e?void 0:e.name_arabic.toLowerCase().indexOf(a.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===a||JSON.stringify(e.code)===a})));"all"!==o&&(n=n.filter((e=>e.status===o)));t||s&&r&&(n=n.filter((e=>(0,_.P6)(e.date)>=(0,_.P6)(s)&&(0,_.P6)(e.date)<=(0,_.P6)(r))));return n}({inputData:C,comparator:(0,ne.hz)(f.order,f.orderBy),filters:S,dateError:W}),R=M.slice(f.page*f.rowsPerPage,f.page*f.rowsPerPage+f.rowsPerPage),T=!!S.name||"pending"!==S.status||!!S.startDate&&!!S.endDate,L=!M.length&&T||!M.length,Y=e=>C.filter((n=>n.status===e)).length,F=x?[{value:"pending",label:p("pending"),color:"secondary",count:Y("pending")},{value:"finished",label:p("finished"),color:"success",count:Y("finished")},{value:"canceled",label:p("canceled"),color:"error",count:Y("canceled")}]:[{value:"pending",label:p("pending"),color:"secondary",count:Y("pending")},{value:"processing",label:p("processing"),color:"info",count:Y("processing")},{value:"finished",label:p("finished"),color:"success",count:Y("finished")},{value:"canceled",label:p("canceled"),color:"error",count:Y("canceled")}],O=(0,o.useCallback)(((e,n)=>{f.onResetPage(),D((l=>({...l,[e]:n})))}),[f]),B=(0,o.useCallback)((async e=>{await I.Ay.patch(`${I.vZ.appointments.one(e)}/cancel`),k(),f.onUpdatePageDeleteRow(R.length)}),[R.length,f,k]),le=(0,o.useCallback)((async()=>{await I.Ay.patch(`${I.vZ.appointments.all}/cancel`,{ids:f.selected}),await I.Ay.patch(`${I.vZ.appointments.all}/cancel`,{ids:f.selected}),k(),f.onUpdatePageDeleteRows({totalRows:C.length,totalRowsInPage:R.length,totalRowsFiltered:M.length})}),[k,M.length,R.length,C.length,f]),ie=(0,o.useCallback)((e=>{b.push(N.f.dashboard.invoice.details(e))}),[b]),te=(0,o.useCallback)(((e,n)=>{O("status",n)}),[O]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(s.A,{maxWidth:"xl",children:(0,P.jsxs)(r.A,{children:[(0,P.jsx)(h.A,{value:S.status,onChange:te,sx:{px:2.5,boxShadow:`inset 0 -2px 0 0 ${(0,Z.X4)(u.palette.grey[500],.08)}`},children:F.map(((e,n)=>(0,P.jsx)(m.A,{value:e.value,label:e.label,iconPosition:"end",icon:(0,P.jsx)(J.A,{variant:"all"===e.value||e.value===S.status?"filled":"soft",color:e.color,children:e.count})},n)))}),(0,P.jsxs)(G.A,{sx:{position:"relative",overflow:"unset"},children:[(0,P.jsx)(ne.Uv,{dense:f.dense,numSelected:f.selected.length,rowCount:M.length,action:(0,P.jsx)(X.A,{title:"Unbook all",children:(0,P.jsx)(q.A,{color:"error",onClick:A.onTrue,children:(0,P.jsx)(K.A,{icon:"mdi:bell-cancel"})})}),color:"error"}),(0,P.jsx)(Q.A,{children:(0,P.jsxs)($.A,{size:f.dense?"small":"medium",sx:{minWidth:800},children:[(0,P.jsx)(ne.er,{order:f.order,orderBy:f.orderBy,headLabel:j,rowCount:C.length,numSelected:f.selected.length,onSort:f.onSort}),(0,P.jsxs)(V.A,{children:[M.slice(f.page*f.rowsPerPage,f.page*f.rowsPerPage+f.rowsPerPage).map(((e,n)=>(0,P.jsx)(de,{row:e,selected:f.selected.includes(e._id),refetch:k,onSelectRow:()=>f.onSelectRow(e._id),onViewRow:()=>ie(e._id),onCancelRow:()=>B(e._id)},n))),(0,P.jsx)(ne.Sm,{notFound:L})]})]})})]}),(0,P.jsx)(ne.We,{count:M.length,page:f.page,rowsPerPage:f.rowsPerPage,onPageChange:f.onChangePage,onRowsPerPageChange:f.onChangeRowsPerPage,dense:f.dense,onChangeDense:f.onChangeDense})]})}),(0,P.jsx)(ee.T,{open:A.value,onClose:A.onFalse,title:"Cancel",content:(0,P.jsxs)(P.Fragment,{children:[p("Are you sure want to cancel")," ",(0,P.jsxs)("strong",{children:[" ",f.selected.length," "]})," ",p("items"),"?"]}),action:(0,P.jsx)(z.A,{variant:"contained",color:"error",onClick:()=>{A.onFalse(),le()},children:p("cancel")})})]})}function pe(){const{id:e}=(0,a.g)(),{isMedLab:n}=(0,v.A)(),{usPatientData:l}=(0,g.vXx)(e,{populate:[{path:"patient",populate:"drug_allergies drugs_prescriptions diseases surgeries medicines eating_diet"},{path:"drug_allergies drugs_prescriptions diseases surgeries medicines eating_diet file_code"}]}),i=l.patient?l.patient:l,{t:A}=(0,t.WD)(),{currentLang:_}=(0,t.jc)(),w="ar"===_.value,[k,S]=(0,o.useState)("upload"),D=(0,o.useCallback)(((e,n)=>{S(n)}),[]),W=[{value:"communication",label:A("communication")},!n&&{value:"file",label:A("file")},!n&&{value:"prescriptions",label:A("prescriptions")},!n&&{value:"sick_leave",label:A("sick leave")},{value:"medical_reports",label:A("medical reports")},{value:"appointments",label:A("appointments")},{value:"upload",label:A("upload files")},{value:"edit",label:A("edit")}].filter(Boolean);const M=[{title:"age",value:function(e){if(e){const n=new Date,l=new Date(e),i=n.getFullYear()-l.getFullYear();return 0===i?n.getMonth()-l.getMonth()+" months":`${i} years`}return""}(null===i||void 0===i?void 0:i.birth_date)},{title:"phone",value:null===i||void 0===i?void 0:i.mobile_num1},{title:"email",value:null===i||void 0===i?void 0:i.email},{title:"file code",value:null===i||void 0===i?void 0:i.file_code},{title:"height",value:null===i||void 0===i?void 0:i.height,unit:"cm"},{title:"weight",value:null===i||void 0===i?void 0:i.weight,unit:"kg"},{title:"smoking",value:null===i||void 0===i?void 0:i.smoking},{title:"alcohol consumption",value:null===i||void 0===i?void 0:i.alcohol_consumption},{title:"sport exercises",value:null===i||void 0===i?void 0:i.sport_exercises}];return(0,P.jsxs)(s.A,{maxWidth:"xl",children:[(0,P.jsx)(r.A,{sx:{px:4,py:2,mb:4},children:(0,P.jsxs)(d.A,{direction:{md:"row"},alignItems:"center",gap:5,children:[(0,P.jsx)(c.A,{src:null===i||void 0===i?void 0:i.profile_picture,sx:{width:{md:100},height:{md:100}}}),(0,P.jsxs)(d.A,{gap:1,children:[(0,P.jsx)(u.A,{variant:"h6",children:w?null===i||void 0===i?void 0:i.name_arabic:null===i||void 0===i?void 0:i.name_english}),(0,P.jsx)(p.A,{rowGap:.5,columnGap:8,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(3, 1fr)",sm:"repeat(2, 1fr)"},children:null===M||void 0===M?void 0:M.map(((e,n)=>(0,P.jsxs)(u.A,{variant:"body2",children:[(0,P.jsx)("span",{style:{fontWeight:650,color:"#637381"},children:A(null===e||void 0===e?void 0:e.title)}),":"," ",(0,P.jsxs)("span",{dir:"phone"===e.title?"ltr":"",children:[A(e.value)," ",e.unit]})]},n)))})]})]})}),(0,P.jsx)(h.A,{value:k,onChange:D,sx:{mb:{xs:3,md:5}},children:W.map(((e,n)=>(0,P.jsx)(m.A,{label:e.label,value:e.value},n)))}),"about"===k&&(0,P.jsx)(B,{patient:l}),"communication"===k&&(0,P.jsx)(b.A,{patient:l}),"file"===k&&(0,P.jsx)(C,{patient:l}),"prescriptions"===k&&(0,P.jsx)(y.A,{patient:l}),"sick_leave"===k&&(0,P.jsx)(j.A,{patient:l}),"medical_reports"===k&&(0,P.jsx)(f.A,{patient:l}),"appointments"===k&&(0,P.jsx)(ue,{patient:l}),"upload"===k&&(0,P.jsx)(x.A,{patient:l}),"edit"===k&&(0,P.jsx)(O,{patient:l})]})}function he(){const{t:e}=(0,t.WD)();return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(i.mg,{children:[(0,P.jsxs)("title",{children:[" ",e("Patient profile")," "]}),(0,P.jsx)("meta",{name:"description",content:"meta"})]}),(0,P.jsx)(pe,{})]})}}}]);
//# sourceMappingURL=84717.17a1b0fa.chunk.js.map
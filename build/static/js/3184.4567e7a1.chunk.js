"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[3184],{3184:(e,n,i)=>{i.r(n),i.d(n,{default:()=>F});var s=i(6907),o=i(72791),t=i(10570),l=i(61474),r=i(10266),a=i(81164),d=i(36578),c=i(34045),u=i(64802),p=i(61146),x=i(57621),m=i(79836),h=i(53382),g=i(39281),v=i(38072),j=i(19208),y=i(93011),_=i(10261),Z=i(35456),b=i(38062),w=i(16386),f=i(16029),k=i(49900),C=i(82626),P=i(9195),q=i(68745),S=i(13400),D=i(40268),R=i(24845),I=i(80184);function W(e){let{row:n,selected:i,onEditRow:s}=e;const{sequence_number:o,title:t,speciality:l,description:r,created_at:d,user_creation:c,ip_address_user_creation:u,updated_at:p,user_modification:x,ip_address_user_modification:m,modifications_nums:h}=n,g=(0,R.S)(),v=(0,R.S)(),{t:j}=(0,a.qM)(),y=(0,I.jsxs)(P.Z,{hover:!0,selected:i,children:[(0,I.jsx)(q.Z,{align:"center",children:(0,I.jsx)(f.Z,{children:o})}),(0,I.jsx)(q.Z,{align:"center",children:t}),(0,I.jsx)(q.Z,{align:"center",children:r}),(0,I.jsx)(q.Z,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,I.jsx)(S.Z,{color:g.open?"inherit":"default",onClick:s,children:(0,I.jsx)(D.Z,{sx:{width:25,height:25,color:"info.main"},icon:"solar:eye-bold"})})})]});return(0,I.jsxs)(I.Fragment,{children:[y,(0,I.jsx)(R.Z,{open:g.open,onClose:g.onClose,arrow:"right-top",sx:{width:140},children:(0,I.jsxs)(C.Z,{lang:"ar",onClick:()=>{s(),g.onClose()},children:[(0,I.jsx)(D.Z,{icon:"fluent:edit-32-filled"}),j("edit")]})}),(0,I.jsxs)(R.Z,{open:v.open,onClose:v.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,I.jsxs)(f.Z,{sx:{fontWeight:600},children:[j("creation time"),":"]}),(0,I.jsx)(f.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,I.jsx)(k.Z,{primary:(0,w.Z)(new Date(d),"dd MMM yyyy"),secondary:(0,w.Z)(new Date(d),"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,I.jsxs)(f.Z,{sx:{pt:1,fontWeight:600},children:[j("created by"),":"]}),(0,I.jsx)(f.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===c||void 0===c?void 0:c.email}),(0,I.jsxs)(f.Z,{sx:{pt:1,fontWeight:600},children:[j("created by IP"),":"]}),(0,I.jsx)(f.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:u}),(0,I.jsxs)(f.Z,{sx:{pt:1,fontWeight:600},children:[j("editing time"),":"]}),(0,I.jsx)(f.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,I.jsx)(k.Z,{primary:(0,w.Z)(new Date(p),"dd MMM yyyy"),secondary:(0,w.Z)(new Date(p),"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,I.jsxs)(f.Z,{sx:{pt:1,fontWeight:600},children:[j("editor"),":"]}),(0,I.jsx)(f.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===x||void 0===x?void 0:x.email}),(0,I.jsxs)(f.Z,{sx:{pt:1,fontWeight:600},children:[j("editor IP"),":"]}),(0,I.jsx)(f.Z,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:m}),(0,I.jsxs)(f.Z,{sx:{pt:1,fontWeight:600},children:[j("modifications no"),": ",h]})]})]})}var z=i(81965),M=i(59944);const T={name:""};function B(){const e=(0,b.x6)({defaultOrderBy:"code"}),{t:n}=(0,a.qM)(),i=[{id:"code",label:n("code")},{id:"title",label:n("title")},{id:"description",label:n("description")},{id:"",width:120}],s=(0,o.useRef)(),t=(0,j.tv)(),{CheckListData:l,loading:d}=(0,y.Y03)(),[w,f]=(0,o.useState)(T),k=!(!w.startDate||!w.endDate)&&w.startDate.getTime()>w.endDate.getTime(),C=function(e){let{inputData:n,comparator:i,filters:s,dateError:o}=e;const{name:t}=s,l=n.map(((e,n,i)=>[e,n]));l.sort(((e,n)=>{const s=i(e[0],n[0]);return 0!==s?s:e[1]-n[1]})),n=l.map(((e,n)=>e[0])),t&&(n=n.filter((e=>{var n;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(t.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(n=e.name_arabic)||void 0===n?void 0:n.toLowerCase().indexOf(t.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===t||JSON.stringify(e.code)===t})));return n}({inputData:l,comparator:(0,b.sQ)(e.order,e.orderBy),filters:w,dateError:k}),P=e.dense?52:72,q=!(null===w||void 0===w||!w.name),S=!C.length&&q||!C.length,D=(0,p.useReactToPrint)({content:()=>s.current}),R=(0,o.useCallback)(((n,i)=>{e.onResetPage(),f((e=>({...e,[n]:i})))}),[e]),B=(0,o.useCallback)((e=>{t.push(v.H.employee.checklist.edit(e))}),[t]),L=(0,o.useCallback)((()=>{f(T)}),[]);return d?(0,I.jsx)(Z.a,{}):(0,I.jsx)(r.Z,{maxWidth:"xl",children:(0,I.jsxs)(x.Z,{children:[(0,I.jsx)(z.Z,{onPrint:D,filters:w,onFilters:R,onDownload:()=>{const e=C.reduce(((e,n)=>{var i;return e.push({code:n.code,name:n.name_english,country:null===(i=n.country)||void 0===i?void 0:i.name_english,status:n.status}),e}),[]),n=c.P6.book_new(),i=c.P6.json_to_sheet(e);c.P6.book_append_sheet(n,i,"Sheet 1");const s=c.cW(n,{bookType:"xlsx",type:"array"}),o=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,u.saveAs)(o,"checklist.xlsx")},canReset:q,onResetFilters:L}),q&&(0,I.jsx)(M.Z,{filters:w,onFilters:R,onResetFilters:L,results:C.length,sx:{p:2.5,pt:0}}),(0,I.jsx)(g.Z,{children:(0,I.jsx)(_.Z,{children:(0,I.jsxs)(m.Z,{ref:s,size:e.dense?"small":"medium",children:[(0,I.jsx)(b.K,{order:e.order,orderBy:e.orderBy,headLabel:i,rowCount:C.length,numSelected:e.selected.length,onSort:e.onSort}),(0,I.jsxs)(h.Z,{children:[C.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map(((n,i)=>(0,I.jsx)(W,{row:n,selected:e.selected.includes(n._id),onSelectRow:()=>e.onSelectRow(n._id),onEditRow:()=>B(n._id)},i))),(0,I.jsx)(b.$W,{height:P,emptyRows:(0,b.fQ)(e.page,e.rowsPerPage,l.length)}),(0,I.jsx)(b.et,{notFound:S})]})]})})}),(0,I.jsx)(b.S_,{count:C.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})})}function L(){const[e,n]=(0,o.useState)("create"),i=(0,o.useCallback)(((e,i)=>{n(i)}),[]),{t:s}=(0,a.qM)(),c=[{value:"create",label:s("create your custom checklist")},{value:"select",label:s("select from general checklist")}];return(0,I.jsxs)(r.Z,{maxWidth:"xl",children:[(0,I.jsx)(t.Z,{value:e,onChange:i,sx:{mb:{xs:3,md:5}},children:c.map(((e,n)=>(0,I.jsx)(l.Z,{label:e.label,value:e.value},n)))}),"select"===e&&(0,I.jsx)(B,{}),"create"===e&&(0,I.jsx)(d.Z,{})]})}function F(){return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(s.ql,{children:[(0,I.jsx)("title",{children:" Dashboard : Create a new checklist"}),(0,I.jsx)("meta",{name:"description",content:"meta"})]}),(0,I.jsx)(L,{})]})}},36578:(e,n,i)=>{i.d(n,{Z:()=>S});var s=i(8007),o=i(84802),t=i(72791),l=i(44695),r=i(61134),a=i(61775),d=i(57621),c=i(53767),u=i(12258),p=i(10266),x=i(4567),m=i(82626),h=i(94721),g=i(16029),v=i(13838),j=i(1503),y=i(13400),_=i(38072),Z=i(19208),b=i(66664),w=i(8976),f=i(81164),k=i(93011),C=i(40268),P=i(85563),q=i(80184);function S(e){var n,i,j,y;let{currentRow:S}=e;const R=(0,Z.tv)(),{enqueueSnackbar:I}=(0,o.Ds)(),{user:W}=(0,w.E)(),{t:z}=(0,f.qM)(),{currentLang:M}=(0,f.nt)(),T="ar"===M.value,B=s.Ry().shape({title:s.Z_().nullable().required("title is required"),description:s.Z_(),unit_service:s.Z_().nullable(),department:s.Z_().nullable(),work_group:s.Z_().nullable(),general:s.Xg(),questions:s.IX().of(s.Ry({question:s.Z_(),answer_way:s.Z_(),category:s.Z_(),options:s.IX().nullable()}))}),{workGroupsData:L}=(0,k.Sue)(null===W||void 0===W||null===(n=W.employee)||void 0===n||null===(i=n.employee_engagements[null===W||void 0===W?void 0:W.employee.selected_engagement])||void 0===i?void 0:i._id),F=(0,t.useMemo)((()=>({title:(null===S||void 0===S?void 0:S.title)||"",unit_service:(null===S||void 0===S?void 0:S.unit_service)||null,department:(null===S||void 0===S?void 0:S.department)||null,work_group:(null===S||void 0===S?void 0:S.work_group)||null,general:(null===S||void 0===S?void 0:S.general)||!1,description:(null===S||void 0===S?void 0:S.description)||"",questions:(null===S||void 0===S?void 0:S.questions)||[{question:"",answer_way:"Text",category:"",options:[""]}]})),[S]),E=(0,r.cI)({resolver:(0,l.X)(B),defaultValues:F}),{reset:O,handleSubmit:H,control:X,watch:G,setValue:K,formState:{isSubmitting:N}}=E,Q=G(),{fields:V,append:Y,remove:A,move:J}=(0,r.Dq)({control:X,name:"questions"});(0,t.useEffect)((()=>{O({title:(null===S||void 0===S?void 0:S.title)||"",unit_service:(null===S||void 0===S?void 0:S.unit_service)||null,department:(null===S||void 0===S?void 0:S.department)||null,work_group:(null===S||void 0===S?void 0:S.work_group)||null,general:(null===S||void 0===S?void 0:S.general)||!1,description:(null===S||void 0===S?void 0:S.description)||"",questions:(null===S||void 0===S?void 0:S.questions)||[{question:"",answer_way:"Text",category:"",options:[""]}]})}),[S,O]);const $=H((async e=>{try{if(S&&S.user_creation===W._id)await b.ZP.patch(b.Hv.checklist.one(S._id),e),I(z("updated successfuly"));else{var n,i;delete e._id;const s={...e,questions:e.questions.map((e=>({question:null===e||void 0===e?void 0:e.question,answer_way:null===e||void 0===e?void 0:e.answer_way,options:null===e||void 0===e?void 0:e.options}))),employee:null===W||void 0===W||null===(n=W.employee)||void 0===n||null===(i=n.employee_engagements[null===W||void 0===W?void 0:W.employee.selected_engagement])||void 0===i?void 0:i._id};await b.ZP.post(b.Hv.checklist.all,s),I(z("created successfuly"))}O(),R.push(_.H.employee.checklist.root)}catch(s){I(s.message,{variant:"error"}),console.error(s)}}));return(0,q.jsx)(p.Z,{maxWidth:"xl",children:(0,q.jsxs)(P.ZP,{methods:E,children:[(0,q.jsx)(d.Z,{children:(0,q.jsxs)(c.Z,{direction:{xs:"column",md:"row"},spacing:2,sx:{width:1,p:3},alignItems:"center",children:[(0,q.jsxs)(c.Z,{spacing:2,sx:{width:1},alignItems:"center",justifyContent:"flex-start",children:[(0,q.jsx)(P.au,{name:"title",label:z("title"),sx:{width:{md:.8,xs:1}}}),(0,q.jsx)(P.au,{size:"small",name:"description",label:z("description"),sx:{width:{md:.7,xs:1}}})]}),(0,q.jsxs)(c.Z,{sx:{width:{md:.5,xs:1},border:"0.5px dotted black",padding:2},justifyContent:"flex-end",children:[(0,q.jsxs)(x.Z,{variant:"caption",mb:2,children:[z("availability and privacy"),":"]}),(0,q.jsx)(P.jb,{name:"general",label:z("available for all hakeemna community"),onChange:()=>K("general",!Q.general)}),(0,q.jsx)(P.jb,{name:"unit_service",label:z("available for your unit of service employees"),onChange:()=>{var e,n,i;return K("unit_service",Q.unit_service?null:null===W||void 0===W||null===(e=W.employee)||void 0===e||null===(n=e.employee_engagements[null===W||void 0===W?void 0:W.employee.selected_engagement])||void 0===n||null===(i=n.unit_service)||void 0===i?void 0:i._id)}}),(null===W||void 0===W||null===(j=W.employee)||void 0===j||null===(y=j.employee_engagements[null===W||void 0===W?void 0:W.employee.selected_engagement])||void 0===y?void 0:y.department)&&(0,q.jsx)(P.jb,{name:"department",label:z("available for your department employees"),onChange:()=>{var e,n,i;return K("department",Q.department?null:null===W||void 0===W||null===(e=W.employee)||void 0===e||null===(n=e.employee_engagements[null===W||void 0===W?void 0:W.employee.selected_engagement])||void 0===n||null===(i=n.department)||void 0===i?void 0:i._id)}}),(0,q.jsxs)(P.Cc,{size:"small",name:"work_group",label:z("available for work group"),sx:{width:{md:1,xs:1},mt:2},children:[(0,q.jsx)(m.Z,{sx:{textTransform:"capitalize"},value:null,children:z("all")}),(0,q.jsx)(h.Z,{}),L.map(((e,n)=>(0,q.jsx)(m.Z,{value:e._id,children:T?e.name_arabic:e.name_english},n)))]})]})]})}),(0,q.jsxs)(g.Z,{sx:{p:3},children:[(0,q.jsxs)(x.Z,{variant:"h6",sx:{color:"text.disabled",mb:3},children:[z("questions"),":"]}),(0,q.jsx)(a.Z5,{onDragEnd:e=>{e.destination&&J(e.source.index,e.destination.index)},children:(0,q.jsx)(a.bK,{droppableId:"droppable-questions",children:e=>(0,q.jsxs)(c.Z,{spacing:4,...e.droppableProps,ref:e.innerRef,children:[V.map(((e,n)=>(0,q.jsx)(a._l,{draggableId:e.id,index:n,children:e=>(0,q.jsx)(d.Z,{sx:{p:3},ref:e.innerRef,...e.draggableProps,...e.dragHandleProps,children:(0,q.jsx)(c.Z,{alignItems:"flex-end",spacing:1.5,children:(0,q.jsxs)(c.Z,{spacing:2,sx:{width:1},children:[(0,q.jsxs)(c.Z,{direction:{xs:"column",md:"row"},justifyContent:"space-between",spacing:2,sx:{width:1},children:[(0,q.jsx)(P.au,{size:"small",name:"questions[".concat(n,"].question"),label:z("question"),InputLabelProps:{shrink:!0},sx:{width:1}}),(0,q.jsx)(P.Cc,{name:"questions[".concat(n,"].answer_way"),size:"small",label:z("answer way"),InputLabelProps:{shrink:!0},sx:{width:{md:.5,xs:1}},children:["Text","Yes No","Options"].map((e=>(0,q.jsx)(m.Z,{value:e,children:z(e)},e)))}),(0,q.jsx)(P.au,{size:"small",name:"questions[".concat(n,"].category"),label:z("category"),InputLabelProps:{shrink:!0},sx:{width:{md:.5,xs:1}}}),(0,q.jsx)(v.Z,{size:"small",color:"error",onClick:()=>(e=>{A(e)})(n),children:(0,q.jsx)(C.Z,{icon:"solar:trash-bin-trash-bold"})})]}),"Options"===Q.questions[n].answer_way&&(0,q.jsx)(c.Z,{justifyContent:"flex-end",alignItems:"start",spacing:1,sx:{width:.8},children:(0,q.jsx)(D,{index:n})})]})})})},e.id))),e.placeholder]})})}),(0,q.jsx)(h.Z,{sx:{my:3,borderStyle:"dashed"}}),(0,q.jsx)(c.Z,{spacing:3,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"},children:(0,q.jsx)(v.Z,{size:"small",color:"primary",startIcon:(0,q.jsx)(C.Z,{icon:"mingcute:add-line"}),onClick:()=>{Y({question:"",answer_way:"",options:[""]})},sx:{flexShrink:0},children:z("add item")})})]}),(0,q.jsx)(c.Z,{justifyContent:"flex-end",direction:"row",spacing:2,sx:{mt:1},children:(0,q.jsx)(u.Z,{variant:"contained",loading:N,onClick:$,children:S&&S.user_creation===W._id?z("update"):z("add")})})]})})}function D(e){let{index:n}=e;const{control:i}=(0,r.Gc)(),{t:s}=(0,f.qM)(),{fields:o,append:t,remove:l}=(0,r.Dq)({control:i,name:"questions[".concat(n,"].options")});return(0,q.jsxs)(q.Fragment,{children:[o.map(((e,i)=>(0,q.jsxs)(c.Z,{direction:"row",alignItems:"center",children:[(0,q.jsx)(j.Z,{disabled:!0}),(0,q.jsx)(P.au,{size:"small",variant:"standard",name:"questions[".concat(n,"].options[").concat(i,"]")}),(0,q.jsx)(c.Z,{direction:"row",children:(0,q.jsx)(y.Z,{size:"small",color:"error",onClick:()=>(e=>{l(e)})(i),children:(0,q.jsx)(C.Z,{icon:"ic:round-close"})})})]},e.id))),(0,q.jsxs)(v.Z,{color:"primary",size:"small",sx:{fontSize:12},onClick:()=>{t(" ")},children:[(0,q.jsx)(C.Z,{icon:"ph:plus-bold"}),s("add option")]})]})}}}]);
//# sourceMappingURL=3184.4567e7a1.chunk.js.map
"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[9602],{38563:(e,s,a)=>{a.d(s,{Z:()=>u});var r=a(68870),n=a(50533),i=a(36314),t=a(4567),o=a(93517),d=a(4419),l=a(80184);function c(e){let{link:s,activeLast:a,disabled:i}=e;const t={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...i&&!a&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},o=(0,l.jsxs)(l.Fragment,{children:[s.icon&&(0,l.jsx)(r.Z,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:s.icon}),s.name]});return s.href?(0,l.jsx)(n.Z,{component:d.r,href:s.href,sx:t,children:o}):(0,l.jsxs)(r.Z,{sx:t,children:[" ",o," "]})}function u(e){let{links:s,action:a,heading:d,moreLink:u,activeLast:h,sx:x,...p}=e;const j=s&&s[s.length-1].name;return(0,l.jsxs)(r.Z,{sx:{...x},children:[(0,l.jsxs)(i.Z,{direction:"row",alignItems:"center",children:[(0,l.jsxs)(r.Z,{sx:{flexGrow:1,display:"flex",gap:3,alignItems:"center"},children:[d&&(0,l.jsx)(t.Z,{variant:"h4",gutterBottom:!0,children:d}),s&&!!s.length&&(0,l.jsx)(o.Z,{separator:(0,l.jsx)(m,{}),...p,children:null===s||void 0===s?void 0:s.map((e=>(0,l.jsx)(c,{link:e,activeLast:h,disabled:e.name===j},e.name||"")))})]}),a&&(0,l.jsxs)(r.Z,{sx:{flexShrink:0},children:[" ",a," "]})]}),!!u&&(0,l.jsx)(r.Z,{sx:{mt:2},children:u.map((e=>(0,l.jsx)(n.Z,{href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}function m(){return(0,l.jsx)(r.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}},73379:(e,s,a)=>{a.d(s,{Z:()=>r.Z});var r=a(38563)},46753:(e,s,a)=>{a.r(s),a.d(s,{default:()=>u});var r=a(6907),n=a(89164),i=a(38072),t=a(25279),o=a(73379),d=a(55453),l=a(80184);function c(){const e=(0,t.K$)();return(0,l.jsxs)(n.Z,{maxWidth:!e.themeStretch&&"lg",children:[(0,l.jsx)(o.Z,{heading:"Create user",links:[{name:"dashboard",href:i.H.superadmin},{name:"users",href:i.H.superadmin.users.root},{name:"new"}],sx:{mb:{xs:3,md:5}}}),(0,l.jsx)(d.Z,{})]})}function u(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.ql,{children:(0,l.jsx)("title",{children:"new user"})}),(0,l.jsx)(c,{})]})}},55453:(e,s,a)=>{a.d(s,{Z:()=>P});var r=a(55294),n=a(8007),i=a(72791),t=a(61134),o=a(44695),d=a(68870),l=a(57621),c=a(36314),u=a(24308),m=a(12258),h=a(63515),x=a(82626),p=a(63466),j=a(13400),Z=a(38072),v=a(19208),g=a(22459),f=a(6385),b=a(89731),_=a(8976),w=a(40268),y=a(32869),k=a(81688),C=a(80184);function P(e){let{currentSelected:s}=e;const a=(0,v.tv)(),P=(0,g.k)(),{user:I}=(0,_.E)(),[S,q]=(0,i.useState)(),{enqueueSnackbar:H}=(0,y.Ds)(),L=n.Ry().shape({userName:n.Z_().required("userName is required"),email:n.Z_().required("email is required"),password:n.Z_(),confirmPassword:n.Z_(),role:n.Z_().required("role is required")}),N=(0,i.useMemo)((()=>({userName:(null===s||void 0===s?void 0:s.userName)||"",email:(null===s||void 0===s?void 0:s.email)||"",password:(null===s||void 0===s?void 0:s.password)||"",confirmPassword:(null===s||void 0===s?void 0:s.confirmPassword)||"",role:(null===s||void 0===s?void 0:s.role)||""})),[s]),T=(0,t.cI)({mode:"onTouched",resolver:(0,o.X)(L),defaultValues:N}),{reset:E,handleSubmit:A,formState:{isSubmitting:G}}=T,R=A((async e=>{try{const n=await r.Z.get("https://geolocation-db.com/json/");s?await(0,f.Z)({method:"PATCH",path:b.Hv.tables.user(s._id),data:{modifications_nums:(s.modifications_nums||0)+1,ip_address_user_modification:n.data.IPv4,user_modification:I._id,...e}}):await b.ZP.post(b.Hv.auth.users,{ip_address_user_creation:n.data.IPv4,user_creation:I._id,...e,email:e.email.toLowerCase()}),E(),H(s?"Update success!":"Create success!"),a.push(Z.H.superadmin.users.root)}catch(n){q("string"===typeof n?n:n.message),console.error(n)}}));return(0,C.jsx)(k.ZP,{methods:T,onSubmit:R,children:(0,C.jsx)(u.Z,{container:!0,spacing:3,children:(0,C.jsx)(u.Z,{xs:12,maxWidth:"md",children:(0,C.jsxs)(l.Z,{sx:{p:3},children:[(0,C.jsxs)(d.Z,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"},children:[!!S&&(0,C.jsx)(h.Z,{severity:"error",children:S}),(0,C.jsx)(k.au,{lang:"ar",name:"userName",label:"username"}),(0,C.jsx)(k.au,{lang:"ar",name:"email",label:"email"}),(0,C.jsxs)(k.Cc,{name:"role",label:"Role",children:[(0,C.jsx)(x.Z,{value:"admin",children:"admin"}),(0,C.jsx)(x.Z,{value:"superadmin",children:"superadmin"}),(0,C.jsx)(x.Z,{value:"employee",children:"employee"}),(0,C.jsx)(x.Z,{value:"patient",children:"patient"})]}),!s&&(0,C.jsx)(k.au,{lang:"ar",name:"password",label:"password",type:P.value?"text":"password",InputProps:{endAdornment:(0,C.jsx)(p.Z,{position:"end",children:(0,C.jsx)(j.Z,{onClick:P.onToggle,edge:"end",children:(0,C.jsx)(w.Z,{icon:P.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),!s&&(0,C.jsx)(k.au,{lang:"ar",name:"confirmPassword",label:"confirm password",type:P.value?"text":"password",InputProps:{endAdornment:(0,C.jsx)(p.Z,{position:"end",children:(0,C.jsx)(j.Z,{onClick:P.onToggle,edge:"end",children:(0,C.jsx)(w.Z,{icon:P.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}})]}),(0,C.jsx)(c.Z,{alignItems:"flex-end",sx:{mt:3},children:(0,C.jsx)(m.Z,{type:"submit",tabIndex:-1,variant:"contained",loading:G,children:s?"Save Changes":"Create One"})})]})})})})}},6385:(e,s,a)=>{a.d(s,{Z:()=>t});var r=a(55294),n=a(88329),i=a(33805);async function t(e){let{setData:s,setError:a,method:t,path:o,data:d}=e;const l="".concat(i.E0).concat(o),c=n.Z.get("user_token"),u=await(0,r.Z)({method:t,url:l,headers:{authorization:"Bearer ".concat(c)},data:d});return s&&s(u.data),a&&a(u.data),u}}}]);
//# sourceMappingURL=9602.dd210204.chunk.js.map
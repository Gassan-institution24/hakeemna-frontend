"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[597],{597:(e,n,l)=>{l.r(n),l.d(n,{default:()=>te});var t=l(6907),s=l(72791),a=l(61474),r=l(2101),o=l(12065),i=l(57621),d=l(79836),c=l(89164),u=l(53382),x=l(39281),h=(l(4419),l(38072)),p=l(19208),m=l(8976),g=l(22459),v=l(61146),j=l(34045),f=l(64802),Z=l(84954),b=l(40268),w=l(10261),y=(l(77008),l(25279)),_=l(73379),C=l(38062),P=l(51642),k=l(6965),S=l(79572),R=(l(6385),l(89731),l(76932)),D=l(68870),F=l(9195),W=l(68745),B=l(13400),O=l(10901),L=l(30250),q=l(24845),z=l(80184);function I(e){let{row:n,onEditRow:l,setFilters:t,filters:s}=e;const{code:a,appointment:r,employee:o,status:i,title:d,Body:c,Rate:u,created_at:x,user_creation:h,ip_address_user_creation:p,updated_at:m,user_modification:g,ip_address_user_modification:v,modifications_nums:j}=n,{t:f}=(0,R.qM)(),w=(0,q.S)(),y=(0,q.S)(),_=(0,z.jsxs)(F.Z,{hover:!0,children:[(0,z.jsx)(W.Z,{lang:"ar",align:"center",children:a}),(0,z.jsx)(W.Z,{lang:"ar",align:"center",onClick:()=>t({...s,name:null===r||void 0===r?void 0:r.name_english}),children:null===r||void 0===r?void 0:r.code}),(0,z.jsx)(W.Z,{lang:"ar",align:"center",onClick:()=>t({...s,name:null===o||void 0===o?void 0:o.name_english}),children:null===o||void 0===o?void 0:o.name_english}),(0,z.jsx)(W.Z,{lang:"ar",align:"center",children:d}),(0,z.jsx)(W.Z,{lang:"ar",align:"center",children:(0,z.jsx)(Z.Z,{variant:"soft",color:("read"===i?"success":"unread"===i&&"error")||"default",children:f(i)})}),(0,z.jsx)(W.Z,{lang:"ar",align:"center",children:c}),(0,z.jsx)(W.Z,{lang:"ar",children:(0,z.jsx)(O.Z,{size:"small",readOnly:!0,value:u,precision:.1,max:5})}),(0,z.jsx)(W.Z,{lang:"ar",align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,z.jsx)(B.Z,{color:w.open?"inherit":"default",onClick:y.onOpen,children:(0,z.jsx)(b.Z,{icon:"carbon:data-quality-definition"})})})]});return(0,z.jsxs)(z.Fragment,{children:[_,(0,z.jsxs)(q.Z,{open:y.open,onClose:y.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,z.jsxs)(D.Z,{sx:{fontWeight:600},children:[f("creation time"),":"]}),(0,z.jsx)(D.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,L.zM)(x)}),(0,z.jsxs)(D.Z,{sx:{pt:1,fontWeight:600},children:[f("creator"),":"]}),(0,z.jsx)(D.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===h||void 0===h?void 0:h.email}),(0,z.jsxs)(D.Z,{sx:{pt:1,fontWeight:600},children:[f("creator IP"),":"]}),(0,z.jsx)(D.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:p}),(0,z.jsxs)(D.Z,{sx:{pt:1,fontWeight:600},children:[f("editing time"),":"]}),(0,z.jsx)(D.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,L.zM)(m)}),(0,z.jsxs)(D.Z,{sx:{pt:1,fontWeight:600},children:[f("editor"),":"]}),(0,z.jsx)(D.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===g||void 0===g?void 0:g.email}),(0,z.jsxs)(D.Z,{sx:{pt:1,fontWeight:600},children:[f("editor IP"),":"]}),(0,z.jsx)(D.Z,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:v}),(0,z.jsxs)(D.Z,{sx:{pt:1,fontWeight:600},children:[f("modifications no"),": ",j]})]})]})}var T=l(36314),M=l(58406),E=l(82626),Q=l(13034),A=l(48550),G=l(62861),H=l(68096),K=l(13838),N=l(63466),$=l(77196);function J(e){let{filters:n,onFilters:l,canReset:t,onResetFilters:a}=e;const{t:r}=(0,R.qM)(),o=(0,s.useCallback)((e=>{l("name",e.target.value)}),[l]),i=(0,s.useCallback)((e=>{l("rate","string"===typeof e.target.value?e.target.value.split(","):e.target.value)}),[l]);return(0,z.jsxs)(T.Z,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[(0,z.jsxs)(H.Z,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[(0,z.jsx)(G.Z,{children:r("rate")}),(0,z.jsx)(M.Z,{multiple:!0,value:n.rate,onChange:i,input:(0,z.jsx)($.Z,{label:r("rate")}),renderValue:e=>e.map((e=>e)).join(", "),MenuProps:{PaperProps:{sx:{maxHeight:240}}},children:[1,2,3,4,5].map((e=>(0,z.jsxs)(E.Z,{value:e,children:[(0,z.jsx)(Q.Z,{disableRipple:!0,size:"small",checked:n.rate.includes(e)}),(0,z.jsx)(O.Z,{size:"small",readOnly:!0,value:e,precision:.1,max:5})]},e)))})]}),(0,z.jsx)(T.Z,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:(0,z.jsx)(A.Z,{fullWidth:!0,value:n.name,onChange:o,placeholder:r("Search name or number..."),InputProps:{startAdornment:(0,z.jsx)(N.Z,{position:"start",children:(0,z.jsx)(b.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),t&&(0,z.jsx)(K.Z,{color:"error",sx:{flexShrink:0},onClick:a,startIcon:(0,z.jsx)(b.Z,{icon:"solar:trash-bin-trash-bold"}),children:r("clear")})]})}var U=l(85771),V=l(27938),X=l(2540);function Y(e){let{filters:n,onFilters:l,onResetFilters:t,results:s,...a}=e;const{t:r}=(0,R.qM)(),o=(0,X.l2)(n.startDate,n.endDate);return(0,z.jsxs)(T.Z,{spacing:1.5,...a,children:[(0,z.jsxs)(D.Z,{sx:{typography:"body2"},children:[(0,z.jsx)("strong",{children:s}),(0,z.jsx)(D.Z,{component:"span",sx:{color:"text.secondary",ml:.25},children:r("results found")})]}),(0,z.jsxs)(T.Z,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:["all"!==n.status&&(0,z.jsx)(ee,{label:r("status:"),children:(0,z.jsx)(U.Z,{size:"small",label:r(n.status),onDelete:()=>{l("status","all")}})}),n.startDate&&n.endDate&&(0,z.jsx)(ee,{label:r("date:"),children:(0,z.jsx)(U.Z,{size:"small",label:o,onDelete:()=>{l("startDate",null),l("endDate",null)}})}),(0,z.jsx)(K.Z,{color:"error",onClick:t,startIcon:(0,z.jsx)(b.Z,{icon:"solar:trash-bin-trash-bold"}),children:r("clear")})]})]})}function ee(e){let{label:n,children:l,sx:t,...s}=e;return(0,z.jsxs)(T.Z,{component:V.Z,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...t},...s,children:[(0,z.jsx)(D.Z,{component:"span",sx:{typography:"subtitle2"},children:n}),(0,z.jsx)(T.Z,{spacing:1,direction:"row",flexWrap:"wrap",children:l})]})}const ne={name:"",status:"all",rate:[]};function le(){var e;const{t:n}=(0,R.qM)(),l=[{id:"code",label:n("code")},{id:"appointments",label:n("appointments")},{id:"title",label:n("title")},{id:"status",label:n("status")},{id:"Body",label:n("body")},{id:"Rate",label:n("rate")},{id:"",width:88}],{QC_STATUS_OPTIONS:t}=(0,P.D)(),b=(0,C.x6)({defaultOrderBy:"code"}),D=(0,s.useRef)(),{user:F}=(0,m.E)(),W=(0,y.K$)(),{feedbackData:B,loading:O}=((0,g.k)(),(0,g.k)(),(0,p.tv)(),(0,S.Wj)(null===F||void 0===F||null===(e=F.employee)||void 0===e?void 0:e._id)),[L,q]=(0,s.useState)(ne),T=!(!L.startDate||!L.endDate)&&L.startDate.getTime()>L.endDate.getTime(),M=function(e){var n;let{inputData:l,comparator:t,filters:s,dateError:a}=e;const{status:r,name:o,rate:i}=s,d=null===(n=l)||void 0===n?void 0:n.map(((e,n)=>[e,n]));null===d||void 0===d||d.sort(((e,n)=>{const l=t(e[0],n[0]);return 0!==l?l:e[1]-n[1]})),l=d.map((e=>e[0])),o&&(l=l.filter((e=>{var n,l,t,s,a,r,i,d,c,u,x,h,p;return(null===e||void 0===e||null===(n=e.appointment)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(l=e.appointment)||void 0===l||null===(t=l.name_english)||void 0===t?void 0:t.toLowerCase().indexOf(o.toLowerCase()))||(null===e||void 0===e||null===(s=e.appointment)||void 0===s?void 0:s.name_arabic)&&-1!==(null===e||void 0===e||null===(a=e.appointment)||void 0===a||null===(r=a.name_arabic)||void 0===r?void 0:r.toLowerCase().indexOf(o.toLowerCase()))||(null===e||void 0===e||null===(i=e.employee)||void 0===i?void 0:i.name_english)&&-1!==(null===e||void 0===e||null===(d=e.employee)||void 0===d||null===(c=d.name_english)||void 0===c?void 0:c.toLowerCase().indexOf(o.toLowerCase()))||(null===e||void 0===e||null===(u=e.employee)||void 0===u?void 0:u.name_arabic)&&-1!==(null===e||void 0===e||null===(x=e.employee)||void 0===x||null===(h=x.name_arabic)||void 0===h?void 0:h.toLowerCase().indexOf(o.toLowerCase()))||(null===e||void 0===e?void 0:e.title)&&-1!==(null===e||void 0===e||null===(p=e.title)||void 0===p?void 0:p.toLowerCase().indexOf(o.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===o||JSON.stringify(e.code)===o})));"all"!==r&&(l=l.filter((e=>e.status===r)));i.length>0&&(l=l.filter((e=>i.includes(e.Rate))));return l}({inputData:B,comparator:(0,C.sQ)(b.order,b.orderBy),filters:L,dateError:T}),E=b.dense?52:72,Q=!(null===L||void 0===L||!L.name)||"all"!==L.status||L.rate.length>0,A=!M.length&&Q||!M.length,G=(0,v.useReactToPrint)({content:()=>D.current}),H=(0,s.useCallback)(((e,n)=>{b.onResetPage(),q((l=>({...l,[e]:n})))}),[b]),K=(0,s.useCallback)((()=>{q(ne)}),[]),N=(0,s.useCallback)(((e,n)=>{H("status",n)}),[H]);return O?(0,z.jsx)(k.a,{}):(0,z.jsx)(z.Fragment,{children:(0,z.jsxs)(c.Z,{maxWidth:!W.themeStretch&&"lg",children:[(0,z.jsx)(_.Z,{heading:n("quality control"),links:[{name:n("dashboard"),href:h.H.employee.root},{name:n("quality control")}],sx:{mb:{xs:3,md:5}}}),(0,z.jsxs)(i.Z,{children:[(0,z.jsx)(r.Z,{value:L.status,onChange:N,sx:{px:2.5,boxShadow:e=>"inset 0 -2px 0 0 ".concat((0,o.Fq)(e.palette.grey[500],.08))},children:t.map((e=>(0,z.jsx)(a.Z,{iconPosition:"end",value:e.value,label:e.label,icon:(0,z.jsxs)(Z.Z,{variant:"all"===e.value||e.value===L.status?"filled":"soft",color:("read"===e.value?"success":"unread"===e.value&&"error")||"default",children:["all"===e.value&&B.length,"read"===e.value&&B.filter((e=>"read"===e.status)).length,"unread"===e.value&&B.filter((e=>"unread"===e.status)).length]})},e.value)))}),(0,z.jsx)(J,{onPrint:G,filters:L,onFilters:H,onDownload:()=>{const e=M.reduce(((e,n)=>{var l,t;return e.push({code:n.code,name:n.name_english,category:null===(l=n.category)||void 0===l?void 0:l.name_english,symptoms:null===(t=n.symptoms)||void 0===t?void 0:t.map((e=>null===e||void 0===e?void 0:e.name_english))}),e}),[]),n=j.P6.book_new(),l=j.P6.json_to_sheet(e);j.P6.book_append_sheet(n,l,"Sheet 1");const t=j.cW(n,{bookType:"xlsx",type:"array"}),s=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,f.saveAs)(s,"unitservicesTable.xlsx")},canReset:Q,onResetFilters:K}),Q&&(0,z.jsx)(Y,{filters:L,onFilters:H,onResetFilters:K,results:M.length,sx:{p:2.5,pt:0}}),(0,z.jsx)(x.Z,{children:(0,z.jsx)(w.Z,{children:(0,z.jsxs)(d.Z,{ref:D,size:b.dense?"small":"medium",children:[(0,z.jsx)(C.K,{order:b.order,orderBy:b.orderBy,headLabel:l,rowCount:M.length,numSelected:b.selected.length,onSort:b.onSort}),(0,z.jsxs)(u.Z,{children:[M.slice(b.page*b.rowsPerPage,b.page*b.rowsPerPage+b.rowsPerPage).map((e=>(0,z.jsx)(I,{row:e,filters:L,setFilters:q,onSelectRow:()=>b.onSelectRow(e._id)},e._id))),(0,z.jsx)(C.$W,{height:E,emptyRows:(0,C.fQ)(b.page,b.rowsPerPage,B.length)}),(0,z.jsx)(C.et,{notFound:A})]})]})})}),(0,z.jsx)(C.S_,{count:M.length,page:b.page,rowsPerPage:b.rowsPerPage,onPageChange:b.onChangePage,onRowsPerPageChange:b.onChangeRowsPerPage,dense:b.dense,onChangeDense:b.onChangeDense})]})]})})}function te(){return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(t.ql,{children:(0,z.jsx)("title",{children:"Quality Control"})}),(0,z.jsx)(le,{})]})}}}]);
//# sourceMappingURL=597.f664cc5b.chunk.js.map
{"version":3,"file":"static/js/33127.425e3ff8.chunk.js","mappings":"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","sources":["../node_modules/@mui/system/esm/Box/boxClasses.js","../node_modules/@mui/system/esm/Box/Box.js","sections/employee/appointmentsToday/medicalreportPage.jsx","pages/employee/appointmentsToday/medicalPage.jsx"],"sourcesContent":["import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nconst boxClasses = generateUtilityClasses('MuiBox', ['root']);\nexport default boxClasses;","'use client';\n\nimport PropTypes from 'prop-types';\nimport ClassNameGenerator from '@mui/utils/ClassNameGenerator';\nimport createBox from '../createBox';\nimport boxClasses from './boxClasses';\nconst Box = createBox({\n  defaultClassName: boxClasses.root,\n  generateClassName: ClassNameGenerator.generate\n});\nprocess.env.NODE_ENV !== \"production\" ? Box.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * @ignore\n   */\n  children: PropTypes.node,\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes.elementType,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default Box;","import * as Yup from 'yup';\nimport { useForm } from 'react-hook-form';\nimport { useNavigate } from 'react-router';\nimport { enqueueSnackbar } from 'notistack';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { useState, useEffect, useCallback } from 'react';\n\nimport { Box, Stack } from '@mui/system';\nimport {\n  Card,\n  Button,\n  Dialog,\n  Typography,\n  DialogTitle,\n  DialogActions,\n  DialogContent,\n} from '@mui/material';\n\nimport { useParams } from 'src/routes/hooks';\n\nimport { useBoolean } from 'src/hooks/use-boolean';\n\nimport axiosInstance from 'src/utils/axios';\nimport { fDateTime } from 'src/utils/format-time';\n\nimport { useGetOnemedicalreports } from 'src/api';\nimport { useLocales, useTranslate } from 'src/locales';\n\nimport Image from 'src/components/image';\nimport Iconify from 'src/components/iconify/iconify';\nimport FormProvider, { RHFUpload, RHFTextField } from 'src/components/hook-form';\n\nexport default function MdicalreportPage() {\n  const { t } = useTranslate();\n  const { currentLang } = useLocales();\n  const curLangAr = currentLang.value === 'ar';\n  const { id } = useParams();\n  const { medicalreports, refetch } = useGetOnemedicalreports(id);\n  const [ImgFiles, setImgFiles] = useState([]);\n  const medicalReportDialog = useBoolean();\n  const navigate = useNavigate();\n  const medicalReportSchema = Yup.object().shape({\n    employee: Yup.string(),\n    patient: Yup.string(),\n    file: Yup.array(),\n    entrance_mangament: Yup.string(),\n    description: Yup.string().required(t('Description is required')),\n    department: Yup.string(),\n    medical_report: Yup.string(),\n  });\n  const defaultValues = {\n    file: [],\n    description: '',\n  };\n\n  const methods = useForm({\n    mode: 'all',\n    resolver: yupResolver(medicalReportSchema),\n    defaultValues,\n  });\n\n  const {\n    reset,\n    handleSubmit,\n    watch,\n    setValue,\n    formState: { isSubmitting },\n  } = methods;\n  const values = watch();\n  useEffect(() => {\n    if (medicalreports) {\n      reset({\n        file: medicalreports.file || [],\n        description: medicalreports.description || '',\n      });\n    }\n  }, [medicalreports, reset]);\n\n  const onSubmit = async (submitdata) => {\n    try {\n      const formData = new FormData();\n\n      Object.keys(submitdata).forEach((key) => {\n        if (Array.isArray(submitdata[key])) {\n          submitdata[key].forEach((item, index) => {\n            formData.append(`${key}[${index}]`, item);\n          });\n        } else {\n          formData.append(key, submitdata[key]);\n        }\n      });\n\n      ImgFiles.forEach((file, index) => {\n        formData.append(`file[${index}]`, file);\n      });\n\n      await axiosInstance.patch(`/api/examination/${id}`, submitdata);\n\n      enqueueSnackbar('Prescription updated successfully', { variant: 'success' });\n      navigate(-1);\n      refetch();\n      reset();\n    } catch (error) {\n      console.error(error.message);\n      enqueueSnackbar('Error updating data', { variant: 'error' });\n    }\n  };\n\n  const fuser = (fuserSize) => {\n    const allowedExtensions = ['.jpeg', '.png', '.jpg', '.gif'];\n\n    const isValidFile = (fileName) => {\n      const fileExtension = fileName.slice(fileName.lastIndexOf('.')).toLowerCase();\n      const isExtensionAllowed = allowedExtensions.includes(fileExtension);\n      return isExtensionAllowed;\n    };\n\n    const isValidSize = (fileSize) => fileSize <= 3145728;\n\n    return {\n      validateFile: isValidFile,\n      validateSize: isValidSize,\n    };\n  };\n\n  const handleDrop = (acceptedFiles) => {\n    const fileValidator = fuser(acceptedFiles.reduce((acc, file) => acc + file.size, 0));\n\n    const isValidFiles = acceptedFiles.every(\n      (file) => fileValidator.validateFile(file.name) && fileValidator.validateSize(file.size)\n    );\n\n    if (isValidFiles) {\n      const newFiles = acceptedFiles;\n      setImgFiles((currentFiles) => [...currentFiles, ...newFiles]);\n      setValue('file', [...values.file, ...newFiles]);\n    } else {\n      enqueueSnackbar(t('Invalid file type or size'), { variant: 'error' });\n    }\n  };\n\n  const handleRemoveFile = useCallback(\n    (inputFile) => {\n      const filtered = values.file.filter((file) => file !== inputFile);\n      setValue('file', filtered);\n      setImgFiles(filtered);\n    },\n    [setValue, values.file]\n  );\n\n  const handleRemoveAllFiles = useCallback(() => {\n    setValue('file', []);\n    setImgFiles([]); // Clear image files state\n  }, [setValue]);\n\n  return (\n    <>\n      <Box\n        sx={{\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n        }}\n      >\n        <Stack\n          component={Card}\n          sx={{\n            p: 3,\n            width: '80%',\n            display: 'grid',\n            gridTemplateColumns: { md: '1fr 1fr', xs: '1fr' },\n          }}\n        >\n          <Box>\n            <Typography variant=\"h3\">{medicalreports?.patient?.name_english}</Typography>\n            <Typography sx={{ fontWeight: 600, p: 2 }}>\n              {t('Date')}:&nbsp; &nbsp;\n              <span style={{ color: 'gray', fontWeight: 400 }}>\n                {fDateTime(medicalreports?.created_at)}\n              </span>\n            </Typography>\n            <Typography sx={{ fontWeight: 600, p: 2 }}>\n              {t('Dr.')}&nbsp;\n              <span style={{ color: 'gray', fontWeight: 400 }}>\n                {medicalreports?.employee?.name_english}\n              </span>{' '}\n              &nbsp; added medical report\n            </Typography>\n            <Typography sx={{ fontWeight: 600, p: 2 }}>\n              {t('description')}:&nbsp;&nbsp;\n              <span style={{ color: 'gray', fontWeight: 400 }}>\n                {medicalreports?.description}\n              </span>{' '}\n            </Typography>\n            <Button variant=\"outlined\" sx={{ mt: 2 }} onClick={() => navigate(-1)}>\n              <Iconify icon=\"icon-park:back\" />\n              &nbsp; {t('Back')}\n            </Button>\n          </Box>\n          <Box>\n            <Box sx={{ display: 'grid', gridTemplateColumns: { md: '1fr 1fr', xs: '1fr' } }}>\n              {medicalreports?.file?.map((file, i) => (\n                <Image key={i} src={file} sx={{ m: 1 }} />\n              ))}\n            </Box>\n            <Button variant=\"outlined\" sx={{ mt: 2 }} onClick={medicalReportDialog.onTrue}>\n              <Iconify icon=\"icon-park:edit-two\" />\n              &nbsp; {t('Update')}\n            </Button>\n          </Box>\n        </Stack>\n      </Box>\n\n      <Dialog open={medicalReportDialog.value} onClose={medicalReportDialog.onFalse}>\n        <FormProvider methods={methods} onSubmit={handleSubmit(onSubmit)}>\n          <DialogTitle sx={{ color: 'success.main', position: 'relative', top: '10px' }}>\n            {curLangAr ? 'تعديل التقرير الطبي' : 'update medical report'}\n          </DialogTitle>\n          <DialogContent>\n            <RHFTextField\n              lang=\"en\"\n              multiline\n              name=\"description\"\n              label={t('description')}\n              sx={{ mb: 2, mt: 2 }}\n            />\n            <RHFUpload\n              multiple\n              autoFocus\n              fullWidth\n              name=\"file\"\n              margin=\"dense\"\n              sx={{ mb: 2 }}\n              variant=\"outlined\"\n              onDrop={handleDrop}\n              onRemove={handleRemoveFile}\n              onRemoveAll={handleRemoveAllFiles}\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button variant=\"outlined\" color=\"inherit\" onClick={medicalReportDialog.onFalse}>\n              {t('Cancel')}\n            </Button>\n            <Button type=\"submit\" loading={isSubmitting} variant=\"contained\">\n              {t('Upload')}\n            </Button>\n          </DialogActions>\n        </FormProvider>\n      </Dialog>\n    </>\n  );\n}\n","import { Helmet } from 'react-helmet-async';\n\nimport MediaclreportPage from 'src/sections/employee/appointmentsToday/medicalreportPage';\n\n// ----------------------------------------------------------------------\n\nexport default function MediaclreportPageview() {\n  return (\n    <>\n      <Helmet>\n        <title>record</title>\n        <meta name=\"description\" content=\"meta\" />\n      </Helmet>\n      <MediaclreportPage />\n    </>\n  );\n}\n"],"names":["generateUtilityClasses","createBox","defaultClassName","boxClasses","root","generateClassName","ClassNameGenerator","generate","MdicalreportPage","_medicalreports$patie","_medicalreports$emplo","_medicalreports$file","t","useTranslate","currentLang","useLocales","curLangAr","value","id","useParams","medicalreports","refetch","useGetOnemedicalreports","ImgFiles","setImgFiles","useState","medicalReportDialog","useBoolean","navigate","useNavigate","medicalReportSchema","Yup","shape","employee","patient","file","entrance_mangament","description","required","department","medical_report","methods","useForm","mode","resolver","yupResolver","defaultValues","reset","handleSubmit","watch","setValue","formState","isSubmitting","values","useEffect","handleRemoveFile","useCallback","inputFile","filtered","filter","handleRemoveAllFiles","_jsxs","_Fragment","children","_jsx","Box","sx","display","justifyContent","alignItems","Stack","component","Card","p","width","gridTemplateColumns","md","xs","Typography","variant","name_english","fontWeight","style","color","fDateTime","created_at","Button","mt","onClick","Iconify","icon","map","i","Image","src","m","onTrue","Dialog","open","onClose","onFalse","FormProvider","onSubmit","async","formData","FormData","Object","keys","submitdata","forEach","key","Array","isArray","item","index","append","axiosInstance","patch","enqueueSnackbar","error","console","message","DialogTitle","position","top","DialogContent","RHFTextField","lang","multiline","name","label","mb","RHFUpload","multiple","autoFocus","fullWidth","margin","onDrop","acceptedFiles","fileValidator","fuserSize","allowedExtensions","validateFile","fileName","fileExtension","slice","lastIndexOf","toLowerCase","includes","validateSize","fileSize","fuser","reduce","acc","size","every","newFiles","currentFiles","onRemove","onRemoveAll","DialogActions","type","loading","MediaclreportPageview","Helmet","content","MediaclreportPage"],"sourceRoot":""}
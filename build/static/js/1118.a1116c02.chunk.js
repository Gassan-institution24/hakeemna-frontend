"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[1118],{21118:(e,i,n)=>{n.d(i,{Z:()=>T});var t=n(8007),a=n(61134),l=n(72791),s=n(44695),o=n(53767),r=n(12258),c=n(61889),d=n(4567),u=n(57621),v=n(9585),p=n(10266),m=n(38072),x=n(19208),g=n(38887),h=n(66664),_=n(99116),f=n(8976),j=n(19721),Z=n(81164),y=n(32869),b=n(59493),w=n(80184);function T(){var e,i;const{t:n}=(0,Z.qM)(),{currentLang:T}=(0,Z.nt)(),P="ar"===T.value,k=[{label:n("read"),value:"read"},{label:n("create"),value:"create"},{label:n("edit"),value:"update"},{label:n("delete"),value:"delete"}],{id:I}=(0,x.UO)(),{user:X}=(0,f.E)(),z=(0,x.tv)(),{data:C}=(0,j.X79)(I),H=(0,g.F)("up","md"),{enqueueSnackbar:S}=(0,y.useSnackbar)(),q=t.Ry().shape({departments:t.IX(),employees:t.IX(),management_tables:t.IX(),appointments:t.IX(),appointment_configs:t.IX(),accounting:t.IX(),offers:t.IX(),quality_control:t.IX(),unit_service_info:t.IX(),old_patient:t.IX()}),M=(0,l.useMemo)((()=>{var e,i,n,t,a,l,s,o,r,c,d,u,v,p,m,x,g,h,_,f,j,Z;return{departments:(null===C||void 0===C||null===(e=C.acl)||void 0===e||null===(i=e.unit_service)||void 0===i?void 0:i.departments)||[],employees:(null===C||void 0===C||null===(n=C.acl)||void 0===n||null===(t=n.unit_service)||void 0===t?void 0:t.employees)||[],management_tables:(null===C||void 0===C||null===(a=C.acl)||void 0===a||null===(l=a.unit_service)||void 0===l?void 0:l.management_tables)||[],appointments:(null===C||void 0===C||null===(s=C.acl)||void 0===s||null===(o=s.unit_service)||void 0===o?void 0:o.appointments)||[],appointment_configs:(null===C||void 0===C||null===(r=C.acl)||void 0===r||null===(c=r.unit_service)||void 0===c?void 0:c.appointment_configs)||[],accounting:(null===C||void 0===C||null===(d=C.acl)||void 0===d||null===(u=d.unit_service)||void 0===u?void 0:u.accounting)||[],offers:(null===C||void 0===C||null===(v=C.acl)||void 0===v||null===(p=v.unit_service)||void 0===p?void 0:p.offers)||[],quality_control:(null===C||void 0===C||null===(m=C.acl)||void 0===m||null===(x=m.unit_service)||void 0===x?void 0:x.quality_control)||[],unit_service_info:(null===C||void 0===C||null===(g=C.acl)||void 0===g||null===(h=g.unit_service)||void 0===h?void 0:h.unit_service_info)||[],old_patient:(null===C||void 0===C||null===(_=C.acl)||void 0===_||null===(f=_.unit_service)||void 0===f?void 0:f.old_patient)||[],permissions:(null===C||void 0===C||null===(j=C.acl)||void 0===j||null===(Z=j.unit_service)||void 0===Z?void 0:Z.old_patient)||[]}}),[C]),R=(0,a.cI)({mode:"onTouched",resolver:(0,s.X)(q),defaultValues:M}),{reset:N,handleSubmit:E,formState:{isSubmitting:F,errors:L}}=R,{employeesData:O,loading:A}=(0,j.LLH)(null===X||void 0===X||null===(e=X.employee)||void 0===e||null===(i=e.employee_engagements[null===X||void 0===X?void 0:X.employee.selected_engagement])||void 0===i?void 0:i.unit_service._id);(0,l.useEffect)((()=>{var e,i;I||A||null===O||void 0===O||null===(e=O[0])||void 0===e||!e._id||z.push("".concat(m.H.unitservice.acl.unitservice,"/").concat(null===O||void 0===O||null===(i=O[0])||void 0===i?void 0:i._id))}),[I,O,z,A]),(0,l.useEffect)((()=>{Object.keys(L).length&&Object.keys(L).forEach(((e,i)=>{var n;return S("".concat(e,": ").concat((null===L||void 0===L||null===(n=L[e])||void 0===n?void 0:n.message)||"error"),{variant:"error"})}))}),[L,S]),(0,l.useEffect)((()=>{var e,i,n,t,a,l,s,o,r,c,d,u,v,p,m,x,g,h,_,f,j,Z;N({departments:(null===C||void 0===C||null===(e=C.acl)||void 0===e||null===(i=e.unit_service)||void 0===i?void 0:i.departments)||[],employees:(null===C||void 0===C||null===(n=C.acl)||void 0===n||null===(t=n.unit_service)||void 0===t?void 0:t.employees)||[],management_tables:(null===C||void 0===C||null===(a=C.acl)||void 0===a||null===(l=a.unit_service)||void 0===l?void 0:l.management_tables)||[],appointments:(null===C||void 0===C||null===(s=C.acl)||void 0===s||null===(o=s.unit_service)||void 0===o?void 0:o.appointments)||[],appointment_configs:(null===C||void 0===C||null===(r=C.acl)||void 0===r||null===(c=r.unit_service)||void 0===c?void 0:c.appointment_configs)||[],accounting:(null===C||void 0===C||null===(d=C.acl)||void 0===d||null===(u=d.unit_service)||void 0===u?void 0:u.accounting)||[],offers:(null===C||void 0===C||null===(v=C.acl)||void 0===v||null===(p=v.unit_service)||void 0===p?void 0:p.offers)||[],quality_control:(null===C||void 0===C||null===(m=C.acl)||void 0===m||null===(x=m.unit_service)||void 0===x?void 0:x.quality_control)||[],unit_service_info:(null===C||void 0===C||null===(g=C.acl)||void 0===g||null===(h=g.unit_service)||void 0===h?void 0:h.unit_service_info)||[],old_patient:(null===C||void 0===C||null===(_=C.acl)||void 0===_||null===(f=_.unit_service)||void 0===f?void 0:f.old_patient)||[],permissions:(null===C||void 0===C||null===(j=C.acl)||void 0===j||null===(Z=j.unit_service)||void 0===Z?void 0:Z.old_patient)||[]})}),[I,C]);const B=E((async e=>{try{const i=C.acl;i.unit_service=e,h.ZP.patch(h.Hv.employee_engagements.one(I),{acl:i}),_.Z.emit("updated",{user:X,link:m.H.unitservice.employees.acl(I),msg:"updated a unit of service employee permissions"}),S(n("updated successfully!"))}catch(i){S(P&&"".concat(i.arabic_message)||"".concat(i.message),{variant:"error"}),console.error(i)}})),D=(0,w.jsxs)(w.Fragment,{children:[H&&(0,w.jsxs)(c.ZP,{md:4,children:[(0,w.jsx)(d.Z,{variant:"h6",sx:{mb:.5},children:n("permissions")}),(0,w.jsx)(d.Z,{variant:"body2",sx:{color:"text.secondary"},children:n("giving or withdrowing permissions refered to all")}),(0,w.jsx)(d.Z,{variant:"body2",sx:{color:"text.secondary"},children:n("unit of service and all its departments")})]}),(0,w.jsx)(c.ZP,{xs:12,md:8,children:(0,w.jsxs)(u.Z,{children:[!H&&(0,w.jsx)(v.Z,{title:n("permissions")}),(0,w.jsxs)(o.Z,{spacing:3,sx:{p:3},children:[(0,w.jsxs)(o.Z,{spacing:1,children:[(0,w.jsx)(d.Z,{title:"Permissions",textTransform:"capitalize",variant:"subtitle2",children:n("departments")}),(0,w.jsx)(b.s2,{row:!0,spacing:4,name:"departments",options:k})]}),(0,w.jsxs)(o.Z,{spacing:1,children:[(0,w.jsx)(d.Z,{textTransform:"capitalize",variant:"subtitle2",children:n("employees")}),(0,w.jsx)(b.s2,{row:!0,spacing:4,name:"employees",options:k})]}),(0,w.jsxs)(o.Z,{spacing:1,children:[(0,w.jsx)(d.Z,{textTransform:"capitalize",variant:"subtitle2",children:n("management tables")}),(0,w.jsx)(b.s2,{row:!0,spacing:4,name:"management_tables",options:k})]}),(0,w.jsxs)(o.Z,{spacing:1,children:[(0,w.jsx)(d.Z,{textTransform:"capitalize",variant:"subtitle2",children:n("appointments")}),(0,w.jsx)(b.s2,{row:!0,spacing:4,name:"appointments",options:k})]}),(0,w.jsxs)(o.Z,{spacing:1,children:[(0,w.jsx)(d.Z,{textTransform:"capitalize",variant:"subtitle2",children:n("appointment configuration")}),(0,w.jsx)(b.s2,{row:!0,spacing:4,name:"appointment_configs",options:k})]}),(0,w.jsxs)(o.Z,{spacing:1,children:[(0,w.jsx)(d.Z,{textTransform:"capitalize",variant:"subtitle2",children:n("accounting")}),(0,w.jsx)(b.s2,{row:!0,spacing:4,name:"accounting",options:k})]}),(0,w.jsxs)(o.Z,{spacing:1,children:[(0,w.jsx)(d.Z,{textTransform:"capitalize",variant:"subtitle2",children:n("offers")}),(0,w.jsx)(b.s2,{row:!0,spacing:4,name:"offers",options:k})]}),(0,w.jsxs)(o.Z,{spacing:1,children:[(0,w.jsx)(d.Z,{textTransform:"capitalize",variant:"subtitle2",children:n("quality control")}),(0,w.jsx)(b.s2,{row:!0,spacing:4,name:"quality_control",options:k})]}),(0,w.jsxs)(o.Z,{spacing:1,children:[(0,w.jsx)(d.Z,{textTransform:"capitalize",variant:"subtitle2",children:n("old patient data")}),(0,w.jsx)(b.s2,{row:!0,spacing:4,name:"old_patient",options:k})]}),(0,w.jsxs)(o.Z,{spacing:1,children:[(0,w.jsx)(d.Z,{textTransform:"capitalize",variant:"subtitle2",children:n("unit of service info")}),(0,w.jsx)(b.s2,{row:!0,spacing:4,name:"unit_service_info",options:k})]}),(0,w.jsxs)(o.Z,{spacing:1,children:[(0,w.jsx)(d.Z,{textTransform:"capitalize",variant:"subtitle2",children:n("permissions")}),(0,w.jsx)(b.s2,{row:!0,spacing:4,name:"permissions",options:k})]})]})]})})]}),U=(0,w.jsxs)(w.Fragment,{children:[H&&(0,w.jsx)(c.ZP,{md:4}),(0,w.jsx)(c.ZP,{xs:12,md:8,sx:{display:"flex",justifyContent:"flex-end"},children:(0,w.jsx)(r.Z,{type:"submit",variant:"contained",loading:F,sx:{m:2},children:n("save changes")})})]});return(0,w.jsx)(p.Z,{maxWidth:"lg",children:(0,w.jsx)(b.ZP,{methods:R,onSubmit:B,children:(0,w.jsxs)(c.ZP,{container:!0,spacing:3,children:[D,U]})})})}},9585:(e,i,n)=>{n.d(i,{Z:()=>Z});var t=n(63366),a=n(87462),l=n(72791),s=n(59278),o=n(20838),r=n(4567),c=n(31402),d=n(66934),u=n(59703),v=n(64657);function p(e){return(0,v.ZP)("MuiCardHeader",e)}const m=(0,u.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var x=n(80184);const g=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],h=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,i)=>(0,a.Z)({["& .".concat(m.title)]:i.title,["& .".concat(m.subheader)]:i.subheader},i.root)})({display:"flex",alignItems:"center",padding:16}),_=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,i)=>i.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),f=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,i)=>i.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),j=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,i)=>i.content})({flex:"1 1 auto"}),Z=l.forwardRef((function(e,i){const n=(0,c.Z)({props:e,name:"MuiCardHeader"}),{action:l,avatar:d,className:u,component:v="div",disableTypography:m=!1,subheader:Z,subheaderTypographyProps:y,title:b,titleTypographyProps:w}=n,T=(0,t.Z)(n,g),P=(0,a.Z)({},n,{component:v,disableTypography:m}),k=(e=>{const{classes:i}=e;return(0,o.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},p,i)})(P);let I=b;null==I||I.type===r.Z||m||(I=(0,x.jsx)(r.Z,(0,a.Z)({variant:d?"body2":"h5",className:k.title,component:"span",display:"block"},w,{children:I})));let X=Z;return null==X||X.type===r.Z||m||(X=(0,x.jsx)(r.Z,(0,a.Z)({variant:d?"body2":"body1",className:k.subheader,color:"text.secondary",component:"span",display:"block"},y,{children:X}))),(0,x.jsxs)(h,(0,a.Z)({className:(0,s.Z)(k.root,u),as:v,ref:i,ownerState:P},T,{children:[d&&(0,x.jsx)(_,{className:k.avatar,ownerState:P,children:d}),(0,x.jsxs)(j,{className:k.content,ownerState:P,children:[I,X]}),l&&(0,x.jsx)(f,{className:k.action,ownerState:P,children:l})]}))}))}}]);
//# sourceMappingURL=1118.a1116c02.chunk.js.map
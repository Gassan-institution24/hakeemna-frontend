"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[6058],{36058:(e,n,i)=>{i.r(n),i.d(n,{default:()=>N});var o=i(6907),t=i(19208),l=i(43616),s=i(6965),r=i(34045),a=i(64802),d=i(61146),c=i(72791),u=i(61474),h=i(2101),x=i(57621),v=i(79836),m=i(13838),g=i(12065),p=i(89164),j=i(53382),f=i(39281),b=i(38072),_=i(4419),Z=i(22459),C=i(84954),w=i(40268),P=i(10261),y=i(25279),k=i(73379),S=i(38062),D=i(76932),F=i(68870),L=i(82626),R=i(9195),O=i(68745),B=i(13400),W=i(30250),E=i(24845),M=i(80184);function q(e){let{row:n,onEditRow:i,setFilters:o,filters:t}=e;const{code:l,free_subscription:s,subscription:r,status:a,Start_date:d,End_date:c,Users_num:u,price:h,Payment_method:x,Payment_frequency:v,note:m,created_at:g,user_creation:p,ip_address_user_creation:j,updated_at:f,user_modification:b,ip_address_user_modification:_,modifications_nums:Z}=n,{t:P}=(0,D.qM)(),y=(0,E.S)(),k=(0,E.S)(),S=(0,M.jsxs)(R.Z,{hover:!0,children:[(0,M.jsx)(O.Z,{align:"center",children:l}),(0,M.jsx)(O.Z,{align:"center",onClick:()=>o({...t,name:null===s||void 0===s?void 0:s.name_english}),children:null===s||void 0===s?void 0:s.name_english}),(0,M.jsx)(O.Z,{align:"center",onClick:()=>o({...t,name:null===r||void 0===r?void 0:r.name_english}),children:null===r||void 0===r?void 0:r.name_english}),(0,M.jsx)(O.Z,{align:"center",children:(0,M.jsx)(C.Z,{variant:"soft",color:("active"===a?"success":"inactive"===a&&"error")||"default",children:a})}),(0,M.jsx)(O.Z,{align:"center",children:(0,W.zM)(d)}),(0,M.jsx)(O.Z,{align:"center",children:(0,W.zM)(c)}),(0,M.jsx)(O.Z,{align:"center",children:u}),(0,M.jsx)(O.Z,{align:"center",children:h}),(0,M.jsx)(O.Z,{align:"center",onClick:()=>o({...t,name:null===x||void 0===x?void 0:x.name_english}),children:null===x||void 0===x?void 0:x.name_english}),(0,M.jsx)(O.Z,{align:"center",children:v}),(0,M.jsx)(O.Z,{align:"center",children:m}),(0,M.jsx)(O.Z,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,M.jsx)(B.Z,{color:y.open?"inherit":"default",onClick:y.onOpen,children:(0,M.jsx)(w.Z,{icon:"eva:more-vertical-fill"})})})]});return(0,M.jsxs)(M.Fragment,{children:[S,(0,M.jsxs)(E.Z,{open:y.open,onClose:y.onClose,arrow:"right-top",sx:{width:140},children:[(0,M.jsxs)(L.Z,{onClick:()=>{i(),y.onClose()},children:[(0,M.jsx)(w.Z,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,M.jsxs)(L.Z,{onClick:k.onOpen,children:[(0,M.jsx)(w.Z,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,M.jsxs)(E.Z,{open:k.open,onClose:k.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,M.jsx)(F.Z,{sx:{fontWeight:600},children:"Creation Time:"}),(0,M.jsx)(F.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,W.zM)(g)}),(0,M.jsx)(F.Z,{sx:{pt:1,fontWeight:600},children:"Creator:"}),(0,M.jsx)(F.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===p||void 0===p?void 0:p.email}),(0,M.jsx)(F.Z,{sx:{pt:1,fontWeight:600},children:"Creator IP:"}),(0,M.jsx)(F.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:j}),(0,M.jsx)(F.Z,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,M.jsx)(F.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,W.zM)(f)}),(0,M.jsx)(F.Z,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,M.jsx)(F.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===b||void 0===b?void 0:b.email}),(0,M.jsx)(F.Z,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,M.jsx)(F.Z,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:_}),(0,M.jsxs)(F.Z,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",Z]})]})]})}var I=i(81653),A=i(48566);const T=[{id:"code",label:"Code"},{id:"free_subscription",label:"Free Subscription"},{id:"subscription",label:"subscription"},{id:"status",label:"Status"},{id:"Start_date",label:"Start Date"},{id:"End_date",label:"End Date"},{id:"Users_num",label:"Users no"},{id:"price",label:"Price"},{id:"Payment_method",label:"Payment Method"},{id:"Payment_frequency",label:"Payment Frequency"},{id:"notes",label:"Notes"},{id:"",width:88}],z={name:"",status:"all"},U=[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}];function H(e){let{unitServiceData:n}=e;const i=(0,S.x6)({defaultOrderBy:"code"}),o=(0,t.UO)(),{id:F}=o,L=(0,c.useRef)(),R=(0,y.K$)(),O=((0,Z.k)(),(0,Z.k)(),(0,t.tv)()),{licenseMovements:B,loading:W,refetch:E}=(0,l.Bb)(F),[H,N]=(0,c.useState)(z),K=!(!H.startDate||!H.endDate)&&H.startDate.getTime()>H.endDate.getTime(),Q=function(e){var n;let{inputData:i,comparator:o,filters:t,dateError:l}=e;const{status:s,name:r}=t,a=null===(n=i)||void 0===n?void 0:n.map(((e,n)=>[e,n]));null===a||void 0===a||a.sort(((e,n)=>{const i=o(e[0],n[0]);return 0!==i?i:e[1]-n[1]})),i=a.map((e=>e[0])),r&&(i=i.filter((e=>{var n,i,o,t,l,s,a,d,c,u,h,x,v,m,g,p,j,f;return(null===e||void 0===e||null===(n=e.free_subscription)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(i=e.free_subscription)||void 0===i||null===(o=i.name_english)||void 0===o?void 0:o.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e||null===(t=e.free_subscription)||void 0===t?void 0:t.name_arabic)&&-1!==(null===e||void 0===e||null===(l=e.free_subscription)||void 0===l||null===(s=l.name_arabic)||void 0===s?void 0:s.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e||null===(a=e.subscription)||void 0===a?void 0:a.name_english)&&-1!==(null===e||void 0===e||null===(d=e.subscription)||void 0===d||null===(c=d.name_english)||void 0===c?void 0:c.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e||null===(u=e.subscription)||void 0===u?void 0:u.name_arabic)&&-1!==(null===e||void 0===e||null===(h=e.subscription)||void 0===h||null===(x=h.name_arabic)||void 0===x?void 0:x.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e||null===(v=e.Payment_method)||void 0===v?void 0:v.name_english)&&-1!==(null===e||void 0===e||null===(m=e.Payment_method)||void 0===m||null===(g=m.name_english)||void 0===g?void 0:g.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e||null===(p=e.Payment_method)||void 0===p?void 0:p.name_arabic)&&-1!==(null===e||void 0===e||null===(j=e.Payment_method)||void 0===j||null===(f=j.name_arabic)||void 0===f?void 0:f.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===r||JSON.stringify(e.code)===r})));"all"!==s&&(i=i.filter((e=>e.status===s)));return i}({inputData:B,comparator:(0,S.sQ)(i.order,i.orderBy),filters:H,dateError:K}),{t:$}=(0,D.qM)(),G=i.dense?52:72,J=!(null===H||void 0===H||!H.name)||"all"!==H.status,V=!Q.length&&J||!Q.length,X=(0,d.useReactToPrint)({content:()=>L.current}),Y=(0,c.useCallback)(((e,n)=>{i.onResetPage(),N((i=>({...i,[e]:n})))}),[i]),ee=(0,c.useCallback)((e=>{O.push(b.H.superadmin.unitservices.editAccounting(F,e))}),[O,F]),ne=(0,c.useCallback)((()=>{N(z)}),[]),ie=(0,c.useCallback)(((e,n)=>{Y("status",n)}),[Y]),oe=null===n||void 0===n?void 0:n.name_english;return W?(0,M.jsx)(s.a,{}):(0,M.jsxs)(p.Z,{maxWidth:!R.themeStretch&&"lg",children:[(0,M.jsx)(k.Z,{heading:"".concat(oe," accounting"),links:[{name:"dashboard",href:b.H.superadmin.root},{name:"Unit Services",href:b.H.superadmin.unitservices.root},{name:$("".concat(oe," accounting"))}],action:(0,M.jsx)(m.Z,{component:_.r,href:b.H.superadmin.unitservices.newAccounting(F),variant:"contained",startIcon:(0,M.jsx)(w.Z,{icon:"mingcute:add-line"}),children:"New License"}),sx:{mb:{xs:3,md:5}}}),(0,M.jsxs)(x.Z,{children:[(0,M.jsx)(h.Z,{value:H.status,onChange:ie,sx:{px:2.5,boxShadow:e=>"inset 0 -2px 0 0 ".concat((0,g.Fq)(e.palette.grey[500],.08))},children:U.map((e=>(0,M.jsx)(u.Z,{iconPosition:"end",value:e.value,label:e.label,icon:(0,M.jsxs)(C.Z,{variant:"all"===e.value||e.value===H.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&B.length,"active"===e.value&&B.filter((e=>"active"===e.status)).length,"inactive"===e.value&&B.filter((e=>"inactive"===e.status)).length]})},e.value)))}),(0,M.jsx)(I.Z,{onPrint:X,filters:H,onFilters:Y,onDownload:()=>{const e=Q.reduce(((e,n)=>{var i,o;return e.push({code:n.code,name:n.name_english,category:null===(i=n.category)||void 0===i?void 0:i.name_english,symptoms:null===(o=n.symptoms)||void 0===o?void 0:o.map((e=>null===e||void 0===e?void 0:e.name_english))}),e}),[]),n=r.P6.book_new(),i=r.P6.json_to_sheet(e);r.P6.book_append_sheet(n,i,"Sheet 1");const o=r.cW(n,{bookType:"xlsx",type:"array"}),t=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,a.saveAs)(t,"unitservicesTable.xlsx")},canReset:J,onResetFilters:ne}),J&&(0,M.jsx)(A.Z,{filters:H,onFilters:Y,onResetFilters:ne,results:Q.length,sx:{p:2.5,pt:0}}),(0,M.jsx)(f.Z,{children:(0,M.jsx)(P.Z,{children:(0,M.jsxs)(v.Z,{ref:L,size:i.dense?"small":"medium",children:[(0,M.jsx)(S.K,{order:i.order,orderBy:i.orderBy,headLabel:T,rowCount:Q.length,numSelected:i.selected.length,onSort:i.onSort}),(0,M.jsxs)(j.Z,{children:[Q.slice(i.page*i.rowsPerPage,i.page*i.rowsPerPage+i.rowsPerPage).map((e=>(0,M.jsx)(q,{row:e,filters:H,setFilters:N,onSelectRow:()=>i.onSelectRow(e._id),onEditRow:()=>ee(e._id)},e._id))),(0,M.jsx)(S.$W,{height:G,emptyRows:(0,S.fQ)(i.page,i.rowsPerPage,B.length)}),(0,M.jsx)(S.et,{notFound:V})]})]})})}),(0,M.jsx)(S.S_,{count:Q.length,page:i.page,rowsPerPage:i.rowsPerPage,onPageChange:i.onChangePage,onRowsPerPageChange:i.onChangeRowsPerPage,dense:i.dense,onChangeDense:i.onChangeDense})]})]})}function N(){const e=(0,t.UO)(),{id:n}=e,{data:i,loading:r}=(0,l.V5)(n),a=(null===i||void 0===i?void 0:i.name_english)||"unit service";return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(o.ql,{children:(0,M.jsxs)("title",{children:[" ",a," Accounting"]})}),r&&(0,M.jsx)(s.a,{}),!r&&(0,M.jsx)(H,{unitServiceData:i})]})}},81653:(e,n,i)=>{i.d(n,{Z:()=>v});var o=i(72791),t=i(36314),l=i(13838),s=i(82626),r=i(48550),a=i(13400),d=i(63466),c=i(76932),u=i(40268),h=i(24845),x=i(80184);function v(e){let{filters:n,onFilters:i,onPrint:v,onDownload:m,canReset:g,onResetFilters:p}=e;const j=(0,h.S)(),{t:f}=(0,c.qM)(),b=(0,o.useCallback)((e=>{i("name",e.target.value)}),[i]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(t.Z,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[(0,x.jsxs)(t.Z,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[(0,x.jsx)(r.Z,{fullWidth:!0,value:n.name,onChange:b,placeholder:f("Search name or number..."),InputProps:{startAdornment:(0,x.jsx)(d.Z,{position:"start",children:(0,x.jsx)(u.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),(0,x.jsx)(a.Z,{onClick:j.onOpen,children:(0,x.jsx)(u.Z,{icon:"eva:more-vertical-fill"})})]}),g&&(0,x.jsx)(l.Z,{color:"error",sx:{flexShrink:0},onClick:p,startIcon:(0,x.jsx)(u.Z,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]}),(0,x.jsxs)(h.Z,{open:j.open,onClose:j.onClose,arrow:"right-top",sx:{width:140},children:[(0,x.jsxs)(s.Z,{onClick:()=>{v(),j.onClose()},children:[(0,x.jsx)(u.Z,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),(0,x.jsxs)(s.Z,{onClick:()=>{m(),j.onClose()},children:[(0,x.jsx)(u.Z,{icon:"solar:import-bold"}),"Import"]})]})]})}}}]);
//# sourceMappingURL=6058.5a263451.chunk.js.map
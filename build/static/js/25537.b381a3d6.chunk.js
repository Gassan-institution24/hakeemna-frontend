"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[25537],{25537:(e,a,n)=>{n.r(a),n.d(a,{default:()=>M});var t=n(73216),s=n(29490),i=n(7625),r=n(68719),o=n(80899),l=n(24858),d=n(65043),c=n(18403),p=n(74600),m=n(38246),u=n(68903),v=n(94496),h=n(12110),g=n(79958),x=n(77224),y=n(48407),j=n(67132),A=n(88887),f=n(31673),b=n(91562),_=n(75139),w=n(60778),k=n(94857),T=n(59699),C=n(70579);function S(){const{t:e}=(0,w.WD)(),{currentLang:a}=(0,w.jc)(),n="ar"===a.value,t=[{label:e("read"),value:"read"},{label:e("create"),value:"create"},{label:e("edit"),value:"update"},{label:e("delete"),value:"delete"}],{emid:s,wgid:r}=(0,j.g)(),{data:S}=(0,i.w5O)(r),{user:M}=(0,_.Z)(),N=(0,A.Q)("up","md"),{enqueueSnackbar:E}=(0,k.dh)(),H=o.Ik().shape({appointments:o.YO(),appointment_configs:o.YO(),accounting:o.YO(),entrance_management:o.YO(),permissions:o.YO()}),O=(0,d.useMemo)((()=>{var e,a,n,t,i,r,o,l,d,c,p,m,u,v,h;return{appointments:(null===S||void 0===S||null===(e=S.employees)||void 0===e||null===(a=e.find((e=>e._id===s)))||void 0===a||null===(n=a.acl)||void 0===n?void 0:n.appointments)||[],appointment_configs:(null===S||void 0===S||null===(t=S.employees)||void 0===t||null===(i=t.find((e=>e._id===s)))||void 0===i||null===(r=i.acl)||void 0===r?void 0:r.appointment_configs)||[],accounting:(null===S||void 0===S||null===(o=S.employees)||void 0===o||null===(l=o.find((e=>e._id===s)))||void 0===l||null===(d=l.acl)||void 0===d?void 0:d.accounting)||[],entrance_management:(null===S||void 0===S||null===(c=S.employees)||void 0===c||null===(p=c.find((e=>e._id===s)))||void 0===p||null===(m=p.acl)||void 0===m?void 0:m.entrance_management)||[],permissions:(null===S||void 0===S||null===(u=S.employees)||void 0===u||null===(v=u.find((e=>e._id===s)))||void 0===v||null===(h=v.acl)||void 0===h?void 0:h.permissions)||[]}}),[S,s]),R=(0,l.mN)({mode:"all",resolver:(0,c.t)(H),defaultValues:O}),{reset:$,handleSubmit:z,formState:{isSubmitting:Y,errors:P}}=R;(0,d.useEffect)((()=>{Object.keys(P).length&&Object.keys(P).forEach(((e,a)=>{var n;return E(`${e}: ${(null===P||void 0===P||null===(n=P[e])||void 0===n?void 0:n.message)||"error"}`,{variant:"error"})}))}),[P,E]),(0,d.useEffect)((()=>{$(O)}),[O,$]);const D=z((async a=>{try{f.Ay.patch(f.vZ.work_groups.employee.acl(s),{acl:a}),b.A.emit("updated",{user:M,link:y.f.unitservice.employees.acl(s),msg:"updated a department employee permissions"}),E(e("updated successfully!"))}catch(t){E(n&&`${t.arabic_message}`||`${t.message}`,{variant:"error"}),console.error(t)}})),F=(0,C.jsxs)(C.Fragment,{children:[N&&(0,C.jsxs)(u.Ay,{md:4,children:[(0,C.jsx)(v.A,{variant:"h6",sx:{mb:.5},children:e("permissions")}),(0,C.jsx)(v.A,{variant:"body2",sx:{color:"text.secondary"},children:e("giving or withdrowing permissions refered to all")}),(0,C.jsx)(v.A,{variant:"body2",sx:{color:"text.secondary"},children:e("work group and all its employees")})]}),(0,C.jsx)(u.Ay,{xs:12,md:8,children:(0,C.jsxs)(h.A,{children:[!N&&(0,C.jsx)(g.A,{title:e("permissions")}),(0,C.jsxs)(p.A,{spacing:3,sx:{p:3},children:[(0,C.jsxs)(p.A,{spacing:1,children:[(0,C.jsx)(v.A,{textTransform:"capitalize",variant:"subtitle2",children:e("appointments")}),(0,C.jsx)(T.lE,{row:!0,spacing:4,name:"appointments",options:t})]}),(0,C.jsxs)(p.A,{spacing:1,children:[(0,C.jsx)(v.A,{textTransform:"capitalize",variant:"subtitle2",children:e("appointment configuration")}),(0,C.jsx)(T.lE,{row:!0,spacing:4,name:"appointment_configs",options:t})]}),(0,C.jsxs)(p.A,{spacing:1,children:[(0,C.jsx)(v.A,{textTransform:"capitalize",variant:"subtitle2",children:e("accounting")}),(0,C.jsx)(T.lE,{row:!0,spacing:4,name:"accounting",options:t})]}),(0,C.jsxs)(p.A,{spacing:1,children:[(0,C.jsx)(v.A,{textTransform:"capitalize",variant:"subtitle2",children:e("entrance management")}),(0,C.jsx)(T.lE,{row:!0,spacing:4,name:"entrance_management",options:t})]}),(0,C.jsxs)(p.A,{spacing:1,children:[(0,C.jsx)(v.A,{textTransform:"capitalize",variant:"subtitle2",children:e("permissions")}),(0,C.jsx)(T.lE,{row:!0,spacing:4,name:"permissions",options:t})]})]})]})})]}),I=(0,C.jsxs)(C.Fragment,{children:[N&&(0,C.jsx)(u.Ay,{md:4}),(0,C.jsx)(u.Ay,{xs:12,md:8,sx:{display:"flex",justifyContent:"flex-end"},children:(0,C.jsx)(m.A,{type:"submit",variant:"contained",loading:Y,sx:{m:2},children:e("save changes")})})]});return(0,C.jsx)(x.A,{maxWidth:"lg",children:(0,C.jsx)(T.Ay,{methods:R,onSubmit:D,children:(0,C.jsxs)(u.Ay,{container:!0,spacing:3,children:[F,I]})})})}function M(){const e=(0,t.g)(),{id:a}=e,{data:n}=(0,i.UMH)(a);return(0,C.jsxs)(r.A,{category:"department",subcategory:"permissions",acl:"update",children:[(0,C.jsxs)(s.mg,{children:[(0,C.jsxs)("title",{children:[n.name_english||"Deartment"," : work group permissions "]}),(0,C.jsx)("meta",{name:"description",content:"meta"})]}),(0,C.jsx)(S,{})]})}},79958:(e,a,n)=>{n.d(a,{A:()=>f});var t=n(98587),s=n(58168),i=n(65043),r=n(58387),o=n(98610),l=n(94496),d=n(98206),c=n(34535),p=n(92532),m=n(72372);function u(e){return(0,m.Ay)("MuiCardHeader",e)}const v=(0,p.A)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var h=n(70579);const g=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],x=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,a)=>(0,s.A)({[`& .${v.title}`]:a.title,[`& .${v.subheader}`]:a.subheader},a.root)})({display:"flex",alignItems:"center",padding:16}),y=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,a)=>a.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),j=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,a)=>a.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),A=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,a)=>a.content})({flex:"1 1 auto"}),f=i.forwardRef((function(e,a){const n=(0,d.b)({props:e,name:"MuiCardHeader"}),{action:i,avatar:c,className:p,component:m="div",disableTypography:v=!1,subheader:f,subheaderTypographyProps:b,title:_,titleTypographyProps:w}=n,k=(0,t.A)(n,g),T=(0,s.A)({},n,{component:m,disableTypography:v}),C=(e=>{const{classes:a}=e;return(0,o.A)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},u,a)})(T);let S=_;null==S||S.type===l.A||v||(S=(0,h.jsx)(l.A,(0,s.A)({variant:c?"body2":"h5",className:C.title,component:"span",display:"block"},w,{children:S})));let M=f;return null==M||M.type===l.A||v||(M=(0,h.jsx)(l.A,(0,s.A)({variant:c?"body2":"body1",className:C.subheader,color:"text.secondary",component:"span",display:"block"},b,{children:M}))),(0,h.jsxs)(x,(0,s.A)({className:(0,r.A)(C.root,p),as:m,ref:a,ownerState:T},k,{children:[c&&(0,h.jsx)(y,{className:C.avatar,ownerState:T,children:c}),(0,h.jsxs)(A,{className:C.content,ownerState:T,children:[S,M]}),i&&(0,h.jsx)(j,{className:C.action,ownerState:T,children:i})]}))}))}}]);
//# sourceMappingURL=25537.b381a3d6.chunk.js.map
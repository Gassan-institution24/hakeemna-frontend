"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[9273],{89273:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Se});var r=o(6907),n=o(66630),i=o(19208),s=o(72791),a=o(53767),l=o(10266),c=o(24308),d=o(38072),p=o(25279),u=o(66664),x=o(84802),h=o(57621),m=o(9585),Z=o(40268),v=o(61889),g=o(48550),y=o(82626),f=o(49900),j=o(80184);const b=["very urgent","urgent","normal"];function w(e){var t,o,r;let{ticket:i}=e;const{enqueueSnackbar:l}=(0,x.Ds)(),{ticketCategoriesData:c}=(0,n.lek)(),{usersData:d}=(0,n.w4s)({role:"superadmin"}),[p,Z]=(0,s.useState)(i.priority),[w,C]=(0,s.useState)(i.category._id),[T,S]=(0,s.useState)(null===(t=i.assigned_to)||void 0===t?void 0:t._id);return(0,j.jsxs)(h.Z,{children:[(0,j.jsx)(m.Z,{title:"Ticket Info"}),(0,j.jsx)(a.Z,{direction:"row",sx:{p:3},children:(0,j.jsxs)(v.ZP,{sx:{p:4},container:!0,spacing:3,rowGap:2,children:[[{label:"user",value:null===i||void 0===i||null===(o=i.user_creation)||void 0===o?void 0:o.email},{label:"role",value:null===i||void 0===i||null===(r=i.user_creation)||void 0===r?void 0:r.role},{label:"category",value:(0,j.jsx)(g.Z,{select:!0,variant:"standard",size:"small",sx:{width:150},value:w,onChange:e=>{try{u.ZP.patch(u.Hv.tickets.one(i._id),{category:e.target.value}),C(e.target.value),l("changed successfully!")}catch(t){l(t.message)}},children:c.map(((e,t)=>(0,j.jsx)(y.Z,{value:e._id,children:e.name_english},t)))})},{label:"priority",value:(0,j.jsx)(g.Z,{select:!0,variant:"standard",size:"small",sx:{width:150},value:p,onChange:e=>{try{u.ZP.patch(u.Hv.tickets.one(i._id),{priority:e.target.value}),Z(e.target.value),l("changed successfully!")}catch(t){l(t.message)}},children:b.map(((e,t)=>(0,j.jsx)(y.Z,{value:e,children:e},t)))})},{label:"URL",value:null===i||void 0===i?void 0:i.URL},{label:"assigned to",value:(0,j.jsx)(g.Z,{select:!0,variant:"standard",size:"small",sx:{width:150},value:T,onChange:e=>{try{u.ZP.patch(u.Hv.tickets.one(i._id),{assigned_to:e.target.value}),S(e.target.value),l("changed successfully!")}catch(t){l(t.message)}},children:d.map(((e,t)=>(0,j.jsx)(y.Z,{value:e._id,children:e.email},t)))})}].map(((e,t)=>(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(v.ZP,{xs:12,md:6,children:(0,j.jsx)(f.Z,{primary:e.label,secondary:e.value,primaryTypographyProps:{typography:"body2",color:"text.secondary",mb:.5},secondaryTypographyProps:{typography:"subtitle2",color:"text.primary",component:"span"}})})}))),(0,j.jsx)(v.ZP,{xs:12,children:(0,j.jsx)(f.Z,{primary:"details",secondary:i.details,primaryTypographyProps:{typography:"body2",color:"text.secondary",mb:.5},secondaryTypographyProps:{typography:"subtitle2",color:"text.primary",component:"span"}})})]})})]})}var C=o(16029),T=o(93044),S=o(13400),M=o(17070),k=o(10261);function P(e){let{items:t,taxes:o,shipping:r,discount:n,subTotal:i,totalAmount:s}=e;const l=(0,j.jsxs)(a.Z,{spacing:2,alignItems:"flex-end",sx:{my:3,textAlign:"right",typography:"body2"},children:[(0,j.jsxs)(a.Z,{direction:"row",children:[(0,j.jsx)(C.Z,{sx:{color:"text.secondary"},children:"Subtotal"}),(0,j.jsx)(C.Z,{sx:{width:160,typography:"subtitle2"},children:(0,M.e_)(i)||"-"})]}),(0,j.jsxs)(a.Z,{direction:"row",children:[(0,j.jsx)(C.Z,{sx:{color:"text.secondary"},children:"Shipping"}),(0,j.jsx)(C.Z,{sx:{width:160,...r&&{color:"error.main"}},children:r?"- ".concat((0,M.e_)(r)):"-"})]}),(0,j.jsxs)(a.Z,{direction:"row",children:[(0,j.jsx)(C.Z,{sx:{color:"text.secondary"},children:"Discount"}),(0,j.jsx)(C.Z,{sx:{width:160,...n&&{color:"error.main"}},children:n?"- ".concat((0,M.e_)(n)):"-"})]}),(0,j.jsxs)(a.Z,{direction:"row",children:[(0,j.jsx)(C.Z,{sx:{color:"text.secondary"},children:"Taxes"}),(0,j.jsx)(C.Z,{sx:{width:160},children:o?(0,M.e_)(o):"-"})]}),(0,j.jsxs)(a.Z,{direction:"row",sx:{typography:"subtitle1"},children:[(0,j.jsx)(C.Z,{children:"Total"}),(0,j.jsx)(C.Z,{sx:{width:160},children:(0,M.e_)(s)||"-"})]})]});return(0,j.jsxs)(h.Z,{children:[(0,j.jsx)(m.Z,{title:"Details",action:(0,j.jsx)(S.Z,{children:(0,j.jsx)(Z.Z,{icon:"solar:pen-bold"})})}),(0,j.jsxs)(a.Z,{sx:{px:3},children:[(0,j.jsx)(k.Z,{children:null===t||void 0===t?void 0:t.map((e=>(0,j.jsxs)(a.Z,{direction:"row",alignItems:"center",sx:{py:3,minWidth:640,borderBottom:e=>"dashed 2px ".concat(e.palette.background.neutral)},children:[(0,j.jsx)(T.Z,{src:e.coverUrl,variant:"rounded",sx:{width:48,height:48,mr:2}}),(0,j.jsx)(f.Z,{primary:e.name,secondary:e.sku,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled",mt:.5}}),(0,j.jsxs)(C.Z,{sx:{typography:"body2"},children:["x",e.quantity]}),(0,j.jsx)(C.Z,{sx:{width:110,textAlign:"right",typography:"subtitle2"},children:(0,M.e_)(e.price)})]},e.id)))}),l]})]})}var R=o(13838),_=o(4567),N=o(4419),A=o(30250),D=o(84954),H=o(24845);function I(e){let{status:t,backLink:o,ticket:r,statusOptions:n,onChangeStatus:i}=e;const s=(0,H.S)();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(a.Z,{spacing:3,direction:{xs:"column",md:"row"},sx:{mb:{xs:3,md:5}},children:[(0,j.jsxs)(a.Z,{spacing:1,direction:"row",alignItems:"flex-start",children:[(0,j.jsx)(S.Z,{component:N.r,href:o,children:(0,j.jsx)(Z.Z,{icon:"eva:arrow-ios-back-fill"})}),(0,j.jsxs)(a.Z,{spacing:.5,children:[(0,j.jsxs)(a.Z,{spacing:1,direction:"row",alignItems:"center",children:[(0,j.jsxs)(_.Z,{variant:"h4",children:[" ",null===r||void 0===r?void 0:r.subject," "]}),(0,j.jsx)(D.Z,{variant:"soft",color:("pending"===t?"warning":"waiting"===t&&"secondary")||"processing"===t&&"info"||"completed"===t&&"success"||"closed"===t&&"error"||"default",children:t})]}),(0,j.jsx)(_.Z,{variant:"body2",sx:{color:"text.disabled"},children:(0,A.zM)(r.created_at)})]})]}),(0,j.jsx)(a.Z,{flexGrow:1,spacing:1.5,direction:"row",alignItems:"center",justifyContent:"flex-end",children:(0,j.jsx)(R.Z,{color:"inherit",variant:"outlined",endIcon:(0,j.jsx)(Z.Z,{icon:"eva:arrow-ios-downward-fill"}),onClick:s.onOpen,sx:{textTransform:"capitalize"},children:t})})]}),(0,j.jsx)(H.Z,{open:s.open,onClose:s.onClose,arrow:"top-right",sx:{width:140},children:null===n||void 0===n?void 0:n.map((e=>(0,j.jsx)(y.Z,{selected:e===t,onClick:()=>{s.onClose(),i(e)},children:e},e)))})]})}var O=o(27938),z=o(87462),L=o(63366);function G(e){var t,o,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(o=G(e[t]))&&(r&&(r+=" "),r+=o);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}const q=function(){for(var e,t,o=0,r="";o<arguments.length;)(e=arguments[o++])&&(t=G(e))&&(r&&(r+=" "),r+=t);return r};var U=o(20838),W=o(66934),F=o(31402);const B=s.createContext({});var E=o(64657),K=o(59703);function $(e){return(0,E.ZP)("MuiTimeline",e)}(0,K.Z)("MuiTimeline",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]);var J=o(14036);function Q(e){return"alternate-reverse"===e?"positionAlternateReverse":"position".concat((0,J.Z)(e))}const V=["position","className"],X=(0,W.ZP)("ul",{name:"MuiTimeline",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.position&&t[Q(o.position)]]}})({display:"flex",flexDirection:"column",padding:"6px 16px",flexGrow:1}),Y=s.forwardRef((function(e,t){const o=(0,F.Z)({props:e,name:"MuiTimeline"}),{position:r="right",className:n}=o,i=(0,L.Z)(o,V),a=(0,z.Z)({},o,{position:r}),l=(e=>{const{position:t,classes:o}=e,r={root:["root",t&&Q(t)]};return(0,U.Z)(r,$,o)})(a),c=s.useMemo((()=>({position:r})),[r]);return(0,j.jsx)(B.Provider,{value:c,children:(0,j.jsx)(X,(0,z.Z)({className:q(l.root,n),ownerState:a,ref:t},i))})}));function ee(e){return(0,E.ZP)("MuiTimelineDot",e)}(0,K.Z)("MuiTimelineDot",["root","filled","outlined","filledGrey","outlinedGrey","filledPrimary","outlinedPrimary","filledSecondary","outlinedSecondary"]);const te=["className","color","variant"],oe=(0,W.ZP)("span",{name:"MuiTimelineDot",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t["inherit"!==o.color&&"".concat(o.variant).concat((0,J.Z)(o.color))],t[o.variant]]}})((e=>{let{ownerState:t,theme:o}=e;return(0,z.Z)({display:"flex",alignSelf:"baseline",borderStyle:"solid",borderWidth:2,padding:4,borderRadius:"50%",boxShadow:(o.vars||o).shadows[1],margin:"11.5px 0"},"filled"===t.variant&&(0,z.Z)({borderColor:"transparent"},"inherit"!==t.color&&(0,z.Z)({},"grey"===t.color?{color:(o.vars||o).palette.grey[50],backgroundColor:(o.vars||o).palette.grey[400]}:{color:(o.vars||o).palette[t.color].contrastText,backgroundColor:(o.vars||o).palette[t.color].main})),"outlined"===t.variant&&(0,z.Z)({boxShadow:"none",backgroundColor:"transparent"},"inherit"!==t.color&&(0,z.Z)({},"grey"===t.color?{borderColor:(o.vars||o).palette.grey[400]}:{borderColor:(o.vars||o).palette[t.color].main})))})),re=s.forwardRef((function(e,t){const o=(0,F.Z)({props:e,name:"MuiTimelineDot"}),{className:r,color:n="grey",variant:i="filled"}=o,s=(0,L.Z)(o,te),a=(0,z.Z)({},o,{color:n,variant:i}),l=(e=>{const{color:t,variant:o,classes:r}=e,n={root:["root",o,"inherit"!==t&&"".concat(o).concat((0,J.Z)(t))]};return(0,U.Z)(n,ee,r)})(a);return(0,j.jsx)(oe,(0,z.Z)({className:q(l.root,r),ownerState:a,ref:t},s))}));function ne(e){return(0,E.ZP)("MuiTimelineContent",e)}const ie=(0,K.Z)("MuiTimelineContent",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]),se=["className"],ae=(0,W.ZP)(_.Z,{name:"MuiTimelineContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[Q(o.position)]]}})((e=>{let{ownerState:t}=e;return(0,z.Z)({flex:1,padding:"6px 16px",textAlign:"left"},"left"===t.position&&{textAlign:"right"})})),le=s.forwardRef((function(e,t){const o=(0,F.Z)({props:e,name:"MuiTimelineContent"}),{className:r}=o,n=(0,L.Z)(o,se),{position:i}=s.useContext(B),a=(0,z.Z)({},o,{position:i||"right"}),l=(e=>{const{position:t,classes:o}=e,r={root:["root",Q(t)]};return(0,U.Z)(r,ne,o)})(a);return(0,j.jsx)(ae,(0,z.Z)({component:"div",className:q(l.root,r),ownerState:a,ref:t},n))}));function ce(e){return(0,E.ZP)("MuiTimelineSeparator",e)}(0,K.Z)("MuiTimelineSeparator",["root"]);const de=["className"],pe=(0,W.ZP)("div",{name:"MuiTimelineSeparator",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column",flex:0,alignItems:"center"}),ue=s.forwardRef((function(e,t){const o=(0,F.Z)({props:e,name:"MuiTimelineSeparator"}),{className:r}=o,n=(0,L.Z)(o,de),i=o,s=(e=>{const{classes:t}=e;return(0,U.Z)({root:["root"]},ce,t)})(i);return(0,j.jsx)(pe,(0,z.Z)({className:q(s.root,r),ownerState:i,ref:t},n))}));function xe(e){return(0,E.ZP)("MuiTimelineConnector",e)}(0,K.Z)("MuiTimelineConnector",["root"]);const he=["className"],me=(0,W.ZP)("span",{name:"MuiTimelineConnector",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{width:2,backgroundColor:(t.vars||t).palette.grey[400],flexGrow:1}})),Ze=s.forwardRef((function(e,t){const o=(0,F.Z)({props:e,name:"MuiTimelineConnector"}),{className:r}=o,n=(0,L.Z)(o,he),i=o,s=(e=>{const{classes:t}=e;return(0,U.Z)({root:["root"]},xe,t)})(i);return(0,j.jsx)(me,(0,z.Z)({className:q(s.root,r),ownerState:i,ref:t},n))}));function ve(e){return(0,E.ZP)("MuiTimelineItem",e)}const ge=(0,K.Z)("MuiTimelineItem",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse","missingOppositeContent"]);var ye=o(13701);const fe=(0,K.Z)("MuiTimelineOppositeContent",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]),je=["position","className"],be=(0,W.ZP)("li",{name:"MuiTimelineItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[Q(o.position)]]}})((e=>{let{ownerState:t}=e;return(0,z.Z)({listStyle:"none",display:"flex",position:"relative",minHeight:70},"left"===t.position&&{flexDirection:"row-reverse"},("alternate"===t.position||"alternate-reverse"===t.position)&&{["&:nth-of-type(".concat("alternate"===t.position?"even":"odd",")")]:{flexDirection:"row-reverse",["& .".concat(ie.root)]:{textAlign:"right"},["& .".concat(fe.root)]:{textAlign:"left"}}},!t.hasOppositeContent&&{"&:before":{content:'""',flex:1,padding:"6px 16px"}})})),we=s.forwardRef((function(e,t){const o=(0,F.Z)({props:e,name:"MuiTimelineItem"}),{position:r,className:n}=o,i=(0,L.Z)(o,je),{position:a}=s.useContext(B);let l=!1;s.Children.forEach(o.children,(e=>{(0,ye.Z)(e,["TimelineOppositeContent"])&&(l=!0)}));const c=(0,z.Z)({},o,{position:r||a||"right",hasOppositeContent:l}),d=(e=>{const{position:t,classes:o,hasOppositeContent:r}=e,n={root:["root",Q(t),!r&&"missingOppositeContent"]};return(0,U.Z)(n,ve,o)})(c),p=s.useMemo((()=>({position:c.position})),[c.position]);return(0,j.jsx)(B.Provider,{value:p,children:(0,j.jsx)(be,(0,z.Z)({className:q(d.root,n),ownerState:c,ref:t},i))})}));function Ce(e){let{history:t}=e;const o=(0,j.jsxs)(a.Z,{spacing:2,component:O.Z,variant:"outlined",sx:{p:2.5,minWidth:260,flexShrink:0,borderRadius:2,typography:"body2",borderStyle:"dashed"},children:[(0,j.jsxs)(a.Z,{spacing:.5,children:[(0,j.jsx)(C.Z,{sx:{color:"text.disabled"},children:"Order time"}),(0,A.zM)(null===t||void 0===t?void 0:t.date)]}),(0,j.jsxs)(a.Z,{spacing:.5,children:[(0,j.jsx)(C.Z,{sx:{color:"text.disabled"},children:"Payment time"}),(0,A.zM)(null===t||void 0===t?void 0:t.date)]}),(0,j.jsxs)(a.Z,{spacing:.5,children:[(0,j.jsx)(C.Z,{sx:{color:"text.disabled"},children:"Delivery time for the carrier"}),(0,A.zM)(null===t||void 0===t?void 0:t.date)]}),(0,j.jsxs)(a.Z,{spacing:.5,children:[(0,j.jsx)(C.Z,{sx:{color:"text.disabled"},children:"Completion time"}),(0,A.zM)(null===t||void 0===t?void 0:t.date)]})]}),r=(0,j.jsx)(Y,{sx:{p:0,m:0,["& .".concat(ge.root,":before")]:{flex:0,padding:0}},children:null===t||void 0===t?void 0:t.map(((e,o)=>{const r=0===o,n=o===t.timeline.length-1;return(0,j.jsxs)(we,{children:[(0,j.jsxs)(ue,{children:[(0,j.jsx)(re,{color:r?"primary":"grey"}),n?null:(0,j.jsx)(Ze,{})]}),(0,j.jsxs)(le,{children:[(0,j.jsx)(_.Z,{variant:"subtitle2",children:e.note}),(0,j.jsx)(C.Z,{sx:{color:"text.disabled",typography:"caption",mt:.5},children:(0,A.zM)(e.note)})]})]},e.note)}))});return(0,j.jsxs)(h.Z,{children:[(0,j.jsx)(m.Z,{title:"History"}),(0,j.jsxs)(a.Z,{spacing:3,alignItems:{md:"flex-start"},direction:{xs:"column-reverse",md:"row"},sx:{p:3},children:[r,o]})]})}function Te(e){let{ticket:t}=e;const o=(0,p.K$)(),{enqueueSnackbar:r}=(0,x.Ds)(),[n,i]=(0,s.useState)(t.status),h=(0,s.useCallback)((e=>{try{u.ZP.patch(u.Hv.tickets.one(t._id),{status:e}),i(e),r("changed successfully!")}catch(o){r(o.message)}}),[t._id,r]);return(0,j.jsxs)(l.Z,{maxWidth:!o.themeStretch&&"lg",children:[(0,j.jsx)(I,{backLink:d.H.superadmin.communication.root,ticket:t,status:n,onChangeStatus:h,statusOptions:["pending","processing","waiting","completed","closed"]}),(0,j.jsxs)(c.Z,{container:!0,spacing:3,children:[(0,j.jsx)(c.Z,{xs:12,md:7,children:(0,j.jsxs)(a.Z,{spacing:3,direction:{xs:"column-reverse",md:"column"},children:[(0,j.jsx)(w,{ticket:t}),(0,j.jsx)(Ce,{history:t.history})]})}),(0,j.jsx)(c.Z,{xs:12,md:5,children:(0,j.jsx)(P,{items:t.items,taxes:t.taxes,shipping:t.shipping,discount:t.discount,subTotal:t.subTotal,totalAmount:t.totalAmount})})]})]})}function Se(){const{id:e}=(0,i.UO)(),{data:t}=(0,n.NC4)(e);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(r.ql,{children:[(0,j.jsx)("title",{children:" Ticket info "}),(0,j.jsx)("meta",{name:"description",content:"meta"})]}),t&&(0,j.jsx)(Te,{ticket:t})]})}},9585:(e,t,o)=>{o.d(t,{Z:()=>j});var r=o(63366),n=o(87462),i=o(72791),s=o(59278),a=o(20838),l=o(4567),c=o(31402),d=o(66934),p=o(59703),u=o(64657);function x(e){return(0,u.ZP)("MuiCardHeader",e)}const h=(0,p.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var m=o(80184);const Z=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],v=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,n.Z)({["& .".concat(h.title)]:t.title,["& .".concat(h.subheader)]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),g=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),y=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),f=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),j=i.forwardRef((function(e,t){const o=(0,c.Z)({props:e,name:"MuiCardHeader"}),{action:i,avatar:d,className:p,component:u="div",disableTypography:h=!1,subheader:j,subheaderTypographyProps:b,title:w,titleTypographyProps:C}=o,T=(0,r.Z)(o,Z),S=(0,n.Z)({},o,{component:u,disableTypography:h}),M=(e=>{const{classes:t}=e;return(0,a.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},x,t)})(S);let k=w;null==k||k.type===l.Z||h||(k=(0,m.jsx)(l.Z,(0,n.Z)({variant:d?"body2":"h5",className:M.title,component:"span",display:"block"},C,{children:k})));let P=j;return null==P||P.type===l.Z||h||(P=(0,m.jsx)(l.Z,(0,n.Z)({variant:d?"body2":"body1",className:M.subheader,color:"text.secondary",component:"span",display:"block"},b,{children:P}))),(0,m.jsxs)(v,(0,n.Z)({className:(0,s.Z)(M.root,p),as:u,ref:t,ownerState:S},T,{children:[d&&(0,m.jsx)(g,{className:M.avatar,ownerState:S,children:d}),(0,m.jsxs)(f,{className:M.content,ownerState:S,children:[k,P]}),i&&(0,m.jsx)(y,{className:M.action,ownerState:S,children:i})]}))}))}}]);
//# sourceMappingURL=9273.02a31a5b.chunk.js.map
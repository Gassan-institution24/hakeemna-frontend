"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[2732],{94791:(e,n,t)=>{t.d(n,{i5:()=>f,A0:()=>h,ZP:()=>Z,vr:()=>o});var i=t(95717),a=t(72791),l=t(13967);function o(e){const n=(0,l.Z)(),t=(0,a.useRef)(null),[i,o]=(0,a.useState)((null===e||void 0===e?void 0:e.initialSlide)||0),[r,s]=(0,a.useState)(void 0),d="rtl"===n.direction,c={arrows:!1,dots:!(null===e||void 0===e||!e.customPaging),rtl:d,beforeChange:(e,n)=>o(n),...e,fade:!(null===e||void 0===e||!e.fade||d)},u=(0,a.useCallback)((()=>{t.current&&s(t.current)}),[]),m=(0,a.useCallback)((()=>{t.current&&t.current.slickPrev()}),[]),h=(0,a.useCallback)((()=>{t.current&&t.current.slickNext()}),[]),x=(0,a.useCallback)((e=>{t.current&&t.current.slickGoTo(e)}),[]);return{nav:r,carouselRef:t,currentIndex:i,carouselSettings:c,onPrev:m,onNext:h,onTogo:x,onSetNav:u,setNav:s,setCurrentIndex:o}}var r=t(16029),s=t(53767),d=t(66934),c=t(80184);const u=(0,d.ZP)(r.Z,{shouldForwardProp:e=>"rounded"!==e})((e=>{let{rounded:n,theme:t}=e;return{zIndex:9,margin:0,padding:0,display:"flex",alignItems:"center",justifyContent:"center",color:t.palette.primary.main,"& li":{width:18,height:18,opacity:.32,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer","&.slick-active":{opacity:1,...n&&{"& span":{width:16,borderRadius:6}}}}}})),m=(0,d.ZP)("span")((e=>{let{theme:n}=e;return{width:8,height:8,borderRadius:"50%",transition:n.transitions.create(["width"],{easing:n.transitions.easing.sharp,duration:n.transitions.duration.short})}}));function h(e){const n=(null===e||void 0===e?void 0:e.rounded)||!1,t=null===e||void 0===e?void 0:e.sx;return{appendDots:i=>(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(u,{component:"ul",rounded:n,sx:{...t},...e,children:i})}),customPaging:()=>(0,c.jsx)(s.Z,{component:"div",alignItems:"center",justifyContent:"center",sx:{width:1,height:1},children:(0,c.jsx)(m,{sx:{bgcolor:"currentColor"}})})}}var x=t(13400),p=t(12065),g=t(40268);function v(e){let{icon:n="eva:arrow-ios-forward-fill",isRTL:t}=e;return(0,c.jsx)(g.Z,{icon:n,sx:{transform:" scaleX(-1)",...t&&{transform:" scaleX(1)"}}})}function b(e){let{icon:n="eva:arrow-ios-forward-fill",isRTL:t}=e;return(0,c.jsx)(g.Z,{icon:n,sx:{...t&&{transform:" scaleX(-1)"}}})}const j=(0,d.ZP)(x.Z,{shouldForwardProp:e=>"filled"!==e&&"hasChild"!==e&&"shape"!==e})((e=>{let{filled:n,shape:t,hasChild:i,theme:a}=e;return{color:"inherit",transition:a.transitions.create("all",{duration:a.transitions.duration.shorter}),..."rounded"===t&&{borderRadius:1.5*a.shape.borderRadius},...!n&&{opacity:.48,"&:hover":{opacity:1}},...n&&{color:(0,p.Fq)(a.palette.common.white,.8),backgroundColor:(0,p.Fq)(a.palette.grey[900],.48),"&:hover":{color:a.palette.common.white,backgroundColor:a.palette.grey[900]}},...i&&{zIndex:9,top:"50%",position:"absolute",marginTop:a.spacing(-2.5)}}}));function f(e){let{shape:n="circular",filled:t=!1,icon:i,onNext:a,onPrev:o,children:r,leftButtonProps:d,rightButtonProps:u,sx:m,...h}=e;const x="rtl"===(0,l.Z)().direction;return!!r?(0,c.jsxs)(s.Z,{sx:m,...h,children:[a&&(0,c.jsx)(j,{filled:t,shape:n,hasChild:!!r,onClick:o,...d,sx:{left:16,...null===d||void 0===d?void 0:d.sx},children:(0,c.jsx)(v,{icon:i,isRTL:x})}),r,o&&(0,c.jsx)(j,{filled:t,shape:n,hasChild:!!r,onClick:a,...u,sx:{right:16,...null===u||void 0===u?void 0:u.sx},children:(0,c.jsx)(b,{icon:i,isRTL:x})})]}):(0,c.jsxs)(s.Z,{direction:"row",alignItems:"center",display:"inline-flex",sx:m,...h,children:[(0,c.jsx)(j,{filled:t,shape:n,onClick:o,...d,children:(0,c.jsx)(v,{icon:i,isRTL:x})}),(0,c.jsx)(j,{filled:t,shape:n,onClick:a,...u,children:(0,c.jsx)(b,{icon:i,isRTL:x})})]})}const Z=i.Z},38563:(e,n,t)=>{t.d(n,{Z:()=>u});var i=t(16029),a=t(50533),l=t(53767),o=t(4567),r=t(93517),s=t(4419),d=t(80184);function c(e){let{link:n,activeLast:t,disabled:l}=e;const o={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...l&&!t&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},r=(0,d.jsxs)(d.Fragment,{children:[n.icon&&(0,d.jsx)(i.Z,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:n.icon}),n.name]});return n.href?(0,d.jsx)(a.Z,{component:s.r,href:n.href,sx:o,children:r}):(0,d.jsxs)(i.Z,{sx:o,children:[" ",r," "]})}function u(e){let{links:n,action:t,heading:s,moreLink:u,activeLast:h,sx:x,...p}=e;const g=n&&n[n.length-1].name;return(0,d.jsxs)(i.Z,{sx:{...x},children:[(0,d.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[(0,d.jsxs)(i.Z,{sx:{flexGrow:1,display:"flex",gap:{md:3},alignItems:{md:"center"},flexDirection:{xs:"column",md:"row"}},children:[s&&(0,d.jsx)(o.Z,{textTransform:"capitalize",variant:"h4",gutterBottom:!0,children:s}),n&&!!n.length&&(0,d.jsx)(r.Z,{separator:(0,d.jsx)(m,{}),...p,children:null===n||void 0===n?void 0:n.map(((e,n)=>(0,d.jsx)(c,{link:e,activeLast:h,disabled:e.name===g},n)))})]}),t&&(0,d.jsxs)(i.Z,{sx:{flexShrink:0,textTransform:"capitalize"},children:[" ",t," "]})]}),!!u&&(0,d.jsx)(i.Z,{sx:{mt:2},children:u.map(((e,n)=>(0,d.jsx)(a.Z,{href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},n)))})]})}function m(){return(0,d.jsx)(i.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}},73379:(e,n,t)=>{t.d(n,{Z:()=>i.Z});var i=t(38563)},27356:(e,n,t)=>{t.d(n,{Z:()=>s});var i=t(16029),a=t(53767),l=t(12065),o=t(4567),r=t(80184);function s(e){let{title:n,imgUrl:t,action:s,filled:d,description:c,sx:u,...m}=e;return(0,r.jsxs)(a.Z,{flexGrow:1,alignItems:"center",justifyContent:"center",sx:{px:3,height:1,...d&&{borderRadius:2,bgcolor:e=>(0,l.Fq)(e.palette.grey[500],.04),border:e=>"dashed 1px ".concat((0,l.Fq)(e.palette.grey[500],.08))},...u},...m,children:[(0,r.jsx)(i.Z,{component:"img",alt:"empty content",src:t||"/assets/icons/empty/ic_content.svg",sx:{width:1,maxWidth:160}}),n&&(0,r.jsx)(o.Z,{variant:"h6",component:"span",sx:{mt:1,color:"text.disabled",textAlign:"center"},children:n}),c&&(0,r.jsx)(o.Z,{variant:"caption",sx:{mt:1,color:"text.disabled",textAlign:"center"},children:c}),s&&s]})}},31092:(e,n,t)=>{t.d(n,{Z:()=>i.Z});var i=t(27356)},38062:(e,n,t)=>{function i(e,n,t){return e?Math.max(0,(1+e)*n-t):0}function a(e,n,t){return null===e[t]?1:null===n[t]||n[t]<e[t]?-1:n[t]>e[t]?1:0}function l(e,n){return"desc"===e?(e,t)=>a(e,t,n):(e,t)=>-a(e,t,n)}t.d(n,{$W:()=>x,K:()=>f,et:()=>h,S_:()=>S,Z4:()=>y,fQ:()=>i,sQ:()=>l,x6:()=>r});var o=t(72791);function r(e){const[n,t]=(0,o.useState)(!(null===e||void 0===e||!e.defaultDense)),[i,a]=(0,o.useState)((null===e||void 0===e?void 0:e.defaultCurrentPage)||0),[l,r]=(0,o.useState)((null===e||void 0===e?void 0:e.defaultOrderBy)||"code"),[s,d]=(0,o.useState)((null===e||void 0===e?void 0:e.defaultRowsPerPage)||25),[c,u]=(0,o.useState)((null===e||void 0===e?void 0:e.defaultOrder)||"asc"),[m,h]=(0,o.useState)((null===e||void 0===e?void 0:e.defaultSelected)||[]),x=(0,o.useCallback)((e=>{""!==e&&(u(l===e&&"asc"===c?"desc":"asc"),r(e))}),[c,l]),p=(0,o.useCallback)((e=>{const n=m.includes(e)?m.filter((n=>n!==e)):[...m,e];h(n)}),[m]),g=(0,o.useCallback)((e=>{a(0),d(parseInt(e.target.value,10))}),[]),v=(0,o.useCallback)((e=>{t(e.target.checked)}),[]),b=(0,o.useCallback)(((e,n)=>{h(e?n:[])}),[]),j=(0,o.useCallback)(((e,n)=>{a(n)}),[]),f=(0,o.useCallback)((()=>{a(0)}),[]),Z=(0,o.useCallback)((e=>{h([]),i&&e<2&&a(i-1)}),[i]),_=(0,o.useCallback)((e=>{let{totalRows:n,totalRowsInPage:t,totalRowsFiltered:l}=e;const o=m.length;if(h([]),i)if(o===t)a(i-1);else if(o===l)a(0);else if(o>t){const e=Math.ceil((n-o)/s)-1;a(e)}}),[i,s,m.length]);return{dense:n,order:c,page:i,orderBy:l,rowsPerPage:s,selected:m,onSelectRow:p,onSelectAllRows:b,onSort:x,onChangePage:j,onChangeDense:v,onResetPage:f,onChangeRowsPerPage:g,onUpdatePageDeleteRow:Z,onUpdatePageDeleteRows:_,setPage:a,setDense:t,setOrder:u,setOrderBy:r,setSelected:h,setRowsPerPage:d}}var s=t(9195),d=t(68745),c=t(81164),u=t(31092),m=t(80184);function h(e){let{notFound:n,sx:t}=e;const{t:i}=(0,c.qM)();return(0,m.jsx)(s.Z,{children:n?(0,m.jsx)(d.Z,{colSpan:12,children:(0,m.jsx)(u.Z,{filled:!0,title:i("No Data"),sx:{py:10,...t}})}):(0,m.jsx)(d.Z,{colSpan:12,sx:{p:0}})})}function x(e){let{emptyRows:n,height:t}=e;return n?(0,m.jsx)(s.Z,{sx:{...t&&{height:t*n}},children:(0,m.jsx)(d.Z,{colSpan:9})}):null}var p=t(16029),g=t(13034),v=t(56890),b=t(80720);const j={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function f(e){let{order:n,orderBy:t,rowCount:i=0,headLabel:a,numSelected:l=0,onSort:o,onSelectAllRows:r,sx:c}=e;return(0,m.jsx)(v.Z,{sx:c,children:(0,m.jsxs)(s.Z,{children:[r&&(0,m.jsx)(d.Z,{padding:"checkbox",children:(0,m.jsx)(g.Z,{indeterminate:!!l&&l<i,checked:!!i&&l===i,onChange:e=>r(e.target.checked)})}),a.map(((e,i)=>(0,m.jsx)(d.Z,{align:e.align||"center",sortDirection:t===e.id&&n,sx:{width:e.width,minWidth:e.minWidth},children:o?(0,m.jsxs)(b.Z,{hideSortIcon:!0,active:t===e.id,direction:t===e.id?n:"asc",onClick:()=>o(e.id),sx:{textTransform:"capitalize"},children:[e.label,t===e.id?(0,m.jsx)(p.Z,{sx:{...j},children:"desc"===n?"sorted descending":"sorted ascending"}):null]}):e.label},i)))]})})}var Z=t(53767),_=t(4567);function y(e){let{dense:n,action:t,rowCount:i,numSelected:a,onSelectAllRows:l,sx:o,color:r,...s}=e;const{t:d}=(0,c.qM)();return a?(0,m.jsxs)(Z.Z,{direction:"row",alignItems:"center",sx:{pl:1,pr:2,top:0,left:0,width:1,zIndex:9,height:58,position:"absolute",bgcolor:"".concat(r,".lighter"),...n&&{height:38},...o},...s,children:[(0,m.jsx)(g.Z,{indeterminate:!!a&&a<i,checked:!!i&&a===i,onChange:e=>l(e.target.checked)}),(0,m.jsxs)(_.Z,{variant:"subtitle2",sx:{ml:2,flexGrow:1,color:"".concat(r,".main"),...n&&{ml:3}},children:[a," ",d("selected")]}),t&&t]}):null}var w=t(89891),C=t(5446),k=t(25801);function S(e){let{dense:n,onChangeDense:t,rowsPerPageOptions:i=[5,10,25],sx:a,...l}=e;const{t:o}=(0,c.qM)();return(0,m.jsxs)(p.Z,{sx:{position:"relative",...a},children:[(0,m.jsx)(C.Z,{rowsPerPageOptions:i,component:"div",...l,sx:{borderTopColor:"transparent"}}),t&&(0,m.jsx)(k.Z,{label:o("dense"),control:(0,m.jsx)(w.Z,{checked:n,onChange:t}),sx:{pl:2,py:1.5,top:0,position:{sm:"absolute"}}})]})}},12732:(e,n,t)=>{t.d(n,{Z:()=>de});var i=t(8007),a=t(18111),l=t.n(a),o=t(58406),r=t(94721),s=t(10266),d=t(4567),c=t(62861),u=t(68096),m=t(86778),h=t(77196),x=t(38072),p=t(8976),g=t(81164),v=t(36980),b=t(84802),j=t(61134),f=t(44695),Z=t(72791),_=t(12258),y=t(57621),w=t(16029),C=t(82626),k=t(13400),S=t(53767),P=t(19208);const R=e=>(console.log("date",e),new Date(e).toISOString().replace(/-/g,"").replace(/:/g,"").replace(/\.\d{3}/,""));async function D(e){try{var n,t,i;const l=encodeURIComponent(R(e.start_time)),o=encodeURIComponent(R(e.end_time)),r=encodeURIComponent("appointment at ".concat(null===(n=e.unit_service)||void 0===n?void 0:n.name_english)),s=encodeURIComponent((null===(t=e.unit_service)||void 0===t?void 0:t.location_gps)||(null===(i=e.unit_service)||void 0===i?void 0:i.address)),d="https://calendar.google.com/calendar/render?action=TEMPLATE&dates=".concat(l,"/").concat(o,"&text=").concat(r,"&location=").concat(s);a=d,/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?window.location.href=a:window.open(a,"_blank")}catch(l){console.error(l)}var a}var T=t(30250),I=t(66664),F=t(40268),L=t(73379),q=t(82007),A=t(535),E=t(90811),M=t(9585),W=t(49900),z=t(96474),B=t(38887),G=t(13838),N=t(80184);function O(e){let{name:n,list:t,helperText:i,value:a,onChange:l,...o}=e;const{t:r}=(0,g.qM)(),{currentLang:s}=(0,g.nt)(),c="ar"===s.value;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(d.Z,{sx:{py:2,fontWeight:700},variant:"caption",color:"text.secondary",textTransform:"uppercase",children:r("select time")}),(0,N.jsx)(S.Z,{sx:{py:8,height:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-start"},children:t.map((e=>(0,N.jsx)(G.Z,{variant:"outlined",sx:{width:100,"&:hover":{backgroundColor:a===e._id?"primary.main":"hoverColor",color:a===e._id?"white":"hoverTextColor"},fontWeight:a===e._id?600:500,backgroundColor:a===e._id?"primary.main":"",color:a===e._id?"white":"",borderRadius:0},onClick:()=>{l(e._id)},children:(0,T.Je)(e.start_time,"p",c)})))})]})}var U=t(94791);function $(e){let{selected:n,AppointDates:t,setSelected:i,selectedDate:a,setSelectedDate:l,list:o,loading:s}=e;const{t:c}=(0,g.qM)(),[u,m]=(0,Z.useState)(),h=(0,B.F)("up","md"),x=(0,U.vr)({adaptiveHeight:!0,initialSlide:!s&&((()=>{let e=0;return o.forEach(((t,i)=>{t._id===n&&(e=i)})),e})()||0)});(0,Z.useEffect)((()=>{var e,t;if(!s.value)if(n)if(o.some((e=>e._id===n)))o.forEach(((e,t)=>{var a,l;e._id===n&&(x.onTogo(t),i(null===o||void 0===o||null===(a=o[t])||void 0===a?void 0:a._id),m(null===o||void 0===o||null===(l=o[t])||void 0===l?void 0:l._id))}));else{var a,l;i(null===o||void 0===o||null===(a=o[0])||void 0===a?void 0:a._id),m(null===o||void 0===o||null===(l=o[0])||void 0===l?void 0:l._id),x.onTogo(0)}else i(null===o||void 0===o||null===(e=o[0])||void 0===e?void 0:e._id),m(null===o||void 0===o||null===(t=o[0])||void 0===t?void 0:t._id),x.onTogo(0)}),[o,s.value]);const p=e=>{var n,t;let a=x.currentIndex;"next"===e&&(x.onNext(),a===o.length-1?a=0:a+=1),"prev"===e&&(x.onPrev(),0===a?a=o.length-1:a-=1),i(null===(n=o[a])||void 0===n?void 0:n._id),m(null===(t=o[a])||void 0===t?void 0:t._id)};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(S.Z,{direction:h?"row":"column",justifyContent:"space-around",children:[(0,N.jsx)(z.w,{localeText:!1,sx:{width:"100%",flexGrow:1,flexShrink:.4},orientation:h?"landscape":"",shouldDisableDate:e=>!t.some((n=>{const t=new Date(n),i=new Date(e);return t.getFullYear()===i.getFullYear()&&t.getMonth()===i.getMonth()&&t.getDate()===i.getDate()})),slots:{toolbar:"test"},slotProps:{actionBar:{actions:[]}},value:new Date(a),onChange:e=>l(e)}),(0,N.jsx)(S.Z,{sx:{width:"100%",height:"100%",flexGrow:1,flexShrink:.6,px:3},children:(0,N.jsx)(O,{list:o,onChange:e=>{i(e),m(e),o.forEach(((n,t)=>{n._id===e&&x.onTogo(t)}))},value:u})})]}),(0,N.jsx)(r.Z,{sx:{borderStyle:"dashed"}}),n&&(0,N.jsx)(M.Z,{title:(0,N.jsx)(d.Z,{sx:{py:2,fontWeight:700},variant:"caption",color:"text.secondary",textTransform:"uppercase",children:c("Appointment details")}),action:(0,N.jsx)(U.i5,{onNext:()=>p("next"),onPrev:()=>p("prev")})}),(0,N.jsx)(U.ZP,{style:{dir:"rtl"},ref:x.carouselRef,...x.carouselSettings,children:o.map((e=>(0,N.jsx)(H,{item:e},e._id)))}),(0,N.jsx)(r.Z,{sx:{borderStyle:"dashed",mb:3}})]})}function H(e){var n,t;let{item:i}=e;const{work_group:a,appointment_type:l,unit_service:o,start_time:r,service_types:s,online_available:d}=i,{t:c}=(0,g.qM)(),{currentLang:u}=(0,g.nt)(),m="ar"===u.value,h=(0,B.F)("up","md");return(0,N.jsx)(S.Z,{dir:m?"rtl":"ltr",spacing:2,sx:{p:3,position:"relative"},children:(0,N.jsxs)(S.Z,{direction:h?"row":"column",alignItems:"center",spacing:2,children:[(0,N.jsx)(W.Z,{primary:(0,E.Z)(new Date(r))&&new Date(r).toLocaleTimeString(c("en-US"),{timeZone:null===o||void 0===o||null===(n=o.country)||void 0===n?void 0:n.time_zone,hour:"2-digit",minute:"2-digit"}),secondary:(0,E.Z)(new Date(r))&&new Date(r).toLocaleDateString(c("en-US"),{timeZone:(null===o||void 0===o||null===(t=o.country)||void 0===t?void 0:t.time_zone)||Intl.DateTimeFormat().resolvedOptions().timeZone}),primaryTypographyProps:{typography:"subtitle1",noWrap:!0},secondaryTypographyProps:{typography:"body2",component:"span",mt:.5,color:"text.disabled"}}),[{label:m?null===l||void 0===l?void 0:l.name_arabic:null===l||void 0===l?void 0:l.name_english,icon:(0,N.jsx)(F.Z,{icon:"streamline:waiting-appointments-calendar"})},{label:m?null===a||void 0===a?void 0:a.name_arabic:null===a||void 0===a?void 0:a.name_english,icon:(0,N.jsx)(F.Z,{icon:"ri:group-line"})},{label:s.length?null===s||void 0===s?void 0:s.reduce(((e,n)=>e+n.Price_per_unit||0),0):0,icon:(0,N.jsx)(F.Z,{icon:"solar:tag-price-bold"})},{label:c("available online"),icon:(0,N.jsx)(F.Z,{icon:d?"typcn:tick-outline":"mdi:close-outline",sx:{color:d?"success.main":"error.main"}})}].map(((e,n)=>(0,N.jsxs)(S.Z,{spacing:.5,direction:"row",children:[e.icon,(0,N.jsx)(W.Z,{primary:e.label,secondary:(0,N.jsx)("span",{dir:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641"===e.label?"ltr":"auto",children:e.value}),primaryTypographyProps:{typography:"body2",color:"text.secondary",mb:.5},secondaryTypographyProps:{typography:"subtitle2",color:"text.primary",component:"span",textTransform:"none"}})]},n)))]})})}var X=t(79836),Y=t(13967),K=t(53382),Q=t(90618),V=t(53507),J=t(10261),ee=t(38062),ne=t(9195),te=t(68745),ie=t(48550),ae=t(22459),le=t(77008);function oe(e){let{row:n,note:t,setNote:i,selected:a,onEmploymentRow:l}=e;const{sequence_number:o,name_english:r,name_arabic:s,nationality:c,birth_date:u,identification_num:m,email:h,mobile_num1:x,mobile_num2:p}=n,{t:v}=(0,g.qM)(),{currentLang:b}=(0,g.nt)(),j="ar"===b.value,f=(0,ae.k)(),Z=(0,N.jsxs)(ne.Z,{hover:!0,selected:a,children:[(0,N.jsx)(te.Z,{align:"center",children:(0,N.jsxs)(w.Z,{children:[String(c.code).padStart(3,"0"),"-",o]})}),(0,N.jsx)(te.Z,{align:"center",children:r}),(0,N.jsx)(te.Z,{align:"center",children:s}),(0,N.jsx)(te.Z,{align:"center",children:x}),(0,N.jsx)(te.Z,{align:"center",children:p}),(0,N.jsx)(te.Z,{align:"center",sx:{textTransform:"none"},children:h}),(0,N.jsx)(te.Z,{align:"center",children:m}),(0,N.jsx)(te.Z,{align:"center",children:j?null===c||void 0===c?void 0:c.name_arabic:null===c||void 0===c?void 0:c.name_english}),(0,N.jsx)(te.Z,{align:"center",children:u}),(0,N.jsx)(te.Z,{align:"center",sx:{px:1,whiteSpace:"nowrap"},children:(0,N.jsx)(k.Z,{onClick:f.onToggle,children:(0,N.jsx)(F.Z,{width:"27px",color:"info.main",icon:"mdi:book-add"})})})]});return(0,N.jsxs)(N.Fragment,{children:[Z,(0,N.jsx)(le.Q,{open:f.value,onClose:f.onFalse,title:v("confirm checking information"),content:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(d.Z,{children:[" ",v("Do you confirm checking patient data and check at least three values if they are true?")]}),(0,N.jsx)(ie.Z,{multiline:!0,fullWidth:!0,label:v("note"),rows:2,sx:{my:2},onChange:e=>i(e.target.value),value:t})]}),action:(0,N.jsx)(G.Z,{variant:"contained",color:"info",onClick:l,children:v("confirm")})})]})}function re(e){let{SelectedAppointment:n,reset:t,selected:i,oldPatients:a}=e;const{t:l}=(0,g.qM)(),{currentLang:o}=(0,g.nt)(),r="ar"===o.value,s=[{id:"code",label:l("code")},{id:"name_english",label:l("name in english")},{id:"name_arabic",label:l("name in arabic")},{id:"mobile_num1",label:l("mobile number")},{id:"mobile_num2",label:l("alternative mobile number")},{id:"email",label:l("email")},{id:"identification_num",label:l("ID number")},{id:"nationality",label:l("nationality")},{id:"birth_date",label:l("birth date")},{id:"book",width:88}],{enqueueSnackbar:d}=(0,b.Ds)(),c=(0,ee.x6)({defaultRowsPerPage:10}),[u,m]=(0,Z.useState)(),h=(0,Y.Z)(),{dense:x,page:p,order:v,orderBy:j,rowsPerPage:f,onSort:_,onChangeDense:y,onChangePage:w,onChangeRowsPerPage:C}=c;return(0,N.jsxs)(J.Z,{children:[(0,N.jsxs)(X.Z,{size:x?"small":"medium",sx:{minWidth:960,borderCollapse:"separate",borderSpacing:"0 16px"},children:[(0,N.jsx)(ee.K,{order:v,orderBy:j,headLabel:s,onSort:_,sx:{["& .".concat(Q.Z.head)]:{"&:first-of-type":{borderTopLeftRadius:12,borderBottomLeftRadius:12},"&:last-of-type":{borderTopRightRadius:12,borderBottomRightRadius:12}}}}),(0,N.jsxs)(K.Z,{children:[a.slice(p*f,p*f+f).map(((e,a,o)=>(0,N.jsx)(oe,{row:e,note:u,setNote:m,onEmploymentRow:()=>(async e=>{try{await I.ZP.patch(I.Hv.appointments.book(i),{patient:e._id,note:u}),await D(n),d(l("booked successfully!")),t()}catch(a){d(r&&a.arabic_message||a.message,{variant:"error"}),console.error(a)}})(e)},o))),(0,N.jsx)(ee.et,{notFound:0===a.length,sx:{m:-2,borderRadius:1.5,border:"dashed 1px ".concat(h.palette.divider)}})]})]}),(0,N.jsx)(ee.S_,{count:a.length,page:p,rowsPerPage:f,onPageChange:w,onRowsPerPageChange:C,dense:x,onChangeDense:y,sx:{["& .".concat(V.Z.toolbar)]:{borderTopColor:"transparent"}}})]})}const se={status:"available",work_group:null,startTime:null,endTime:null};function de(){var e,n,t,a;const{user:R}=(0,p.E)(),{t:E}=(0,g.qM)(),{currentLang:M}=(0,g.nt)(),W="ar"===M.value,{countriesData:z}=(0,v.Rpj)(),{myunitTime:B}=(0,T.lf)(),[G,O]=(0,Z.useState)(se),U=!l()(G,se),H=(0,P.lr)(),X=H.get("appointment"),Y=H.get("day"),[K,Q]=(0,Z.useState)(Y?new Date(Y):new Date),{appointmentsData:V,AppointDates:J,loading:ee}=(0,v.E7C)({id:null===R||void 0===R||null===(e=R.employee)||void 0===e||null===(n=e.employee_engagements[null===R||void 0===R?void 0:R.employee.selected_engagement])||void 0===n?void 0:n._id,filters:{...G,startDate:K}});(0,Z.useEffect)((()=>{ee||V.length||!J.length||Q(J[0])}),[ee,V.length,J]);const[ne,te]=(0,Z.useState)(X),{workGroupsData:ie}=(0,v.Sue)(null===R||void 0===R||null===(t=R.employee)||void 0===t||null===(a=t.employee_engagements[null===R||void 0===R?void 0:R.employee.selected_engagement])||void 0===a?void 0:a._id),{enqueueSnackbar:ae}=(0,b.Ds)(),le=i.Ry().shape({sequence_number:i.Z_(),name_english:i.Z_(),name_arabic:i.Z_(),email:i.Z_(),identification_num:i.Z_(),birth_date:i.nK().nullable(),marital_status:i.Z_().nullable(),nationality:i.Z_().required(E("required field")),country:i.Z_().nullable(),city:i.Z_().nullable(),mobile_num1:i.Z_(),mobile_num2:i.Z_(),gender:i.Z_(),note:i.Z_()}),oe=(0,Z.useMemo)((()=>({sequence_number:"",name_english:"",name_arabic:"",email:"",identification_num:"",birth_date:null,marital_status:"",nationality:null,country:null,city:null,mobile_num1:"",mobile_num2:"",gender:"",note:""})),[]),de=(0,j.cI)({mode:"onTouched",resolver:(0,f.X)(le),defaultValues:oe}),{reset:ce,handleSubmit:ue,watch:me,setValue:he,formState:{isSubmitting:xe,errors:pe}}=de;(0,Z.useEffect)((()=>{Object.keys(pe).length&&Object.keys(pe).forEach(((e,n)=>{var t;return ae("".concat(e,": ").concat((null===pe||void 0===pe||null===(t=pe[e])||void 0===t?void 0:t.message)||"error"),{variant:"error"})}))}),[pe,ae]);const ge=me(),{tableData:ve}=(0,v.s_U)(ge.country),{existPatients:be}=(0,v.E$b)({sequence_number:ge.sequence_number,name_english:ge.name_english,name_arabic:ge.name_arabic,email:ge.email.toLowerCase(),identification_num:ge.identification_num,mobile_num1:ge.mobile_num1,mobile_num2:ge.mobile_num2}),je=ue((async e=>{try{await I.ZP.patch(I.Hv.appointments.patient.createPatientAndBookAppoint(ne),e);const n=V.find((e=>e._id===ne));await D(n),ae(E("created successfully!")),ce()}catch(n){ae(W&&n.arabic_message||n.message,{variant:"error"}),console.error(n)}})),fe=e=>{/^[a-zA-Z0-9\s,@#$!*_\-&^%.()]*$/.test(e.target.value)&&he(e.target.name,e.target.value)},Ze=(0,Z.useCallback)((()=>{O(se)}),[]);return(0,N.jsxs)(s.Z,{maxWidth:"xl",children:[(0,N.jsx)(L.Z,{heading:E("Book Appointment"),links:[{name:E("dashboard"),href:x.H.employee.root},{name:E("appointments"),href:x.H.employee.appointments.root},{name:E("book")}],sx:{mb:{xs:3,md:5}}}),(0,N.jsx)(q.Z,{methods:de,onSubmit:je,children:(0,N.jsxs)(y.Z,{sx:{px:3,pb:3},children:[(0,N.jsxs)(w.Z,{sx:{m:3},rowGap:3,columnGap:2,display:"flex",children:[(0,N.jsxs)(u.Z,{sx:{width:{xs:1,md:200}},children:[(0,N.jsx)(c.Z,{shrink:!0,children:"".concat(E("work group"))}),(0,N.jsx)(o.Z,{value:G.group,onChange:e=>O((n=>({...n,group:e.target.value}))),size:"small",input:(0,N.jsx)(h.Z,{label:E("work group")}),children:ie.map(((e,n)=>(0,N.jsx)(C.Z,{lang:"ar",value:e._id,children:W?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))})]}),(0,N.jsx)(m.d,{orientation:"landscape",minutesStep:"5",label:E("from time"),value:B(G.startTime),onChange:e=>{const n=B(e);O((e=>({...e,startTime:n})))},slotProps:{textField:{fullWidth:!0,size:"small"}},sx:{width:{xs:1,md:200}}}),(0,N.jsx)(m.d,{orientation:"landscape",minutesStep:"5",label:E("to time"),value:B(G.endTime),onChange:e=>{const n=B(e);O((e=>({...e,endTime:n})))},slotProps:{textField:{fullWidth:!0,size:"small"}},sx:{width:{xs:1,md:200}}}),U&&(0,N.jsx)(k.Z,{sx:{color:"error.main"},onClick:Ze,children:(0,N.jsx)(F.Z,{icon:"solar:trash-bin-trash-bold"})})]}),(0,N.jsx)(r.Z,{sx:{borderStyle:"dashed"}}),!ee&&(0,N.jsx)($,{selected:ne,AppointDates:J,loading:ee,setSelected:te,selectedDate:K,setSelectedDate:Q,list:V}),(0,N.jsx)(d.Z,{sx:{py:2,fontWeight:700},variant:"caption",color:"text.secondary",textTransform:"uppercase",children:E("patient information")}),(0,N.jsx)("br",{}),(0,N.jsx)("br",{}),(0,N.jsx)(A.au,{InputLabelProps:{shrink:!0},inputProps:{style:{textAlign:"center"}},sx:{width:"200px",mb:3,textAlign:"center"},size:"small",name:"sequence_number",onChange:e=>{const{value:n}=e.target,t=n.replace(/\D/g,"");t.length<=3?he(e.target.name,t):t.length>=4&&"-"===t.charAt(3)?he(e.target.name,t.slice(0,3)):t.length>=4&&"-"!==t.charAt(3)?he(e.target.name,"".concat(t.slice(0,3),"-").concat(t.slice(3))):he(e.target.name,t)},placeholder:"001-22",label:E("patient-code")}),(0,N.jsxs)(w.Z,{sx:{mb:3},rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"},children:[(0,N.jsx)(A.au,{onChange:fe,name:"name_english",label:E("patient name in english")}),(0,N.jsx)(A.au,{onChange:e=>{/^[\u0600-\u06FF0-9\s!@#$%^&*_\-()]*$/.test(e.target.value)&&he(e.target.name,e.target.value)},name:"name_arabic",label:E("patient name in arabic")}),(0,N.jsx)(A.au,{type:"email",name:"email",label:E("email address")}),(0,N.jsx)(A.au,{onChange:fe,name:"identification_num",label:E("ID number")}),(0,N.jsx)(A.Y_,{name:"mobile_num1",label:E("mobile number")}),(0,N.jsx)(A.Y_,{name:"mobile_num2",label:E("alternative mobile number")}),(0,N.jsx)(A.C5,{name:"birth_date",label:E("birth date")}),(0,N.jsx)(A.Cc,{name:"nationality",label:E("nationality"),children:z.map(((e,n)=>(0,N.jsx)(C.Z,{lang:"ar",value:e._id,children:W?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))}),(0,N.jsx)(A.Cc,{name:"country",label:E("country of residence"),children:z.map(((e,n)=>(0,N.jsx)(C.Z,{lang:"ar",value:e._id,children:W?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))}),(0,N.jsx)(A.Cc,{name:"city",label:E("city of residence"),children:ve.map(((e,n)=>(0,N.jsx)(C.Z,{lang:"ar",value:e._id,children:W?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))}),(0,N.jsxs)(A.Cc,{name:"marital_status",label:E("marital status"),children:[(0,N.jsx)(C.Z,{lang:"ar",value:"single",children:E("single")}),(0,N.jsx)(C.Z,{lang:"ar",value:"married",children:E("married")}),(0,N.jsx)(C.Z,{lang:"ar",value:"widowed",children:E("widowed")}),(0,N.jsx)(C.Z,{lang:"ar",value:"separated",children:E("separated")}),(0,N.jsx)(C.Z,{lang:"ar",value:"divorced",children:E("divorced")})]}),(0,N.jsxs)(A.Cc,{name:"gender",label:E("gender"),children:[(0,N.jsx)(C.Z,{lang:"ar",value:"male",children:E("male")}),(0,N.jsx)(C.Z,{lang:"ar",value:"female",children:E("female")})]})]}),(0,N.jsx)(A.au,{multiline:!0,rows:2,name:"note",label:E("note")}),(0,N.jsx)(S.Z,{alignItems:"flex-end",sx:{mt:3},children:(0,N.jsx)(_.Z,{type:"submit",tabIndex:-1,variant:"contained",loading:xe,children:E("create new patient and book")})}),be.length>0&&(0,N.jsx)(re,{SelectedAppointment:V.find((e=>e._id===ne)),selected:ne,reset:ce,oldPatients:be})]})})]})}}}]);
//# sourceMappingURL=2732.a27ed520.chunk.js.map
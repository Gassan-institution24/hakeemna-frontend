"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[3241],{38563:(e,a,r)=>{r.d(a,{Z:()=>u});var n=r(16029),s=r(50533),t=r(53767),l=r(4567),o=r(93517),i=r(4419),d=r(80184);function c(e){let{link:a,activeLast:r,disabled:t}=e;const l={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...t&&!r&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},o=(0,d.jsxs)(d.Fragment,{children:[a.icon&&(0,d.jsx)(n.Z,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:a.icon}),a.name]});return a.href?(0,d.jsx)(s.Z,{component:i.r,href:a.href,sx:l,children:o}):(0,d.jsxs)(n.Z,{sx:l,children:[" ",o," "]})}function u(e){let{links:a,action:r,heading:i,moreLink:u,activeLast:p,sx:h,...x}=e;const g=a&&a[a.length-1].name;return(0,d.jsxs)(n.Z,{sx:{...h},children:[(0,d.jsxs)(t.Z,{direction:"row",alignItems:"center",children:[(0,d.jsxs)(n.Z,{sx:{flexGrow:1,display:"flex",gap:{md:3},alignItems:{md:"center"},flexDirection:{xs:"column",md:"row"}},children:[i&&(0,d.jsx)(l.Z,{textTransform:"capitalize",variant:"h4",gutterBottom:!0,children:i}),a&&!!a.length&&(0,d.jsx)(o.Z,{separator:(0,d.jsx)(m,{}),...x,children:null===a||void 0===a?void 0:a.map(((e,a)=>(0,d.jsx)(c,{link:e,activeLast:p,disabled:e.name===g},a)))})]}),r&&(0,d.jsxs)(n.Z,{sx:{flexShrink:0,textTransform:"capitalize"},children:[" ",r," "]})]}),!!u&&(0,d.jsx)(n.Z,{sx:{mt:2},children:u.map(((e,a)=>(0,d.jsx)(s.Z,{href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},a)))})]})}function m(){return(0,d.jsx)(n.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}},73379:(e,a,r)=>{r.d(a,{Z:()=>n.Z});var n=r(38563)},729:(e,a,r)=>{r.r(a),r.d(a,{default:()=>A});var n=r(6907),s=r(8976),t=r(72791),l=r(61474),o=r(10570),i=r(10266),d=r(38072),c=r(81164),u=r(93011),m=r(40268),p=r(35456),h=r(73379),x=r(8007),g=r(61134),v=r(24413),b=r(44695),f=r(16029),Z=r(57621),j=r(53767),y=r(82626),w=r(24308),_=r(48550),k=r(12258),C=r(66664),P=r(32869),S=r(85563),I=r(80184);function q(e){var a,r;let{employeeData:n,refetch:s}=e;const{enqueueSnackbar:l}=(0,P.Ds)(),{countriesData:o}=(0,u.Rpj)(),{t:i}=(0,c.qM)(),{currentLang:d}=(0,c.nt)(),m="ar"===d.value,p=x.Ry().shape({email:x.Z_().required(i("required field")),name_english:x.Z_().required(i("required field")),name_arabic:x.Z_().required(i("required field")),country:x.Z_().required(i("required field")),city:x.Z_().nullable(),identification_num:x.Z_().required(i("required field")).min(8,"".concat(i("must be at least")," 8")).max(15,"".concat(i("must be at most")," 15")),tax_num:x.Z_(),address:x.Z_(),web_page:x.Z_(),phone:x.Z_().required(i("required field")).test("is-valid-phone",i("Invalid phone number"),(e=>(0,v.Cs)(e))),mobile_num:x.Z_()}),h={email:(null===n||void 0===n?void 0:n.email)||"",name_english:(null===n||void 0===n?void 0:n.name_english)||"",name_arabic:(null===n||void 0===n?void 0:n.name_arabic)||"",country:(null===n||void 0===n||null===(a=n.country)||void 0===a?void 0:a._id)||"",city:(null===n||void 0===n||null===(r=n.city)||void 0===r?void 0:r._id)||"",identification_num:(null===n||void 0===n?void 0:n.identification_num)||"",tax_num:(null===n||void 0===n?void 0:n.tax_num)||"",address:(null===n||void 0===n?void 0:n.address)||"",web_page:(null===n||void 0===n?void 0:n.web_page)||"",phone:(null===n||void 0===n?void 0:n.phone)||"",mobile_num:(null===n||void 0===n?void 0:n.mobile_num)||"",picture:(null===n||void 0===n?void 0:n.picture)||null},q=(0,g.cI)({mode:"onTouched",resolver:(0,b.X)(p),defaultValues:h}),{watch:R,setValue:T,handleSubmit:L,formState:{isSubmitting:M,errors:z}}=q,{tableData:A}=(0,u.s_U)(R().country);(0,t.useEffect)((()=>{Object.keys(z).length&&Object.keys(z).forEach(((e,a)=>{var r;return l("".concat(e,": ").concat((null===z||void 0===z||null===(r=z[e])||void 0===r?void 0:r.message)||"error"),{variant:"error"})}))}),[z,l]);const D=R(),B=(0,t.useCallback)((async(e,a)=>{const r=a[0],t=Object.assign(r,{preview:URL.createObjectURL(r)});if(r)try{const a=new FormData;a.append(e,t),await C.ZP.patch(C.Hv.stakeholder.one(n._id),a),l(i("updated successfully!")),s()}catch(o){l(m&&"".concat(o.arabic_message)||"".concat(o.message),{variant:"error"}),console.error(o)}}),[T,m,n,l,s,D,i]),E=L((async e=>{try{const a=e;delete a.company_logo,await C.ZP.patch(C.Hv.stakeholder.one(n._id),a),l(i("updated successfully!")),s()}catch(a){l(m&&"".concat(a.arabic_message)||"".concat(a.message),{variant:"error"}),console.error(a)}}));return(0,I.jsx)(S.ZP,{methods:q,onSubmit:E,children:(0,I.jsxs)(w.Z,{container:!0,spacing:3,children:[(0,I.jsx)(w.Z,{xs:12,md:4,children:(0,I.jsxs)(Z.Z,{sx:{pt:5,height:{md:"100%"},pb:{xs:5},px:3,textAlign:"center"},children:[(0,I.jsx)(S.sX,{maxSize:3145728,name:"company_logo",onDrop:e=>B("company_logo",e)}),(0,I.jsxs)(f.Z,{rowGap:3,columnGap:2,sx:{mt:5},display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"},children:[(0,I.jsx)(S.au,{variant:"filled",name:"name_english",onChange:e=>{/^[a-zA-Z0-9\s,@#$!*_\-&^%.()]*$/.test(e.target.value)&&q.setValue(e.target.name,e.target.value,{shouldValidate:!0})},label:"".concat(i("Full name in English")," *")}),(0,I.jsx)(S.au,{variant:"filled",name:"name_arabic",onChange:e=>{/^[\u0600-\u06FF0-9\s!@#$%^&*_\-()]*$/.test(e.target.value)&&q.setValue(e.target.name,e.target.value,{shouldValidate:!0})},label:i("Full name in Arabic")}),(0,I.jsx)(S.au,{variant:"filled",name:"identification_num",label:"".concat(i("ID number")," :")}),(0,I.jsx)(_.Z,{type:"email",variant:"filled",name:"email",label:"".concat(i("email")," :"),value:D.email}),(0,I.jsx)(S.Y_,{name:"phone",label:i("phone number")})]})]})}),(0,I.jsx)(w.Z,{xs:12,md:8,children:(0,I.jsxs)(Z.Z,{sx:{p:3,pt:5},children:[(0,I.jsxs)(f.Z,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,I.jsx)(S.Cc,{label:"".concat(i("country")," *"),fullWidth:!0,name:"country",InputLabelProps:{shrink:!0},PaperPropsSx:{textTransform:"capitalize"},children:o.map(((e,a)=>(0,I.jsx)(y.Z,{lang:"ar",value:e._id,children:m?e.name_arabic:e.name_english},a)))}),(0,I.jsx)(S.Cc,{label:"".concat(i("city")," *"),fullWidth:!0,name:"city",InputLabelProps:{shrink:!0},PaperPropsSx:{textTransform:"capitalize"},children:A.map(((e,a)=>(0,I.jsx)(y.Z,{lang:"ar",value:e._id,children:m?e.name_arabic:e.name_english},a)))}),(0,I.jsx)(S.au,{type:"number",name:"tax_num",label:i("tax number")}),(0,I.jsx)(S.Y_,{name:"mobile_num",label:i("alternative mobile number")}),(0,I.jsx)(S.au,{name:"web_page",label:i("webpage")})]}),(0,I.jsx)(S.au,{multiline:!0,sx:{mt:3},rows:2,name:"address",label:i("address")}),(0,I.jsx)(j.Z,{spacing:3,alignItems:"flex-end",sx:{mt:3},children:(0,I.jsx)(k.Z,{type:"submit",tabIndex:-1,variant:"contained",loading:M,children:i("save changes")})})]})})]})})}var R=r(13400),T=r(63466),L=r(22459);function M(){const{enqueueSnackbar:e}=(0,P.Ds)(),{user:a}=(0,s.E)(),{t:r}=(0,c.qM)(),{currentLang:n}=(0,c.nt)(),l="ar"===n.value,o=(0,L.k)(),i=(0,L.k)(),d=(0,L.k)(),u=x.Ry().shape({passwordCurrent:x.Z_().required(r("required field")),password:x.Z_().required(r("required field")).min(8,"".concat(r("must be at least")," 8")).test("no-match",r("New password must be different than old password"),((e,a)=>{let{parent:r}=a;return e!==r.passwordCurrent})),confirmPassword:x.Z_().oneOf([x.iH("password")],r("Passwords must match"))}),p={email:null===a||void 0===a?void 0:a.email,passwordCurrent:"",password:"",confirmPassword:""},h=(0,g.cI)({mode:"onTouched",resolver:(0,b.X)(u),defaultValues:p}),{reset:v,handleSubmit:f,formState:{isSubmitting:y,errors:w}}=h;(0,t.useEffect)((()=>{Object.keys(w).length&&Object.keys(w).forEach(((a,r)=>{var n;return e("".concat(a,": ").concat((null===w||void 0===w||null===(n=w[a])||void 0===n?void 0:n.message)||"error"),{variant:"error"})}))}),[w,e]);const _=f((async a=>{try{const{passwordCurrent:n,password:s,confirmPassword:t}=a,l={passwordCurrent:n,password:s,confirmPassword:t},o=await C.ZP.patch(C.Hv.auth.updatepassword,l);201===o.status?(v(),e(r("Password updated successfully!"),{variant:"success"})):e(o.data||r("Password update failed!"),{variant:"error"})}catch(n){e(l&&"".concat(n.arabic_message)||"".concat(n.message),{variant:"error"}),console.error(n)}}));return(0,I.jsx)(S.ZP,{methods:h,onSubmit:_,children:(0,I.jsxs)(j.Z,{component:Z.Z,spacing:3,sx:{p:3},children:[(0,I.jsx)(S.au,{value:null===a||void 0===a?void 0:a.email,name:"email"}),(0,I.jsx)(S.au,{name:"passwordCurrent",type:o.value?"text":"password",label:r("current password"),InputProps:{endAdornment:(0,I.jsx)(T.Z,{position:"end",children:(0,I.jsx)(R.Z,{onClick:o.onToggle,edge:"end",children:(0,I.jsx)(m.Z,{icon:o.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),(0,I.jsx)(S.au,{name:"password",label:r("new password"),type:i.value?"text":"password",InputProps:{endAdornment:(0,I.jsx)(T.Z,{position:"end",children:(0,I.jsx)(R.Z,{onClick:i.onToggle,edge:"end",children:(0,I.jsx)(m.Z,{icon:i.value?"solar:eye-bold":"solar:eye-closed-bold"})})})},helperText:(0,I.jsxs)(j.Z,{component:"span",direction:"row",alignItems:"center",children:[(0,I.jsx)(m.Z,{icon:"eva:info-fill",width:16,sx:{mr:.5}})," ",r("Password must be minimum 8+")]})}),(0,I.jsx)(S.au,{name:"confirmPassword",type:d.value?"text":"password",label:r("confirm new password"),InputProps:{endAdornment:(0,I.jsx)(T.Z,{position:"end",children:(0,I.jsx)(R.Z,{onClick:d.onToggle,edge:"end",children:(0,I.jsx)(m.Z,{icon:d.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),(0,I.jsx)(k.Z,{type:"submit",tabIndex:-1,variant:"contained",loading:y,sx:{ml:"auto"},children:r("save changes")})]})})}function z(){var e;const{t:a}=(0,c.qM)(),[r,n]=(0,t.useState)("general"),{user:x}=(0,s.E)(),{data:g,loading:v,refetch:b}=(0,u.DbQ)(null===x||void 0===x||null===(e=x.stakeholder)||void 0===e?void 0:e._id),f=(0,t.useCallback)(((e,a)=>{n(a)}),[]),Z=[{value:"general",label:a("general"),icon:(0,I.jsx)(m.Z,{icon:"solar:user-id-bold",width:24})},{value:"security",label:a("security"),icon:(0,I.jsx)(m.Z,{icon:"ic:round-vpn-key",width:24})}];return v?(0,I.jsx)(p.a,{}):(0,I.jsxs)(i.Z,{maxWidth:"xl",children:[(0,I.jsx)(h.Z,{heading:a("profile"),links:[{name:a("dashboard"),href:d.H.dashboard.root},{name:a("profile")}],sx:{mb:{xs:3,md:5}}}),(0,I.jsx)(o.Z,{value:r,onChange:f,sx:{mb:{xs:3,md:5}},children:Z.map(((e,a)=>(0,I.jsx)(l.Z,{label:e.label,icon:e.icon,value:e.value},a)))}),"general"===r&&g&&(0,I.jsx)(q,{employeeData:g,refetch:b}),"security"===r&&(0,I.jsx)(M,{})]})}function A(){var e;const{user:a}=(0,s.E)();return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(n.ql,{children:[(0,I.jsxs)("title",{children:[" ",(null===a||void 0===a||null===(e=a.stakeholder)||void 0===e?void 0:e.name_english)||"stakeholder"," : Profile"]}),(0,I.jsx)("meta",{name:"description",content:"meta"})]}),(0,I.jsx)(z,{})]})}},93517:(e,a,r)=>{r.d(a,{Z:()=>q});var n=r(87462),s=r(63366),t=r(72791),l=(r(57441),r(59278)),o=r(50385),i=r(20838),d=r(66934),c=r(31402),u=r(4567),m=r(54131),p=r(74223),h=r(80184);const x=(0,p.Z)((0,h.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var g=r(95080);const v=["slots","slotProps"],b=(0,d.ZP)(g.Z)((e=>{let{theme:a}=e;return(0,n.Z)({display:"flex",marginLeft:"calc(".concat(a.spacing(1)," * 0.5)"),marginRight:"calc(".concat(a.spacing(1)," * 0.5)")},"light"===a.palette.mode?{backgroundColor:a.palette.grey[100],color:a.palette.grey[700]}:{backgroundColor:a.palette.grey[700],color:a.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,n.Z)({},"light"===a.palette.mode?{backgroundColor:a.palette.grey[200]}:{backgroundColor:a.palette.grey[600]}),"&:active":(0,n.Z)({boxShadow:a.shadows[0]},"light"===a.palette.mode?{backgroundColor:(0,m._4)(a.palette.grey[200],.12)}:{backgroundColor:(0,m._4)(a.palette.grey[600],.12)})})})),f=(0,d.ZP)(x)({width:24,height:16});const Z=function(e){const{slots:a={},slotProps:r={}}=e,t=(0,s.Z)(e,v),l=e;return(0,h.jsx)("li",{children:(0,h.jsx)(b,(0,n.Z)({focusRipple:!0},t,{ownerState:l,children:(0,h.jsx)(f,(0,n.Z)({as:a.CollapsedIcon,ownerState:l},r.collapsedIcon))}))})};var j=r(59703),y=r(64657);function w(e){return(0,y.ZP)("MuiBreadcrumbs",e)}const _=(0,j.Z)("MuiBreadcrumbs",["root","ol","li","separator"]),k=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],C=(0,d.ZP)(u.Z,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,a)=>[{["& .".concat(_.li)]:a.li},a.root]})({}),P=(0,d.ZP)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,a)=>a.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),S=(0,d.ZP)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,a)=>a.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function I(e,a,r,n){return e.reduce(((s,t,l)=>(l<e.length-1?s=s.concat(t,(0,h.jsx)(S,{"aria-hidden":!0,className:a,ownerState:n,children:r},"separator-".concat(l))):s.push(t),s)),[])}const q=t.forwardRef((function(e,a){const r=(0,c.Z)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:u,component:m="nav",slots:p={},slotProps:x={},expandText:g="Show path",itemsAfterCollapse:v=1,itemsBeforeCollapse:b=1,maxItems:f=8,separator:j="/"}=r,y=(0,s.Z)(r,k),[_,S]=t.useState(!1),q=(0,n.Z)({},r,{component:m,expanded:_,expandText:g,itemsAfterCollapse:v,itemsBeforeCollapse:b,maxItems:f,separator:j}),R=(e=>{const{classes:a}=e;return(0,i.Z)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},w,a)})(q),T=(0,o.y)({elementType:p.CollapsedIcon,externalSlotProps:x.collapsedIcon,ownerState:q}),L=t.useRef(null),M=t.Children.toArray(d).filter((e=>t.isValidElement(e))).map(((e,a)=>(0,h.jsx)("li",{className:R.li,children:e},"child-".concat(a))));return(0,h.jsx)(C,(0,n.Z)({ref:a,component:m,color:"text.secondary",className:(0,l.Z)(R.root,u),ownerState:q},y,{children:(0,h.jsx)(P,{className:R.ol,ref:L,ownerState:q,children:I(_||f&&M.length<=f?M:(e=>b+v>=e.length?e:[...e.slice(0,b),(0,h.jsx)(Z,{"aria-label":g,slots:{CollapsedIcon:p.CollapsedIcon},slotProps:{collapsedIcon:T},onClick:()=>{S(!0);const e=L.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-v,e.length)])(M),R.separator,j,q)})}))}))},7883:(e,a,r)=>{r.d(a,{Z:()=>t});r(72791);var n=r(74223),s=r(80184);const t=(0,n.Z)((0,s.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft")},11883:(e,a,r)=>{r.d(a,{Z:()=>t});r(72791);var n=r(74223),s=r(80184);const t=(0,n.Z)((0,s.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight")}}]);
//# sourceMappingURL=3241.8301b290.chunk.js.map
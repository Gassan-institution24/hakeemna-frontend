/*! For license information please see 2264.6776da45.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[2264],{55803:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var n=a(6907),r=a(19208),o=a(43616),i=a(27031),s=a(6965),d=a(89164),c=a(76932),l=a(25279),u=a(85300),m=a(80184);function p(e){let{departmentData:t}=e;const a=(0,l.K$)(),{t:n}=(0,c.qM)(),{currentLang:r}=(0,c.nt)();r.value;return(0,m.jsx)(d.Z,{maxWidth:!a.themeStretch&&"lg",children:(0,m.jsx)(u.Z,{departmentData:t})})}function g(){const e=(0,r.UO)(),{id:t}=e,{data:a,loading:d}=(0,o.YL)(t);return(0,m.jsxs)(i.Z,{hasContent:!0,category:"department",subcategory:"rooms",acl:"create",children:[(0,m.jsx)(n.ql,{children:(0,m.jsx)("title",{children:" Add Room "})}),d&&(0,m.jsx)(s.a,{}),!d&&(0,m.jsx)(p,{departmentData:a})]})}},85300:(e,t,a)=>{a.d(t,{Z:()=>C});var n=a(55294),r=a(8007),o=a(72791),i=a(61134),s=a(44695),d=a(68870),c=a(57621),l=a(36314),u=a(24308),m=a(12258),p=a(38072),g=a(19208),h=a(89731),v=a(6385),_=a(99116),f=a(8976),Z=a(76932),x=a(32869),b=a(81688),j=a(80184);function C(e){let{departmentData:t,currentTable:a}=e;const C=(0,g.tv)(),{t:w}=(0,Z.qM)(),{currentLang:y}=(0,Z.nt)(),{user:k}=(y.value,(0,f.E)()),{enqueueSnackbar:D}=(0,x.Ds)(),R=r.Ry().shape({name_arabic:r.Z_().required("Name is required"),name_english:r.Z_().required("Name is required"),general_info:r.Z_()}),I=(0,o.useMemo)((()=>{var e,n;return{unit_service:null===k||void 0===k||null===(e=k.employee)||void 0===e||null===(n=e.employee_engagements[null===k||void 0===k?void 0:k.employee.selected_engagement])||void 0===n?void 0:n.unit_service._id,name_arabic:(null===a||void 0===a?void 0:a.name_arabic)||"",name_english:(null===a||void 0===a?void 0:a.name_english)||"",department:t._id,general_info:(null===a||void 0===a?void 0:a.general_info)||""}}),[a,t,null===k||void 0===k?void 0:k.employee]),S=(0,i.cI)({resolver:(0,s.X)(R),defaultValues:I}),q=e=>{/^[a-zA-Z0-9\s,@#$!*_\-&^%]*$/.test(e.target.value)&&S.setValue(e.target.name,e.target.value,{shouldValidate:!0})},{reset:A,handleSubmit:U,formState:{isSubmitting:M}}=S,H=U((async e=>{try{const r=await n.Z.get("https://geolocation-db.com/json/");a?(await(0,v.Z)({method:"PATCH",path:h.Hv.tables.room(a._id),data:{modifications_nums:(a.modifications_nums||0)+1,ip_address_user_modification:r.data.IPv4,user_modification:k._id,department:t._id,...e}}),_.W.emit("updated",{data:e,user:k,link:p.H.unitservice.departments.rooms.root(t._id),msg:"updated room <strong>".concat(e.name_english,"</strong> in <strong>").concat(t.name_english,"</strong> department")})):(await(0,v.Z)({method:"POST",path:h.Hv.tables.rooms,data:{department:t._id,ip_address_user_creation:r.data.IPv4,user_creation:k._id,...e}}),_.W.emit("created",{data:e,user:k,link:p.H.unitservice.departments.rooms.root(t._id),msg:"created room <strong>".concat(e.name_english,"</strong> into <strong>").concat(t.name_english,"</strong> department")})),A(),D(w(a?"update success!":"create success!")),C.push(p.H.unitservice.departments.rooms.root(t._id)),console.info("DATA",e)}catch(r){_.W.emit("error",{error:r,user:k,location:window.location.href}),console.error(r)}}));return(0,j.jsx)(b.ZP,{methods:S,onSubmit:H,children:(0,j.jsx)(u.Z,{container:!0,spacing:3,children:(0,j.jsx)(u.Z,{xs:12,maxWidth:"md",children:(0,j.jsxs)(c.Z,{sx:{p:3},children:[(0,j.jsxs)(d.Z,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,j.jsx)(b.au,{lang:"ar",onChange:q,name:"name_english",label:"".concat(w("name english")," *")}),(0,j.jsx)(b.au,{lang:"ar",onChange:e=>{/^[\u0600-\u06FF0-9\s!@#$%^&*_-]*$/.test(e.target.value)&&S.setValue(e.target.name,e.target.value,{shouldValidate:!0})},name:"name_arabic",label:"".concat(w("name arabic")," *")}),(0,j.jsx)(b.au,{lang:"ar",onChange:q,name:"general_info",label:w("general info")})]}),(0,j.jsx)(l.Z,{alignItems:"flex-end",sx:{mt:3},children:(0,j.jsx)(m.Z,{type:"submit",variant:"contained",loading:M,children:w(a?"save changes":"create")})})]})})})})}},6385:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(55294),r=a(88329),o=a(33805);async function i(e){let{setData:t,setError:a,method:i,path:s,data:d}=e;const c="".concat(o.E0).concat(s),l=r.Z.get("user_token"),u=await(0,n.Z)({method:i,url:c,headers:{authorization:"Bearer ".concat(l)},data:d});return t&&t(u.data),a&&a(u.data),u}},57621:(e,t,a)=>{a.d(t,{Z:()=>_});var n=a(87462),r=a(63366),o=a(72791),i=a(59278),s=a(94419),d=a(66934),c=a(31402),l=a(27938),u=a(75878),m=a(21217);function p(e){return(0,m.Z)("MuiCard",e)}(0,u.Z)("MuiCard",["root"]);var g=a(80184);const h=["className","raised"],v=(0,d.ZP)(l.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),_=o.forwardRef((function(e,t){const a=(0,c.Z)({props:e,name:"MuiCard"}),{className:o,raised:d=!1}=a,l=(0,r.Z)(a,h),u=(0,n.Z)({},a,{raised:d}),m=(e=>{const{classes:t}=e;return(0,s.Z)({root:["root"]},p,t)})(u);return(0,g.jsx)(v,(0,n.Z)({className:(0,i.Z)(m.root,o),elevation:d?8:void 0,ref:t,ownerState:u},l))}))},88329:(e,t,a)=>{function n(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)e[n]=a[n]}return e}a.d(t,{Z:()=>r});var r=function e(t,a){function r(e,r,o){if("undefined"!==typeof document){"number"===typeof(o=n({},a,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in o)o[s]&&(i+="; "+s,!0!==o[s]&&(i+="="+o[s].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+i}}return Object.create({set:r,get:function(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var a=document.cookie?document.cookie.split("; "):[],n={},r=0;r<a.length;r++){var o=a[r].split("="),i=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(n[s]=t.read(i,s),e===s)break}catch(d){}}return e?n[e]:n}},remove:function(e,t){r(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}}]);
//# sourceMappingURL=2264.6776da45.chunk.js.map
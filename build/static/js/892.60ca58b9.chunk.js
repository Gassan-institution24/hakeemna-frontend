"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[892],{38563:(e,n,t)=>{t.d(n,{Z:()=>x});var s=t(16029),o=t(50533),r=t(53767),i=t(4567),l=t(93517),a=t(4419),d=t(80184);function c(e){let{link:n,activeLast:t,disabled:r}=e;const i={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...r&&!t&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},l=(0,d.jsxs)(d.Fragment,{children:[n.icon&&(0,d.jsx)(s.Z,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:n.icon}),n.name]});return n.href?(0,d.jsx)(o.Z,{component:a.r,href:n.href,sx:i,children:l}):(0,d.jsxs)(s.Z,{sx:i,children:[" ",l," "]})}function x(e){let{links:n,action:t,heading:a,moreLink:x,activeLast:u,sx:p,...g}=e;const m=n&&n[n.length-1].name;return(0,d.jsxs)(s.Z,{sx:{...p},children:[(0,d.jsxs)(r.Z,{direction:"row",alignItems:"center",children:[(0,d.jsxs)(s.Z,{sx:{flexGrow:1,display:"flex",gap:{md:3},alignItems:{md:"center"},flexDirection:{xs:"column",md:"row"}},children:[a&&(0,d.jsx)(i.Z,{textTransform:"capitalize",variant:"h4",gutterBottom:!0,children:a}),n&&!!n.length&&(0,d.jsx)(l.Z,{separator:(0,d.jsx)(h,{}),...g,children:null===n||void 0===n?void 0:n.map(((e,n)=>(0,d.jsx)(c,{link:e,activeLast:u,disabled:e.name===m},n)))})]}),t&&(0,d.jsxs)(s.Z,{sx:{flexShrink:0,textTransform:"capitalize"},children:[" ",t," "]})]}),!!x&&(0,d.jsx)(s.Z,{sx:{mt:2},children:x.map(((e,n)=>(0,d.jsx)(o.Z,{href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},n)))})]})}function h(){return(0,d.jsx)(s.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}},27356:(e,n,t)=>{t.d(n,{Z:()=>a});var s=t(16029),o=t(53767),r=t(12065),i=t(4567),l=t(80184);function a(e){let{title:n,imgUrl:t,action:a,filled:d,description:c,sx:x,...h}=e;return(0,l.jsxs)(o.Z,{flexGrow:1,alignItems:"center",justifyContent:"center",sx:{px:3,height:1,...d&&{borderRadius:2,bgcolor:e=>(0,r.Fq)(e.palette.grey[500],.04),border:e=>"dashed 1px ".concat((0,r.Fq)(e.palette.grey[500],.08))},...x},...h,children:[(0,l.jsx)(s.Z,{component:"img",alt:"empty content",src:t||"/assets/icons/empty/ic_content.svg",sx:{width:1,maxWidth:160}}),n&&(0,l.jsx)(i.Z,{variant:"h6",component:"span",sx:{mt:1,color:"text.disabled",textAlign:"center"},children:n}),c&&(0,l.jsx)(i.Z,{variant:"caption",sx:{mt:1,color:"text.disabled",textAlign:"center"},children:c}),a&&a]})}},31092:(e,n,t)=>{t.d(n,{Z:()=>s.Z});var s=t(27356)},38062:(e,n,t)=>{function s(e,n,t){return e?Math.max(0,(1+e)*n-t):0}function o(e,n,t){return null===e[t]?1:null===n[t]||n[t]<e[t]?-1:n[t]>e[t]?1:0}function r(e,n){return"desc"===e?(e,t)=>o(e,t,n):(e,t)=>-o(e,t,n)}t.d(n,{$W:()=>p,K:()=>y,et:()=>u,S_:()=>R,Z4:()=>w,fQ:()=>s,sQ:()=>r,x6:()=>l});var i=t(72791);function l(e){const[n,t]=(0,i.useState)(!(null===e||void 0===e||!e.defaultDense)),[s,o]=(0,i.useState)((null===e||void 0===e?void 0:e.defaultCurrentPage)||0),[r,l]=(0,i.useState)((null===e||void 0===e?void 0:e.defaultOrderBy)||"code"),[a,d]=(0,i.useState)((null===e||void 0===e?void 0:e.defaultRowsPerPage)||25),[c,x]=(0,i.useState)((null===e||void 0===e?void 0:e.defaultOrder)||"asc"),[h,u]=(0,i.useState)((null===e||void 0===e?void 0:e.defaultSelected)||[]),p=(0,i.useCallback)((e=>{""!==e&&(x(r===e&&"asc"===c?"desc":"asc"),l(e))}),[c,r]),g=(0,i.useCallback)((e=>{const n=h.includes(e)?h.filter((n=>n!==e)):[...h,e];u(n)}),[h]),m=(0,i.useCallback)((e=>{o(0),d(parseInt(e.target.value,10))}),[]),v=(0,i.useCallback)((e=>{t(e.target.checked)}),[]),j=(0,i.useCallback)(((e,n)=>{u(e?n:[])}),[]),Z=(0,i.useCallback)(((e,n)=>{o(n)}),[]),y=(0,i.useCallback)((()=>{o(0)}),[]),b=(0,i.useCallback)((e=>{u([]),s&&e<2&&o(s-1)}),[s]),f=(0,i.useCallback)((e=>{let{totalRows:n,totalRowsInPage:t,totalRowsFiltered:r}=e;const i=h.length;if(u([]),s)if(i===t)o(s-1);else if(i===r)o(0);else if(i>t){const e=Math.ceil((n-i)/a)-1;o(e)}}),[s,a,h.length]);return{dense:n,order:c,page:s,orderBy:r,rowsPerPage:a,selected:h,onSelectRow:g,onSelectAllRows:j,onSort:p,onChangePage:Z,onChangeDense:v,onResetPage:y,onChangeRowsPerPage:m,onUpdatePageDeleteRow:b,onUpdatePageDeleteRows:f,setPage:o,setDense:t,setOrder:x,setOrderBy:l,setSelected:u,setRowsPerPage:d}}var a=t(9195),d=t(68745),c=t(81164),x=t(31092),h=t(80184);function u(e){let{notFound:n,sx:t}=e;const{t:s}=(0,c.qM)();return(0,h.jsx)(a.Z,{children:n?(0,h.jsx)(d.Z,{colSpan:12,children:(0,h.jsx)(x.Z,{filled:!0,title:s("No Data"),sx:{py:10,...t}})}):(0,h.jsx)(d.Z,{colSpan:12,sx:{p:0}})})}function p(e){let{emptyRows:n,height:t}=e;return n?(0,h.jsx)(a.Z,{sx:{...t&&{height:t*n}},children:(0,h.jsx)(d.Z,{colSpan:9})}):null}var g=t(16029),m=t(13034),v=t(56890),j=t(80720);const Z={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function y(e){let{order:n,orderBy:t,rowCount:s=0,headLabel:o,numSelected:r=0,onSort:i,onSelectAllRows:l,sx:c}=e;return(0,h.jsx)(v.Z,{sx:c,children:(0,h.jsxs)(a.Z,{children:[l&&(0,h.jsx)(d.Z,{padding:"checkbox",children:(0,h.jsx)(m.Z,{indeterminate:!!r&&r<s,checked:!!s&&r===s,onChange:e=>l(e.target.checked)})}),o.map(((e,s)=>(0,h.jsx)(d.Z,{align:e.align||"center",sortDirection:t===e.id&&n,sx:{width:e.width,minWidth:e.minWidth},children:i?(0,h.jsxs)(j.Z,{hideSortIcon:!0,active:t===e.id,direction:t===e.id?n:"asc",onClick:()=>i(e.id),sx:{textTransform:"capitalize"},children:[e.label,t===e.id?(0,h.jsx)(g.Z,{sx:{...Z},children:"desc"===n?"sorted descending":"sorted ascending"}):null]}):e.label},s)))]})})}var b=t(53767),f=t(4567);function w(e){let{dense:n,action:t,rowCount:s,numSelected:o,onSelectAllRows:r,sx:i,color:l,...a}=e;const{t:d}=(0,c.qM)();return o?(0,h.jsxs)(b.Z,{direction:"row",alignItems:"center",sx:{pl:1,pr:2,top:0,left:0,width:1,zIndex:9,height:58,position:"absolute",bgcolor:"".concat(l,".lighter"),...n&&{height:38},...i},...a,children:[(0,h.jsx)(m.Z,{indeterminate:!!o&&o<s,checked:!!s&&o===s,onChange:e=>r(e.target.checked)}),(0,h.jsxs)(f.Z,{variant:"subtitle2",sx:{ml:2,flexGrow:1,color:"".concat(l,".main"),...n&&{ml:3}},children:[o," ",d("selected")]}),t&&t]}):null}var C=t(89891),_=t(58406),k=t(82626),P=t(5446),S=t(25801);function R(e){let{dense:n,count:t,page:s,onChangeDense:o,rowsPerPage:r,setPage:i,rowsPerPageOptions:l=[5,10,25,50],sx:a,...d}=e;const{t:x}=(0,c.qM)();return(0,h.jsxs)(g.Z,{sx:{position:"relative",...a},children:[(0,h.jsx)(P.Z,{showFirstButton:!0,showLastButton:!0,rowsPerPageOptions:l,component:"div",count:t,page:s,rowsPerPage:r,...d,sx:{borderTopColor:"transparent"}}),o&&(0,h.jsx)(S.Z,{label:x("dense"),control:(0,h.jsx)(C.Z,{checked:n,onChange:o}),sx:{pl:2,py:1.5,top:0,position:{sm:"absolute"}}}),i&&(0,h.jsx)(S.Z,{label:x("page"),control:(0,h.jsx)(_.Z,{value:s,onChange:e=>i(e.target.value),variant:"filled",sx:{height:0,width:68,mr:1,backgroundColor:"white",".MuiSelect-select":{paddingTop:1,paddingBottom:1,lineHeight:"40px"}},children:Array.from({length:Math.ceil(t/r)},((e,n)=>(0,h.jsx)(k.Z,{value:n,children:n+1},n)))}),sx:{ml:18,my:2,top:5,position:{sm:"absolute"}}})]})}},70892:(e,n,t)=>{t.d(n,{H:()=>he,d:()=>U});var s=t(18111),o=t.n(s),r=t(72791),i=t(57621),l=t(79836),a=t(10266),d=t(53382),c=t(39281),x=t(38072),h=t(19208),u=t(22459),p=t(81164),g=t(8976),m=t(93011),v=t(10261),j=t(38563),Z=t(38062),y=t(16386),b=t(16029),f=t(82626),w=t(9195),C=t(68745),_=t(13400),k=t(49900),P=t(84954),S=t(40268),R=t(24845),D=t(80184);function I(e){let{row:n,selected:t,onSelectRow:s,refetch:o,onViewRow:r,onBookAppoint:i,onDelayRow:l,onCancelRow:a,onUnCancelRow:d,onDeleteRow:c}=e;const{_id:u,code:g,sequence_number:m,unit_service:v,patient:j,products:Z,note:I,name_arabic:M,description_english:q,description_arabic:W,quantity:B,category:A,currency:F,price:T,images:L,status:O,completed_at:z,canceled_at:H,created_at:E,user_creation:G,ip_address_user_creation:Q,updated_at:U,user_modification:K,ip_address_user_modification:N,modifications_nums:$}=n,{t:V}=(0,p.qM)(),J=(0,h.tv)(),{currentLang:X}=(0,p.nt)(),Y="ar"===X.value,ee=(0,R.S)(),ne=(0,R.S)();return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(w.Z,{hover:!0,selected:t,children:[(0,D.jsx)(C.Z,{align:"center",children:m}),(0,D.jsx)(C.Z,{align:"center",children:Y?null===v||void 0===v?void 0:v.name_arabic:null===v||void 0===v?void 0:v.name_english}),(0,D.jsx)(C.Z,{align:"center",children:Y?null===j||void 0===j?void 0:j.name_arabic:null===j||void 0===j?void 0:j.name_english}),(0,D.jsx)(C.Z,{align:"center",children:null===Z||void 0===Z?void 0:Z.length}),(0,D.jsx)(C.Z,{align:"center",children:I}),(0,D.jsx)(C.Z,{align:"center",children:(0,D.jsx)(P.Z,{variant:"soft",color:("pending"===O?"warning":"processing"===O&&"info")||"completed"===O&&"success"||"cancelled"===O&&"error"||"default",children:V(O)})}),(0,D.jsx)(C.Z,{align:"right",sx:{px:1},children:(0,D.jsx)(_.Z,{color:ee.open?"inherit":"default",onClick:ee.onOpen,children:(0,D.jsx)(S.Z,{icon:"eva:more-vertical-fill"})})})]}),(0,D.jsxs)(R.Z,{open:ee.open,onClose:ee.onClose,arrow:"right-top",sx:{width:155},children:[(0,D.jsxs)(f.Z,{lang:"ar",onClick:()=>{J.push(x.H.stakeholder.orders.details(u)),ee.onClose()},children:[(0,D.jsx)(S.Z,{icon:"solar:eye-bold"}),V("show")]}),(0,D.jsxs)(f.Z,{lang:"ar",onClick:ne.onOpen,children:[(0,D.jsx)(S.Z,{icon:"carbon:data-quality-definition"}),V("DDL")]})]}),(0,D.jsxs)(R.Z,{open:ne.open,onClose:ne.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,D.jsxs)(b.Z,{sx:{fontWeight:600},children:[V("creation time"),":"]}),(0,D.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,D.jsx)(k.Z,{primary:(0,y.Z)(new Date(E),"dd MMM yyyy"),secondary:(0,y.Z)(new Date(E),"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,D.jsxs)(b.Z,{sx:{pt:1,fontWeight:600},children:[V("created by"),":"]}),(0,D.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===G||void 0===G?void 0:G.email}),(0,D.jsxs)(b.Z,{sx:{pt:1,fontWeight:600},children:[V("created by IP"),":"]}),(0,D.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:Q}),(0,D.jsxs)(b.Z,{sx:{pt:1,fontWeight:600},children:[V("editing time"),":"]}),(0,D.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,D.jsx)(k.Z,{primary:(0,y.Z)(new Date(U),"dd MMM yyyy"),secondary:(0,y.Z)(new Date(U),"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,D.jsxs)(b.Z,{sx:{pt:1,fontWeight:600},children:[V("editor"),":"]}),(0,D.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===K||void 0===K?void 0:K.email}),(0,D.jsxs)(b.Z,{sx:{pt:1,fontWeight:600},children:[V("editor IP"),":"]}),(0,D.jsx)(b.Z,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:N}),(0,D.jsxs)(b.Z,{sx:{pt:1,fontWeight:600},children:[V("modifications no"),": ",$]})]})]})}var M=t(53767),q=t(58406),W=t(62861),B=t(68096),A=t(77196),F=t(48550),T=t(63466);function L(e){let{filters:n,onFilters:t,onAdd:s,dateError:o,options:i}=e;const{t:l}=(0,p.qM)(),a=(0,R.S)(),d=(0,r.useCallback)((e=>{t("status",e.target.value)}),[t]),c=(0,r.useCallback)((e=>{t("name",e.target.value)}),[t]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(M.Z,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[(0,D.jsxs)(B.Z,{sx:{width:{xs:1,md:200}},children:[(0,D.jsx)(W.Z,{children:"".concat(l("status"))}),(0,D.jsxs)(q.Z,{value:n.status,onChange:d,input:(0,D.jsx)(A.Z,{label:l("status")}),MenuProps:{PaperProps:{sx:{maxHeight:240}}},children:[(0,D.jsx)(f.Z,{lang:"ar",value:"pending",children:l("pending")}),(0,D.jsx)(f.Z,{lang:"ar",value:"processing",children:l("processing")}),(0,D.jsx)(f.Z,{lang:"ar",value:"completed",children:l("completed")}),(0,D.jsx)(f.Z,{lang:"ar",value:"cancelled",children:l("cancelled")})]})]}),(0,D.jsxs)(M.Z,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[(0,D.jsx)(F.Z,{fullWidth:!0,value:n.name,onChange:c,placeholder:l("Search name or number..."),InputProps:{startAdornment:(0,D.jsx)(T.Z,{position:"start",children:(0,D.jsx)(S.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),(0,D.jsx)(_.Z,{onClick:a.onOpen,children:(0,D.jsx)(S.Z,{icon:"eva:more-vertical-fill"})})]})]}),(0,D.jsxs)(R.Z,{open:a.open,onClose:a.onClose,arrow:"right-top",sx:{width:140},children:[(0,D.jsxs)(f.Z,{lang:"ar",onClick:()=>{a.onClose()},children:[(0,D.jsx)(S.Z,{icon:"solar:printer-minimalistic-bold"}),l("print")]}),(0,D.jsxs)(f.Z,{lang:"ar",onClick:()=>{a.onClose()},children:[(0,D.jsx)(S.Z,{icon:"solar:export-bold"}),l("export")]})]})]})}var O=t(85771),z=t(27938),H=t(13838);function E(e){let{filters:n,onFilters:t,canReset:s,onResetFilters:o,results:r,...i}=e;const{t:l}=(0,p.qM)();return(0,D.jsxs)(M.Z,{spacing:1.5,...i,children:[(0,D.jsxs)(b.Z,{sx:{typography:"body2"},children:[(0,D.jsx)("strong",{children:r}),(0,D.jsx)(b.Z,{component:"span",sx:{color:"text.secondary",ml:.25},children:l("results found")})]}),(0,D.jsxs)(M.Z,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[""!==n.status&&(0,D.jsx)(G,{label:"".concat(l("status"),":"),children:(0,D.jsx)(O.Z,{size:"small",label:l(n.status),onDelete:e=>{t("status","")}})}),""!==n.name&&(0,D.jsx)(G,{label:"".concat(l("search"),":"),children:(0,D.jsx)(O.Z,{size:"small",label:l("search"),onDelete:e=>{t("name","")}})}),s&&(0,D.jsx)(H.Z,{color:"error",onClick:o,startIcon:(0,D.jsx)(S.Z,{icon:"solar:trash-bin-trash-bold"}),children:l("clear")})]})]})}function G(e){let{label:n,children:t,sx:s,...o}=e;return(0,D.jsxs)(M.Z,{component:z.Z,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...s},...o,children:[(0,D.jsx)(b.Z,{component:"span",sx:{typography:"subtitle2"},children:n}),(0,D.jsx)(M.Z,{spacing:1,direction:"row",flexWrap:"wrap",children:t})]})}const Q={name:"",status:""};function U(){const{t:e}=(0,p.qM)(),n=[{id:"code",label:e("code")},{id:"unit_service",label:e("unit of service")},{id:"patient",label:e("patient")},{id:"products",label:e("products no.")},{id:"note",label:e("note")},{id:"status",label:e("status")},{id:""}],t=(0,h.lr)().get("name"),s=(0,Z.x6)({defaultOrderBy:"code"}),{user:y}=(0,g.E)(),b=(0,u.k)(),[f,w]=(0,r.useState)(Q),{ordersData:C,length:_,refetch:k}=(0,m.wb)(y.stakeholder._id,{page:s.page||0,sortBy:s.orderBy||"code",rowsPerPage:s.rowsPerPage||25,order:s.order||"asc",populate:"unit_service patient",...f}),P=!(!f.startDate||!f.endDate)&&f.startDate.getTime()>f.endDate.getTime(),S=C,R=s.dense?56:76,M=!o()(f,Q),q=!(null!==S&&void 0!==S&&S.length)&&M||!(null!==S&&void 0!==S&&S.length),W=(0,r.useCallback)(((e,n)=>{s.onResetPage(),w((t=>({...t,[e]:n})))}),[s]),B=(0,r.useCallback)((()=>{w(Q)}),[]);return(0,r.useEffect)((()=>{t&&w((e=>({...e,name:t})))}),[t]),(0,D.jsxs)(a.Z,{maxWidth:"xl",children:[(0,D.jsx)(j.Z,{heading:e("orders"),links:[{name:e("dashboard"),href:x.H.dashboard.root},{name:e("orders")}],sx:{mb:{xs:3,md:5}}}),(0,D.jsxs)(i.Z,{children:[(0,D.jsx)(L,{filters:f,onFilters:W,onAdd:()=>b.onTrue(),dateError:P}),M&&(0,D.jsx)(E,{filters:f,onFilters:W,onResetFilters:B,results:null===S||void 0===S?void 0:S.length,sx:{p:2.5,pt:0}}),(0,D.jsx)(c.Z,{sx:{position:"relative",overflow:"unset"},children:(0,D.jsx)(v.Z,{children:(0,D.jsxs)(l.Z,{size:s.dense?"small":"medium",sx:{minWidth:800},children:[(0,D.jsx)(Z.K,{order:s.order,orderBy:s.orderBy,headLabel:n,rowCount:_,numSelected:s.selected.length,onSort:s.onSort}),(0,D.jsxs)(d.Z,{children:[null===S||void 0===S?void 0:S.map(((e,n)=>(0,D.jsx)(I,{refetch:k,row:e,selected:s.selected.includes(e._id),onSelectRow:()=>s.onSelectRow(e._id)},n))),(0,D.jsx)(Z.$W,{height:R,emptyRows:(0,Z.fQ)(s.page,s.rowsPerPage,_)}),(0,D.jsx)(Z.et,{notFound:q})]})]})})}),(0,D.jsx)(Z.S_,{count:_,page:s.page,rowsPerPage:s.rowsPerPage,onPageChange:s.onChangePage,onRowsPerPageChange:s.onChangeRowsPerPage,dense:s.dense,onChangeDense:s.onChangeDense})]})]})}var K=t(24308),N=t(66664),$=t(93044),V=t(9585),J=t(4567);function X(e){let{customer:n,note:t,payment:s,shippingAddress:o}=e;const{t:r}=(0,p.qM)(),{currentLang:l}=(0,p.nt)(),a="ar"===l.value;return(0,D.jsx)(i.Z,{children:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(V.Z,{title:r("customer info")}),(0,D.jsxs)(M.Z,{direction:"row",sx:{p:3},children:[(0,D.jsx)($.Z,{alt:null===n||void 0===n?void 0:n.name_english,src:null===n||void 0===n?void 0:n.company_logo,sx:{width:48,height:48,mr:2}}),(0,D.jsxs)(M.Z,{spacing:.5,alignItems:"flex-start",sx:{typography:"body2"},children:[(0,D.jsx)(J.Z,{variant:"subtitle2",children:a?null===n||void 0===n?void 0:n.name_arabic:null===n||void 0===n?void 0:n.name_english}),(0,D.jsx)(b.Z,{sx:{color:"text.secondary"},children:null===n||void 0===n?void 0:n.email}),(0,D.jsx)(b.Z,{sx:{color:"text.secondary"},children:null===n||void 0===n?void 0:n.phone}),t&&(0,D.jsxs)(J.Z,{variant:"subtitle2",sx:{mt:2},children:[r("note"),":"]}),(0,D.jsx)(b.Z,{sx:{color:"text.secondary"},children:t})]})]})]})})}var Y=t(17070);function ee(e){var n;let{items:t,onChangeQuantity:s,taxes:o,shipping:l,discount:a,subTotal:d,totalAmount:c}=e;const{t:x}=(0,p.qM)(),{currentLang:h}=(0,p.nt)(),u="ar"===h.value,[g,m]=(0,r.useState)({}),j=null===t||void 0===t?void 0:t.reduce(((e,n)=>e+n.price*n.real_delieverd_quantity),0),Z=e=>{"Enter"===e.key&&(s(g),m({}))},y=(0,D.jsx)(M.Z,{spacing:2,alignItems:"flex-end",sx:{my:3,textAlign:"right",typography:"body2"},children:(0,D.jsxs)(M.Z,{direction:"row",sx:{typography:"subtitle1"},children:[(0,D.jsx)(b.Z,{children:x("total")}),(0,D.jsx)(b.Z,{sx:{width:160},children:(0,Y.e_)(j,null===t||void 0===t||null===(n=t[0].currency)||void 0===n?void 0:n.symbol)||"-"})]})});return(0,D.jsxs)(i.Z,{children:[(0,D.jsx)(V.Z,{title:x("details")}),(0,D.jsxs)(M.Z,{sx:{px:3},children:[(0,D.jsx)(v.Z,{children:null===t||void 0===t?void 0:t.map((e=>{var n,t,o,r,i,l,a,d,c;return(0,D.jsxs)(M.Z,{direction:"row",alignItems:"center",sx:{py:3,minWidth:640,borderBottom:e=>"dashed 2px ".concat(e.palette.background.neutral)},children:[(0,D.jsx)($.Z,{src:null===e||void 0===e||null===(n=e.product)||void 0===n||null===(t=n.images)||void 0===t?void 0:t[0],variant:"rounded",sx:{width:48,height:48,mr:2}}),(0,D.jsx)(k.Z,{primary:u?null===e||void 0===e||null===(o=e.product)||void 0===o?void 0:o.name_arabic:null===e||void 0===e||null===(r=e.product)||void 0===r?void 0:r.name_english,secondary:u?null===e||void 0===e||null===(i=e.product)||void 0===i||null===(l=i.category)||void 0===l?void 0:l.name_arabic:null===e||void 0===e||null===(a=e.product)||void 0===a||null===(d=a.category)||void 0===d?void 0:d.name_english,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled",mt:.5}}),!g[e._id]&&(0,D.jsxs)(b.Z,{onClick:()=>m({[e._id]:e.real_delieverd_quantity}),sx:{typography:"body2"},children:["x",e.real_delieverd_quantity]}),g[e._id]&&(0,D.jsx)(F.Z,{sx:{width:140},type:"number",size:"small",autoFocus:!0,value:g[e._id],onChange:n=>m({[e._id]:n.target.value}),onKeyDown:Z,InputProps:{endAdornment:(0,D.jsxs)(T.Z,{position:"end",children:[(0,D.jsx)(_.Z,{onClick:()=>{s(g),m({})},color:"success",edge:"end",children:(0,D.jsx)(S.Z,{icon:"ic:baseline-check"})}),(0,D.jsx)(_.Z,{onClick:()=>m([]),edge:"end",children:(0,D.jsx)(S.Z,{icon:"ic:twotone-close"})})]})}}),(0,D.jsx)(b.Z,{sx:{width:110,textAlign:"right",typography:"subtitle2"},children:(0,Y.e_)(e.price,null===(c=e.currency)||void 0===c?void 0:c.symbol)})]},e._id)}))}),y]})]})}var ne=t(4419),te=t(9145);function se(e){let{status:n,backLink:t,createdAt:s,orderNumber:o,statusOptions:r,onChangeStatus:i}=e;const{t:l}=(0,p.qM)(),{currentLang:a}=(0,p.nt)(),d="ar"===a.value,c=(0,R.S)();return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(M.Z,{spacing:3,direction:{xs:"column",md:"row"},sx:{mb:{xs:3,md:5}},children:[(0,D.jsxs)(M.Z,{spacing:1,direction:"row",alignItems:"flex-start",children:[(0,D.jsx)(_.Z,{component:ne.r,href:t,children:(0,D.jsx)(S.Z,{icon:d?"eva:arrow-ios-forward-fill":"eva:arrow-ios-back-fill"})}),(0,D.jsxs)(M.Z,{spacing:.5,children:[(0,D.jsxs)(M.Z,{spacing:1,direction:"row",alignItems:"center",children:[(0,D.jsxs)(J.Z,{variant:"h4",children:[" ",l("order")," ",o," "]}),(0,D.jsx)(P.Z,{variant:"soft",color:("completed"===n?"success":"pending"===n&&"warning")||"processing"===n&&"info"||"cancelled"===n&&"error"||"default",children:l(n)})]}),(0,D.jsx)(J.Z,{variant:"body2",sx:{color:"text.disabled"},children:(0,te.zM)(s)})]})]}),(0,D.jsx)(M.Z,{flexGrow:1,spacing:1.5,direction:"row",alignItems:"center",justifyContent:"flex-end",children:(0,D.jsx)(H.Z,{color:"inherit",variant:"outlined",endIcon:(0,D.jsx)(S.Z,{icon:"eva:arrow-ios-downward-fill"}),onClick:c.onOpen,sx:{textTransform:"capitalize"},children:l(n)})})]}),(0,D.jsx)(R.Z,{open:c.open,onClose:c.onClose,arrow:"top-right",sx:{width:140},children:r.map((e=>(0,D.jsx)(f.Z,{selected:e.value===n,onClick:()=>{c.onClose(),i(e.value)},children:l(e.label)},e.value)))})]})}var oe=t(36562),re=t(35651),ie=t(27454),le=t(28666),ae=t(65552),de=t(21658),ce=t(46395);function xe(e){let{history:n}=e;const{t:t}=(0,p.qM)(),{currentLang:s}=(0,p.nt)(),o="ar"===s.value,r=(0,D.jsx)(oe.Z,{sx:{p:0,m:0,["& .".concat(de.Z.root,":before")]:{flex:0,padding:0}},children:null===n||void 0===n?void 0:n.map(((e,t)=>{var s;const r=0===t,i=t===n.length-1;return(0,D.jsxs)(ce.Z,{children:[(0,D.jsxs)(le.Z,{children:[(0,D.jsx)(re.Z,{color:r?"primary":"grey"}),i?null:(0,D.jsx)(ae.Z,{})]}),(0,D.jsxs)(ie.Z,{children:[(0,D.jsx)(J.Z,{variant:"subtitle2",children:o&&e.arabic_note||e.note}),(0,D.jsxs)(M.Z,{direction:"row",gap:5,children:[(0,D.jsx)(b.Z,{sx:{color:"text.disabled",typography:"caption",mt:.5},children:(0,te.zM)(e.date)}),(0,D.jsx)(b.Z,{sx:{color:"text.disabled",typography:"caption",mt:.5},children:null===(s=e.user)||void 0===s?void 0:s.email})]})]})]},e.note)}))});return(0,D.jsxs)(i.Z,{children:[(0,D.jsx)(V.Z,{title:t("history")}),(0,D.jsx)(v.Z,{spacing:3,alignItems:{md:"flex-start"},direction:{xs:"column-reverse",md:"row"},sx:{p:3,mt:2,height:"400px"},children:r})]})}function he(){const{t:e}=(0,p.qM)(),n=[{value:"pending",label:e("pending")},{value:"processing",label:e("processing")},{value:"completed",label:e("completed")},{value:"cancelled",label:e("cancelled")}],{id:t}=(0,h.UO)(),{orderData:s,refetch:o}=(0,m.gzy)(t),i=(0,r.useCallback)((async e=>{await N.ZP.patch(N.Hv.orders.one(t),{status:e}),o()}),[t,o]),l=(0,r.useCallback)((async e=>{await N.ZP.patch(N.Hv.orders.one(t),{products:s.products.map((n=>Object.keys(e).includes(n._id)?{...n,real_delieverd_quantity:e[n._id]}:n))}),o()}),[t,o,s]);return(0,D.jsxs)(a.Z,{maxWidth:"xl",children:[(0,D.jsx)(se,{backLink:x.H.stakeholder.orders.root,orderNumber:null===s||void 0===s?void 0:s.sequence_number,createdAt:null===s||void 0===s?void 0:s.created_at,status:null===s||void 0===s?void 0:s.status,onChangeStatus:i,statusOptions:n}),(0,D.jsxs)(K.Z,{container:!0,spacing:3,children:[(0,D.jsx)(K.Z,{xs:12,md:8,children:(0,D.jsxs)(M.Z,{spacing:3,direction:{xs:"column-reverse",md:"column"},children:[(0,D.jsx)(ee,{items:null===s||void 0===s?void 0:s.products,onChangeQuantity:l,taxes:null===s||void 0===s?void 0:s.taxes,shipping:null===s||void 0===s?void 0:s.shipping,discount:null===s||void 0===s?void 0:s.discount,subTotal:null===s||void 0===s?void 0:s.subTotal,totalAmount:null===s||void 0===s?void 0:s.totalAmount}),(0,D.jsx)(xe,{history:null===s||void 0===s?void 0:s.history})]})}),(0,D.jsx)(K.Z,{xs:12,md:4,children:(0,D.jsx)(X,{customer:null!==s&&void 0!==s&&s.unit_service?null===s||void 0===s?void 0:s.unit_service:null===s||void 0===s?void 0:s.patient,note:null===s||void 0===s?void 0:s.note})})]})]})}}}]);
//# sourceMappingURL=892.60ca58b9.chunk.js.map
"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[9857],{83970:(e,a,t)=>{t.r(a),t.d(a,{default:()=>g});var n=t(6907),r=t(19208),o=t(27031),s=t(77436),i=t(35456),l=t(89164),d=t(25279),m=t(85300),c=t(80184);function u(e){let{roomData:a,departmentData:t}=e;const n=(0,d.K$)();return(0,c.jsx)(l.Z,{maxWidth:!n.themeStretch&&"lg",children:a&&t&&(0,c.jsx)(m.Z,{departmentData:t,currentTable:a})})}function g(){const e=(0,r.UO)(),{id:a,acid:t}=e,l=(0,s.YL)(a).data,{data:d,loading:m}=(0,s.zT)(t),g=null===d||void 0===d?void 0:d.name_english;return(0,c.jsxs)(o.Z,{hasContent:!0,category:"department",subcategory:"rooms",acl:"update",children:[(0,c.jsxs)(n.ql,{children:[(0,c.jsxs)("title",{children:[" Edit ",g||""," Room "]}),(0,c.jsx)("meta",{name:"description",content:"meta"})]}),m&&(0,c.jsx)(i.a,{}),!m&&(0,c.jsx)(u,{roomData:d,departmentData:l})]})}},85300:(e,a,t)=>{t.d(a,{Z:()=>j});var n=t(8007),r=t(72791),o=t(61134),s=t(44695),i=t(68870),l=t(57621),d=t(36314),m=t(24308),c=t(12258),u=t(38072),g=t(19208),h=t(66664),p=t(99116),v=t(76932),_=t(8976),Z=t(32869),x=t(26405),f=t(80184);function j(e){let{departmentData:a,currentTable:t}=e;const j=(0,g.tv)(),{t:b}=(0,v.qM)(),{user:y}=(0,_.E)(),{enqueueSnackbar:C}=(0,Z.Ds)(),w=n.Ry().shape({name_arabic:n.Z_().required("Name is required"),name_english:n.Z_().required("Name is required"),general_info:n.Z_()}),k=(0,r.useMemo)((()=>{var e,n;return{unit_service:null===y||void 0===y||null===(e=y.employee)||void 0===e||null===(n=e.employee_engagements[null===y||void 0===y?void 0:y.employee.selected_engagement])||void 0===n?void 0:n.unit_service._id,name_arabic:(null===t||void 0===t?void 0:t.name_arabic)||"",name_english:(null===t||void 0===t?void 0:t.name_english)||"",department:a._id,general_info:(null===t||void 0===t?void 0:t.general_info)||""}}),[t,a,null===y||void 0===y?void 0:y.employee]),q=(0,o.cI)({mode:"onTouched",resolver:(0,s.X)(w),defaultValues:k}),D=e=>{/^[a-zA-Z0-9\s,@#$!*_\-&^%]*$/.test(e.target.value)&&q.setValue(e.target.name,e.target.value,{shouldValidate:!0})},{reset:S,handleSubmit:M,formState:{isSubmitting:H}}=q,N=M((async e=>{try{t?(await h.ZP.patch(h.Hv.rooms.one(t._id),{department:a._id,...e}),p.Z.emit("updated",{data:e,user:y,link:u.H.unitservice.departments.rooms.root(a._id),msg:"updated room <strong>".concat(e.name_english||"","</strong> in <strong>").concat(a.name_english,"</strong> department")})):(await h.ZP.post(h.Hv.rooms.all,{department:a._id,...e}),p.Z.emit("created",{data:e,user:y,link:u.H.unitservice.departments.rooms.root(a._id),msg:"created room <strong>".concat(e.name_english||"","</strong> into <strong>").concat(a.name_english,"</strong> department")})),S(),C(b(t?"update success!":"create success!")),j.push(u.H.unitservice.departments.rooms.root(a._id))}catch(n){p.Z.emit("error",{error:n,user:y,location:window.location.pathname}),C("string"===typeof n?n:n.message,{variant:"error"}),console.error(n)}}));return(0,f.jsx)(x.ZP,{methods:q,onSubmit:N,children:(0,f.jsx)(m.Z,{container:!0,spacing:3,children:(0,f.jsx)(m.Z,{xs:12,maxWidth:"md",children:(0,f.jsxs)(l.Z,{sx:{p:3},children:[(0,f.jsxs)(i.Z,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,f.jsx)(x.au,{lang:"ar",onChange:D,name:"name_english",label:"".concat(b("name english")," *")}),(0,f.jsx)(x.au,{lang:"ar",onChange:e=>{/^[\u0600-\u06FF0-9\s!@#$%^&*_-]*$/.test(e.target.value)&&q.setValue(e.target.name,e.target.value,{shouldValidate:!0})},name:"name_arabic",label:"".concat(b("name arabic")," *")}),(0,f.jsx)(x.au,{lang:"ar",onChange:D,name:"general_info",label:b("general info")})]}),(0,f.jsx)(d.Z,{alignItems:"flex-end",sx:{mt:3},children:(0,f.jsx)(c.Z,{type:"submit",tabIndex:-1,variant:"contained",loading:H,children:b(t?"save changes":"create")})})]})})})})}},57621:(e,a,t)=>{t.d(a,{Z:()=>_});var n=t(87462),r=t(63366),o=t(72791),s=t(59278),i=t(94419),l=t(66934),d=t(31402),m=t(27938),c=t(75878),u=t(21217);function g(e){return(0,u.Z)("MuiCard",e)}(0,c.Z)("MuiCard",["root"]);var h=t(80184);const p=["className","raised"],v=(0,l.ZP)(m.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,a)=>a.root})((()=>({overflow:"hidden"}))),_=o.forwardRef((function(e,a){const t=(0,d.Z)({props:e,name:"MuiCard"}),{className:o,raised:l=!1}=t,m=(0,r.Z)(t,p),c=(0,n.Z)({},t,{raised:l}),u=(e=>{const{classes:a}=e;return(0,i.Z)({root:["root"]},g,a)})(c);return(0,h.jsx)(v,(0,n.Z)({className:(0,s.Z)(u.root,o),elevation:l?8:void 0,ref:a,ownerState:c},m))}))}}]);
//# sourceMappingURL=9857.693d6ac5.chunk.js.map
"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[19555],{33546:(e,t,n)=>{n.d(t,{A:()=>s});var l=n(81e3),i=n(74600),o=n(90310),a=n(94496),r=n(70579);function s(e){let{title:t,imgUrl:n,action:s,filled:d,description:c,sx:u,...m}=e;return(0,r.jsxs)(i.A,{flexGrow:1,alignItems:"center",justifyContent:"center",sx:{px:3,height:1,...d&&{borderRadius:2,bgcolor:e=>(0,o.X4)(e.palette.grey[500],.04),border:e=>`dashed 1px ${(0,o.X4)(e.palette.grey[500],.08)}`},...u},...m,children:[(0,r.jsx)(l.A,{component:"img",alt:"empty content",src:n||"/assets/icons/empty/ic_content.svg",sx:{width:1,maxWidth:160}}),t&&(0,r.jsx)(a.A,{variant:"h6",component:"span",sx:{mt:1,color:"text.disabled",textAlign:"center"},children:t}),c&&(0,r.jsx)(a.A,{variant:"caption",sx:{mt:1,color:"text.disabled",textAlign:"center"},children:c}),s&&s]})}},44847:(e,t,n)=>{n.d(t,{A:()=>l.A});var l=n(33546)},59486:(e,t,n)=>{n.d(t,{A:()=>W});var l=n(80899),i=n(65043),o=n(48751),a=n(24858),r=n(18403),s=n(81e3),d=n(74600),c=n(38246),u=n(49633),m=n(83462),p=n(4219),g=n(7829),v=n(29347),h=n(35316),x=n(94814),f=n(39336),w=n(94496),_=n(48407),A=n(5124),j=n(31673),b=n(91562),y=n(75139),k=n(60778),C=n(7625),S=n(35151),P=n(94857),D=n(59699),R=n(70579);function W(e){var t,n,W,$,q,I;let{onClose:O,refetch:B,...G}=e;const{enqueueSnackbar:T}=(0,P.dh)(),{user:z}=(0,y.Z)(),{t:M}=(0,k.WD)(),{currentLang:F}=(0,k.jc)(),H="ar"===F.value,{handleAddNew:X}=(0,A.I)(),{appointmenttypesData:Y}=(0,C.uZ5)(),{workGroupsData:U}=(0,C.VnY)(null===z||void 0===z||null===(t=z.employee)||void 0===t||null===(n=t.employee_engagements)||void 0===n||null===(W=n[z.employee.selected_engagement])||void 0===W?void 0:W._id),{workShiftsData:E}=(0,C.c8d)(null===z||void 0===z||null===($=z.employee)||void 0===$||null===(q=$.employee_engagements)||void 0===q||null===(I=q[null===z||void 0===z?void 0:z.employee.selected_engagement])||void 0===I?void 0:I.unit_service._id),L=l.Ik().shape({work_shift:l.Yj().required(M("required field")),work_group:l.Yj().required(M("required field")),service_types:l.YO(),appointment_type:l.Yj().required(M("required field")),start_time:l.gl().required(M("required field")),online_available:l.lc().required(M("required field"))}),N=(0,i.useMemo)((()=>{var e,t,n,l,i,o,a;return{unit_service:null===z||void 0===z||null===(e=z.employee)||void 0===e||null===(t=e.employee_engagements)||void 0===t||null===(n=t[null===z||void 0===z?void 0:z.employee.selected_engagement])||void 0===n?void 0:n.unit_service._id,start_time:new Date,online_available:!1,appointment_type:null===Y||void 0===Y||null===(l=Y[0])||void 0===l?void 0:l._id,work_group:null===U||void 0===U||null===(i=U[0])||void 0===i?void 0:i._id,work_shift:null===(o=E.filter((e=>{const t=new Date,n=new Date(t);n.setHours(new Date(e.start_time).getHours(),new Date(e.start_time).getMinutes(),0,0);const l=new Date(t);if(l.setHours(new Date(e.end_time).getHours(),new Date(e.end_time).getMinutes(),0,0),n<=l)return t>=n&&t<l;const i=new Date(l.getTime()+864e5);return t>=n||t<i})))||void 0===o||null===(a=o[0])||void 0===a?void 0:a._id,service_types:[]}}),[null===z||void 0===z?void 0:z.employee,U,E,Y]),V=(0,a.mN)({mode:"all",resolver:(0,r.t)(L),defaultValues:N}),{reset:Z,setValue:K,handleSubmit:J,formState:{errors:Q,isSubmitting:ee}}=V,te=J((async e=>{try{var t,n,l;const i=await j.Ay.post(j.vZ.appointments.all,{...e,department:null===(t=U.filter((t=>t._id===e.work_group)))||void 0===t||null===(n=t[0])||void 0===n||null===(l=n.department)||void 0===l?void 0:l._id,emergency:!0});b.A.emit("created",{data:e,user:z,link:_.f.unitservice.employees.root,msg:`created emergency appointment <strong>[ ${i.data.code} ]</strong>`,ar_msg:`\u0625\u0646\u0634\u0627\u0621 \u0645\u0648\u0639\u062f \u0637\u0627\u0631\u0626 <strong>[ ${i.data.code} ]</strong>`}),Z(),T(M("created successfully!")),B(),O()}catch(i){T(H&&`${i.arabic_message}`||`${i.message}`,{variant:"error"}),console.error(i)}}));return(0,i.useEffect)((()=>{Object.keys(Q).length&&Object.keys(Q).forEach(((e,t)=>{var n;return T(`${e}: ${(null===Q||void 0===Q||null===(n=Q[e])||void 0===n?void 0:n.message)||"error"}`,{variant:"error"})}))}),[Q,T]),(0,i.useEffect)((()=>{Z(N)}),[N,Z]),(0,R.jsx)(m.A,{maxWidth:"lg",onClose:O,...G,children:(0,R.jsxs)(D.Ay,{methods:V,onSubmit:te,children:[(0,R.jsx)(p.A,{sx:{mb:1},children:H?"\u0625\u0646\u0634\u0627\u0621 \u0645\u0648\u0639\u062f \u0645\u0633\u062a\u0639\u062c\u0644 \u062c\u062f\u064a\u062f":"new urgent appointment"}),(0,R.jsx)(h.A,{sx:{overflow:"unset"},children:(0,R.jsx)(d.A,{spacing:2.5,children:(0,R.jsxs)(s.A,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"},children:[(0,R.jsx)(a.xI,{name:"start_time",render:e=>{let{field:t,fieldState:{error:n}}=e;return(0,R.jsx)(g.K,{label:`${M("start date")} *`,sx:{width:"30vw",minWidth:"300px"},onChange:e=>{var t,n,l,i,a;const r=(0,o.A)(e,(null===z||void 0===z||null===(t=z.employee)||void 0===t||null===(n=t.employee_engagements)||void 0===n||null===(l=n[null===z||void 0===z?void 0:z.employee.selected_engagement])||void 0===l||null===(i=l.unit_service)||void 0===i||null===(a=i.country)||void 0===a?void 0:a.time_zone)||"Asia/Amman");K("start_time",new Date(r))},minutesStep:5,slotProps:{textField:{fullWidth:!0,margin:"normal"}}})}}),(0,R.jsxs)(s.A,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,R.jsx)(D.tX,{name:"appointment_type",label:`${M("appointment type")} *`,children:Y.map(((e,t,n)=>(0,R.jsx)(x.A,{lang:"ar",value:e._id,children:H?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))}),(0,R.jsxs)(D.tX,{name:"work_shift",label:`${M("work shift")} *`,PaperPropsSx:{textTransform:"capitalize"},children:[E&&E.map(((e,t,n)=>(0,R.jsx)(x.A,{lang:"ar",value:e._id,children:H?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n))),(0,R.jsx)(f.A,{}),(0,R.jsxs)(x.A,{lang:"ar",sx:{display:"flex",justifyContent:"flex-end",gap:1,fontWeight:600},onClick:()=>X(_.f.unitservice.tables.workshifts.new),children:[(0,R.jsx)(w.A,{variant:"body2",sx:{color:"info.main"},children:M("Add new")}),(0,R.jsx)(S.A,{icon:"material-symbols:new-window-sharp"})]})]}),(0,R.jsxs)(D.tX,{name:"work_group",label:`${M("work group")} *`,children:[U.map(((e,t,n)=>(0,R.jsx)(x.A,{lang:"ar",value:e._id,children:H?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n))),(0,R.jsx)(f.A,{}),(0,R.jsxs)(x.A,{lang:"ar",sx:{display:"flex",justifyContent:"flex-end",gap:1,fontWeight:600},onClick:()=>X(_.f.unitservice.tables.workgroups.new),children:[(0,R.jsx)(w.A,{variant:"body2",sx:{color:"info.main"},children:M("Add new")}),(0,R.jsx)(S.A,{icon:"material-symbols:new-window-sharp"})]})]}),(0,R.jsx)(D.SF,{sx:{ml:3,mt:1},name:"online_available",onChange:e=>K("online_available",e.target.checked),label:(0,R.jsx)(w.A,{sx:{fontSize:12},children:M("online avaliable")})})]})]})})}),(0,R.jsxs)(v.A,{children:[(0,R.jsx)(u.A,{color:"inherit",variant:"outlined",onClick:O,children:M("cancel")}),(0,R.jsx)(c.A,{loading:ee,type:"submit",variant:"contained",children:M("add")})]})]})})}},75950:(e,t,n)=>{function l(e,t,n){return null===e[n]?1:null===t[n]||t[n]<e[n]?-1:t[n]>e[n]?1:0}function i(e,t){return"desc"===e?(e,n)=>l(e,n,t):(e,n)=>-l(e,n,t)}n.d(t,{er:()=>f,Sm:()=>m,We:()=>S,Uv:()=>A,hz:()=>i,K2:()=>a});var o=n(65043);function a(e){const[t,n]=(0,o.useState)(!(null===e||void 0===e||!e.defaultDense)),[l,i]=(0,o.useState)((null===e||void 0===e?void 0:e.defaultCurrentPage)||0),[a,r]=(0,o.useState)((null===e||void 0===e?void 0:e.defaultOrderBy)||"created_at"),[s,d]=(0,o.useState)((null===e||void 0===e?void 0:e.defaultRowsPerPage)||10),[c,u]=(0,o.useState)((null===e||void 0===e?void 0:e.defaultOrder)||"desc"),[m,p]=(0,o.useState)((null===e||void 0===e?void 0:e.defaultSelected)||[]),g=(0,o.useCallback)((e=>{""!==e&&(u(a===e&&"asc"===c?"desc":"asc"),r(e))}),[c,a]),v=(0,o.useCallback)((e=>{const t=m.includes(e)?m.filter((t=>t!==e)):[...m,e];p(t)}),[m]),h=(0,o.useCallback)((e=>{i(0),d(parseInt(e.target.value,10))}),[]),x=(0,o.useCallback)((e=>{n(e.target.checked)}),[]),f=(0,o.useCallback)(((e,t)=>{p(e?t:[])}),[]),w=(0,o.useCallback)(((e,t)=>{i(t)}),[]),_=(0,o.useCallback)((()=>{i(0)}),[]),A=(0,o.useCallback)((e=>{p([]),l&&e<2&&i(l-1)}),[l]),j=(0,o.useCallback)((e=>{let{totalRows:t,totalRowsInPage:n,totalRowsFiltered:o}=e;const a=m.length;if(p([]),l)if(a===n)i(l-1);else if(a===o)i(0);else if(a>n){const e=Math.ceil((t-a)/s)-1;i(e)}}),[l,s,m.length]);return{dense:t,order:c,page:l,orderBy:a,rowsPerPage:s,selected:m,onSelectRow:v,onSelectAllRows:f,onSort:g,onChangePage:w,onChangeDense:x,onResetPage:_,onChangeRowsPerPage:h,onUpdatePageDeleteRow:A,onUpdatePageDeleteRows:j,setPage:i,setDense:n,setOrder:u,setOrderBy:r,setSelected:p,setRowsPerPage:d}}var r=n(68738),s=n(39652),d=n(60778),c=n(44847),u=n(70579);function m(e){let{notFound:t,sx:n}=e;const{t:l}=(0,d.WD)();return(0,u.jsx)(r.A,{children:t?(0,u.jsx)(s.A,{colSpan:12,children:(0,u.jsx)(c.A,{filled:!0,title:l("No Data"),sx:{py:10,...n}})}):(0,u.jsx)(s.A,{colSpan:12,sx:{p:0}})})}var p=n(81e3),g=n(1273),v=n(84882),h=n(58093);const x={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function f(e){let{order:t,orderBy:n,rowCount:l=0,headLabel:i,numSelected:o=0,onSort:a,onSelectAllRows:c,sx:m}=e;const{t:f}=(0,d.WD)();return(0,u.jsx)(v.A,{sx:m,children:(0,u.jsxs)(r.A,{children:[c&&(0,u.jsx)(s.A,{padding:"checkbox",children:(0,u.jsx)(g.A,{indeterminate:!!o&&o<l,checked:!!l&&o===l,onChange:e=>c(e.target.checked)})}),i.map(((e,l)=>(0,u.jsx)(s.A,{align:e.align||"center",sortDirection:n===e.id&&t,sx:{width:e.width,minWidth:e.minWidth},children:a?(0,u.jsxs)(h.A,{hideSortIcon:!0,active:n===e.id,direction:n===e.id?t:"asc",onClick:()=>a(e.id),sx:{textTransform:"capitalize"},children:[f(e.label),n===e.id?(0,u.jsx)(p.A,{sx:{...x},children:"desc"===t?"sorted descending":"sorted ascending"}):null]}):f(e.label)},l)))]})})}var w=n(74600),_=n(94496);function A(e){let{dense:t,action:n,rowCount:l,numSelected:i,onSelectAllRows:o,sx:a,color:r,...s}=e;const{t:c}=(0,d.WD)();return i?(0,u.jsxs)(w.A,{direction:"row",alignItems:"center",sx:{pl:1,pr:2,top:0,left:0,width:1,zIndex:9,height:58,position:"absolute",bgcolor:`${r}.lighter`,...t&&{height:38},...a},...s,children:[(0,u.jsx)(g.A,{indeterminate:!!i&&i<l,checked:!!l&&i===l,onChange:e=>o(e.target.checked)}),(0,u.jsxs)(_.A,{variant:"subtitle2",sx:{ml:2,flexGrow:1,color:`${r}.main`,...t&&{ml:3}},children:[i," ",c("selected")]}),n&&n]}):null}var j=n(19042),b=n(72221),y=n(94814),k=n(79266),C=n(99784);function S(e){let{dense:t,count:n,page:l,onChangeDense:i,rowsPerPage:o,setPage:a,rowsPerPageOptions:r=[5,10,25,50],sx:s,...c}=e;const{t:m}=(0,d.WD)();return(0,u.jsxs)(p.A,{sx:{position:"relative",...s},children:[(0,u.jsx)(k.A,{showFirstButton:!0,showLastButton:!0,rowsPerPageOptions:r,component:"div",count:n,page:l,rowsPerPage:o,...c,sx:{borderTopColor:"transparent"}}),i&&(0,u.jsx)(C.A,{label:m("dense"),control:(0,u.jsx)(j.A,{checked:t,onChange:i}),sx:{pl:2,py:1.5,top:0,position:{sm:"absolute"}}}),a&&(0,u.jsx)(C.A,{label:m("page"),control:(0,u.jsx)(b.A,{value:l,onChange:e=>a(e.target.value),variant:"filled",sx:{height:0,width:68,mr:1,backgroundColor:"white",".MuiSelect-select":{paddingTop:1,paddingBottom:1,lineHeight:"40px"}},children:Array.from({length:Math.ceil(n/o)},((e,t)=>(0,u.jsx)(y.A,{value:t,children:t+1},t)))}),sx:{ml:18,my:2,top:5,position:{sm:"absolute"}}})]})}}}]);
//# sourceMappingURL=19555.ab274992.chunk.js.map
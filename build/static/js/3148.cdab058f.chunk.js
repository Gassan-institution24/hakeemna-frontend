"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[3148],{23148:(e,n,a)=>{a.r(n),a.d(n,{default:()=>d});var t=a(57689),i=a(6907),s=a(27031),l=a(8976),o=a(46633),r=a(80184);function d(){var e,n,a,d,c;const{user:p}=(0,l.E)(),m=null===p||void 0===p||null===(e=p.employee)||void 0===e||null===(n=e.employee_engagements)||void 0===n||null===(a=n[null===p||void 0===p||null===(c=p.employee)||void 0===c?void 0:c.selected_engagement])||void 0===a||null===(d=a.unit_service)||void 0===d?void 0:d.name_english,{emid:u,depId:v}=(0,t.UO)();return(0,r.jsxs)(s.Z,{category:"unit_service",subcategory:"permissions",acl:"read",children:[(0,r.jsxs)(i.ql,{children:[(0,r.jsxs)("title",{children:[m||"unit of service"," : departments permissions"]}),(0,r.jsx)("meta",{name:"description",content:"meta"})]}),u&&v&&(0,r.jsx)(o.Z,{})]})}},46633:(e,n,a)=>{a.d(n,{Z:()=>T});var t=a(8007),i=a(61134),s=a(72791),l=a(44695),o=a(53767),r=a(12258),d=a(61889),c=a(4567),p=a(57621),m=a(9585),u=a(10266),v=a(38072),g=a(19208),x=a(38887),h=a(66664),y=a(99116),j=a(8976),Z=a(93011),b=a(81164),f=a(32869),_=a(85563),w=a(80184);function T(){const{t:e}=(0,b.qM)(),{currentLang:n}=(0,b.nt)(),a="ar"===n.value,T=[{label:e("read"),value:"read"},{label:e("create"),value:"create"},{label:e("edit"),value:"update"},{label:e("delete"),value:"delete"}],{id:P}=(0,g.UO)(),{data:k}=(0,Z.X79)(P),{user:C}=(0,j.E)(),q=(0,x.F)("up","md"),{enqueueSnackbar:I}=(0,f.Ds)(),S=t.Ry().shape({employees:t.IX(),management_tables:t.IX(),appointments:t.IX(),appointment_configs:t.IX(),accounting:t.IX(),quality_control:t.IX(),permissions:t.IX()}),H=(0,s.useMemo)((()=>{var e,n,a,t,i,s,l,o,r,d,c,p,m,u;return{employees:(null===k||void 0===k||null===(e=k.acl)||void 0===e||null===(n=e.department)||void 0===n?void 0:n.employees)||[],management_tables:(null===k||void 0===k||null===(a=k.acl)||void 0===a||null===(t=a.department)||void 0===t?void 0:t.management_tables)||[],appointments:(null===k||void 0===k||null===(i=k.acl)||void 0===i||null===(s=i.department)||void 0===s?void 0:s.appointments)||[],appointment_configs:(null===k||void 0===k||null===(l=k.acl)||void 0===l||null===(o=l.department)||void 0===o?void 0:o.appointment_configs)||[],accounting:(null===k||void 0===k||null===(r=k.acl)||void 0===r||null===(d=r.department)||void 0===d?void 0:d.accounting)||[],quality_control:(null===k||void 0===k||null===(c=k.acl)||void 0===c||null===(p=c.department)||void 0===p?void 0:p.quality_control)||[],permissions:(null===k||void 0===k||null===(m=k.acl)||void 0===m||null===(u=m.department)||void 0===u?void 0:u.permissions)||[]}}),[k]),M=(0,i.cI)({mode:"onTouched",resolver:(0,l.X)(S),defaultValues:H}),{reset:R,handleSubmit:X,formState:{isSubmitting:z,errors:N}}=M;(0,s.useEffect)((()=>{Object.keys(N).length&&Object.keys(N).forEach(((e,n)=>{var a;return I("".concat(e,": ").concat((null===N||void 0===N||null===(a=N[e])||void 0===a?void 0:a.message)||"error"),{variant:"error"})}))}),[N,I]),(0,s.useEffect)((()=>{var e,n,a,t,i,s,l,o,r,d,c,p,m,u;R({employees:(null===k||void 0===k||null===(e=k.acl)||void 0===e||null===(n=e.department)||void 0===n?void 0:n.employees)||[],management_tables:(null===k||void 0===k||null===(a=k.acl)||void 0===a||null===(t=a.department)||void 0===t?void 0:t.management_tables)||[],appointments:(null===k||void 0===k||null===(i=k.acl)||void 0===i||null===(s=i.department)||void 0===s?void 0:s.appointments)||[],appointment_configs:(null===k||void 0===k||null===(l=k.acl)||void 0===l||null===(o=l.department)||void 0===o?void 0:o.appointment_configs)||[],accounting:(null===k||void 0===k||null===(r=k.acl)||void 0===r||null===(d=r.department)||void 0===d?void 0:d.accounting)||[],quality_control:(null===k||void 0===k||null===(c=k.acl)||void 0===c||null===(p=c.department)||void 0===p?void 0:p.quality_control)||[],permissions:(null===k||void 0===k||null===(m=k.acl)||void 0===m||null===(u=m.department)||void 0===u?void 0:u.permissions)||[]})}),[P,k]);const E=X((async n=>{try{const a=k.acl;a.department=n,h.ZP.patch(h.Hv.employee_engagements.one(P),{acl:a}),y.Z.emit("updated",{user:C,link:v.H.unitservice.employees.acl(P),msg:"updated a department employee permissions"}),I(e("updated successfully!"))}catch(t){I(a&&"".concat(t.arabic_message)||"".concat(t.message),{variant:"error"}),console.error(t)}})),O=(0,w.jsxs)(w.Fragment,{children:[q&&(0,w.jsxs)(d.ZP,{md:4,children:[(0,w.jsx)(c.Z,{textTransform:"capitalize",variant:"h6",sx:{mb:.5},children:e("permissions")}),(0,w.jsx)(c.Z,{variant:"body2",sx:{color:"text.secondary"},children:e("giving or withdrowing permissions refered to all")}),(0,w.jsx)(c.Z,{variant:"body2",sx:{color:"text.secondary"},children:e("department and all its work groups")})]}),(0,w.jsx)(d.ZP,{xs:12,md:8,children:(0,w.jsxs)(p.Z,{children:[!q&&(0,w.jsx)(m.Z,{title:e("permissions")}),(0,w.jsxs)(o.Z,{spacing:3,sx:{p:3},children:[(0,w.jsxs)(o.Z,{spacing:1,children:[(0,w.jsx)(c.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("employees")}),(0,w.jsx)(_.s2,{row:!0,spacing:4,name:"employees",options:T})]}),(0,w.jsxs)(o.Z,{spacing:1,children:[(0,w.jsx)(c.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("management tables")}),(0,w.jsx)(_.s2,{row:!0,spacing:4,name:"management_tables",options:T})]}),(0,w.jsxs)(o.Z,{spacing:1,children:[(0,w.jsx)(c.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("appointments")}),(0,w.jsx)(_.s2,{row:!0,spacing:4,name:"appointments",options:T})]}),(0,w.jsxs)(o.Z,{spacing:1,children:[(0,w.jsx)(c.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("appointment configuration")}),(0,w.jsx)(_.s2,{row:!0,spacing:4,name:"appointment_configs",options:T})]}),(0,w.jsxs)(o.Z,{spacing:1,children:[(0,w.jsx)(c.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("accounting")}),(0,w.jsx)(_.s2,{row:!0,spacing:4,name:"accounting",options:T})]}),(0,w.jsxs)(o.Z,{spacing:1,children:[(0,w.jsx)(c.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("quality control")}),(0,w.jsx)(_.s2,{row:!0,spacing:4,name:"quality_control",options:T})]}),(0,w.jsxs)(o.Z,{spacing:1,children:[(0,w.jsx)(c.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("permissions")}),(0,w.jsx)(_.s2,{row:!0,spacing:4,name:"permissions",options:T})]})]})]})})]}),F=(0,w.jsxs)(w.Fragment,{children:[q&&(0,w.jsx)(d.ZP,{md:4}),(0,w.jsx)(d.ZP,{xs:12,md:8,sx:{display:"flex",justifyContent:"flex-end"},children:(0,w.jsx)(r.Z,{type:"submit",variant:"contained",loading:z,sx:{m:2},children:e("save changes")})})]});return(0,w.jsx)(u.Z,{maxWidth:"lg",children:(0,w.jsx)(_.ZP,{methods:M,onSubmit:E,children:(0,w.jsxs)(d.ZP,{container:!0,spacing:3,children:[O,F]})})})}},9585:(e,n,a)=>{a.d(n,{Z:()=>b});var t=a(63366),i=a(87462),s=a(72791),l=a(59278),o=a(20838),r=a(4567),d=a(31402),c=a(66934),p=a(59703),m=a(64657);function u(e){return(0,m.ZP)("MuiCardHeader",e)}const v=(0,p.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var g=a(80184);const x=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],h=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,n)=>(0,i.Z)({["& .".concat(v.title)]:n.title,["& .".concat(v.subheader)]:n.subheader},n.root)})({display:"flex",alignItems:"center",padding:16}),y=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,n)=>n.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),j=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,n)=>n.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),Z=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,n)=>n.content})({flex:"1 1 auto"}),b=s.forwardRef((function(e,n){const a=(0,d.Z)({props:e,name:"MuiCardHeader"}),{action:s,avatar:c,className:p,component:m="div",disableTypography:v=!1,subheader:b,subheaderTypographyProps:f,title:_,titleTypographyProps:w}=a,T=(0,t.Z)(a,x),P=(0,i.Z)({},a,{component:m,disableTypography:v}),k=(e=>{const{classes:n}=e;return(0,o.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},u,n)})(P);let C=_;null==C||C.type===r.Z||v||(C=(0,g.jsx)(r.Z,(0,i.Z)({variant:c?"body2":"h5",className:k.title,component:"span",display:"block"},w,{children:C})));let q=b;return null==q||q.type===r.Z||v||(q=(0,g.jsx)(r.Z,(0,i.Z)({variant:c?"body2":"body1",className:k.subheader,color:"text.secondary",component:"span",display:"block"},f,{children:q}))),(0,g.jsxs)(h,(0,i.Z)({className:(0,l.Z)(k.root,p),as:m,ref:n,ownerState:P},T,{children:[c&&(0,g.jsx)(y,{className:k.avatar,ownerState:P,children:c}),(0,g.jsxs)(Z,{className:k.content,ownerState:P,children:[C,q]}),s&&(0,g.jsx)(j,{className:k.action,ownerState:P,children:s})]}))}))}}]);
//# sourceMappingURL=3148.cdab058f.chunk.js.map
"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[97297],{28082:(e,n,t)=>{t.d(n,{A:()=>s});var i=t(74600),a=t(49633),o=t(57442),l=t(60778),r=t(70579);function s(e){let{name:n,list:t,helperText:s,value:d,onChange:c,...m}=e;const{currentLang:u}=(0,l.jc)(),p="ar"===u.value,{myunitTime:h}=(0,o.nM)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.A,{sx:{my:3,maxHeight:300,overflow:"auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-start","&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:"white"},"&::-webkit-scrollbar-thumb":{background:"white",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"white"},gap:1},children:t.map((e=>(0,r.jsx)(a.A,{variant:"outlined",sx:{width:100,"&:hover":{bgcolor:"white",color:"primary.main"},fontWeight:d===e._id?600:500,backgroundColor:d===e._id?"primary.main":"white",color:d===e._id?"white":"primary.main",borderRadius:2},onClick:()=>{c(e._id)},children:(0,o.qi)(h(e.start_time),"p",p)})))})})}},38974:(e,n,t)=>{t.d(n,{d:()=>a});var i=t(65043);function a(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const[t,a]=(0,i.useState)(e);return(0,i.useEffect)((()=>{const t=setTimeout((()=>{a(e)}),n);return()=>{clearTimeout(t)}}),[e,n]),t}},74818:(e,n,t)=>{t.d(n,{n:()=>a});const i=e=>new Date(e).toISOString().replace(/-/g,"").replace(/:/g,"").replace(/\.\d{3}/,"");async function a(e){try{var n,t,a;const l=encodeURIComponent(i(e.start_time)),r=encodeURIComponent(i(e.end_time)),s=encodeURIComponent(`appointment at ${null===(n=e.unit_service)||void 0===n?void 0:n.name_english}`),d=`https://calendar.google.com/calendar/render?action=TEMPLATE&dates=${l}/${r}&text=${s}&location=${encodeURIComponent((null===(t=e.unit_service)||void 0===t?void 0:t.location_gps)||(null===(a=e.unit_service)||void 0===a?void 0:a.address))}`;confirm("Would you like to add this event to your Google Calendar?")&&(o=d,/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?window.location.href=o:window.open(o,"_blank"))}catch(l){console.error(l)}var o}},83858:(e,n,t)=>{t.d(n,{A:()=>i.A});var i=t(91720)},91720:(e,n,t)=>{t.d(n,{A:()=>m});var i=t(81e3),a=t(88446),o=t(74600),l=t(94496),r=t(22698),s=t(65381),d=t(70579);function c(e){let{link:n,activeLast:t,disabled:o}=e;const l={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...o&&!t&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},r=(0,d.jsxs)(d.Fragment,{children:[n.icon&&(0,d.jsx)(i.A,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:n.icon}),n.name]});return n.href?(0,d.jsx)(a.A,{component:s.W,href:n.href,sx:l,children:r}):(0,d.jsxs)(i.A,{sx:l,children:[" ",r," "]})}function m(e){let{links:n,action:t,heading:s,moreLink:m,activeLast:p,sx:h,...x}=e;const g=n&&n[n.length-1].name;return(0,d.jsxs)(i.A,{sx:{...h},children:[(0,d.jsxs)(o.A,{direction:"row",alignItems:"center",children:[(0,d.jsxs)(i.A,{sx:{flexGrow:1,display:"flex",gap:{md:3},alignItems:{md:"center"},flexDirection:{xs:"column",md:"row"}},children:[s&&(0,d.jsx)(l.A,{textTransform:"capitalize",variant:"h4",gutterBottom:!0,children:s}),n&&!!n.length&&(0,d.jsx)(r.A,{separator:(0,d.jsx)(u,{}),...x,children:null===n||void 0===n?void 0:n.map(((e,n)=>(0,d.jsx)(c,{link:e,activeLast:p,disabled:e.name===g},n)))})]}),t&&(0,d.jsxs)(i.A,{sx:{flexShrink:0,textTransform:"capitalize"},children:[" ",t," "]})]}),!!m&&(0,d.jsx)(i.A,{sx:{mt:2},children:m.map(((e,n)=>(0,d.jsx)(a.A,{href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},n)))})]})}function u(){return(0,d.jsx)(i.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}},97297:(e,n,t)=>{t.r(n),t.d(n,{default:()=>be});var i=t(29490),a=t(68719),o=t(80899),l=t(19853),r=t.n(l),s=t(24858),d=t(18403),c=t(65043),m=t(38246),u=t(72221),p=t(39336),h=t(77224),x=t(94496),g=t(17642),b=t(53193),v=t(74050),j=t(74157),_=t(19260),A=t(49633),y=t(12110),f=t(81e3),w=t(94814),k=t(17392),C=t(74600),S=t(48407),D=t(65381),P=t(67132),T=t(59229),F=t(38974),$=t(74818),E=t(57442),I=t(31673),R=t(75139),W=t(60778),q=t(7625),L=t(35151),z=t(94857),B=t(83858),Z=t(87410),G=t(59699),Y=t(45837),M=t(67784),N=t(26353),U=t(18099),O=t(88887),V=t(28082),K=t(70579);function H(e){let{selected:n,AppointDates:t,setSelected:i,selectedDate:a,setSelectedDate:o,list:l,loading:r,hideSelect:s}=e;const{t:d}=(0,W.WD)(),{data:m}=(0,q.VK$)(n,{select:"_id work_group appointment_type unit_service start_time online_available",populate:[{path:"work_group",select:"name_english name_arabic"},{path:"unit_service",select:"name_english name_arabic"},{path:"appointment_type",select:"name_english name_arabic"}]}),[u,h]=(0,c.useState)(),g=(0,O.Q)("up","md");(0,c.useEffect)((()=>{var e,t;if(!r.value)if(n)if(l.some((e=>e._id===n)))l.forEach(((e,t)=>{var a,o;e._id===n&&(i(null===l||void 0===l||null===(a=l[t])||void 0===a?void 0:a._id),h(null===l||void 0===l||null===(o=l[t])||void 0===o?void 0:o._id))}));else{var a,o;i(null===l||void 0===l||null===(a=l[0])||void 0===a?void 0:a._id),h(null===l||void 0===l||null===(o=l[0])||void 0===o?void 0:o._id)}else i(null===l||void 0===l||null===(e=l[0])||void 0===e?void 0:e._id),h(null===l||void 0===l||null===(t=l[0])||void 0===t?void 0:t._id)}),[l,r.value]);return(0,K.jsxs)(K.Fragment,{children:[!s&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)(C.A,{direction:g?"row":"column",justifyContent:"space-around",children:[(0,K.jsx)(U.$,{localeText:!1,sx:{width:"100%",flexGrow:1,flexShrink:.4},orientation:g?"landscape":"",shouldDisableDate:e=>!t.some((n=>{const t=new Date(n),i=new Date(e);return t.getFullYear()===i.getFullYear()&&t.getMonth()===i.getMonth()&&t.getDate()===i.getDate()})),slots:{toolbar:"test"},slotProps:{actionBar:{actions:[]}},value:new Date(a),onChange:e=>o(new Date(e.getFullYear(),e.getMonth(),e.getDate(),12,0,0))}),(0,K.jsx)(C.A,{sx:{width:"100%",height:"100%",flexGrow:1,flexShrink:.6,px:3},children:(0,K.jsx)(V.A,{list:l,onChange:e=>{i(e),h(e)},value:u})})]}),(0,K.jsx)(p.A,{sx:{borderStyle:"dashed"}})]}),n&&(0,K.jsx)(x.A,{sx:{py:2,px:0,fontWeight:700},variant:"caption",color:"text.secondary",textTransform:"uppercase",children:d("Appointment details")}),m&&(0,K.jsx)(Q,{item:m}),(0,K.jsx)(p.A,{sx:{borderStyle:"dashed",mb:3}})]})}function Q(e){var n,t;let{item:i}=e;const{_id:a,work_group:o,appointment_type:l,unit_service:r,start_time:s,online_available:d}=i,{t:m}=(0,W.WD)(),{currentLang:u}=(0,W.jc)(),p="ar"===u.value,{enqueueSnackbar:h}=(0,z.dh)(),{appointmenttypesData:x}=(0,q.uZ5)(),[g,b]=(0,c.useState)(null===l||void 0===l?void 0:l._id),v=(0,O.Q)("up","md");return(0,K.jsx)(C.A,{dir:p?"rtl":"ltr",spacing:2,sx:{p:3,pt:2,position:"relative"},children:(0,K.jsxs)(C.A,{direction:v?"row":"column",alignItems:"center",spacing:2,children:[(0,K.jsx)(N.A,{primary:(0,Y.A)(new Date(s))&&new Date(s).toLocaleTimeString(m("en-US"),{timeZone:(null===r||void 0===r||null===(n=r.country)||void 0===n?void 0:n.time_zone)||"Asia/Amman",hour:"2-digit",minute:"2-digit"}),secondary:(0,Y.A)(new Date(s))&&new Date(s).toLocaleDateString(m("en-US"),{timeZone:(null===r||void 0===r||null===(t=r.country)||void 0===t?void 0:t.time_zone)||"Asia/Amman"}),primaryTypographyProps:{typography:"subtitle1",noWrap:!0},secondaryTypographyProps:{typography:"body2",component:"span",mt:.5,color:"text.disabled"}}),[{label:(0,K.jsx)(M.A,{variant:"standard",select:!0,size:"small",sx:{width:"170px",mx:2},value:g,onChange:e=>{try{I.Ay.patch(I.vZ.appointments.one(a),{appointment_type:e.target.value}),b(e.target.value),h(m("updated successfully"))}catch(n){h(p&&`${n.arabic_message}`||`${n.message}`,{variant:"error"})}},placeholder:m("appointment type"),children:null===x||void 0===x?void 0:x.map(((e,n)=>(0,K.jsx)(w.A,{selected:g===e._id,value:e._id,children:p?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))}),icon:(0,K.jsx)(L.A,{icon:"streamline:waiting-appointments-calendar"})},{label:p?null===o||void 0===o?void 0:o.name_arabic:null===o||void 0===o?void 0:o.name_english,icon:(0,K.jsx)(L.A,{icon:"ri:group-line"})},{label:m("available online"),icon:(0,K.jsx)(L.A,{icon:d?"typcn:tick-outline":"mdi:close-outline",sx:{color:d?"success.main":"error.main"}})}].map(((e,n)=>(0,K.jsxs)(C.A,{spacing:.5,direction:"row",children:[e.icon,(0,K.jsx)(N.A,{primary:e.label,secondary:(0,K.jsx)("span",{dir:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641"===e.label?"ltr":"auto",children:e.value}),primaryTypographyProps:{typography:"body2",color:"text.secondary",mb:.5},secondaryTypographyProps:{typography:"subtitle2",color:"text.primary",component:"span",textTransform:"none"}})]},n)))]})})}var X=t(71806),J=t(26240),ee=t(73460),ne=t(77502),te=t(20698),ie=t(51440),ae=t(75950),oe=t(68738),le=t(39652),re=t(83462),se=t(4219),de=t(35316),ce=t(29347),me=t(70074);function ue(e){let{row:n,note:t,setNote:i,selected:a,onEmploymentRow:o,SelectedAppointment:l}=e;const{name_english:r,name_arabic:s,nationality:d,identification_num:c,mobile_num1:m,mobile_num2:u,sequence_number:p,birth_date:h}=n,{t:g}=(0,W.WD)(),{currentLang:b}=(0,W.jc)(),v="ar"===b.value,j=(0,T.C)(),_=(0,T.C)(),f=(0,K.jsxs)(oe.A,{hover:!0,selected:a,children:[(0,K.jsx)(le.A,{align:"center",children:r}),(0,K.jsx)(le.A,{align:"center",children:s}),(0,K.jsx)(le.A,{align:"center",children:m}),(0,K.jsx)(le.A,{align:"center",children:v?null===d||void 0===d?void 0:d.name_arabic:null===d||void 0===d?void 0:d.name_english}),(0,K.jsxs)(le.A,{align:"center",sx:{px:1,whiteSpace:"nowrap",display:"flex",gap:1},children:[(0,K.jsx)(A.A,{variant:"contained",color:"primary",onClick:j.onToggle,children:g("Select this patient")}),(0,K.jsx)(A.A,{onClick:_.onToggle,children:g("details")})]})]});return(0,K.jsxs)(K.Fragment,{children:[f,(0,K.jsxs)(re.A,{open:_.value,onClose:_.onFalse,fullWidth:!0,maxWidth:"sm",sx:{padding:5},children:[(0,K.jsx)(se.A,{children:v?s:r}),(0,K.jsxs)(de.A,{children:[(null===d||void 0===d?void 0:d.code)&&p&&(0,K.jsxs)(C.A,{direction:"row",gap:2,children:[(0,K.jsxs)(x.A,{variant:"subtitle2",children:[g("Code"),":"]}),(0,K.jsxs)(x.A,{variant:"body2",children:[" ",null!==d&&void 0!==d&&d.code?String(null===d||void 0===d?void 0:d.code).padStart(3,"0"):"","-",p]})]}),d&&(0,K.jsxs)(C.A,{direction:"row",gap:2,children:[(0,K.jsxs)(x.A,{variant:"subtitle2",children:[g("Nationality"),":"]}),(0,K.jsx)(x.A,{variant:"body2",children:v?null===d||void 0===d?void 0:d.name_arabic:null===d||void 0===d?void 0:d.name_english})]}),c&&(0,K.jsxs)(C.A,{direction:"row",gap:2,children:[(0,K.jsxs)(x.A,{variant:"subtitle2",children:[g("ID number"),":"]}),(0,K.jsx)(x.A,{variant:"body2",children:c})]}),m&&(0,K.jsxs)(C.A,{direction:"row",gap:2,children:[(0,K.jsxs)(x.A,{variant:"subtitle2",children:[g("Phone number"),":"]}),(0,K.jsx)(x.A,{variant:"body2",children:m})]}),u&&(0,K.jsxs)(C.A,{direction:"row",gap:2,children:[(0,K.jsxs)(x.A,{variant:"subtitle2",children:[g("Alternative phone number"),":"]}),(0,K.jsx)(x.A,{variant:"body2",children:u})]}),h&&(0,K.jsxs)(C.A,{direction:"row",gap:2,children:[(0,K.jsxs)(x.A,{variant:"subtitle2",children:[g("Birth date"),":"]}),(0,K.jsx)(x.A,{variant:"body2",children:(0,E.ts)(h)})]})]}),(0,K.jsxs)(ce.A,{children:[(0,K.jsx)(A.A,{onClick:_.onFalse,variant:"contained",color:"warning",children:g("Close")}),(0,K.jsx)(A.A,{onClick:j.onTrue,variant:"contained",color:"primary",children:g("Book")})]})]}),(0,K.jsx)(me.T,{open:j.value,onClose:j.onFalse,title:g("Patient identity confirmation:"),content:(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)(x.A,{children:[" ",g("By booking the appointment, you confirm that you have been checked patient data and there are at minimum three data that matches with next patient identity:")]}),(0,K.jsxs)(y.A,{sx:{p:2,m:2},children:[(0,K.jsxs)(x.A,{children:[g("patient")," : ",v?s:r]}),(0,K.jsxs)(x.A,{children:[g("appoitment")," : ",(0,E.uK)(l.start_time)]})]}),(0,K.jsx)(M.A,{multiline:!0,fullWidth:!0,label:g("note"),rows:2,sx:{my:2},onChange:e=>i(e.target.value),value:t})]}),action:(0,K.jsx)(A.A,{variant:"contained",color:"info",onClick:()=>{o(),j.onFalse(),i("")},children:g("confirm")})})]})}function pe(e){let{SelectedAppointment:n,reset:t,selected:i,oldPatients:a,usPatients:o}=e;const{t:l}=(0,W.WD)(),{currentLang:r}=(0,W.jc)(),s="ar"===r.value,d=[{id:"name_english",label:l("name in english")},{id:"name_arabic",label:l("name in arabic")},{id:"mobile_num1",label:l("mobile number")},{id:"nationality",label:l("nationality")},{id:"book",width:88}],{enqueueSnackbar:m}=(0,z.dh)(),u=(0,ae.K2)({defaultRowsPerPage:10}),[p,h]=(0,c.useState)(),x=(0,J.A)(),{dense:g,page:b,order:v,orderBy:j,rowsPerPage:_,onSort:A,onChangeDense:y,onChangePage:f,onChangeRowsPerPage:w}=u;return(0,K.jsxs)(ie.A,{children:[(0,K.jsxs)(X.A,{size:g?"small":"medium",sx:{minWidth:960,borderCollapse:"separate",borderSpacing:"0 16px"},children:[(0,K.jsx)(ae.er,{order:v,orderBy:j,headLabel:d,onSort:A,sx:{[`& .${ne.A.head}`]:{"&:first-of-type":{borderTopLeftRadius:12,borderBottomLeftRadius:12},"&:last-of-type":{borderTopRightRadius:12,borderBottomRightRadius:12}}}}),(0,K.jsxs)(ee.A,{children:[a.slice(b*_,b*_+_).map(((e,a,r)=>(0,K.jsx)(ue,{row:e,note:p,setNote:h,SelectedAppointment:n,onEmploymentRow:()=>(async e=>{try{const a={note:p,lang:s};o?(a.unit_service_patient=e._id,a.patient=null===e||void 0===e?void 0:e.patient):a.patient=e._id,await I.Ay.patch(I.vZ.appointments.book(i),a),await(0,$.n)(n),m(l("booked successfully!")),t(),window.location.reload()}catch(a){m(s&&`${a.arabic_message}`||`${a.message}`,{variant:"error"}),window.location.reload(),console.error(a)}})(e)},r))),(0,K.jsx)(ae.Sm,{notFound:0===a.length,sx:{m:-2,borderRadius:1.5,border:`dashed 1px ${x.palette.divider}`}})]})]}),(0,K.jsx)(ae.We,{count:a.length,page:b,rowsPerPage:_,onPageChange:f,onRowsPerPageChange:w,dense:g,onChangeDense:y,sx:{[`& .${te.A.toolbar}`]:{borderTopColor:"transparent"}}})]})}var he=t(59486);const xe={status:"available",work_group:null,startTime:null,endTime:null};function ge(){var e,n,t,i,l,Y;const{user:M}=(0,R.Z)(),N=(0,P.rd)(),{t:U}=(0,W.WD)(),{currentLang:O}=(0,W.jc)(),V="ar"===O.value,{countriesData:Q}=(0,q.oOq)({select:"name_english name_arabic"}),{myunitTime:X}=(0,E.nM)(),J=(0,T.C)(),ee=(0,T.C)(!0),ne=(0,a.v)(),[te,ie]=(0,c.useState)(xe),[ae,oe]=(0,c.useState)(1),le=!r()(te,xe),re=(0,P.ok)(),se=re.get("appointment"),de=re.get("day"),[ce,me]=(0,c.useState)(de?new Date(de):new Date),{appointmentsData:ue,AppointDates:ge,loading:be,refetch:ve}=(0,q.I6v)(null===M||void 0===M||null===(e=M.employee)||void 0===e||null===(n=e.employee_engagements)||void 0===n||null===(t=n[null===M||void 0===M?void 0:M.employee.selected_engagement])||void 0===t?void 0:t._id,{...te,startDate:ce,select:"start_time"});(0,c.useEffect)((()=>{be||ue.length||!ge.length||me(ge[0])}),[be,ue.length,ge]);const[je,_e]=(0,c.useState)(se),{workGroupsData:Ae}=(0,q.VnY)(null===M||void 0===M||null===(i=M.employee)||void 0===i||null===(l=i.employee_engagements)||void 0===l||null===(Y=l[null===M||void 0===M?void 0:M.employee.selected_engagement])||void 0===Y?void 0:Y._id),{data:ye}=(0,q.VK$)(je,{select:"work_group"}),{enqueueSnackbar:fe}=(0,z.dh)(),we=o.Ik().shape({sequence_number:o.Yj(),name_english:o.Yj().test("name-required",U("Either English or Arabic name is required"),(function(e){return e||this.parent.name_arabic})),name_arabic:o.Yj(),nationality:o.Yj().required(U("required field")),mobile_num1:o.Yj().required(U("required field")),mobile_num2:o.Yj(),note:o.Yj(),patientExist:o.Yj()}),ke=(0,c.useMemo)((()=>{var e,n,t,i,a;return{sequence_number:"",name_english:"",name_arabic:"",nationality:null,mobile_num1:"",mobile_num2:"",note:"",patientExist:"my_patients",work_group:null===Ae||void 0===Ae||null===(e=Ae[0])||void 0===e?void 0:e._id,unit_service:null===M||void 0===M||null===(n=M.employee)||void 0===n||null===(t=n.employee_engagements)||void 0===t||null===(i=t[null===M||void 0===M?void 0:M.employee.selected_engagement])||void 0===i||null===(a=i.unit_service)||void 0===a?void 0:a._id}}),[Ae,null===M||void 0===M?void 0:M.employee]),Ce=(0,s.mN)({mode:"all",resolver:(0,d.t)(we),defaultValues:ke}),{reset:Se,handleSubmit:De,watch:Pe,setValue:Te,formState:{isSubmitting:Fe,errors:$e}}=Ce;(0,c.useEffect)((()=>{var e;const n=Object.keys($e);n.length&&fe((null===$e||void 0===$e||null===(e=$e[n[0]])||void 0===e?void 0:e.message)||"error",{variant:"error"})}),[$e,fe]);const Ee=Pe(),Ie=(0,F.d)({sequence_number:Ee.sequence_number,name_english:Ee.name_english,name_arabic:Ee.name_arabic,mobile_num1:Ee.mobile_num1,mobile_num2:Ee.mobile_num2}),{existPatients:Re}=(0,q.C_f)({...Ie,select:"code name_english name_arabic mobile_num1 mobile_num2 identification_num sequence_number nationality birth_date"}),{foundPatients:We}=(0,q.gZT)({...Ie,work_group:null===ye||void 0===ye?void 0:ye.work_group,select:"code name_english name_arabic mobile_num1 mobile_num2 identification_num sequence_number nationality patient birth_date"}),qe=De((async e=>{try{delete e.sequence_number,await I.Ay.patch(I.vZ.appointments.patient.createPatientAndBookAppoint(je),{...e,lang:V});const n=ue.find((e=>e._id===je));await(0,$.n)(n),fe(U("created successfully!")),Se(),N.back()}catch(n){fe(V&&`${n.arabic_message}`||`${n.message}`,{variant:"error"}),ve(),console.error(n)}})),Le=e=>{/^[\u0600-\u06FF0-9\s!@#$%^&*_\-().]*$/.test(e.target.value)&&Te(e.target.name,e.target.value)},ze=e=>{/^[a-zA-Z0-9\s,@#$!*_\-&^%.()]*$/.test(e.target.value)&&Te(e.target.name,e.target.value)},Be=(0,c.useCallback)((()=>{ie(xe)}),[]);return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)(h.A,{maxWidth:"xl",children:[(0,K.jsx)(B.A,{heading:U("Book Appointment"),links:[{name:U("dashboard"),href:S.f.employee.root},{name:U("appointments"),href:S.f.employee.appointments.root},{name:U("book")}],action:ne({category:"work_group",subcategory:"appointments",acl:"create"})&&(0,K.jsx)(A.A,{component:D.W,onClick:()=>J.onTrue(),variant:"contained",startIcon:(0,K.jsx)(L.A,{icon:"mingcute:add-line"}),sx:{bgcolor:"error.dark","&:hover":{bgcolor:"error.main"}},children:U("new urgent appointment")}),sx:{mb:{xs:3,md:5}}}),(0,K.jsx)(Z.A,{methods:Ce,onSubmit:qe,children:(0,K.jsxs)(y.A,{sx:{px:3,pb:3,pt:2},children:[1===ae&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)(x.A,{variant:"h6",children:[U("Appointment details"),":"]}),(0,K.jsx)(p.A,{sx:{borderStyle:"dashed",my:1}}),(0,K.jsxs)(f.A,{sx:{mb:3,mx:3,mt:3},rowGap:3,columnGap:2,display:"flex",alignItems:"center",children:[(0,K.jsxs)(x.A,{variant:"subtitle2",children:[U("filters"),":"]}),(0,K.jsxs)(b.A,{sx:{width:{xs:1,md:200}},children:[(0,K.jsx)(g.A,{shrink:!0,children:`${U("work group")}`}),(0,K.jsx)(u.A,{value:te.group,onChange:e=>ie((n=>({...n,group:e.target.value}))),size:"small",input:(0,K.jsx)(v.A,{label:U("work group")}),children:Ae.map(((e,n)=>(0,K.jsx)(w.A,{lang:"ar",value:e._id,children:V?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))})]}),(0,K.jsx)(j.A,{viewRenderers:{hours:_.Zo,minutes:_.Zo,seconds:_.Zo},ampm:!1,format:"hh:mm a",closeOnSelect:!0,slots:{actionBar:"cancel"},minutesStep:5,label:U("from time"),value:X(te.startTime),onChange:e=>{const n=X(e);ie((e=>({...e,startTime:n})))},slotProps:{textField:{fullWidth:!0,size:"small"}},sx:{width:{xs:1,md:200}}}),(0,K.jsx)(j.A,{viewRenderers:{hours:_.Zo,minutes:_.Zo,seconds:_.Zo},ampm:!1,format:"hh:mm a",closeOnSelect:!0,slots:{actionBar:"cancel"},minutesStep:5,label:U("to time"),value:X(te.endTime),onChange:e=>{const n=X(e);ie((e=>({...e,endTime:n})))},slotProps:{textField:{fullWidth:!0,size:"small"}},sx:{width:{xs:1,md:200}}}),le&&(0,K.jsx)(k.A,{sx:{color:"error.main"},onClick:Be,children:(0,K.jsx)(L.A,{icon:"solar:trash-bin-trash-bold"})})]}),(0,K.jsx)(p.A,{sx:{borderStyle:"dashed"}}),!be&&(0,K.jsx)(H,{selected:je,AppointDates:ge,loading:be,setSelected:_e,selectedDate:ce,setSelectedDate:me,list:ue})]}),2===ae&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)(x.A,{variant:"h6",children:[U("Patient information"),":"]}),(0,K.jsx)(p.A,{sx:{borderStyle:"dashed",my:1}}),!be&&(0,K.jsx)(H,{selected:je,AppointDates:ge,loading:be,setSelected:_e,selectedDate:ce,setSelectedDate:me,list:ue,hideSelect:!0}),je&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(x.A,{sx:{py:2,fontWeight:700},variant:"caption",color:"text.secondary",textTransform:"uppercase",children:U("patient information")}),(0,K.jsxs)(C.A,{direction:"row",mt:2,gap:5,children:[(0,K.jsx)(G.b$,{row:!0,name:"patientExist",options:[{label:U("my patient"),value:"my_patients"},{label:U("new patient"),value:"new"}]}),(0,K.jsx)(G.o3,{InputLabelProps:{shrink:!0},inputProps:{style:{textAlign:"center"}},sx:{width:"200px",mb:3,textAlign:"center"},size:"small",name:"sequence_number",onChange:e=>{const{value:n}=e.target,t=n.replace(/\D/g,"");t.length<=3?Te(e.target.name,t):t.length>=4&&"-"===t.charAt(3)?Te(e.target.name,t.slice(0,3)):t.length>=4&&"-"!==t.charAt(3)?Te(e.target.name,`${t.slice(0,3)}-${t.slice(3)}`):Te(e.target.name,t)},placeholder:"001-22",label:U("patient-code")})]}),"my_patients"===Ee.patientExist&&(0,K.jsxs)(f.A,{sx:{mb:3},rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"},children:[(0,K.jsx)(G.o3,{onChange:ze,name:"name_english",label:U("patient name in english")}),(0,K.jsx)(G.o3,{onChange:Le,name:"name_arabic",label:U("patient name in arabic")}),(0,K.jsx)(G.o3,{type:"email",name:"email",label:U("email address")}),(0,K.jsx)(G.o3,{onChange:ze,name:"identification_num",label:U("ID number")}),(0,K.jsx)(G.u,{name:"mobile_num1",label:U("mobile number")}),(0,K.jsx)(G.u,{name:"mobile_num2",label:U("alternative mobile number")})]}),"exist"===Ee.patientExist&&(0,K.jsxs)(f.A,{sx:{mb:3},rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"},children:[(0,K.jsx)(G.o3,{onChange:ze,name:"name_english",label:U("patient name in english")}),(0,K.jsx)(G.o3,{onChange:Le,name:"name_arabic",label:U("patient name in arabic")}),(0,K.jsx)(G.o3,{type:"email",name:"email",label:U("email address")}),(0,K.jsx)(G.o3,{onChange:ze,name:"identification_num",label:U("ID number")}),(0,K.jsx)(G.u,{name:"mobile_num1",label:U("mobile number")}),(0,K.jsx)(G.u,{name:"mobile_num2",label:U("alternative mobile number")})]}),"new"===Ee.patientExist&&(0,K.jsx)(K.Fragment,{children:(0,K.jsxs)(f.A,{sx:{mb:3},rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"},children:[(0,K.jsx)(G.o3,{onChange:ze,name:"name_english",label:U("patient name in english")}),(0,K.jsx)(G.o3,{onChange:Le,name:"name_arabic",label:U("patient name in arabic")}),(0,K.jsx)(G.u,{name:"mobile_num1",label:U("mobile number")}),(0,K.jsx)(G.u,{name:"mobile_num2",label:U("alternative mobile number")}),(0,K.jsx)(G.tX,{name:"nationality",label:U("nationality"),children:Q.map(((e,n)=>(0,K.jsx)(w.A,{lang:"ar",value:e._id,children:V?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))})]})}),Re.length>0&&"new"===Ee.patientExist&&(0,K.jsx)(pe,{SelectedAppointment:ue.find((e=>e._id===je)),selected:je,reset:Se,oldPatients:Re}),We.length>0&&"my_patients"===Ee.patientExist&&(0,K.jsx)(pe,{SelectedAppointment:ue.find((e=>e._id===je)),selected:je,reset:Se,oldPatients:We,usPatients:!0})]})]}),(0,K.jsxs)(C.A,{direction:"row",gap:2,justifyContent:"flex-end",sx:{mt:3},children:[2===ae&&(0,K.jsx)(A.A,{variant:"contained",color:"warning",onClick:()=>oe(1),children:U("Back")}),1===ae&&(0,K.jsx)(A.A,{disabled:!je,variant:"contained",color:"secondary",onClick:()=>oe(2),children:U("Next")}),2===ae&&"new"===Ee.patientExist&&(0,K.jsx)(m.A,{disabled:!je,type:"submit",tabIndex:-1,variant:"contained",loading:Fe,children:U("create new patient and book")})]}),ee.value&&2===ae&&"new"===Ee.patientExist&&(0,K.jsxs)(f.A,{sx:{position:"absolute",top:0,right:0,backgroundColor:"primary.lighter",p:2,pt:1,maxWidth:350,zIndex:50,borderRadius:2},children:[(0,K.jsx)(C.A,{direction:"row",justifyContent:"flex-end",children:(0,K.jsx)(k.A,{onClick:ee.onFalse,children:(0,K.jsx)(L.A,{icon:"mingcute:close-line"})})}),(0,K.jsx)(x.A,{variant:"subtitle2",children:U("If the patient is new to the clinic, please note the following:")}),(0,K.jsx)("br",{}),(0,K.jsxs)(x.A,{variant:"body2",children:[U("Firstly"),":"]}),(0,K.jsxs)(x.A,{variant:"caption",children:[U("If the patient has an active account on the Hakeemna 360 platform"),":"]}),(0,K.jsx)("br",{}),(0,K.jsx)("li",{style:{fontSize:12},children:U("Please enter the patient identification code on the platform to facilitate the identification process; or:")}),(0,K.jsx)("li",{style:{fontSize:12},children:U("Enter some patient information such as name or phone number.")}),(0,K.jsx)("br",{}),(0,K.jsxs)(x.A,{variant:"body2",children:[U("Secondly"),":"]}),(0,K.jsxs)(x.A,{variant:"caption",children:[U("If the patient does not have an active account on the Hakeemna platform, in this case a new account must be created and the following data must be stored:"),":"]}),(0,K.jsx)("br",{}),(0,K.jsx)("li",{style:{fontSize:12},children:U("Name in Arabic, nationality and phone number and click on the button \u201cCreate a patient account and book an appointment\u201d.")})]})]})})]}),(0,K.jsx)(he.A,{refetch:ve,open:J.value,onClose:J.onFalse})]})}function be(){return(0,K.jsxs)(a.A,{category:"work_group",subcategory:"appointments",acl:"read",children:[(0,K.jsxs)(i.mg,{children:[(0,K.jsx)("title",{children:" Book Appointment "}),(0,K.jsx)("meta",{name:"description",content:"meta"})]}),(0,K.jsx)(ge,{})]})}}}]);
//# sourceMappingURL=97297.c591bdee.chunk.js.map
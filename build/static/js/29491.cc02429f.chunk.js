"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[29491],{18106:(e,l,o)=>{o.d(l,{A:()=>$});var n=o(80899),a=o(24858),t=o(65043),r=o(18403),s=o(81e3),i=o(12110),d=o(26487),c=o(74600),m=o(22075),u=o(38246),p=o(94814),v=o(39336),g=o(94496),h=o(48407),x=o(67132),y=o(5124),f=o(31673),b=o(91562),A=o(75139),_=o(60778),j=o(7625),w=o(35151),k=o(94857),C=o(59699),S=o(70579);function $(e){var l,o,$,I,L,R,B,M,T,z,N,V,q,E;let{currentTable:O}=e;const P=(0,x.rd)(),{t:W}=(0,_.WD)(),{currentLang:D}=(0,_.jc)(),Z="ar"===D.value,{user:G}=(0,A.Z)(),{handleAddNew:Y}=(0,y.I)(),{employeesData:F}=(0,j.hZ$)(null===G||void 0===G||null===(l=G.employee)||void 0===l||null===(o=l.employee_engagements)||void 0===o||null===($=o[null===G||void 0===G||null===(L=G.employee)||void 0===L?void 0:L.selected_engagement])||void 0===$||null===(I=$.unit_service)||void 0===I?void 0:I._id,{select:"employee",populate:[{path:"employee",select:"name_english name_arabic"}]}),{departmentsData:H}=(0,j.Lhq)(null===G||void 0===G||null===(R=G.employee)||void 0===R||null===(B=R.employee_engagements)||void 0===B||null===(M=B[null===G||void 0===G||null===(z=G.employee)||void 0===z?void 0:z.selected_engagement])||void 0===M||null===(T=M.unit_service)||void 0===T?void 0:T._id),{enqueueSnackbar:X}=(0,k.dh)(),J=n.Ik().shape({department:n.Yj().nullable(),name_arabic:n.Yj().required(W("required field")),name_english:n.Yj().required(W("required field")),employees:n.YO().min(1,"Choose at least one option")}),K=(0,t.useMemo)((()=>{var e,l,o,n,a,t;return{unit_service:null===G||void 0===G||null===(e=G.employee)||void 0===e||null===(l=e.employee_engagements)||void 0===l||null===(o=l[null===G||void 0===G?void 0:G.employee.selected_engagement])||void 0===o||null===(n=o.unit_service)||void 0===n?void 0:n._id,department:(null===O||void 0===O||null===(a=O.department)||void 0===a?void 0:a._id)||null,name_arabic:(null===O||void 0===O?void 0:O.name_arabic)||"",name_english:(null===O||void 0===O?void 0:O.name_english)||"",employees:(null===O||void 0===O||null===(t=O.employees)||void 0===t?void 0:t.map(((e,l)=>e.employee)))||[]}}),[O,null===G||void 0===G?void 0:G.employee]),Q=(0,a.mN)({mode:"all",resolver:(0,r.t)(J),defaultValues:K}),{reset:U,watch:ee,handleSubmit:le,formState:{isSubmitting:oe,errors:ne}}=Q;(0,t.useEffect)((()=>{Object.keys(ne).length&&Object.keys(ne).forEach(((e,l)=>{var o;return X(`${e}: ${(null===ne||void 0===ne||null===(o=ne[e])||void 0===o?void 0:o.message)||"error"}`,{variant:"error"})}))}),[ne,X]);const ae=ee(),te=le((async e=>{try{O?(await f.Ay.patch(f.vZ.work_groups.one(null===O||void 0===O?void 0:O._id),e),b.A.emit("updated",{user:G,link:h.f.unitservice.tables.workgroups.root,msg:`updated a work group <strong>${e.name_english||""}</strong>`}),U(),P.push(h.f.unitservice.tables.workgroups.root)):(await f.Ay.post(f.vZ.work_groups.all,e),b.A.emit("created",{user:G,link:h.f.unitservice.tables.workgroups.root,msg:`created a work group <strong>${e.name_english||""}</strong>`})),U(),X(W(O?"update success!":"create success!"))}catch(l){X(Z&&`${l.arabic_message}`||`${l.message}`,{variant:"error"})}})),re=(null===G||void 0===G||null===(N=G.employee)||void 0===N||null===(V=N.employee_engagements)||void 0===V||null===(q=V[null===G||void 0===G?void 0:G.employee.selected_engagement])||void 0===q||null===(E=q.unit_service)||void 0===E?void 0:E.employees_number)||10;return(0,t.useEffect)((()=>{U(K)}),[K,U]),(0,S.jsx)(C.Ay,{methods:Q,onSubmit:te,children:(0,S.jsx)(m.A,{xs:12,maxWidth:"md",children:(0,S.jsxs)(i.A,{sx:{p:3},children:[(0,S.jsxs)(s.A,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"},children:[(0,S.jsx)(C.o3,{onChange:e=>{/^[a-zA-Z0-9\s,@#$!*_\-&^%.()]*$/.test(e.target.value)&&Q.setValue(e.target.name,e.target.value,{shouldValidate:!0})},name:"name_english",placeholder:"Dr.Ahmad WG",label:`${W("name english")} *`}),(0,S.jsx)(C.o3,{onChange:e=>{/^[\u0600-\u06FF0-9\s!@#$%^&*_\-().]*$/.test(e.target.value)&&Q.setValue(e.target.name,e.target.value,{shouldValidate:!0})},name:"name_arabic",placeholder:"\u0641\u0631\u064a\u0642 \u0639\u0645\u0644 \u0627\u0644\u062f\u0643\u062a\u0648\u0631 \u0623\u062d\u0645\u062f",label:`${W("name arabic")} *`}),re>3&&(0,S.jsxs)(C.tX,{name:"department",label:W("department"),children:[H.map(((e,l)=>(0,S.jsx)(p.A,{lang:"ar",value:null===e||void 0===e?void 0:e._id,children:Z?e.name_arabic:e.name_english},l))),(0,S.jsx)(v.A,{}),(0,S.jsxs)(p.A,{lang:"ar",sx:{display:"flex",justifyContent:"flex-end",gap:1,fontWeight:600},onClick:()=>Y(h.f.unitservice.departments.new),children:[(0,S.jsx)(g.A,{variant:"body2",sx:{color:"info.main"},children:W("Add new")}),(0,S.jsx)(w.A,{icon:"material-symbols:new-window-sharp"})]})]}),(0,S.jsx)(C.j2,{name:"employees",label:`${W("employees")} *`,multiple:!0,disableCloseOnSelect:!0,options:F.filter((e=>!ae.employees.some((l=>(null===e||void 0===e?void 0:e._id)===(null===l||void 0===l?void 0:l._id)||(null===e||void 0===e?void 0:e._id)===l)))),getOptionLabel:e=>null===e||void 0===e?void 0:e._id,renderOption:(e,l,o)=>{var n;return(0,t.createElement)("li",{lang:"ar",...e,key:o,value:null===l||void 0===l?void 0:l._id},Z?null===l||void 0===l?void 0:l.employee.name_arabic:null===l||void 0===l||null===(n=l.employee)||void 0===n?void 0:n.name_english)},onChange:(e,l)=>{Q.setValue("employees",l,{shouldValidate:!0})},renderTags:(e,l)=>null===e||void 0===e?void 0:e.map(((e,o)=>(0,t.createElement)(d.A,{...l({index:o}),key:o,label:Z?null===e||void 0===e?void 0:e.employee.name_arabic:null===e||void 0===e?void 0:e.employee.name_english,size:"small",color:"info",variant:"soft"})))})]}),(0,S.jsx)(c.A,{alignItems:"flex-end",sx:{mt:3},children:(0,S.jsx)(u.A,{type:"submit",tabIndex:-1,variant:"contained",loading:oe,children:W(O?"save changes":"create")})})]})})})}},22698:(e,l,o)=>{o.d(l,{A:()=>L});var n=o(58168),a=o(98587),t=o(65043),r=o(58387),s=o(98610),i=o(88092),d=o(34535),c=o(98206),m=o(94496),u=o(67266),p=o(66734),v=o(70579);const g=(0,p.A)((0,v.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var h=o(96030);const x=["slots","slotProps"],y=(0,d.Ay)(h.A)((e=>{let{theme:l}=e;return(0,n.A)({display:"flex",marginLeft:`calc(${l.spacing(1)} * 0.5)`,marginRight:`calc(${l.spacing(1)} * 0.5)`},"light"===l.palette.mode?{backgroundColor:l.palette.grey[100],color:l.palette.grey[700]}:{backgroundColor:l.palette.grey[700],color:l.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,n.A)({},"light"===l.palette.mode?{backgroundColor:l.palette.grey[200]}:{backgroundColor:l.palette.grey[600]}),"&:active":(0,n.A)({boxShadow:l.shadows[0]},"light"===l.palette.mode?{backgroundColor:(0,u.tL)(l.palette.grey[200],.12)}:{backgroundColor:(0,u.tL)(l.palette.grey[600],.12)})})})),f=(0,d.Ay)(g)({width:24,height:16});const b=function(e){const{slots:l={},slotProps:o={}}=e,t=(0,a.A)(e,x),r=e;return(0,v.jsx)("li",{children:(0,v.jsx)(y,(0,n.A)({focusRipple:!0},t,{ownerState:r,children:(0,v.jsx)(f,(0,n.A)({as:l.CollapsedIcon,ownerState:r},o.collapsedIcon))}))})};var A=o(92532),_=o(72372);function j(e){return(0,_.Ay)("MuiBreadcrumbs",e)}const w=(0,A.A)("MuiBreadcrumbs",["root","ol","li","separator"]),k=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],C=(0,d.Ay)(m.A,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,l)=>[{[`& .${w.li}`]:l.li},l.root]})({}),S=(0,d.Ay)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,l)=>l.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),$=(0,d.Ay)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,l)=>l.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function I(e,l,o,n){return e.reduce(((a,t,r)=>(r<e.length-1?a=a.concat(t,(0,v.jsx)($,{"aria-hidden":!0,className:l,ownerState:n,children:o},`separator-${r}`)):a.push(t),a)),[])}const L=t.forwardRef((function(e,l){const o=(0,c.b)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:m,component:u="nav",slots:p={},slotProps:g={},expandText:h="Show path",itemsAfterCollapse:x=1,itemsBeforeCollapse:y=1,maxItems:f=8,separator:A="/"}=o,_=(0,a.A)(o,k),[w,$]=t.useState(!1),L=(0,n.A)({},o,{component:u,expanded:w,expandText:h,itemsAfterCollapse:x,itemsBeforeCollapse:y,maxItems:f,separator:A}),R=(e=>{const{classes:l}=e;return(0,s.A)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},j,l)})(L),B=(0,i.A)({elementType:p.CollapsedIcon,externalSlotProps:g.collapsedIcon,ownerState:L}),M=t.useRef(null),T=t.Children.toArray(d).filter((e=>t.isValidElement(e))).map(((e,l)=>(0,v.jsx)("li",{className:R.li,children:e},`child-${l}`)));return(0,v.jsx)(C,(0,n.A)({ref:l,component:u,color:"text.secondary",className:(0,r.A)(R.root,m),ownerState:L},_,{children:(0,v.jsx)(S,{className:R.ol,ref:M,ownerState:L,children:I(w||f&&T.length<=f?T:(e=>y+x>=e.length?e:[...e.slice(0,y),(0,v.jsx)(b,{"aria-label":h,slots:{CollapsedIcon:p.CollapsedIcon},slotProps:{collapsedIcon:B},onClick:()=>{$(!0);const e=M.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-x,e.length)])(T),R.separator,A,L)})}))}))},83858:(e,l,o)=>{o.d(l,{A:()=>n.A});var n=o(91720)},91720:(e,l,o)=>{o.d(l,{A:()=>m});var n=o(81e3),a=o(88446),t=o(74600),r=o(94496),s=o(22698),i=o(65381),d=o(70579);function c(e){let{link:l,activeLast:o,disabled:t}=e;const r={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...t&&!o&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},s=(0,d.jsxs)(d.Fragment,{children:[l.icon&&(0,d.jsx)(n.A,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:l.icon}),l.name]});return l.href?(0,d.jsx)(a.A,{component:i.W,href:l.href,sx:r,children:s}):(0,d.jsxs)(n.A,{sx:r,children:[" ",s," "]})}function m(e){let{links:l,action:o,heading:i,moreLink:m,activeLast:p,sx:v,...g}=e;const h=l&&l[l.length-1].name;return(0,d.jsxs)(n.A,{sx:{...v},children:[(0,d.jsxs)(t.A,{direction:"row",alignItems:"center",children:[(0,d.jsxs)(n.A,{sx:{flexGrow:1,display:"flex",gap:{md:3},alignItems:{md:"center"},flexDirection:{xs:"column",md:"row"}},children:[i&&(0,d.jsx)(r.A,{textTransform:"capitalize",variant:"h4",gutterBottom:!0,children:i}),l&&!!l.length&&(0,d.jsx)(s.A,{separator:(0,d.jsx)(u,{}),...g,children:null===l||void 0===l?void 0:l.map(((e,l)=>(0,d.jsx)(c,{link:e,activeLast:p,disabled:e.name===h},l)))})]}),o&&(0,d.jsxs)(n.A,{sx:{flexShrink:0,textTransform:"capitalize"},children:[" ",o," "]})]}),!!m&&(0,d.jsx)(n.A,{sx:{mt:2},children:m.map(((e,l)=>(0,d.jsx)(a.A,{href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},l)))})]})}function u(){return(0,d.jsx)(n.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}}}]);
//# sourceMappingURL=29491.cc02429f.chunk.js.map
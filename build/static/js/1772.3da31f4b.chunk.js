"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[1772],{41772:(e,a,t)=>{t.r(a),t.d(a,{default:()=>u});var n=t(6907),r=t(19208),s=t(66630),i=t(35456),o=t(10266),l=t(36896),d=t(80184);function m(e){let{WorkGroupData:a,departmentData:t}=e;return(0,d.jsx)(o.Z,{maxWidth:"xl",children:a&&t&&(0,d.jsx)(l.Z,{departmentData:t,currentTable:a})})}function u(){const e=(0,r.UO)(),{depid:a,acid:t}=e,o=(0,s.YLE)(a).data,{data:l,loading:u}=(0,s.tBz)(t),c=null===l||void 0===l?void 0:l.name_english;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.ql,{children:[(0,d.jsxs)("title",{children:[" Edit ",c||""," Work Group "]}),(0,d.jsx)("meta",{name:"description",content:"meta"})]}),u&&(0,d.jsx)(i.a,{}),!u&&(0,d.jsx)(m,{WorkGroupData:l,departmentData:o})]})}},36896:(e,a,t)=>{t.d(a,{Z:()=>f});var n=t(8007),r=t(763),s=t(72791),i=t(61134),o=t(44695),l=t(16029),d=t(57621),m=t(85771),u=t(53767),c=t(24308),p=t(12258),g=t(38072),_=t(19208),h=t(66664),v=t(99116),b=t(8976),x=t(81164),k=t(66630),j=t(32869),y=t(24461),Z=t(80184);function f(e){let{departmentData:a,currentTable:t}=e;const f=(0,_.tv)(),{t:w}=(0,x.qM)(),{currentLang:C}=(0,x.nt)(),q="ar"===C.value,{id:G}=(0,_.UO)(),{user:S}=(0,b.E)(),{employeesData:D}=(0,k.C$X)(a._id),[V,E]=(0,s.useState)([]),{enqueueSnackbar:H}=(0,j.useSnackbar)(),O=n.Ry().shape({name_arabic:n.Z_().required("Name is required"),name_english:n.Z_().required("Name is required"),employees:n.IX().min(1,"Choose at least one option")}),T=(0,s.useMemo)((()=>({unit_service:G||a.unit_service._id,department:a._id,name_arabic:(null===t||void 0===t?void 0:t.name_arabic)||"",name_english:(null===t||void 0===t?void 0:t.name_english)||"",employees:(null===t||void 0===t?void 0:t.employees.map(((e,a)=>e.employee)))||[]})),[t,a,G]),W=(0,i.cI)({mode:"onTouched",resolver:(0,o.X)(O),defaultValues:T}),{reset:$,handleSubmit:F,formState:{isSubmitting:I}}=W,z=F((async e=>{try{t?(await h.ZP.patch(h.Hv.work_groups.one(t._id),e),v.Z.emit("updated",{data:e,user:S,link:g.H.superadmin.unitservices.departments.workGroups.root(G,a._id),msg:"updated work group <strong>".concat(e.name_english||"","</strong> in <strong>").concat(a.name_english,"</strong> department")})):(await h.ZP.post(h.Hv.work_groups.all,e),v.Z.emit("created",{data:e,user:S,link:g.H.superadmin.unitservices.departments.workGroups.root(G,a._id),msg:"created work group <strong>".concat(e.name_english||"","</strong> in <strong>").concat(a.name_english,"</strong> department"),ar_msg:"\u0625\u0646\u0634\u0627\u0621 \u0645\u062c\u0645\u0648\u0639\u0629 \u0639\u0645\u0644 <strong>".concat(e.name_arabic||"","</strong> \u0641\u064a \u0642\u0633\u0645 <strong>").concat(a.name_arabic,"</strong>")})),$(),H(w(t?"update success!":"create success!")),f.push(g.H.superadmin.unitservices.departments.workGroups.root(G,a._id))}catch(n){H(q&&n.arabic_message||n.message,{variant:"error"}),console.error(n)}}));return(0,Z.jsx)(y.ZP,{methods:W,onSubmit:z,children:(0,Z.jsx)(c.Z,{xs:12,maxWidth:"md",children:(0,Z.jsxs)(d.Z,{sx:{p:3},children:[(0,Z.jsxs)(l.Z,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"},children:[(0,Z.jsx)(y.au,{onChange:e=>{/^[a-zA-Z0-9\s,@#$!*_\-&^%.()]*$/.test(e.target.value)&&W.setValue(e.target.name,e.target.value,{shouldValidate:!0})},name:"name_english",label:"".concat(w("name english")," *")}),(0,Z.jsx)(y.au,{onChange:e=>{/^[\u0600-\u06FF0-9\s!@#$%^&*_\-()]*$/.test(e.target.value)&&W.setValue(e.target.name,e.target.value,{shouldValidate:!0})},name:"name_arabic",label:"".concat(w("name arabic")," *")}),(0,Z.jsx)(y.Fl,{name:"employees",label:"".concat(w("employees")," *"),multiple:!0,disableCloseOnSelect:!0,options:D.filter((e=>!V.some((a=>(0,r.isEqual)(e,a))))),getOptionLabel:e=>e._id,renderOption:(e,a,t)=>{var n;return(0,s.createElement)("li",{...e,key:t,value:a._id},q?null===(n=a.employee)||void 0===n?void 0:n.name_arabic:a.employee.name_english)},onChange:(e,a)=>{E(a),W.setValue("employees",a,{shouldValidate:!0})},renderTags:(e,a)=>e.map(((e,t)=>{var n;return(0,s.createElement)(m.Z,{...a({index:t}),key:t,label:q?null===(n=e.employee)||void 0===n?void 0:n.name_arabic:e.employee.name_english,size:"small",color:"info",variant:"soft"})}))})]}),(0,Z.jsx)(u.Z,{alignItems:"flex-end",sx:{mt:3},children:(0,Z.jsx)(p.Z,{type:"submit",tabIndex:-1,variant:"contained",loading:I,children:w(t?"save changes":"create")})})]})})})}}}]);
//# sourceMappingURL=1772.3da31f4b.chunk.js.map
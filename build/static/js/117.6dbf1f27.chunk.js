"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[117],{27356:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(68870),a=n(36314),r=n(12065),i=n(4567),s=n(80184);function c(e){let{title:t,imgUrl:n,action:c,filled:l,description:d,sx:u,...h}=e;return(0,s.jsxs)(a.Z,{flexGrow:1,alignItems:"center",justifyContent:"center",sx:{px:3,height:1,...l&&{borderRadius:2,bgcolor:e=>(0,r.Fq)(e.palette.grey[500],.04),border:e=>"dashed 1px ".concat((0,r.Fq)(e.palette.grey[500],.08))},...u},...h,children:[(0,s.jsx)(o.Z,{component:"img",alt:"empty content",src:n||"/assets/icons/empty/ic_content.svg",sx:{width:1,maxWidth:160}}),t&&(0,s.jsx)(i.Z,{variant:"h6",component:"span",sx:{mt:1,color:"text.disabled",textAlign:"center"},children:t}),d&&(0,s.jsx)(i.Z,{variant:"caption",sx:{mt:1,color:"text.disabled",textAlign:"center"},children:d}),c&&c]})}},31092:(e,t,n)=>{n.d(t,{Z:()=>o.Z});var o=n(27356)},117:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});var o=n(6907),a=n(76932),r=n(72791),i=n(68870),s=n(8007),c=n(61134),l=n(44695),d=n(13838),u=n(5574),h=n(62861),p=n(4567),m=n(68096),v=n(65661),f=n(97123),x=n(39157),g=n(49792),Z=n(41364),y=n(32869),j=n(89731),b=n(22459),S=n(10901),k=n(4110),C=n(82007),_=n(8976),w=n(31092),z=n(79572),R=n(80184);function F(){var e,t,n;const{enqueueSnackbar:o}=(0,y.Ds)(),{t:F}=(0,a.qM)(),{currentLang:P}=(0,a.nt)(),N=(P.value,s.Ry().shape({Body:s.Z_(),Selection:s.Z_().nullable()})),[V,M]=(0,r.useState)(),{user:O}=(0,_.E)(),{appointmentsData:B}=(0,z.BL)(null===O||void 0===O||null===(e=O.patient)||void 0===e?void 0:e._id),{data:U}=(0,z.V5)(null===B||void 0===B||null===(t=B.unit_service)||void 0===t?void 0:t._id),{feedbackData:q}=(0,z.Ld)(null===B||void 0===B||null===(n=B.unit_service)||void 0===n?void 0:n._id);console.log("appointmentsData",B),console.log("data",U);const I=(0,c.cI)({resolver:(0,l.X)(N),defaultValues:{Body:"",Selection:null}}),{register:W,handleSubmit:D,formState:{isSubmitting:E}}=I,A=(0,b.k)(!0),[T,L]=r.useState(void 0),X=["Neglectful treatment","Employee Behavior","Cleanliness","Price"],G=(e,t)=>{L(t)},[K,Y]=(0,r.useState)(!0),[H,J]=(0,r.useState)("xs");return!1===(null===B||void 0===B?void 0:B.hasFeedback)?(0,R.jsx)("span",{children:(0,R.jsx)(u.Z,{open:A.value,maxWidth:H,onClose:A.onTrue,fullWidth:K,children:(0,R.jsxs)(C.Z,{methods:I,onSubmit:D((async e=>{try{var t;const n={...e,Selection:T,Rate:V,patient:null===O||void 0===O?void 0:O.patient._id,appointment:B._id,department:null===(t=B.department)||void 0===t?void 0:t._id,unit_service:null===U||void 0===U?void 0:U._id},a=await j.ZP.post("api/feedback",n);await j.ZP.patch("api/appointments/".concat(B._id),{hasFeedback:!0}),o(F("Thanks for your cooperation"),{variant:"success"}),console.log(a),setTimeout((()=>{A.onFalse(),window.location.reload()}),2e3)}catch(n){console.error(n.message),o(F("Failed to upload Your answer"),{variant:"error"})}})),children:[(0,R.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",margin:"20px",gap:"10px"},children:[(0,R.jsx)(v.Z,{children:F("Rate your appointment")}),(0,R.jsx)(Z.Z,{src:"https://cdn.altibbi.com/cdn/large/0/10/logo_1296490409_651.gif",sx:{width:"60px",height:"60px",border:1,borderRadius:"50px"}}),(0,R.jsxs)(p.Z,{sx:{color:"black"},children:["".concat(P?null===U||void 0===U?void 0:U.name_arabic:U.name_english)," "]}),(0,R.jsx)(S.Z,{size:"large",precision:1,max:5,name:"Rate",value:V,onChange:e=>{M(parseFloat(e.target.value))}})]}),V<5?(0,R.jsx)(x.Z,{children:(0,R.jsxs)(i.Z,{component:"form",noValidate:!0,children:[(0,R.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:null===X||void 0===X?void 0:X.map(((e,t)=>{return(0,R.jsx)("div",{children:(0,R.jsxs)(i.Z,{sx:{fontSize:{md:"15px",xs:"9px"},fontWeight:{md:"400",xs:"bolder"}},children:[(0,R.jsx)(g.Z,{...(n=e,{checked:T===n,onChange:e=>G(e,n),value:n,name:"color-radio-button-demo",inputProps:{"aria-label":n}}),name:"Selection"}),e]})},t);var n}))}),(0,R.jsxs)(m.Z,{sx:{my:3,minWidth:"100%"},children:[(0,R.jsx)(h.Z,{htmlFor:"max-width",children:"Other"}),(0,R.jsx)(k.Z,{id:"max-width",...W("Body")})]})]})}):(0,R.jsx)(p.Z,{sx:{ml:2,mb:1,fontSize:15},children:F("We hope that everything was to your satisfaction")}),(0,R.jsxs)(f.Z,{children:[(0,R.jsx)(d.Z,{onClick:async()=>{try{await j.ZP.patch("api/appointments/".concat(B._id),{hasFeedback:!0});A.onFalse()}catch(e){console.error(e.message)}},loading:E,variant:"outlined",color:"inherit",type:"submit",children:F("Skip")}),(0,R.jsx)(d.Z,{type:"submit",variant:"contained",children:F("Submit")})]})]})})}):(0,R.jsx)(w.Z,{filled:!0,title:F("No Data"),sx:{py:10}})}function P(){const{t:e}=(0,a.qM)();return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(o.ql,{children:(0,R.jsx)("title",{children:e("watingroom")})}),(0,R.jsx)(F,{})]})}},49792:(e,t,n)=>{n.d(t,{Z:()=>P});var o=n(63366),a=n(87462),r=n(72791),i=n(59278),s=n(94419),c=n(12065),l=n(97278),d=n(31402),u=n(74223),h=n(80184);const p=(0,u.Z)((0,h.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),m=(0,u.Z)((0,h.jsx)("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked");var v=n(66934);const f=(0,v.ZP)("span")({position:"relative",display:"flex"}),x=(0,v.ZP)(p)({transform:"scale(1)"}),g=(0,v.ZP)(m)((e=>{let{theme:t,ownerState:n}=e;return(0,a.Z)({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest})},n.checked&&{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})})}));const Z=function(e){const{checked:t=!1,classes:n={},fontSize:o}=e,r=(0,a.Z)({},e,{checked:t});return(0,h.jsxs)(f,{className:n.root,ownerState:r,children:[(0,h.jsx)(x,{fontSize:o,className:n.background,ownerState:r}),(0,h.jsx)(g,{fontSize:o,className:n.dot,ownerState:r})]})};var y=n(14036);const j=n(78949).Z;const b=r.createContext(void 0);var S=n(75878),k=n(21217);function C(e){return(0,k.Z)("MuiRadio",e)}const _=(0,S.Z)("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),w=["checked","checkedIcon","color","icon","name","onChange","size","className"],z=(0,v.ZP)(l.Z,{shouldForwardProp:e=>(0,v.FO)(e)||"classes"===e,name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["color".concat((0,y.Z)(n.color))]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,a.Z)({color:(t.vars||t).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===n.color?t.vars.palette.action.activeChannel:t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,c.Fq)("default"===n.color?t.palette.action.active:t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{["&.".concat(_.checked)]:{color:(t.vars||t).palette[n.color].main}},{["&.".concat(_.disabled)]:{color:(t.vars||t).palette.action.disabled}})}));const R=(0,h.jsx)(Z,{checked:!0}),F=(0,h.jsx)(Z,{}),P=r.forwardRef((function(e,t){var n,c;const l=(0,d.Z)({props:e,name:"MuiRadio"}),{checked:u,checkedIcon:p=R,color:m="primary",icon:v=F,name:f,onChange:x,size:g="medium",className:Z}=l,S=(0,o.Z)(l,w),k=(0,a.Z)({},l,{color:m,size:g}),_=(e=>{const{classes:t,color:n,size:o}=e,r={root:["root","color".concat((0,y.Z)(n)),"medium"!==o&&"size".concat((0,y.Z)(o))]};return(0,a.Z)({},t,(0,s.Z)(r,C,t))})(k),P=r.useContext(b);let N=u;const V=j(x,P&&P.onChange);let M=f;var O,B;return P&&("undefined"===typeof N&&(O=P.value,N="object"===typeof(B=l.value)&&null!==B?O===B:String(O)===String(B)),"undefined"===typeof M&&(M=P.name)),(0,h.jsx)(z,(0,a.Z)({type:"radio",icon:r.cloneElement(v,{fontSize:null!=(n=F.props.fontSize)?n:g}),checkedIcon:r.cloneElement(p,{fontSize:null!=(c=R.props.fontSize)?c:g}),ownerState:k,classes:_,name:M,checked:N,onChange:V,ref:t,className:(0,i.Z)(_.root,Z)},S))}))},44695:(e,t,n)=>{n.d(t,{X:()=>l});var o=n(61134),a=function(e,t,n){if(e&&"reportValidity"in e){var a=(0,o.U2)(n,t);e.setCustomValidity(a&&a.message||""),e.reportValidity()}},r=function(e,t){var n=function(n){var o=t.fields[n];o&&o.ref&&"reportValidity"in o.ref?a(o.ref,n,e):o.refs&&o.refs.forEach((function(t){return a(t,n,e)}))};for(var o in t.fields)n(o)},i=function(e,t){t.shouldUseNativeValidation&&r(e,t);var n={};for(var a in e){var i=(0,o.U2)(t.fields,a),l=Object.assign(e[a]||{},{ref:i&&i.ref});if(c(t.names||Object.keys(e),a)){var d=Object.assign({},s((0,o.U2)(n,a)));(0,o.t8)(d,"root",l),(0,o.t8)(n,a,d)}else(0,o.t8)(n,a,l)}return n},s=function(e){return Array.isArray(e)?e.filter(Boolean):[]},c=function(e,t){return e.some((function(e){return e.startsWith(t+".")}))};function l(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),function(a,s,c){try{return Promise.resolve(function(o,i){try{var l=(t.context,Promise.resolve(e["sync"===n.mode?"validateSync":"validate"](a,Object.assign({abortEarly:!1},t,{context:s}))).then((function(e){return c.shouldUseNativeValidation&&r({},c),{values:n.raw?a:e,errors:{}}})))}catch(d){return i(d)}return l&&l.then?l.then(void 0,i):l}(0,(function(e){if(!e.inner)throw e;return{values:{},errors:i((t=e,n=!c.shouldUseNativeValidation&&"all"===c.criteriaMode,(t.inner||[]).reduce((function(e,t){if(e[t.path]||(e[t.path]={message:t.message,type:t.type}),n){var a=e[t.path].types,r=a&&a[t.type];e[t.path]=(0,o.KN)(t.path,n,e,t.type,r?[].concat(r,t.message):t.message)}return e}),{})),c)};var t,n})))}catch(l){return Promise.reject(l)}}}}}]);
//# sourceMappingURL=117.6dbf1f27.chunk.js.map
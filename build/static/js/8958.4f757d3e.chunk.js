"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[8958],{91533:(e,n,i)=>{i.r(n),i.d(n,{default:()=>k});var a=i(6907),o=i(27031),s=i(8976),t=i(8007),l=i(61134),r=i(72791),d=i(44695),c=i(53767),u=i(12258),p=i(61889),m=i(4567),v=i(57621),g=i(9585),h=i(10266),x=i(38072),Z=i(19208),f=i(38887),y=i(66664),j=i(99116),b=i(76119),_=i(78644),w=i(32869),P=i(535),C=i(80184);function T(){const{t:e}=(0,_.qM)(),{currentLang:n}=(0,_.nt)(),i="ar"===n.value,a=[{label:e("read"),value:"read"},{label:e("create"),value:"create"},{label:e("edit"),value:"update"},{label:e("delete"),value:"delete"}],{emid:o,wgid:T}=(0,Z.UO)(),{data:k}=(0,b.tBz)(T),{user:M}=(0,s.E)(),R=(0,f.F)("up","md"),{enqueueSnackbar:S}=(0,w.Ds)(),N=t.Ry().shape({appointments:t.IX(),appointment_configs:t.IX(),accounting:t.IX(),entrance_management:t.IX(),permissions:t.IX()}),H=(0,r.useMemo)((()=>{var e,n,i,a,s,t,l,r,d,c,u,p,m,v,g;return{appointments:(null===k||void 0===k||null===(e=k.employees)||void 0===e||null===(n=e.find((e=>e._id===o)))||void 0===n||null===(i=n.acl)||void 0===i?void 0:i.appointments)||[],appointment_configs:(null===k||void 0===k||null===(a=k.employees)||void 0===a||null===(s=a.find((e=>e._id===o)))||void 0===s||null===(t=s.acl)||void 0===t?void 0:t.appointment_configs)||[],accounting:(null===k||void 0===k||null===(l=k.employees)||void 0===l||null===(r=l.find((e=>e._id===o)))||void 0===r||null===(d=r.acl)||void 0===d?void 0:d.accounting)||[],entrance_management:(null===k||void 0===k||null===(c=k.employees)||void 0===c||null===(u=c.find((e=>e._id===o)))||void 0===u||null===(p=u.acl)||void 0===p?void 0:p.entrance_management)||[],permissions:(null===k||void 0===k||null===(m=k.employees)||void 0===m||null===(v=m.find((e=>e._id===o)))||void 0===v||null===(g=v.acl)||void 0===g?void 0:g.permissions)||[]}}),[k,o]),I=(0,l.cI)({mode:"onTouched",resolver:(0,d.X)(N),defaultValues:H}),{reset:z,handleSubmit:X,formState:{isSubmitting:q}}=I;(0,r.useEffect)((()=>{var e,n,i,a,s,t,l,r,d,c,u,p,m,v,g;z({appointments:(null===k||void 0===k||null===(e=k.employees)||void 0===e||null===(n=e.find((e=>e._id===o)))||void 0===n||null===(i=n.acl)||void 0===i?void 0:i.appointments)||[],appointment_configs:(null===k||void 0===k||null===(a=k.employees)||void 0===a||null===(s=a.find((e=>e._id===o)))||void 0===s||null===(t=s.acl)||void 0===t?void 0:t.appointment_configs)||[],accounting:(null===k||void 0===k||null===(l=k.employees)||void 0===l||null===(r=l.find((e=>e._id===o)))||void 0===r||null===(d=r.acl)||void 0===d?void 0:d.accounting)||[],entrance_management:(null===k||void 0===k||null===(c=k.employees)||void 0===c||null===(u=c.find((e=>e._id===o)))||void 0===u||null===(p=u.acl)||void 0===p?void 0:p.entrance_management)||[],permissions:(null===k||void 0===k||null===(m=k.employees)||void 0===m||null===(v=m.find((e=>e._id===o)))||void 0===v||null===(g=v.acl)||void 0===g?void 0:g.permissions)||[]})}),[o,k]);const E=X((async n=>{try{y.ZP.patch(y.Hv.work_groups.employee.acl(o),{acl:n}),j.Z.emit("updated",{user:M,link:x.H.unitservice.employees.acl(o),msg:"updated a department employee permissions"}),S(e("updated successfully!"))}catch(a){S(i&&a.arabic_message||a.message,{variant:"error"}),console.error(a)}})),F=(0,C.jsxs)(C.Fragment,{children:[R&&(0,C.jsxs)(p.ZP,{md:4,children:[(0,C.jsx)(m.Z,{variant:"h6",sx:{mb:.5},children:e("permissions")}),(0,C.jsx)(m.Z,{variant:"body2",sx:{color:"text.secondary"},children:e("giving or withdrowing permissions refered to all")}),(0,C.jsx)(m.Z,{variant:"body2",sx:{color:"text.secondary"},children:e("work group and all its employees")})]}),(0,C.jsx)(p.ZP,{xs:12,md:8,children:(0,C.jsxs)(v.Z,{children:[!R&&(0,C.jsx)(g.Z,{title:e("permissions")}),(0,C.jsxs)(c.Z,{spacing:3,sx:{p:3},children:[(0,C.jsxs)(c.Z,{spacing:1,children:[(0,C.jsx)(m.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("appointments")}),(0,C.jsx)(P.s2,{row:!0,spacing:4,name:"appointments",options:a})]}),(0,C.jsxs)(c.Z,{spacing:1,children:[(0,C.jsx)(m.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("appointment configuration")}),(0,C.jsx)(P.s2,{row:!0,spacing:4,name:"appointment_configs",options:a})]}),(0,C.jsxs)(c.Z,{spacing:1,children:[(0,C.jsx)(m.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("accounting")}),(0,C.jsx)(P.s2,{row:!0,spacing:4,name:"accounting",options:a})]}),(0,C.jsxs)(c.Z,{spacing:1,children:[(0,C.jsx)(m.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("entrance management")}),(0,C.jsx)(P.s2,{row:!0,spacing:4,name:"entrance_management",options:a})]}),(0,C.jsxs)(c.Z,{spacing:1,children:[(0,C.jsx)(m.Z,{textTransform:"capitalize",variant:"subtitle2",children:e("permissions")}),(0,C.jsx)(P.s2,{row:!0,spacing:4,name:"permissions",options:a})]})]})]})})]}),A=(0,C.jsxs)(C.Fragment,{children:[R&&(0,C.jsx)(p.ZP,{md:4}),(0,C.jsx)(p.ZP,{xs:12,md:8,sx:{display:"flex",justifyContent:"flex-end"},children:(0,C.jsx)(u.Z,{type:"submit",variant:"contained",loading:q,sx:{m:2},children:e("save changes")})})]});return(0,C.jsx)(h.Z,{maxWidth:"lg",children:(0,C.jsx)(P.ZP,{methods:I,onSubmit:E,children:(0,C.jsxs)(p.ZP,{container:!0,spacing:3,children:[F,A]})})})}function k(){var e,n,i,t,l;const{user:r}=(0,s.E)(),d=null===r||void 0===r||null===(e=r.employee)||void 0===e||null===(n=e.employee_engagements)||void 0===n||null===(i=n[null===r||void 0===r||null===(l=r.employee)||void 0===l?void 0:l.selected_engagement])||void 0===i||null===(t=i.unit_service)||void 0===t?void 0:t.name_english;return(0,C.jsxs)(o.Z,{category:"unit_service",subcategory:"permissions",acl:"update",children:[(0,C.jsxs)(a.ql,{children:[(0,C.jsxs)("title",{children:[d||"Service unit"," : work group permissions "]}),(0,C.jsx)("meta",{name:"description",content:"meta"})]}),(0,C.jsx)(T,{})]})}},9585:(e,n,i)=>{i.d(n,{Z:()=>j});var a=i(63366),o=i(87462),s=i(72791),t=i(59278),l=i(20838),r=i(4567),d=i(31402),c=i(66934),u=i(59703),p=i(64657);function m(e){return(0,p.ZP)("MuiCardHeader",e)}const v=(0,u.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var g=i(80184);const h=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],x=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,n)=>(0,o.Z)({["& .".concat(v.title)]:n.title,["& .".concat(v.subheader)]:n.subheader},n.root)})({display:"flex",alignItems:"center",padding:16}),Z=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,n)=>n.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),f=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,n)=>n.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),y=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,n)=>n.content})({flex:"1 1 auto"}),j=s.forwardRef((function(e,n){const i=(0,d.Z)({props:e,name:"MuiCardHeader"}),{action:s,avatar:c,className:u,component:p="div",disableTypography:v=!1,subheader:j,subheaderTypographyProps:b,title:_,titleTypographyProps:w}=i,P=(0,a.Z)(i,h),C=(0,o.Z)({},i,{component:p,disableTypography:v}),T=(e=>{const{classes:n}=e;return(0,l.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},m,n)})(C);let k=_;null==k||k.type===r.Z||v||(k=(0,g.jsx)(r.Z,(0,o.Z)({variant:c?"body2":"h5",className:T.title,component:"span",display:"block"},w,{children:k})));let M=j;return null==M||M.type===r.Z||v||(M=(0,g.jsx)(r.Z,(0,o.Z)({variant:c?"body2":"body1",className:T.subheader,color:"text.secondary",component:"span",display:"block"},b,{children:M}))),(0,g.jsxs)(x,(0,o.Z)({className:(0,t.Z)(T.root,u),as:p,ref:n,ownerState:C},P,{children:[c&&(0,g.jsx)(Z,{className:T.avatar,ownerState:C,children:c}),(0,g.jsxs)(y,{className:T.content,ownerState:C,children:[k,M]}),s&&(0,g.jsx)(f,{className:T.action,ownerState:C,children:s})]}))}))},57621:(e,n,i)=>{i.d(n,{Z:()=>x});var a=i(87462),o=i(63366),s=i(72791),t=i(59278),l=i(20838),r=i(66934),d=i(31402),c=i(27938),u=i(59703),p=i(64657);function m(e){return(0,p.ZP)("MuiCard",e)}(0,u.Z)("MuiCard",["root"]);var v=i(80184);const g=["className","raised"],h=(0,r.ZP)(c.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,n)=>n.root})((()=>({overflow:"hidden"}))),x=s.forwardRef((function(e,n){const i=(0,d.Z)({props:e,name:"MuiCard"}),{className:s,raised:r=!1}=i,c=(0,o.Z)(i,g),u=(0,a.Z)({},i,{raised:r}),p=(e=>{const{classes:n}=e;return(0,l.Z)({root:["root"]},m,n)})(u);return(0,v.jsx)(h,(0,a.Z)({className:(0,t.Z)(p.root,s),elevation:r?8:void 0,ref:n,ownerState:u},c))}))}}]);
//# sourceMappingURL=8958.4f757d3e.chunk.js.map
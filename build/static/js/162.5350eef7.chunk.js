"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[162],{94791:(e,n,t)=>{t.d(n,{i5:()=>f,A0:()=>h,ZP:()=>_,vr:()=>l});var i=t(95717),a=t(72791),o=t(13967);function l(e){const n=(0,o.Z)(),t=(0,a.useRef)(null),[i,l]=(0,a.useState)((null===e||void 0===e?void 0:e.initialSlide)||0),[r,s]=(0,a.useState)(void 0),d="rtl"===n.direction,c={arrows:!1,dots:!(null===e||void 0===e||!e.customPaging),rtl:d,beforeChange:(e,n)=>l(n),...e,fade:!(null===e||void 0===e||!e.fade||d)},u=(0,a.useCallback)((()=>{t.current&&s(t.current)}),[]),m=(0,a.useCallback)((()=>{t.current&&t.current.slickPrev()}),[]),h=(0,a.useCallback)((()=>{t.current&&t.current.slickNext()}),[]),x=(0,a.useCallback)((e=>{t.current&&t.current.slickGoTo(e)}),[]);return{nav:r,carouselRef:t,currentIndex:i,carouselSettings:c,onPrev:m,onNext:h,onTogo:x,onSetNav:u,setNav:s,setCurrentIndex:l}}var r=t(16029),s=t(53767),d=t(66934),c=t(80184);const u=(0,d.ZP)(r.Z,{shouldForwardProp:e=>"rounded"!==e})((e=>{let{rounded:n,theme:t}=e;return{zIndex:9,margin:0,padding:0,display:"flex",alignItems:"center",justifyContent:"center",color:t.palette.primary.main,"& li":{width:18,height:18,opacity:.32,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer","&.slick-active":{opacity:1,...n&&{"& span":{width:16,borderRadius:6}}}}}})),m=(0,d.ZP)("span")((e=>{let{theme:n}=e;return{width:8,height:8,borderRadius:"50%",transition:n.transitions.create(["width"],{easing:n.transitions.easing.sharp,duration:n.transitions.duration.short})}}));function h(e){const n=(null===e||void 0===e?void 0:e.rounded)||!1,t=null===e||void 0===e?void 0:e.sx;return{appendDots:i=>(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(u,{component:"ul",rounded:n,sx:{...t},...e,children:i})}),customPaging:()=>(0,c.jsx)(s.Z,{component:"div",alignItems:"center",justifyContent:"center",sx:{width:1,height:1},children:(0,c.jsx)(m,{sx:{bgcolor:"currentColor"}})})}}var x=t(13400),p=t(12065),g=t(40268);function v(e){let{icon:n="eva:arrow-ios-forward-fill",isRTL:t}=e;return(0,c.jsx)(g.Z,{icon:n,sx:{transform:" scaleX(-1)",...t&&{transform:" scaleX(1)"}}})}function b(e){let{icon:n="eva:arrow-ios-forward-fill",isRTL:t}=e;return(0,c.jsx)(g.Z,{icon:n,sx:{...t&&{transform:" scaleX(-1)"}}})}const j=(0,d.ZP)(x.Z,{shouldForwardProp:e=>"filled"!==e&&"hasChild"!==e&&"shape"!==e})((e=>{let{filled:n,shape:t,hasChild:i,theme:a}=e;return{color:"inherit",transition:a.transitions.create("all",{duration:a.transitions.duration.shorter}),..."rounded"===t&&{borderRadius:1.5*a.shape.borderRadius},...!n&&{opacity:.48,"&:hover":{opacity:1}},...n&&{color:(0,p.Fq)(a.palette.common.white,.8),backgroundColor:(0,p.Fq)(a.palette.grey[900],.48),"&:hover":{color:a.palette.common.white,backgroundColor:a.palette.grey[900]}},...i&&{zIndex:9,top:"50%",position:"absolute",marginTop:a.spacing(-2.5)}}}));function f(e){let{shape:n="circular",filled:t=!1,icon:i,onNext:a,onPrev:l,children:r,leftButtonProps:d,rightButtonProps:u,sx:m,...h}=e;const x="rtl"===(0,o.Z)().direction;return!!r?(0,c.jsxs)(s.Z,{sx:m,...h,children:[a&&(0,c.jsx)(j,{filled:t,shape:n,hasChild:!!r,onClick:l,...d,sx:{left:16,...null===d||void 0===d?void 0:d.sx},children:(0,c.jsx)(v,{icon:i,isRTL:x})}),r,l&&(0,c.jsx)(j,{filled:t,shape:n,hasChild:!!r,onClick:a,...u,sx:{right:16,...null===u||void 0===u?void 0:u.sx},children:(0,c.jsx)(b,{icon:i,isRTL:x})})]}):(0,c.jsxs)(s.Z,{direction:"row",alignItems:"center",display:"inline-flex",sx:m,...h,children:[(0,c.jsx)(j,{filled:t,shape:n,onClick:l,...d,children:(0,c.jsx)(v,{icon:i,isRTL:x})}),(0,c.jsx)(j,{filled:t,shape:n,onClick:a,...u,children:(0,c.jsx)(b,{icon:i,isRTL:x})})]})}const _=i.Z},38563:(e,n,t)=>{t.d(n,{Z:()=>u});var i=t(16029),a=t(50533),o=t(53767),l=t(4567),r=t(93517),s=t(4419),d=t(80184);function c(e){let{link:n,activeLast:t,disabled:o}=e;const l={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...o&&!t&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},r=(0,d.jsxs)(d.Fragment,{children:[n.icon&&(0,d.jsx)(i.Z,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:n.icon}),n.name]});return n.href?(0,d.jsx)(a.Z,{component:s.r,href:n.href,sx:l,children:r}):(0,d.jsxs)(i.Z,{sx:l,children:[" ",r," "]})}function u(e){let{links:n,action:t,heading:s,moreLink:u,activeLast:h,sx:x,...p}=e;const g=n&&n[n.length-1].name;return(0,d.jsxs)(i.Z,{sx:{...x},children:[(0,d.jsxs)(o.Z,{direction:"row",alignItems:"center",children:[(0,d.jsxs)(i.Z,{sx:{flexGrow:1,display:"flex",gap:{md:3},alignItems:{md:"center"},flexDirection:{xs:"column",md:"row"}},children:[s&&(0,d.jsx)(l.Z,{textTransform:"capitalize",variant:"h4",gutterBottom:!0,children:s}),n&&!!n.length&&(0,d.jsx)(r.Z,{separator:(0,d.jsx)(m,{}),...p,children:null===n||void 0===n?void 0:n.map(((e,n)=>(0,d.jsx)(c,{link:e,activeLast:h,disabled:e.name===g},n)))})]}),t&&(0,d.jsxs)(i.Z,{sx:{flexShrink:0,textTransform:"capitalize"},children:[" ",t," "]})]}),!!u&&(0,d.jsx)(i.Z,{sx:{mt:2},children:u.map(((e,n)=>(0,d.jsx)(a.Z,{href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},n)))})]})}function m(){return(0,d.jsx)(i.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}},73379:(e,n,t)=>{t.d(n,{Z:()=>i.Z});var i=t(38563)},27356:(e,n,t)=>{t.d(n,{Z:()=>s});var i=t(16029),a=t(53767),o=t(12065),l=t(4567),r=t(80184);function s(e){let{title:n,imgUrl:t,action:s,filled:d,description:c,sx:u,...m}=e;return(0,r.jsxs)(a.Z,{flexGrow:1,alignItems:"center",justifyContent:"center",sx:{px:3,height:1,...d&&{borderRadius:2,bgcolor:e=>(0,o.Fq)(e.palette.grey[500],.04),border:e=>"dashed 1px ".concat((0,o.Fq)(e.palette.grey[500],.08))},...u},...m,children:[(0,r.jsx)(i.Z,{component:"img",alt:"empty content",src:t||"/assets/icons/empty/ic_content.svg",sx:{width:1,maxWidth:160}}),n&&(0,r.jsx)(l.Z,{variant:"h6",component:"span",sx:{mt:1,color:"text.disabled",textAlign:"center"},children:n}),c&&(0,r.jsx)(l.Z,{variant:"caption",sx:{mt:1,color:"text.disabled",textAlign:"center"},children:c}),s&&s]})}},31092:(e,n,t)=>{t.d(n,{Z:()=>i.Z});var i=t(27356)},38062:(e,n,t)=>{function i(e,n,t){return e?Math.max(0,(1+e)*n-t):0}function a(e,n,t){return null===e[t]?1:null===n[t]||n[t]<e[t]?-1:n[t]>e[t]?1:0}function o(e,n){return"desc"===e?(e,t)=>a(e,t,n):(e,t)=>-a(e,t,n)}t.d(n,{$W:()=>x,K:()=>f,et:()=>h,S_:()=>P,Z4:()=>y,fQ:()=>i,sQ:()=>o,x6:()=>r});var l=t(72791);function r(e){const[n,t]=(0,l.useState)(!(null===e||void 0===e||!e.defaultDense)),[i,a]=(0,l.useState)((null===e||void 0===e?void 0:e.defaultCurrentPage)||0),[o,r]=(0,l.useState)((null===e||void 0===e?void 0:e.defaultOrderBy)||"code"),[s,d]=(0,l.useState)((null===e||void 0===e?void 0:e.defaultRowsPerPage)||25),[c,u]=(0,l.useState)((null===e||void 0===e?void 0:e.defaultOrder)||"asc"),[m,h]=(0,l.useState)((null===e||void 0===e?void 0:e.defaultSelected)||[]),x=(0,l.useCallback)((e=>{""!==e&&(u(o===e&&"asc"===c?"desc":"asc"),r(e))}),[c,o]),p=(0,l.useCallback)((e=>{const n=m.includes(e)?m.filter((n=>n!==e)):[...m,e];h(n)}),[m]),g=(0,l.useCallback)((e=>{a(0),d(parseInt(e.target.value,10))}),[]),v=(0,l.useCallback)((e=>{t(e.target.checked)}),[]),b=(0,l.useCallback)(((e,n)=>{h(e?n:[])}),[]),j=(0,l.useCallback)(((e,n)=>{a(n)}),[]),f=(0,l.useCallback)((()=>{a(0)}),[]),_=(0,l.useCallback)((e=>{h([]),i&&e<2&&a(i-1)}),[i]),Z=(0,l.useCallback)((e=>{let{totalRows:n,totalRowsInPage:t,totalRowsFiltered:o}=e;const l=m.length;if(h([]),i)if(l===t)a(i-1);else if(l===o)a(0);else if(l>t){const e=Math.ceil((n-l)/s)-1;a(e)}}),[i,s,m.length]);return{dense:n,order:c,page:i,orderBy:o,rowsPerPage:s,selected:m,onSelectRow:p,onSelectAllRows:b,onSort:x,onChangePage:j,onChangeDense:v,onResetPage:f,onChangeRowsPerPage:g,onUpdatePageDeleteRow:_,onUpdatePageDeleteRows:Z,setPage:a,setDense:t,setOrder:u,setOrderBy:r,setSelected:h,setRowsPerPage:d}}var s=t(9195),d=t(68745),c=t(81164),u=t(31092),m=t(80184);function h(e){let{notFound:n,sx:t}=e;const{t:i}=(0,c.qM)();return(0,m.jsx)(s.Z,{children:n?(0,m.jsx)(d.Z,{colSpan:12,children:(0,m.jsx)(u.Z,{filled:!0,title:i("No Data"),sx:{py:10,...t}})}):(0,m.jsx)(d.Z,{colSpan:12,sx:{p:0}})})}function x(e){let{emptyRows:n,height:t}=e;return n?(0,m.jsx)(s.Z,{sx:{...t&&{height:t*n}},children:(0,m.jsx)(d.Z,{colSpan:9})}):null}var p=t(16029),g=t(13034),v=t(56890),b=t(80720);const j={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function f(e){let{order:n,orderBy:t,rowCount:i=0,headLabel:a,numSelected:o=0,onSort:l,onSelectAllRows:r,sx:c}=e;return(0,m.jsx)(v.Z,{sx:c,children:(0,m.jsxs)(s.Z,{children:[r&&(0,m.jsx)(d.Z,{padding:"checkbox",children:(0,m.jsx)(g.Z,{indeterminate:!!o&&o<i,checked:!!i&&o===i,onChange:e=>r(e.target.checked)})}),a.map(((e,i)=>(0,m.jsx)(d.Z,{align:e.align||"center",sortDirection:t===e.id&&n,sx:{width:e.width,minWidth:e.minWidth},children:l?(0,m.jsxs)(b.Z,{hideSortIcon:!0,active:t===e.id,direction:t===e.id?n:"asc",onClick:()=>l(e.id),sx:{textTransform:"capitalize"},children:[e.label,t===e.id?(0,m.jsx)(p.Z,{sx:{...j},children:"desc"===n?"sorted descending":"sorted ascending"}):null]}):e.label},i)))]})})}var _=t(53767),Z=t(4567);function y(e){let{dense:n,action:t,rowCount:i,numSelected:a,onSelectAllRows:o,sx:l,color:r,...s}=e;const{t:d}=(0,c.qM)();return a?(0,m.jsxs)(_.Z,{direction:"row",alignItems:"center",sx:{pl:1,pr:2,top:0,left:0,width:1,zIndex:9,height:58,position:"absolute",bgcolor:"".concat(r,".lighter"),...n&&{height:38},...l},...s,children:[(0,m.jsx)(g.Z,{indeterminate:!!a&&a<i,checked:!!i&&a===i,onChange:e=>o(e.target.checked)}),(0,m.jsxs)(Z.Z,{variant:"subtitle2",sx:{ml:2,flexGrow:1,color:"".concat(r,".main"),...n&&{ml:3}},children:[a," ",d("selected")]}),t&&t]}):null}var w=t(89891),C=t(5446),k=t(25801);function P(e){let{dense:n,onChangeDense:t,rowsPerPageOptions:i=[5,10,25],sx:a,...o}=e;const{t:l}=(0,c.qM)();return(0,m.jsxs)(p.Z,{sx:{position:"relative",...a},children:[(0,m.jsx)(C.Z,{rowsPerPageOptions:i,component:"div",...o,sx:{borderTopColor:"transparent"}}),t&&(0,m.jsx)(k.Z,{label:l("dense"),control:(0,m.jsx)(w.Z,{checked:n,onChange:t}),sx:{pl:2,py:1.5,top:0,position:{sm:"absolute"}}})]})}},60620:(e,n,t)=>{t.r(n),t.d(n,{default:()=>ue});var i=t(6907),a=t(27031),o=t(8007),l=t(18111),r=t.n(l),s=t(58406),d=t(94721),c=t(10266),u=t(4567),m=t(62861),h=t(68096),x=t(86778),p=t(77196),g=t(38072),v=t(8976),b=t(81164),j=t(36980),f=t(84802),_=t(61134),Z=t(44695),y=t(72791),w=t(12258),C=t(57621),k=t(16029),P=t(82626),S=t(13400),R=t(53767),D=t(19208);const T=e=>(console.log("date",e),new Date(e).toISOString().replace(/-/g,"").replace(/:/g,"").replace(/\.\d{3}/,""));async function I(e){try{var n,t,i;const o=encodeURIComponent(T(e.start_time)),l=encodeURIComponent(T(e.end_time)),r=encodeURIComponent("appointment at ".concat(null===(n=e.unit_service)||void 0===n?void 0:n.name_english)),s=encodeURIComponent((null===(t=e.unit_service)||void 0===t?void 0:t.location_gps)||(null===(i=e.unit_service)||void 0===i?void 0:i.address)),d="https://calendar.google.com/calendar/render?action=TEMPLATE&dates=".concat(o,"/").concat(l,"&text=").concat(r,"&location=").concat(s);a=d,/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?window.location.href=a:window.open(a,"_blank")}catch(o){console.error(o)}var a}var q=t(30250),A=t(66664),F=t(40268),L=t(73379),B=t(82007),E=t(535),M=t(90811),z=t(9585),W=t(49900),G=t(96474),O=t(38887),U=t(13838),N=t(80184);function $(e){let{name:n,list:t,helperText:i,value:a,onChange:o,...l}=e;const{t:r}=(0,b.qM)(),{currentLang:s}=(0,b.nt)(),d="ar"===s.value;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(u.Z,{sx:{py:2,fontWeight:700},variant:"caption",color:"text.secondary",textTransform:"uppercase",children:r("select time")}),(0,N.jsx)(R.Z,{sx:{py:8,height:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-start"},children:t.map((e=>(0,N.jsx)(U.Z,{variant:"outlined",sx:{width:100,"&:hover":{backgroundColor:a===e._id?"primary.main":"hoverColor",color:a===e._id?"white":"hoverTextColor"},fontWeight:a===e._id?600:500,backgroundColor:a===e._id?"primary.main":"",color:a===e._id?"white":"",borderRadius:0},onClick:()=>{o(e._id)},children:(0,q.Je)(e.start_time,"p",d)})))})]})}var H=t(94791);function X(e){let{selected:n,AppointDates:t,setSelected:i,selectedDate:a,setSelectedDate:o,list:l,loading:r}=e;const{t:s}=(0,b.qM)(),[c,m]=(0,y.useState)(),h=(0,O.F)("up","md"),x=(0,H.vr)({adaptiveHeight:!0,initialSlide:!r&&((()=>{let e=0;return l.forEach(((t,i)=>{t._id===n&&(e=i)})),e})()||0)});(0,y.useEffect)((()=>{var e,t;if(!r.value)if(n)if(l.some((e=>e._id===n)))l.forEach(((e,t)=>{var a,o;e._id===n&&(x.onTogo(t),i(null===l||void 0===l||null===(a=l[t])||void 0===a?void 0:a._id),m(null===l||void 0===l||null===(o=l[t])||void 0===o?void 0:o._id))}));else{var a,o;i(null===l||void 0===l||null===(a=l[0])||void 0===a?void 0:a._id),m(null===l||void 0===l||null===(o=l[0])||void 0===o?void 0:o._id),x.onTogo(0)}else i(null===l||void 0===l||null===(e=l[0])||void 0===e?void 0:e._id),m(null===l||void 0===l||null===(t=l[0])||void 0===t?void 0:t._id),x.onTogo(0)}),[l,r.value]);const p=e=>{var n,t;let a=x.currentIndex;"next"===e&&(x.onNext(),a===l.length-1?a=0:a+=1),"prev"===e&&(x.onPrev(),0===a?a=l.length-1:a-=1),i(null===(n=l[a])||void 0===n?void 0:n._id),m(null===(t=l[a])||void 0===t?void 0:t._id)};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(R.Z,{direction:h?"row":"column",justifyContent:"space-around",children:[(0,N.jsx)(G.w,{localeText:!1,sx:{width:"100%",flexGrow:1,flexShrink:.4},orientation:h?"landscape":"",shouldDisableDate:e=>!t.some((n=>{const t=new Date(n),i=new Date(e);return t.getFullYear()===i.getFullYear()&&t.getMonth()===i.getMonth()&&t.getDate()===i.getDate()})),slots:{toolbar:"test"},slotProps:{actionBar:{actions:[]}},value:new Date(a),onChange:e=>o(e)}),(0,N.jsx)(R.Z,{sx:{width:"100%",height:"100%",flexGrow:1,flexShrink:.6,px:3},children:(0,N.jsx)($,{list:l,onChange:e=>{i(e),m(e),l.forEach(((n,t)=>{n._id===e&&x.onTogo(t)}))},value:c})})]}),(0,N.jsx)(d.Z,{sx:{borderStyle:"dashed"}}),n&&(0,N.jsx)(z.Z,{title:(0,N.jsx)(u.Z,{sx:{py:2,fontWeight:700},variant:"caption",color:"text.secondary",textTransform:"uppercase",children:s("Appointment details")}),action:(0,N.jsx)(H.i5,{onNext:()=>p("next"),onPrev:()=>p("prev")})}),(0,N.jsx)(H.ZP,{style:{dir:"rtl"},ref:x.carouselRef,...x.carouselSettings,children:l.map((e=>(0,N.jsx)(Y,{item:e},e._id)))}),(0,N.jsx)(d.Z,{sx:{borderStyle:"dashed",mb:3}})]})}function Y(e){var n,t;let{item:i}=e;const{work_group:a,appointment_type:o,unit_service:l,start_time:r,service_types:s,online_available:d}=i,{t:c}=(0,b.qM)(),{currentLang:u}=(0,b.nt)(),m="ar"===u.value,h=(0,O.F)("up","md");return(0,N.jsx)(R.Z,{dir:m?"rtl":"ltr",spacing:2,sx:{p:3,position:"relative"},children:(0,N.jsxs)(R.Z,{direction:h?"row":"column",alignItems:"center",spacing:2,children:[(0,N.jsx)(W.Z,{primary:(0,M.Z)(new Date(r))&&new Date(r).toLocaleTimeString(c("en-US"),{timeZone:null===l||void 0===l||null===(n=l.country)||void 0===n?void 0:n.time_zone,hour:"2-digit",minute:"2-digit"}),secondary:(0,M.Z)(new Date(r))&&new Date(r).toLocaleDateString(c("en-US"),{timeZone:(null===l||void 0===l||null===(t=l.country)||void 0===t?void 0:t.time_zone)||Intl.DateTimeFormat().resolvedOptions().timeZone}),primaryTypographyProps:{typography:"subtitle1",noWrap:!0},secondaryTypographyProps:{typography:"body2",component:"span",mt:.5,color:"text.disabled"}}),[{label:m?null===o||void 0===o?void 0:o.name_arabic:null===o||void 0===o?void 0:o.name_english,icon:(0,N.jsx)(F.Z,{icon:"streamline:waiting-appointments-calendar"})},{label:m?null===a||void 0===a?void 0:a.name_arabic:null===a||void 0===a?void 0:a.name_english,icon:(0,N.jsx)(F.Z,{icon:"ri:group-line"})},{label:s.length?null===s||void 0===s?void 0:s.reduce(((e,n)=>e+n.Price_per_unit||0),0):0,icon:(0,N.jsx)(F.Z,{icon:"solar:tag-price-bold"})},{label:c("available online"),icon:(0,N.jsx)(F.Z,{icon:d?"typcn:tick-outline":"mdi:close-outline",sx:{color:d?"success.main":"error.main"}})}].map(((e,n)=>(0,N.jsxs)(R.Z,{spacing:.5,direction:"row",children:[e.icon,(0,N.jsx)(W.Z,{primary:e.label,secondary:(0,N.jsx)("span",{dir:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641"===e.label?"ltr":"auto",children:e.value}),primaryTypographyProps:{typography:"body2",color:"text.secondary",mb:.5},secondaryTypographyProps:{typography:"subtitle2",color:"text.primary",component:"span",textTransform:"none"}})]},n)))]})})}var K=t(79836),Q=t(13967),V=t(53382),J=t(90618),ee=t(53507),ne=t(10261),te=t(38062),ie=t(9195),ae=t(68745),oe=t(22459),le=t(77008);function re(e){let{row:n,selected:t,onEmploymentRow:i}=e;const{sequence_number:a,name_english:o,name_arabic:l,nationality:r,birth_date:s,identification_num:d,email:c,mobile_num1:u,mobile_num2:m}=n,{t:h}=(0,b.qM)(),{currentLang:x}=(0,b.nt)(),p="ar"===x.value,g=(0,oe.k)(),v=(0,N.jsxs)(ie.Z,{hover:!0,selected:t,children:[(0,N.jsx)(ae.Z,{align:"center",children:(0,N.jsxs)(k.Z,{children:[String(r.code).padStart(3,"0"),"-",a]})}),(0,N.jsx)(ae.Z,{align:"center",children:o}),(0,N.jsx)(ae.Z,{align:"center",children:l}),(0,N.jsx)(ae.Z,{align:"center",children:u}),(0,N.jsx)(ae.Z,{align:"center",children:m}),(0,N.jsx)(ae.Z,{align:"center",sx:{textTransform:"none"},children:c}),(0,N.jsx)(ae.Z,{align:"center",children:d}),(0,N.jsx)(ae.Z,{align:"center",children:p?null===r||void 0===r?void 0:r.name_arabic:null===r||void 0===r?void 0:r.name_english}),(0,N.jsx)(ae.Z,{align:"center",children:s}),(0,N.jsx)(ae.Z,{align:"center",sx:{px:1,whiteSpace:"nowrap"},children:(0,N.jsx)(S.Z,{onClick:g.onToggle,children:(0,N.jsx)(F.Z,{width:"27px",color:"info.main",icon:"mdi:book-add"})})})]});return(0,N.jsxs)(N.Fragment,{children:[v,(0,N.jsx)(le.Q,{open:g.value,onClose:g.onFalse,title:h("confirm checking information"),content:h("Do you confirm checking patient data and check at least three values if they are true?"),action:(0,N.jsx)(U.Z,{variant:"contained",color:"info",onClick:i,children:h("confirm")})})]})}function se(e){let{SelectedAppointment:n,reset:t,selected:i,oldPatients:a}=e;const{t:o}=(0,b.qM)(),{currentLang:l}=(0,b.nt)(),r="ar"===l.value,s=[{id:"code",label:o("code")},{id:"name_english",label:o("name in english")},{id:"name_arabic",label:o("name in arabic")},{id:"mobile_num1",label:o("mobile number")},{id:"mobile_num2",label:o("alternative mobile number")},{id:"email",label:o("email")},{id:"identification_num",label:o("ID number")},{id:"nationality",label:o("nationality")},{id:"birth_date",label:o("birth date")},{id:"book",width:88}],{enqueueSnackbar:d}=(0,f.Ds)(),c=(0,te.x6)({defaultRowsPerPage:10}),u=(0,Q.Z)(),{dense:m,page:h,order:x,orderBy:p,rowsPerPage:g,onSort:v,onChangeDense:j,onChangePage:_,onChangeRowsPerPage:Z}=c;return(0,N.jsxs)(ne.Z,{children:[(0,N.jsxs)(K.Z,{size:m?"small":"medium",sx:{minWidth:960,borderCollapse:"separate",borderSpacing:"0 16px"},children:[(0,N.jsx)(te.K,{order:x,orderBy:p,headLabel:s,onSort:v,sx:{["& .".concat(J.Z.head)]:{"&:first-of-type":{borderTopLeftRadius:12,borderBottomLeftRadius:12},"&:last-of-type":{borderTopRightRadius:12,borderBottomRightRadius:12}}}}),(0,N.jsxs)(V.Z,{children:[a.slice(h*g,h*g+g).map(((e,a,l)=>(0,N.jsx)(re,{row:e,onEmploymentRow:()=>(async e=>{try{await A.ZP.patch(A.Hv.appointments.book(i),{patient:e._id}),await I(n),d(o("booked successfully!")),t()}catch(a){d(r&&a.arabic_message||a.message,{variant:"error"}),console.error(a)}})(e)},l))),(0,N.jsx)(te.et,{notFound:0===a.length,sx:{m:-2,borderRadius:1.5,border:"dashed 1px ".concat(u.palette.divider)}})]})]}),(0,N.jsx)(te.S_,{count:a.length,page:h,rowsPerPage:g,onPageChange:_,onRowsPerPageChange:Z,dense:m,onChangeDense:j,sx:{["& .".concat(ee.Z.toolbar)]:{borderTopColor:"transparent"}}})]})}const de={status:"available",work_group:null,startTime:null,endTime:null};function ce(){var e,n,t,i;const{user:a}=(0,v.E)(),{t:l}=(0,b.qM)(),{currentLang:T}=(0,b.nt)(),M="ar"===T.value,{countriesData:z}=(0,j.Rpj)(),{myunitTime:W}=(0,q.lf)(),[G,O]=(0,y.useState)(de),U=!r()(G,de),$=(0,D.lr)(),H=$.get("appointment"),Y=$.get("day"),[K,Q]=(0,y.useState)(Y?new Date(Y):new Date),{appointmentsData:V,AppointDates:J,loading:ee}=(0,j.E7C)({id:null===a||void 0===a||null===(e=a.employee)||void 0===e||null===(n=e.employee_engagements[null===a||void 0===a?void 0:a.employee.selected_engagement])||void 0===n?void 0:n._id,filters:{...G,startDate:K}});(0,y.useEffect)((()=>{ee||V.length||!J.length||Q(J[0])}),[ee,V.length,J]);const[ne,te]=(0,y.useState)(H),{workGroupsData:ie}=(0,j.Sue)(null===a||void 0===a||null===(t=a.employee)||void 0===t||null===(i=t.employee_engagements[null===a||void 0===a?void 0:a.employee.selected_engagement])||void 0===i?void 0:i._id),{enqueueSnackbar:ae}=(0,f.Ds)(),oe=o.Ry().shape({sequence_number:o.Z_(),name_english:o.Z_(),name_arabic:o.Z_(),email:o.Z_(),identification_num:o.Z_(),birth_date:o.nK().nullable(),marital_status:o.Z_().nullable(),nationality:o.Z_().required(l("required field")),country:o.Z_().nullable(),city:o.Z_().nullable(),mobile_num1:o.Z_(),mobile_num2:o.Z_(),gender:o.Z_()}),le=(0,y.useMemo)((()=>({sequence_number:"",name_english:"",name_arabic:"",email:"",identification_num:"",birth_date:null,marital_status:"",nationality:null,country:null,city:null,mobile_num1:"",mobile_num2:"",gender:""})),[]),re=(0,_.cI)({mode:"onTouched",resolver:(0,Z.X)(oe),defaultValues:le}),{reset:ce,handleSubmit:ue,watch:me,setValue:he,formState:{isSubmitting:xe,errors:pe}}=re;(0,y.useEffect)((()=>{Object.keys(pe).length&&Object.keys(pe).forEach(((e,n)=>{var t;return ae(null===pe||void 0===pe||null===(t=pe[e])||void 0===t?void 0:t.message,{variant:"error"})}))}),[pe,ae]);const ge=me(),{tableData:ve}=(0,j.s_U)(ge.country),{existPatients:be}=(0,j.E$b)({sequence_number:ge.sequence_number,name_english:ge.name_english,name_arabic:ge.name_arabic,email:ge.email.toLowerCase(),identification_num:ge.identification_num,mobile_num1:ge.mobile_num1,mobile_num2:ge.mobile_num2}),je=ue((async e=>{try{await A.ZP.patch(A.Hv.appointments.patient.createPatientAndBookAppoint(ne),e);const n=V.find((e=>e._id===ne));await I(n),ae(l("created successfully!")),ce()}catch(n){ae(M&&n.arabic_message||n.message,{variant:"error"}),console.error(n)}})),fe=e=>{/^[a-zA-Z0-9\s,@#$!*_\-&^%.()]*$/.test(e.target.value)&&he(e.target.name,e.target.value)},_e=(0,y.useCallback)((()=>{O(de)}),[]);return(0,N.jsxs)(c.Z,{maxWidth:"xl",children:[(0,N.jsx)(L.Z,{heading:l("Book Appointment"),links:[{name:l("dashboard"),href:g.H.employee.root},{name:l("appointments"),href:g.H.employee.appointments.root},{name:l("book")}],sx:{mb:{xs:3,md:5}}}),(0,N.jsx)(B.Z,{methods:re,onSubmit:je,children:(0,N.jsxs)(C.Z,{sx:{px:3,pb:3},children:[(0,N.jsxs)(k.Z,{sx:{m:3},rowGap:3,columnGap:2,display:"flex",children:[(0,N.jsxs)(h.Z,{sx:{width:{xs:1,md:200}},children:[(0,N.jsx)(m.Z,{shrink:!0,children:"".concat(l("work group"))}),(0,N.jsx)(s.Z,{value:G.group,onChange:e=>O((n=>({...n,group:e.target.value}))),size:"small",input:(0,N.jsx)(p.Z,{label:l("work group")}),children:ie.map(((e,n)=>(0,N.jsx)(P.Z,{lang:"ar",value:e._id,children:M?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))})]}),(0,N.jsx)(x.d,{orientation:"landscape",minutesStep:"5",label:l("from time"),value:W(G.startTime),onChange:e=>{const n=W(e);O((e=>({...e,startTime:n})))},slotProps:{textField:{fullWidth:!0,size:"small"}},sx:{width:{xs:1,md:200}}}),(0,N.jsx)(x.d,{orientation:"landscape",minutesStep:"5",label:l("to time"),value:W(G.endTime),onChange:e=>{const n=W(e);O((e=>({...e,endTime:n})))},slotProps:{textField:{fullWidth:!0,size:"small"}},sx:{width:{xs:1,md:200}}}),U&&(0,N.jsx)(S.Z,{sx:{color:"error.main"},onClick:_e,children:(0,N.jsx)(F.Z,{icon:"solar:trash-bin-trash-bold"})})]}),(0,N.jsx)(d.Z,{sx:{borderStyle:"dashed"}}),!ee&&(0,N.jsx)(X,{selected:ne,AppointDates:J,loading:ee,setSelected:te,selectedDate:K,setSelectedDate:Q,list:V}),(0,N.jsx)(u.Z,{sx:{py:2,fontWeight:700},variant:"caption",color:"text.secondary",textTransform:"uppercase",children:l("patient information")}),(0,N.jsx)("br",{}),(0,N.jsx)("br",{}),(0,N.jsx)(E.au,{InputLabelProps:{shrink:!0},inputProps:{style:{textAlign:"center"}},sx:{width:"200px",mb:3,textAlign:"center"},size:"small",name:"sequence_number",onChange:e=>{const{value:n}=e.target,t=n.replace(/\D/g,"");t.length<=3?he(e.target.name,t):t.length>=4&&"-"===t.charAt(3)?he(e.target.name,t.slice(0,3)):t.length>=4&&"-"!==t.charAt(3)?he(e.target.name,"".concat(t.slice(0,3),"-").concat(t.slice(3))):he(e.target.name,t)},placeholder:"001-22",label:l("patient-code")}),(0,N.jsxs)(k.Z,{sx:{mb:3},rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"},children:[(0,N.jsx)(E.au,{onChange:fe,name:"name_english",label:l("patient name in english")}),(0,N.jsx)(E.au,{onChange:e=>{/^[\u0600-\u06FF0-9\s!@#$%^&*_\-()]*$/.test(e.target.value)&&he(e.target.name,e.target.value)},name:"name_arabic",label:l("patient name in arabic")}),(0,N.jsx)(E.au,{type:"email",name:"email",label:l("email address")}),(0,N.jsx)(E.au,{onChange:fe,name:"identification_num",label:l("ID number")}),(0,N.jsx)(E.Y_,{name:"mobile_num1",label:l("mobile number")}),(0,N.jsx)(E.Y_,{name:"mobile_num2",label:l("alternative mobile number")}),(0,N.jsx)(E.C5,{name:"birth_date",label:l("birth date")}),(0,N.jsx)(E.Cc,{name:"nationality",label:l("nationality"),children:z.map(((e,n)=>(0,N.jsx)(P.Z,{lang:"ar",value:e._id,children:M?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))}),(0,N.jsx)(E.Cc,{name:"country",label:l("country of residence"),children:z.map(((e,n)=>(0,N.jsx)(P.Z,{lang:"ar",value:e._id,children:M?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))}),(0,N.jsx)(E.Cc,{name:"city",label:l("city of residence"),children:ve.map(((e,n)=>(0,N.jsx)(P.Z,{lang:"ar",value:e._id,children:M?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))}),(0,N.jsxs)(E.Cc,{name:"marital_status",label:l("marital status"),children:[(0,N.jsx)(P.Z,{lang:"ar",value:"single",children:l("single")}),(0,N.jsx)(P.Z,{lang:"ar",value:"married",children:l("married")}),(0,N.jsx)(P.Z,{lang:"ar",value:"widowed",children:l("widowed")}),(0,N.jsx)(P.Z,{lang:"ar",value:"separated",children:l("separated")}),(0,N.jsx)(P.Z,{lang:"ar",value:"divorced",children:l("divorced")})]}),(0,N.jsxs)(E.Cc,{name:"gender",label:l("gender"),children:[(0,N.jsx)(P.Z,{lang:"ar",value:"male",children:l("male")}),(0,N.jsx)(P.Z,{lang:"ar",value:"female",children:l("female")})]})]}),(0,N.jsx)(R.Z,{alignItems:"flex-end",sx:{mt:3},children:(0,N.jsx)(w.Z,{type:"submit",tabIndex:-1,variant:"contained",loading:xe,children:l("create new patient and book")})}),be.length>0&&(0,N.jsx)(se,{SelectedAppointment:V.find((e=>e._id===ne)),selected:ne,reset:ce,oldPatients:be})]})})]})}function ue(){return(0,N.jsxs)(a.Z,{category:"work_group",subcategory:"appointments",acl:"read",children:[(0,N.jsxs)(i.ql,{children:[(0,N.jsx)("title",{children:" Book Appointment "}),(0,N.jsx)("meta",{name:"description",content:"meta"})]}),(0,N.jsx)(ce,{})]})}}}]);
//# sourceMappingURL=162.5350eef7.chunk.js.map
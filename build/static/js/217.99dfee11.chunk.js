"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[217],{65665:(e,a,n)=>{n.r(a),n.d(a,{default:()=>R});var t=n(57689),i=n(6907),s=n(36093),o=n(27031),l=n(8007),r=n(61134),d=n(72791),c=n(44695),p=n(53767),m=n(12258),u=n(61889),v=n(4567),g=n(57621),x=n(9585),h=n(10266),Z=n(38072),y=n(19208),j=n(38887),b=n(66664),f=n(99116),_=n(8976),w=n(76932),T=n(32869),P=n(26405),C=n(80184);function M(){const{t:e}=(0,w.qM)(),{currentLang:a}=(0,w.nt)(),n="ar"===a.value,t=[{label:e("read"),value:"read"},{label:e("create"),value:"create"},{label:e("edit"),value:"update"},{label:e("delete"),value:"delete"}],{emid:i}=(0,y.UO)(),{data:o}=(0,s.X7)(i),{user:M}=(0,_.E)(),R=(0,j.F)("up","md"),{enqueueSnackbar:k}=(0,T.Ds)(),N=l.Ry().shape({employees:l.IX(),management_tables:l.IX(),appointments:l.IX(),appointment_configs:l.IX(),accounting:l.IX(),quality_control:l.IX(),permissions:l.IX()}),S=(0,d.useMemo)((()=>{var e,a,n,t,i,s,l,r,d,c,p,m,u,v;return{employees:(null===o||void 0===o||null===(e=o.acl)||void 0===e||null===(a=e.department)||void 0===a?void 0:a.employees)||[],management_tables:(null===o||void 0===o||null===(n=o.acl)||void 0===n||null===(t=n.department)||void 0===t?void 0:t.management_tables)||[],appointments:(null===o||void 0===o||null===(i=o.acl)||void 0===i||null===(s=i.department)||void 0===s?void 0:s.appointments)||[],appointment_configs:(null===o||void 0===o||null===(l=o.acl)||void 0===l||null===(r=l.department)||void 0===r?void 0:r.appointment_configs)||[],accounting:(null===o||void 0===o||null===(d=o.acl)||void 0===d||null===(c=d.department)||void 0===c?void 0:c.accounting)||[],quality_control:(null===o||void 0===o||null===(p=o.acl)||void 0===p||null===(m=p.department)||void 0===m?void 0:m.quality_control)||[],permissions:(null===o||void 0===o||null===(u=o.acl)||void 0===u||null===(v=u.department)||void 0===v?void 0:v.permissions)||[]}}),[o]),q=(0,r.cI)({mode:"onTouched",resolver:(0,c.X)(N),defaultValues:S}),{reset:H,handleSubmit:I,formState:{isSubmitting:X}}=q;(0,d.useEffect)((()=>{var e,a,n,t,i,s,l,r,d,c,p,m,u,v;H({employees:(null===o||void 0===o||null===(e=o.acl)||void 0===e||null===(a=e.department)||void 0===a?void 0:a.employees)||[],management_tables:(null===o||void 0===o||null===(n=o.acl)||void 0===n||null===(t=n.department)||void 0===t?void 0:t.management_tables)||[],appointments:(null===o||void 0===o||null===(i=o.acl)||void 0===i||null===(s=i.department)||void 0===s?void 0:s.appointments)||[],appointment_configs:(null===o||void 0===o||null===(l=o.acl)||void 0===l||null===(r=l.department)||void 0===r?void 0:r.appointment_configs)||[],accounting:(null===o||void 0===o||null===(d=o.acl)||void 0===d||null===(c=d.department)||void 0===c?void 0:c.accounting)||[],quality_control:(null===o||void 0===o||null===(p=o.acl)||void 0===p||null===(m=p.department)||void 0===m?void 0:m.quality_control)||[],permissions:(null===o||void 0===o||null===(u=o.acl)||void 0===u||null===(v=u.department)||void 0===v?void 0:v.permissions)||[]})}),[i,o]);const z=I((async a=>{try{const n=o.acl;n.department=a,b.ZP.patch(b.Hv.employee_engagements.one(i),{acl:n}),f.Z.emit("updated",{user:M,link:Z.H.unitservice.employees.acl(i),msg:"updated a department employee permissions"}),k(e("updated successfully!"))}catch(t){k(n?t.arabic_message:t.message,{variant:"error"}),console.error(t)}})),F=(0,C.jsxs)(C.Fragment,{children:[R&&(0,C.jsxs)(u.ZP,{md:4,children:[(0,C.jsx)(v.Z,{lang:"ar",textTransform:"capitalize",variant:"h6",sx:{mb:.5},children:e("permissions")}),(0,C.jsx)(v.Z,{lang:"ar",variant:"body2",sx:{color:"text.secondary"},children:e("giving or withdrowing permissions refered to all")}),(0,C.jsx)(v.Z,{lang:"ar",variant:"body2",sx:{color:"text.secondary"},children:e("department and all its work groups")})]}),(0,C.jsx)(u.ZP,{xs:12,md:8,children:(0,C.jsxs)(g.Z,{children:[!R&&(0,C.jsx)(x.Z,{lang:"ar",title:e("permissions")}),(0,C.jsxs)(p.Z,{spacing:3,sx:{p:3},children:[(0,C.jsxs)(p.Z,{spacing:1,children:[(0,C.jsx)(v.Z,{lang:"ar",textTransform:"capitalize",variant:"subtitle2",children:e("employees")}),(0,C.jsx)(P.s2,{row:!0,spacing:4,name:"employees",options:t})]}),(0,C.jsxs)(p.Z,{spacing:1,children:[(0,C.jsx)(v.Z,{lang:"ar",textTransform:"capitalize",variant:"subtitle2",children:e("management tables")}),(0,C.jsx)(P.s2,{row:!0,spacing:4,name:"management_tables",options:t})]}),(0,C.jsxs)(p.Z,{spacing:1,children:[(0,C.jsx)(v.Z,{lang:"ar",textTransform:"capitalize",variant:"subtitle2",children:e("appointments")}),(0,C.jsx)(P.s2,{row:!0,spacing:4,name:"appointments",options:t})]}),(0,C.jsxs)(p.Z,{spacing:1,children:[(0,C.jsx)(v.Z,{lang:"ar",textTransform:"capitalize",variant:"subtitle2",children:e("appointment configuration")}),(0,C.jsx)(P.s2,{row:!0,spacing:4,name:"appointment_configs",options:t})]}),(0,C.jsxs)(p.Z,{spacing:1,children:[(0,C.jsx)(v.Z,{lang:"ar",textTransform:"capitalize",variant:"subtitle2",children:e("accounting")}),(0,C.jsx)(P.s2,{row:!0,spacing:4,name:"accounting",options:t})]}),(0,C.jsxs)(p.Z,{spacing:1,children:[(0,C.jsx)(v.Z,{lang:"ar",textTransform:"capitalize",variant:"subtitle2",children:e("quality control")}),(0,C.jsx)(P.s2,{row:!0,spacing:4,name:"quality_control",options:t})]}),(0,C.jsxs)(p.Z,{spacing:1,children:[(0,C.jsx)(v.Z,{lang:"ar",textTransform:"capitalize",variant:"subtitle2",children:e("permissions")}),(0,C.jsx)(P.s2,{row:!0,spacing:4,name:"permissions",options:t})]})]})]})})]}),A=(0,C.jsxs)(C.Fragment,{children:[R&&(0,C.jsx)(u.ZP,{md:4}),(0,C.jsx)(u.ZP,{xs:12,md:8,sx:{display:"flex",justifyContent:"flex-end"},children:(0,C.jsx)(m.Z,{type:"submit",variant:"contained",loading:X,sx:{m:2},children:e("save changes")})})]});return(0,C.jsx)(h.Z,{maxWidth:"lg",children:(0,C.jsx)(P.ZP,{methods:q,onSubmit:z,children:(0,C.jsxs)(u.ZP,{container:!0,spacing:3,children:[F,A]})})})}function R(){const e=(0,t.UO)(),{id:a}=e,{data:n}=(0,s.YL)(a);return(0,C.jsxs)(o.Z,{category:"department",subcategory:"permissions",acl:"update",children:[(0,C.jsxs)(i.ql,{children:[(0,C.jsxs)("title",{children:[n.name_english||"Deartment"," : permissions "]}),(0,C.jsx)("meta",{name:"description",content:"meta"})]}),(0,C.jsx)(M,{})]})}},9585:(e,a,n)=>{n.d(a,{Z:()=>b});var t=n(63366),i=n(87462),s=n(72791),o=n(59278),l=n(94419),r=n(4567),d=n(31402),c=n(66934),p=n(75878),m=n(21217);function u(e){return(0,m.Z)("MuiCardHeader",e)}const v=(0,p.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var g=n(80184);const x=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],h=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,a)=>(0,i.Z)({["& .".concat(v.title)]:a.title,["& .".concat(v.subheader)]:a.subheader},a.root)})({display:"flex",alignItems:"center",padding:16}),Z=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,a)=>a.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),y=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,a)=>a.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),j=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,a)=>a.content})({flex:"1 1 auto"}),b=s.forwardRef((function(e,a){const n=(0,d.Z)({props:e,name:"MuiCardHeader"}),{action:s,avatar:c,className:p,component:m="div",disableTypography:v=!1,subheader:b,subheaderTypographyProps:f,title:_,titleTypographyProps:w}=n,T=(0,t.Z)(n,x),P=(0,i.Z)({},n,{component:m,disableTypography:v}),C=(e=>{const{classes:a}=e;return(0,l.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},u,a)})(P);let M=_;null==M||M.type===r.Z||v||(M=(0,g.jsx)(r.Z,(0,i.Z)({variant:c?"body2":"h5",className:C.title,component:"span",display:"block"},w,{children:M})));let R=b;return null==R||R.type===r.Z||v||(R=(0,g.jsx)(r.Z,(0,i.Z)({variant:c?"body2":"body1",className:C.subheader,color:"text.secondary",component:"span",display:"block"},f,{children:R}))),(0,g.jsxs)(h,(0,i.Z)({className:(0,o.Z)(C.root,p),as:m,ref:a,ownerState:P},T,{children:[c&&(0,g.jsx)(Z,{className:C.avatar,ownerState:P,children:c}),(0,g.jsxs)(j,{className:C.content,ownerState:P,children:[M,R]}),s&&(0,g.jsx)(y,{className:C.action,ownerState:P,children:s})]}))}))},57621:(e,a,n)=>{n.d(a,{Z:()=>h});var t=n(87462),i=n(63366),s=n(72791),o=n(59278),l=n(94419),r=n(66934),d=n(31402),c=n(27938),p=n(75878),m=n(21217);function u(e){return(0,m.Z)("MuiCard",e)}(0,p.Z)("MuiCard",["root"]);var v=n(80184);const g=["className","raised"],x=(0,r.ZP)(c.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,a)=>a.root})((()=>({overflow:"hidden"}))),h=s.forwardRef((function(e,a){const n=(0,d.Z)({props:e,name:"MuiCard"}),{className:s,raised:r=!1}=n,c=(0,i.Z)(n,g),p=(0,t.Z)({},n,{raised:r}),m=(e=>{const{classes:a}=e;return(0,l.Z)({root:["root"]},u,a)})(p);return(0,v.jsx)(x,(0,t.Z)({className:(0,o.Z)(m.root,s),elevation:r?8:void 0,ref:a,ownerState:p},c))}))}}]);
//# sourceMappingURL=217.99dfee11.chunk.js.map
/*! For license information please see 9647.9d1edc0e.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[9647],{29647:(e,n,t)=>{t.r(n),t.d(n,{default:()=>U});var r=t(6907),o=t(72791),i=t(57621),s=t(79836),a=t(13838),l=t(89164),d=t(53382),c=t(39281),u=t(4419),h=t(38072),p=t(19208),x=t(22459),m=t(61146),g=t(34045),f=t(64802),v=(t(84954),t(76932)),j=t(40268),_=t(10261),b=(t(77008),t(25279)),w=t(73379),C=t(38062),Z=t(6965),P=t(79572),k=(t(6385),t(68870)),y=t(82626),D=t(9195),R=t(68745),B=t(13400),S=(t(48819),t(30250)),F=t(24845),E=t(80184);function L(e){let{row:n,selected:t,onEditRow:r,onSelectRow:o,onInactivate:i,onActivate:s,filters:a,setFilters:l}=e;const{code:d,name_english:c,unit_service:u,general_info:h,created_at:p,user_creation:x,ip_address_user_creation:m,updated_at:g,user_modification:f,ip_address_user_modification:v,modifications_nums:_}=n,b=(0,F.S)(),w=((0,F.S)(),(0,F.S)()),C=(0,E.jsxs)(D.Z,{hover:!0,selected:t,children:[(0,E.jsx)(R.Z,{align:"center",children:(0,E.jsx)(k.Z,{children:d})}),(0,E.jsx)(R.Z,{align:"center",children:c}),(0,E.jsx)(R.Z,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>l({...a,name:u.name_english}),children:null===u||void 0===u?void 0:u.name_english}),(0,E.jsx)(R.Z,{align:"center",children:h}),(0,E.jsx)(R.Z,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,E.jsx)(B.Z,{color:w.open?"inherit":"default",onClick:w.onOpen,children:(0,E.jsx)(j.Z,{icon:"eva:more-vertical-fill"})})})]});return(0,E.jsxs)(E.Fragment,{children:[C,(0,E.jsxs)(F.Z,{open:w.open,onClose:w.onClose,arrow:"right-top",sx:{width:140},children:[(0,E.jsxs)(y.Z,{onClick:()=>{r(),w.onClose()},children:[(0,E.jsx)(j.Z,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,E.jsxs)(y.Z,{onClick:b.onOpen,children:[(0,E.jsx)(j.Z,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,E.jsxs)(F.Z,{open:b.open,onClose:b.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,E.jsx)(k.Z,{sx:{fontWeight:600},children:"Creation Time:"}),(0,E.jsx)(k.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,S.zM)(p)}),(0,E.jsx)(k.Z,{sx:{pt:1,fontWeight:600},children:"Creator:"}),(0,E.jsx)(k.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===x||void 0===x?void 0:x.email}),(0,E.jsx)(k.Z,{sx:{pt:1,fontWeight:600},children:"Creator IP:"}),(0,E.jsx)(k.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:m}),(0,E.jsx)(k.Z,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,E.jsx)(k.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,S.zM)(g)}),(0,E.jsx)(k.Z,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,E.jsx)(k.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===f||void 0===f?void 0:f.email}),(0,E.jsx)(k.Z,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,E.jsx)(k.Z,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:v}),(0,E.jsxs)(k.Z,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",_]})]})]})}var O=t(65483),W=t(49172);const I=[{id:"code",label:"Code"},{id:"name_english",label:"name"},{id:"unit_service",label:"unit service"},{id:"general_info",label:"general info"},{id:"",width:88}],T={name:"",status:"all"};function z(){const e=(0,C.x6)({defaultOrderBy:"code"}),{t:n}=(0,v.qM)(),t=(0,o.useRef)(),r=(0,b.K$)(),k=(0,p.tv)(),{departmentsData:y,loading:D,refetch:R}=((0,x.k)(),(0,x.k)(),(0,P.Lo)()),[B,S]=(0,o.useState)(T),F=!(!B.startDate||!B.endDate)&&B.startDate.getTime()>B.endDate.getTime(),z=function(e){let{inputData:n,comparator:t,filters:r,dateError:o}=e;const{status:i,name:s}=r,a=n.map(((e,n)=>[e,n]));a.sort(((e,n)=>{const r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n=a.map((e=>e[0])),s&&(n=n.filter((e=>{var n,t,r,o,i,a;return(null===e||void 0===e?void 0:e.name_english)&&-1!==(null===e||void 0===e||null===(n=e.name_english)||void 0===n?void 0:n.toLowerCase().indexOf(s.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(s.toLowerCase()))||(null===e||void 0===e||null===(r=e.unit_service)||void 0===r?void 0:r.name_english)&&-1!==(null===e||void 0===e||null===(o=e.unit_service)||void 0===o?void 0:o.name_english.toLowerCase().indexOf(s.toLowerCase()))||(null===e||void 0===e||null===(i=e.unit_service)||void 0===i?void 0:i.name_arabic)&&-1!==(null===e||void 0===e||null===(a=e.unit_service)||void 0===a?void 0:a.name_arabic.toLowerCase().indexOf(s.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===s||JSON.stringify(e.code)===s})));"all"!==i&&(n=n.filter((e=>e.status===i)));return n}({inputData:y,comparator:(0,C.sQ)(e.order,e.orderBy),filters:B,dateError:F}),U=(z.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),e.dense?52:72),A=!(null===B||void 0===B||!B.name)||"all"!==B.status,H=!z.length&&A||!z.length,M=(0,m.useReactToPrint)({content:()=>t.current}),q=(0,o.useCallback)(((n,t)=>{e.onResetPage(),S((e=>({...e,[n]:t})))}),[e]),N=(0,o.useCallback)((e=>{k.push(h.H.superadmin.tables.departments.edit(e))}),[k]),K=(0,o.useCallback)((()=>{S(T)}),[]);(0,o.useCallback)(((e,n)=>{q("status",n)}),[q]);return D?(0,E.jsx)(Z.a,{}):(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)(l.Z,{maxWidth:!r.themeStretch&&"lg",children:[(0,E.jsx)(w.Z,{heading:"departments",links:[{name:n("dashboard"),href:h.H.superadmin.root},{name:"Tables",href:h.H.superadmin.tables.list},{name:n("departments")}],action:(0,E.jsx)(a.Z,{component:u.r,href:h.H.superadmin.tables.departments.new,variant:"contained",startIcon:(0,E.jsx)(j.Z,{icon:"mingcute:add-line"}),children:"New Departmment"}),sx:{mb:{xs:3,md:5}}}),(0,E.jsxs)(i.Z,{children:[(0,E.jsx)(O.Z,{onPrint:M,filters:B,onFilters:q,onDownload:()=>{const e=z.reduce(((e,n)=>{var t;return e.push({code:n.code,name:n.name_english,country:null===(t=n.country)||void 0===t?void 0:t.name_english,status:n.status}),e}),[]),n=g.P6.book_new(),t=g.P6.json_to_sheet(e);g.P6.book_append_sheet(n,t,"Sheet 1");const r=g.cW(n,{bookType:"xlsx",type:"array"}),o=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,f.saveAs)(o,"departmentsTable.xlsx")},canReset:A,onResetFilters:K}),A&&(0,E.jsx)(W.Z,{filters:B,onFilters:q,onResetFilters:K,results:z.length,sx:{p:2.5,pt:0}}),(0,E.jsx)(c.Z,{children:(0,E.jsx)(_.Z,{children:(0,E.jsxs)(s.Z,{ref:t,size:e.dense?"small":"medium",children:[(0,E.jsx)(C.K,{order:e.order,orderBy:e.orderBy,headLabel:I,rowCount:z.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:!1}),(0,E.jsxs)(d.Z,{children:[z.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map((n=>(0,E.jsx)(L,{row:n,filters:B,setFilters:S,selected:e.selected.includes(n._id),onEditRow:()=>N(n._id)},n._id))),(0,E.jsx)(C.$W,{height:U,emptyRows:(0,C.fQ)(e.page,e.rowsPerPage,y.length)}),(0,E.jsx)(C.et,{notFound:H})]})]})})}),(0,E.jsx)(C.S_,{count:z.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]})})}function U(){return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(r.ql,{children:(0,E.jsx)("title",{children:" Dashboard: Departments Table"})}),(0,E.jsx)(z,{})]})}},6385:(e,n,t)=>{t.d(n,{Z:()=>s});var r=t(31243),o=t(88329),i=t(33805);async function s(e){let{setData:n,setError:t,method:s,path:a,data:l}=e;const d="".concat(i.E0).concat(a),c=o.Z.get("user_token"),u=await(0,r.Z)({method:s,url:d,headers:{authorization:"Bearer ".concat(c)},data:l});return u.status,n&&n(u.data),u}},88329:(e,n,t)=>{function r(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)e[r]=t[r]}return e}t.d(n,{Z:()=>o});var o=function e(n,t){function o(e,o,i){if("undefined"!==typeof document){"number"===typeof(i=r({},t,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var a in i)i[a]&&(s+="; "+a,!0!==i[a]&&(s+="="+i[a].split(";")[0]));return document.cookie=e+"="+n.write(o,e)+s}}return Object.create({set:o,get:function(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],r={},o=0;o<t.length;o++){var i=t[o].split("="),s=i.slice(1).join("=");try{var a=decodeURIComponent(i[0]);if(r[a]=n.read(s,a),e===a)break}catch(l){}}return e?r[e]:r}},remove:function(e,n){o(e,"",r({},n,{expires:-1}))},withAttributes:function(n){return e(this.converter,r({},this.attributes,n))},withConverter:function(n){return e(r({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(n)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}}]);
//# sourceMappingURL=9647.9d1edc0e.chunk.js.map
"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[92836],{92836:(e,t,n)=>{n.d(t,{r9:()=>Ce,GG:()=>pe,iA:()=>ge,lZ:()=>st,Dw:()=>Ne,US:()=>et,br:()=>Ae,FY:()=>qe,Wr:()=>ct,iP:()=>He,gO:()=>Be,fY:()=>gt,jC:()=>oe,XL:()=>B,Gj:()=>le,YI:()=>Se});var o=n(65043),a=n(12110),s=n(71806),i=n(49633),l=n(77224),r=n(73460),d=n(79650),c=n(48407),p=n(67132),h=n(59229),u=n(57442),x=n(51440),g=n(70074),m=n(83858),v=n(75950),y=n(65173),j=n.n(y),A=n(81e3),f=n(68738),b=n(39652),w=n(17392),_=n(35151),C=n(34624),P=n(70579);function k(e){let{row:t,selected:n,onViewRow:o}=e;const{tableName:a}=t,s=(0,C.f)(),i=(0,P.jsxs)(f.A,{hover:!0,selected:n,children:[(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(A.A,{onClick:o,sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},children:a.split("_").join(" ")})}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(A.A,{children:"Note"})}),(0,P.jsx)(b.A,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,P.jsx)(w.A,{onClick:o,color:s.open?"inherit":"default",children:(0,P.jsx)(_.A,{icon:"majesticons:open"})})})]});return(0,P.jsx)(P.Fragment,{children:i})}k.propTypes={onViewRow:j().func,row:j().object,selected:j().bool};var R=n(74600),M=n(67784),S=n(51787),T=n(60778);function D(e){let{filters:t,onFilters:n,canReset:a,onResetFilters:s}=e;const{t:l}=(0,T.WD)(),r=(0,o.useCallback)((e=>{n("name",e.target.value)}),[n]);return(0,P.jsxs)(R.A,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[(0,P.jsx)(R.A,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:(0,P.jsx)(M.A,{fullWidth:!0,value:t.name,onChange:r,placeholder:l("Search name or number..."),InputProps:{startAdornment:(0,P.jsx)(S.A,{position:"start",children:(0,P.jsx)(_.A,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),a&&(0,P.jsx)(i.A,{color:"error",sx:{flexShrink:0},onClick:s,startIcon:(0,P.jsx)(_.A,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})}function W(e){let{filters:t,onFilters:n,onResetFilters:o,results:a,...s}=e;return(0,P.jsx)(R.A,{spacing:1.5,...s,children:(0,P.jsxs)(A.A,{sx:{typography:"body2"},children:[(0,P.jsx)("strong",{children:a}),(0,P.jsx)(A.A,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]})})}const F={name:""};function B(){var e;const t=(0,v.K2)({defaultOrderBy:"code"}),n=(0,p.rd)(),y=(0,h.C)(),[j,A]=(0,o.useState)(F),f=!(!j.startDate||!j.endDate)&&j.startDate.getTime()>j.endDate.getTime(),b=function(e){var t;let{inputData:n,comparator:o,filters:a,dateError:s}=e;const{status:i,name:l,startDate:r,endDate:d}=a,c=null===(t=n)||void 0===t?void 0:t.map(((e,t,n)=>[e,t]));c.sort(((e,t)=>{const n=o(e[0],t[0]);return 0!==n?n:e[1]-t[1]})),n=null===c||void 0===c?void 0:c.map(((e,t)=>e[0])),l&&(n=n.filter((e=>-1!==e.tableName.toLowerCase().indexOf(l.toLowerCase()))));"all"!==i&&(n=n.filter((e=>e.status===i)));s||r&&d&&(n=n.filter((e=>(0,u.P6)(e.createdAt)>=(0,u.P6)(r)&&(0,u.P6)(e.createdAt)<=(0,u.P6)(d))));return n}({inputData:[{tableName:"cities",documents:[]},{tableName:"surgeries",documents:[]},{tableName:"diseases",documents:[]},{tableName:"insurance_companies",documents:[]},{tableName:"unit_service_types",documents:[]},{tableName:"employee_types",documents:[]},{tableName:"payment_methods",documents:[]},{tableName:"stakeholder_types",documents:[]},{tableName:"measurement_types",documents:[]},{tableName:"hospital_list",documents:[]},{tableName:"Blog_category",documents:[]},{tableName:"deduction_config",documents:[]},{tableName:"specialities",documents:[]},{tableName:"sub_specialities",documents:[]},{tableName:"countries",documents:[]},{tableName:"added_value_tax_GD",documents:[]},{tableName:"medicines",documents:[]},{tableName:"appointment_types",documents:[]},{tableName:"free_subscriptions",documents:[]},{tableName:"symptoms",documents:[]},{tableName:"diets",documents:[]},{tableName:"currencies",documents:[]},{tableName:"analyses",documents:[]},{tableName:"medical_categories",documents:[]},{tableName:"medicines_families",documents:[]},{tableName:"insurance_types",documents:[]},{tableName:"companies",documents:[]},{tableName:"ticket_categories",documents:[]},{tableName:"uploads",documents:[]},{tableName:"family_relation",documents:[]},{tableName:"checklist",documents:[]},{tableName:"product_categories",documents:[]},{tableName:"imaging",documents:[]},{tableName:"doctors",documents:[]}],comparator:(0,v.hz)(t.order,t.orderBy),filters:j,dateError:f}),w=!!j.name,_=!(null!==b&&void 0!==b&&b.length)&&w||!(null!==b&&void 0!==b&&b.length),C=(0,o.useCallback)(((e,n)=>{t.onResetPage(),A((t=>({...t,[e]:n})))}),[t]),R=(0,o.useCallback)((()=>{A(F)}),[]),M=(0,o.useCallback)((e=>{n.push(c.f.superadmin.tables.details(e))}),[n]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(l.A,{maxWidth:"xl",children:[(0,P.jsx)(m.A,{heading:"Tables",links:[{name:"superadmin",href:c.f.superadmin.root},{name:"tables"}],sx:{mb:{xs:3,md:5}}}),(0,P.jsxs)(a.A,{children:[(0,P.jsx)(D,{filters:j,onFilters:C,canReset:w,onResetFilters:R}),w&&(0,P.jsx)(W,{filters:j,onFilters:C,onResetFilters:R,results:null===b||void 0===b?void 0:b.length,sx:{p:2.5,pt:0}}),(0,P.jsx)(d.A,{sx:{position:"relative",overflow:"unset"},children:(0,P.jsx)(x.A,{children:(0,P.jsxs)(s.A,{size:t.dense?"small":"medium",children:[(0,P.jsx)(v.er,{order:t.order,orderBy:t.orderBy,headLabel:[{id:"Table Name",label:"Table Name"},{id:"Notes",label:"Notes"},{id:"",width:190}],rowCount:b.length,numSelected:t.selected.length,onSort:t.onSort}),(0,P.jsxs)(r.A,{children:[null===(e=b.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage))||void 0===e?void 0:e.map(((e,n)=>(0,P.jsx)(k,{row:e,selected:t.selected.includes(e.id),onViewRow:()=>M(e.tableName)},n))),(0,P.jsx)(v.Sm,{notFound:_})]})]})})}),(0,P.jsx)(v.We,{count:null===b||void 0===b?void 0:b.length,page:t.page,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onRowsPerPageChange:t.onChangeRowsPerPage,dense:t.dense,onChangeDense:t.onChangeDense})]})]}),(0,P.jsx)(g.T,{open:y.value,onClose:y.onFalse,title:"Delete",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to delete ",(0,P.jsxs)("strong",{children:[" ",t.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"error",onClick:()=>{y.onFalse()},children:"Delete"})})]})}var L=n(72450),I=n(93141),E=n(65381),O=n(7625),N=n(16236),$=n(67555),U=n(31673);var z=n(87396),Z=n(15596);var q=n(11238),J=n(40360),K=n(29013),X=n(77739),Y=n(90310),H=n(26353),G=n(94814),V=n(1273);function Q(e){let{row:t,selected:n,onEditRow:o,onSelectRow:a,onInactivate:s,onActivate:l}=e;const{code:r,sequence_number:d,name_english:c,name_arabic:p,state:x,country:m,status:v,created_at:y,user_creation:j,ip_address_user_creation:k,updated_at:R,user_modification:M,ip_address_user_modification:S,modifications_nums:T}=t,D=(0,h.C)(),W=(0,C.f)(),F=(0,C.f)(),B=(0,P.jsxs)(f.A,{hover:!0,selected:n,children:[(0,P.jsx)(b.A,{padding:"checkbox",children:(0,P.jsx)(V.A,{checked:n,onClick:a})}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(A.A,{children:r})}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(A.A,{children:d})}),(0,P.jsx)(b.A,{align:"center",children:c}),(0,P.jsx)(b.A,{align:"center",children:p}),(0,P.jsx)(b.A,{align:"center",children:x}),(0,P.jsx)(b.A,{align:"center",children:null===m||void 0===m?void 0:m.name_english}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(N.A,{variant:"soft",color:("active"===v?"success":"inactive"===v&&"error")||"default",children:v})}),(0,P.jsx)(b.A,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,P.jsx)(w.A,{color:W.open?"inherit":"default",onClick:W.onOpen,children:(0,P.jsx)(_.A,{icon:"eva:more-vertical-fill"})})})]});return(0,P.jsxs)(P.Fragment,{children:[B,(0,P.jsxs)(C.A,{open:W.open,onClose:W.onClose,arrow:"right-top",sx:{width:140},children:["active"===v?(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{s(),W.onClose()},sx:{color:"error.main"},children:[(0,P.jsx)(_.A,{icon:"ic:baseline-pause"}),"Inactivate"]}):(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{l(),W.onClose()},sx:{color:"success.main"},children:[(0,P.jsx)(_.A,{icon:"bi:play-fill"}),"activate"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{o(),W.onClose()},children:[(0,P.jsx)(_.A,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:F.onOpen,children:[(0,P.jsx)(_.A,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,P.jsxs)(C.A,{open:F.open,onClose:F.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,P.jsx)(A.A,{sx:{fontWeight:600},children:"Creation Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(y,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(y,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===j||void 0===j?void 0:j.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:k}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(R,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(R,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===M||void 0===M?void 0:M.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:S}),(0,P.jsxs)(A.A,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",T]})]}),(0,P.jsx)(g.T,{open:D.value,onClose:D.onFalse,title:"Delete",content:"Are you sure want to delete?",action:(0,P.jsx)(i.A,{variant:"contained",color:"error",onClick:s,children:"Delete"})})]})}const ee=[{value:"all",label:"all"},{value:"active",label:"active"},{value:"inactive",label:"inactive"}],te=[{id:"code",label:"code"},{id:"sequence_number",label:"sequence"},{id:"name_english",label:"name"},{id:"name_arabic",label:"name arabic"},{id:"state",label:"state"},{id:"country",label:"country"},{id:"status",label:"status"},{id:"",width:88}],ne={name:"",status:"active"};function oe(){const e=(0,v.K2)({defaultOrderBy:"code"}),t=(0,o.useRef)(),n=(0,p.rd)(),u=(0,h.C)(),y=(0,h.C)(),{tableData:j,loading:A,refetch:f}=(0,O.lhV)(),[b,C]=(0,o.useState)(ne),k=(0,p.ok)().get("upload_record");(0,o.useEffect)((()=>{k&&C((e=>({...e,name:k})))}),[k]);const R=!(!b.startDate||!b.endDate)&&b.startDate.getTime()>b.endDate.getTime(),M=function(e){let{inputData:t,comparator:n,filters:o,dateError:a}=e;const{status:s,name:i}=o,l=t.map(((e,t,n)=>[e,t]));l.sort(((e,t)=>{const o=n(e[0],t[0]);return 0!==o?o:e[1]-t[1]})),t=l.map(((e,t)=>e[0])),i&&(t=t.filter((e=>{var t,n,o,a,s;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(n=e.country)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(o=e.country)||void 0===o?void 0:o.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(a=e.country)||void 0===a?void 0:a.name_arabic)&&-1!==(null===e||void 0===e||null===(s=e.country)||void 0===s?void 0:s.name_arabic.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===i||(null===e||void 0===e?void 0:e.upload_record)===i||JSON.stringify(e.code)===i})));"all"!==s&&(t=t.filter((e=>e.status===s)));return t}({inputData:j,comparator:(0,v.hz)(e.order,e.orderBy),filters:b,dateError:R}),S=M.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),T=!(null===b||void 0===b||!b.name)||"active"!==b.status,D=!M.length&&T||!M.length,W=(0,I.useReactToPrint)({content:()=>t.current}),F=(0,o.useCallback)(((t,n)=>{e.onResetPage(),C((e=>({...e,[t]:n})))}),[e]),B=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.cities.one(t)}/updatestatus`,{status:"active"}),f(),e.onUpdatePageDeleteRow(S.length)}),[S.length,e,f]),H=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.cities.one(t)}/updatestatus`,{status:"inactive"}),f(),e.onUpdatePageDeleteRow(S.length)}),[S.length,e,f]),G=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.cities.all}/updatemanystatus`,{status:"active",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:S.length,totalRowsFiltered:M.length})}),[M.length,S.length,e,j,f]),V=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.cities.all}/updatemanystatus`,{status:"inactive",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:S.length,totalRowsFiltered:M.length})}),[M.length,S.length,e,j,f]),oe=(0,o.useCallback)((e=>{n.push(c.f.superadmin.tables.cities.edit(e))}),[n]),ae=(0,o.useCallback)((()=>{C(ne)}),[]),se=(0,o.useCallback)(((e,t)=>{F("status",t)}),[F]);return A?(0,P.jsx)($.x,{}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(l.A,{maxWidth:"xl",children:[(0,P.jsx)(m.A,{heading:"Cities",links:[{name:"dashboard",href:c.f.superadmin.root},{name:"Tables",href:c.f.superadmin.tables.list},{name:"cities"}],action:(0,P.jsx)(i.A,{component:E.W,href:c.f.superadmin.tables.cities.new,variant:"contained",startIcon:(0,P.jsx)(_.A,{icon:"mingcute:add-line"}),children:"New City"}),sx:{mb:{xs:3,md:5}}}),(0,P.jsxs)(a.A,{children:[(0,P.jsx)(K.A,{value:b.status,onChange:se,sx:{px:2.5,boxShadow:e=>`inset 0 -2px 0 0 ${(0,Y.X4)(e.palette.grey[500],.08)}`},children:ee.map(((e,t)=>(0,P.jsx)(J.A,{iconPosition:"end",value:e.value,label:e.label,icon:(0,P.jsxs)(N.A,{variant:"all"===e.value||e.value===b.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&j.length,"active"===e.value&&j.filter((e=>"active"===e.status)).length,"inactive"===e.value&&j.filter((e=>"inactive"===e.status)).length]})},t)))}),(0,P.jsx)(z.A,{onPrint:W,filters:b,onFilters:F,onDownload:()=>{const e=M.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.Wp.book_new(),n=q.Wp.json_to_sheet(e);q.Wp.book_append_sheet(t,n,"Sheet 1");const o=q.M9(t,{bookType:"xlsx",type:"array"}),a=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,L.saveAs)(a,"citiesTable.xlsx")},canReset:T,onResetFilters:ae}),T&&(0,P.jsx)(Z.A,{filters:b,onFilters:F,onResetFilters:ae,results:M.length,sx:{p:2.5,pt:0}}),(0,P.jsxs)(d.A,{children:[(0,P.jsx)(v.Uv,{numSelected:e.selected.length,rowCount:M.length,onSelectAllRows:t=>e.onSelectAllRows(t,M.map(((e,t)=>e._id))),action:(0,P.jsx)(P.Fragment,{children:M.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?(0,P.jsx)(X.A,{title:"Activate all",children:(0,P.jsx)(w.A,{color:"primary",onClick:u.onTrue,children:(0,P.jsx)(_.A,{icon:"codicon:run-all"})})}):(0,P.jsx)(X.A,{title:"Inactivate all",children:(0,P.jsx)(w.A,{color:"error",onClick:y.onTrue,children:(0,P.jsx)(_.A,{icon:"iconoir:pause-solid"})})})}),color:M.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,P.jsx)(x.A,{children:(0,P.jsxs)(s.A,{ref:t,size:e.dense?"small":"medium",children:[(0,P.jsx)(v.er,{order:e.order,orderBy:e.orderBy,headLabel:te,rowCount:M.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,M.map(((e,t)=>e._id)))}),(0,P.jsxs)(r.A,{children:[M.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map(((t,n)=>(0,P.jsx)(Q,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onActivate:()=>B(t._id),onInactivate:()=>H(t._id),onEditRow:()=>oe(t._id)},n))),(0,P.jsx)(v.Sm,{notFound:D})]})]})})]}),(0,P.jsx)(v.We,{count:M.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,P.jsx)(g.T,{open:y.value,onClose:y.onFalse,title:"Inactivate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Inactivate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"error",onClick:()=>{V(),y.onFalse()},children:"Inactivate"})}),(0,P.jsx)(g.T,{open:u.value,onClose:u.onFalse,title:"Activate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Activate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"primary",onClick:()=>{G(),u.onFalse()},children:"Activate"})})]})}function ae(e){let{row:t,selected:n,onEditRow:o,onSelectRow:a}=e;const{_id:s,type:i,mustUpload:l,uploaded:r,created_at:d,user_creation:h,ip_address_user_creation:x,updated_at:g,user_modification:m,ip_address_user_modification:v,modifications_nums:y}=t,j=(0,p.rd)(),k=(0,C.f)(),R=(0,C.f)(),M=(0,P.jsxs)(f.A,{hover:!0,selected:n,children:[(0,P.jsx)(b.A,{align:"center",children:i}),(0,P.jsx)(b.A,{align:"center",children:l}),(0,P.jsx)(b.A,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>{"companies"===i?j.push(`${c.f.superadmin.tables.companies.root}?upload_record=${s}`):"countries"===i?j.push(`${c.f.superadmin.tables.countries.root}?upload_record=${s}`):"cities"===i?j.push(`${c.f.superadmin.tables.cities.root}?upload_record=${s}`):"analyses"===i?j.push(`${c.f.superadmin.tables.analysis.root}?upload_record=${s}`):"currency"===i?j.push(`${c.f.superadmin.tables.currency.root}?upload_record=${s}`):"diets"===i?j.push(`${c.f.superadmin.tables.diets.root}?upload_record=${s}`):"hospitals"===i?j.push(`${c.f.superadmin.tables.hospitallist.root}?upload_record=${s}`):"insurance_companies"===i?j.push(`${c.f.superadmin.tables.insurancecomapnies.root}?upload_record=${s}`):"measurment_types"===i?j.push(`${c.f.superadmin.tables.measurementtypes.root}?upload_record=${s}`):"medCategories"===i?j.push(`${c.f.superadmin.tables.medcategories.root}?upload_record=${s}`):"medFamilies"===i?j.push(`${c.f.superadmin.tables.medfamilies.root}?upload_record=${s}`):"medicines"===i?j.push(`${c.f.superadmin.tables.medicines.root}?upload_record=${s}`):"specialities"===i?j.push(`${c.f.superadmin.tables.specialities.root}?upload_record=${s}`):"subspecialities"===i?j.push(`${c.f.superadmin.tables.subspecialities.root}?upload_record=${s}`):"surgeries"===i?j.push(`${c.f.superadmin.tables.surgeries.root}?upload_record=${s}`):"symptoms"===i&&j.push(`${c.f.superadmin.tables.symptoms.root}?upload_record=${s}`)},children:r}),(0,P.jsx)(b.A,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,P.jsx)(w.A,{color:k.open?"inherit":"default",onClick:k.onOpen,children:(0,P.jsx)(_.A,{icon:"eva:more-vertical-fill"})})})]});return(0,P.jsxs)(P.Fragment,{children:[M,(0,P.jsx)(C.A,{open:k.open,onClose:k.onClose,arrow:"right-top",sx:{width:140},children:(0,P.jsxs)(G.A,{lang:"ar",onClick:R.onOpen,children:[(0,P.jsx)(_.A,{icon:"carbon:data-quality-definition"}),"DDL"]})}),(0,P.jsxs)(C.A,{open:R.open,onClose:R.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,P.jsx)(A.A,{sx:{fontWeight:600},children:"Creation Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(d,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(d,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===h||void 0===h?void 0:h.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:x}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(g,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(g,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===m||void 0===m?void 0:m.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:v}),(0,P.jsxs)(A.A,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",y]})]})]})}const se=[{id:"type",label:"type"},{id:"mustUpload",label:"must upload"},{id:"uploaded",label:"uploaded"},{id:"",width:88}],ie={name:""};function le(){const e=(0,v.K2)({defaultOrderBy:"code"}),t=(0,o.useRef)(),n=(0,p.rd)(),{uploadsData:i,loading:h}=(0,O.MYc)(),[u,g]=(0,o.useState)(ie),y=!(!u.startDate||!u.endDate)&&u.startDate.getTime()>u.endDate.getTime(),j=function(e){let{inputData:t,comparator:n,filters:o,dateError:a}=e;const{name:s}=o,i=t.map(((e,t,n)=>[e,t]));i.sort(((e,t)=>{const o=n(e[0],t[0]);return 0!==o?o:e[1]-t[1]})),t=i.map(((e,t)=>e[0])),s&&(t=t.filter((e=>{var t;return(null===e||void 0===e?void 0:e.type)&&-1!==(null===e||void 0===e||null===(t=e.type)||void 0===t?void 0:t.toLowerCase().indexOf(s.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===s||JSON.stringify(e.code)===s})));return t}({inputData:i,comparator:(0,v.hz)(e.order,e.orderBy),filters:u,dateError:y}),A=!(null===u||void 0===u||!u.name),f=!j.length&&A||!j.length,b=(0,I.useReactToPrint)({content:()=>t.current}),w=(0,o.useCallback)(((t,n)=>{e.onResetPage(),g((e=>({...e,[t]:n})))}),[e]),_=(0,o.useCallback)((e=>{n.push(c.f.superadmin.tables.symptoms.edit(e))}),[n]),C=(0,o.useCallback)((()=>{g(ie)}),[]);return h?(0,P.jsx)($.x,{}):(0,P.jsxs)(l.A,{maxWidth:"xl",children:[(0,P.jsx)(m.A,{heading:"uploads",links:[{name:"dashboard",href:c.f.superadmin.root},{name:"Tables",href:c.f.superadmin.tables.list},{name:"uploads"}],sx:{mb:{xs:3,md:5}}}),(0,P.jsxs)(a.A,{children:[(0,P.jsx)(z.A,{onPrint:b,filters:u,onFilters:w,onDownload:()=>{const e=j.reduce(((e,t)=>(e.push({code:t.code,name:t.name_english,description:t.description}),e)),[]),t=q.Wp.book_new(),n=q.Wp.json_to_sheet(e);q.Wp.book_append_sheet(t,n,"Sheet 1");const o=q.M9(t,{bookType:"xlsx",type:"array"}),a=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,L.saveAs)(a,"symptomsTable.xlsx")},canReset:A,onResetFilters:C}),A&&(0,P.jsx)(Z.A,{filters:u,onFilters:w,onResetFilters:C,results:j.length,sx:{p:2.5,pt:0}}),(0,P.jsx)(d.A,{children:(0,P.jsx)(x.A,{children:(0,P.jsxs)(s.A,{ref:t,size:e.dense?"small":"medium",children:[(0,P.jsx)(v.er,{order:e.order,orderBy:e.orderBy,headLabel:se,rowCount:j.length,numSelected:e.selected.length,onSort:e.onSort}),(0,P.jsxs)(r.A,{children:[j.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map(((t,n)=>(0,P.jsx)(ae,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onEditRow:()=>_(t._id)},n))),(0,P.jsx)(v.Sm,{notFound:f})]})]})})}),(0,P.jsx)(v.We,{count:j.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]})}function re(e){let{row:t,selected:n,onEditRow:o}=e;const{code:a,name_english:s,name_arabic:i,created_at:l,user_creation:r,ip_address_user_creation:d,updated_at:c,user_modification:p,ip_address_user_modification:h,modifications_nums:x}=t,g=(0,C.f)(),m=(0,C.f)(),v=(0,P.jsxs)(f.A,{hover:!0,selected:n,children:[(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(A.A,{children:a})}),(0,P.jsx)(b.A,{align:"center",children:s}),(0,P.jsx)(b.A,{align:"center",children:i}),(0,P.jsx)(b.A,{align:"center",sx:{px:1,whiteSpace:"nowrap"},children:(0,P.jsx)(w.A,{color:m.open?"inherit":"default",onClick:m.onOpen,children:(0,P.jsx)(_.A,{icon:"eva:more-vertical-fill"})})})]});return(0,P.jsxs)(P.Fragment,{children:[v,(0,P.jsxs)(C.A,{open:m.open,onClose:m.onClose,arrow:"right-top",sx:{width:140},children:[(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{o(),m.onClose()},children:[(0,P.jsx)(_.A,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:g.onOpen,children:[(0,P.jsx)(_.A,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,P.jsxs)(C.A,{open:g.open,onClose:g.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,P.jsx)(A.A,{sx:{fontWeight:600},children:"Creation Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(l,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(l,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===r||void 0===r?void 0:r.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:d}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(c,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(c,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===p||void 0===p?void 0:p.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:h}),(0,P.jsxs)(A.A,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",x]})]})]})}const de=[{id:"code",label:"Code"},{id:"name_english",label:"name english"},{id:"name_arabic",label:"arabic name"},{id:"",label:"Options"}],ce={name:""};function pe(){var e,t;const n=(0,v.K2)({defaultOrderBy:"code"}),h=(0,o.useRef)(),u=(0,p.rd)(),{Data:g,loading:y}=(0,O.tYD)(),[j,A]=(0,o.useState)(ce),f=(0,p.ok)().get("upload_record");(0,o.useEffect)((()=>{f&&A((e=>({...e,name:f})))}),[f]);const b=!(!j.startDate||!j.endDate)&&j.startDate.getTime()>j.endDate.getTime(),w=function(e){var t;let{inputData:n,comparator:o,filters:a,dateError:s}=e;const{status:i,name:l}=a,r=null===(t=n)||void 0===t?void 0:t.map(((e,t,n)=>[e,t]));var d,c;null===r||void 0===r||r.sort(((e,t)=>{const n=o(e[0],t[0]);return 0!==n?n:e[1]-t[1]})),n=null===r||void 0===r?void 0:r.map(((e,t)=>e[0])),l&&(n=null===(d=n)||void 0===d?void 0:d.filter((e=>{var t;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===l||(null===e||void 0===e?void 0:e.upload_record)===l||JSON.stringify(e.code)===l})));"all"!==i&&(n=null===(c=n)||void 0===c?void 0:c.filter((e=>e.status===i)));return n}({inputData:g,comparator:(0,v.hz)(n.order,n.orderBy),filters:j,dateError:b}),C=!(null===j||void 0===j||!j.name)||"active"!==j.status,k=!(null!==w&&void 0!==w&&w.length)&&C||!(null!==w&&void 0!==w&&w.length),R=(0,I.useReactToPrint)({content:()=>h.current}),M=(0,o.useCallback)(((e,t)=>{n.onResetPage(),A((n=>({...n,[e]:t})))}),[n]),S=(0,o.useCallback)((e=>{u.push(c.f.superadmin.tables.BlogCategory.edit(e))}),[u]),T=(0,o.useCallback)((()=>{A(ce)}),[]);return y?(0,P.jsx)($.x,{}):(0,P.jsxs)(l.A,{maxWidth:"xl",children:[(0,P.jsx)(m.A,{heading:"Blog category",links:[{name:"dashboard",href:c.f.superadmin.root},{name:"Tables",href:c.f.superadmin.tables.list},{name:"Blog category"}],action:(0,P.jsx)(i.A,{component:E.W,href:c.f.superadmin.tables.BlogCategory.new,variant:"contained",startIcon:(0,P.jsx)(_.A,{icon:"mingcute:add-line"}),children:"New Blog category"}),sx:{mb:{xs:3,md:5}}}),(0,P.jsxs)(a.A,{children:[(0,P.jsx)(z.A,{onPrint:R,filters:j,onFilters:M,onDownload:()=>{const e=w.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.Wp.book_new(),n=q.Wp.json_to_sheet(e);q.Wp.book_append_sheet(t,n,"Sheet 1");const o=q.M9(t,{bookType:"xlsx",type:"array"}),a=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,L.saveAs)(a,"HospitalsTable.xlsx")},canReset:C,onResetFilters:T}),(0,P.jsx)(d.A,{children:(0,P.jsx)(x.A,{children:(0,P.jsxs)(s.A,{ref:h,size:n.dense?"small":"medium",children:[(0,P.jsx)(v.er,{order:n.order,orderBy:n.orderBy,headLabel:de,rowCount:null===w||void 0===w?void 0:w.length,numSelected:null===(e=n.selected)||void 0===e?void 0:e.length}),(0,P.jsxs)(r.A,{children:[null===w||void 0===w||null===(t=w.slice(n.page*n.rowsPerPage,n.page*n.rowsPerPage+n.rowsPerPage))||void 0===t?void 0:t.map(((e,t)=>(0,P.jsx)(re,{row:e,selected:n.selected.includes(e._id),onSelectRow:()=>n.onSelectRow(e._id),onEditRow:()=>S(e._id)},t))),(0,P.jsx)(v.Sm,{notFound:k})]})]})})}),(0,P.jsx)(v.We,{count:null===w||void 0===w?void 0:w.length,page:n.page,rowsPerPage:n.rowsPerPage,onPageChange:n.onChangePage,onRowsPerPageChange:n.onChangeRowsPerPage,dense:n.dense,onChangeDense:n.onChangeDense})]})]})}function he(e){let{row:t,selected:n,onEditRow:o}=e;const{code:a,title:s,speciality:i,description:l,created_at:r,user_creation:d,ip_address_user_creation:c,updated_at:p,user_modification:h,ip_address_user_modification:x,modifications_nums:g}=t,m=(0,C.f)(),v=(0,C.f)(),y=(0,P.jsxs)(f.A,{hover:!0,selected:n,children:[(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(A.A,{children:a})}),(0,P.jsx)(b.A,{align:"center",children:s}),(0,P.jsx)(b.A,{align:"center",children:null===i||void 0===i?void 0:i.name_english}),(0,P.jsx)(b.A,{align:"center",children:l}),(0,P.jsx)(b.A,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,P.jsx)(w.A,{color:m.open?"inherit":"default",onClick:m.onOpen,children:(0,P.jsx)(_.A,{icon:"eva:more-vertical-fill"})})})]});return(0,P.jsxs)(P.Fragment,{children:[y,(0,P.jsxs)(C.A,{open:m.open,onClose:m.onClose,arrow:"right-top",sx:{width:140},children:[(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{o(),m.onClose()},children:[(0,P.jsx)(_.A,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:v.onOpen,children:[(0,P.jsx)(_.A,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,P.jsxs)(C.A,{open:v.open,onClose:v.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,P.jsx)(A.A,{sx:{fontWeight:600},children:"Creation Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(r,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(r,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===d||void 0===d?void 0:d.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:c}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(p,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(p,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===h||void 0===h?void 0:h.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:x}),(0,P.jsxs)(A.A,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",g]})]})]})}const ue=[{id:"code",label:"Code"},{id:"title",label:"title"},{id:"speciality",label:"speciality"},{id:"description",label:"description"},{id:"",width:88}],xe={name:""};function ge(){const e=(0,v.K2)({defaultOrderBy:"code"}),t=(0,o.useRef)(),n=(0,p.rd)(),{CheckListData:h,loading:u}=(0,O.XNk)(),[g,y]=(0,o.useState)(xe),j=!(!g.startDate||!g.endDate)&&g.startDate.getTime()>g.endDate.getTime(),A=function(e){let{inputData:t,comparator:n,filters:o,dateError:a}=e;const{name:s}=o,i=t.map(((e,t,n)=>[e,t]));i.sort(((e,t)=>{const o=n(e[0],t[0]);return 0!==o?o:e[1]-t[1]})),t=i.map(((e,t)=>e[0])),s&&(t=t.filter((e=>{var t;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(s.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(s.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===s||JSON.stringify(e.code)===s})));return t}({inputData:h,comparator:(0,v.hz)(e.order,e.orderBy),filters:g,dateError:j}),f=!(null===g||void 0===g||!g.name),b=!A.length&&f||!A.length,w=(0,I.useReactToPrint)({content:()=>t.current}),C=(0,o.useCallback)(((t,n)=>{e.onResetPage(),y((e=>({...e,[t]:n})))}),[e]),k=(0,o.useCallback)((e=>{n.push(c.f.superadmin.tables.checklist.edit(e))}),[n]),R=(0,o.useCallback)((()=>{y(xe)}),[]);return u?(0,P.jsx)($.x,{}):(0,P.jsxs)(l.A,{maxWidth:"xl",children:[(0,P.jsx)(m.A,{heading:"checklist",links:[{name:"dashboard",href:c.f.superadmin.root},{name:"Tables",href:c.f.superadmin.tables.list},{name:"checklist"}],action:(0,P.jsx)(i.A,{component:E.W,href:c.f.superadmin.tables.checklist.new,variant:"contained",startIcon:(0,P.jsx)(_.A,{icon:"mingcute:add-line"}),children:"New checklist"}),sx:{mb:{xs:3,md:5}}}),(0,P.jsxs)(a.A,{children:[(0,P.jsx)(z.A,{onPrint:w,filters:g,onFilters:C,onDownload:()=>{const e=A.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.Wp.book_new(),n=q.Wp.json_to_sheet(e);q.Wp.book_append_sheet(t,n,"Sheet 1");const o=q.M9(t,{bookType:"xlsx",type:"array"}),a=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,L.saveAs)(a,"checklist.xlsx")},canReset:f,onResetFilters:R}),f&&(0,P.jsx)(Z.A,{filters:g,onFilters:C,onResetFilters:R,results:A.length,sx:{p:2.5,pt:0}}),(0,P.jsx)(d.A,{children:(0,P.jsx)(x.A,{children:(0,P.jsxs)(s.A,{ref:t,size:e.dense?"small":"medium",children:[(0,P.jsx)(v.er,{order:e.order,orderBy:e.orderBy,headLabel:ue,rowCount:A.length,numSelected:e.selected.length,onSort:e.onSort}),(0,P.jsxs)(r.A,{children:[A.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map(((t,n)=>(0,P.jsx)(he,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onEditRow:()=>k(t._id)},n))),(0,P.jsx)(v.Sm,{notFound:b})]})]})})}),(0,P.jsx)(v.We,{count:A.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]})}function me(e){let{row:t,selected:n,onEditRow:o,onSelectRow:a,onInactivate:s,onActivate:i,filters:l,setFilters:r}=e;const{code:d,name_english:c,name_arabic:p,country:h,city:x,unit_service_type:g,sector:m,type_of_specialty_1:v,status:y,created_at:j,user_creation:k,ip_address_user_creation:R,updated_at:M,user_modification:S,ip_address_user_modification:T,modifications_nums:D}=t,W=(0,C.f)(),F=(0,C.f)(),B=(0,P.jsxs)(f.A,{hover:!0,selected:n,children:[(0,P.jsx)(b.A,{padding:"checkbox",children:(0,P.jsx)(V.A,{checked:n,onClick:a})}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(A.A,{children:d})}),(0,P.jsx)(b.A,{align:"center",children:c}),(0,P.jsx)(b.A,{align:"center",children:p}),(0,P.jsx)(b.A,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r({...l,name:h.name_english}),children:null===h||void 0===h?void 0:h.name_english}),(0,P.jsx)(b.A,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r({...l,name:x.name_english}),children:null===x||void 0===x?void 0:x.name_english}),(0,P.jsx)(b.A,{align:"center",children:g}),(0,P.jsx)(b.A,{align:"center",children:m}),(0,P.jsx)(b.A,{align:"center",children:v}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(N.A,{variant:"soft",color:("active"===y?"success":"inactive"===y&&"error")||"default",children:y})}),(0,P.jsx)(b.A,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,P.jsx)(w.A,{color:F.open?"inherit":"default",onClick:F.onOpen,children:(0,P.jsx)(_.A,{icon:"eva:more-vertical-fill"})})})]});return(0,P.jsxs)(P.Fragment,{children:[B,(0,P.jsxs)(C.A,{open:F.open,onClose:F.onClose,arrow:"right-top",sx:{width:140},children:["active"===y?(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{s(),F.onClose()},sx:{color:"error.main"},children:[(0,P.jsx)(_.A,{icon:"ic:baseline-pause"}),"Inactivate"]}):(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{i(),F.onClose()},sx:{color:"success.main"},children:[(0,P.jsx)(_.A,{icon:"bi:play-fill"}),"activate"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{o(),F.onClose()},children:[(0,P.jsx)(_.A,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:W.onOpen,children:[(0,P.jsx)(_.A,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,P.jsxs)(C.A,{open:W.open,onClose:W.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,P.jsx)(A.A,{sx:{fontWeight:600},children:"Creation Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(j,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(j,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===k||void 0===k?void 0:k.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:R}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(M,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(M,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===S||void 0===S?void 0:S.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:T}),(0,P.jsxs)(A.A,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",D]})]})]})}const ve=[{value:"active",label:"active"},{value:"inactive",label:"inactive"}],ye=[{id:"code",label:"Code"},{id:"name_english",label:"name"},{id:"name_arabic",label:"arabic name"},{id:"country",label:"Country"},{id:"city",label:"city"},{id:"unit_service_type",label:"unit service type"},{id:"sector",label:"sector"},{id:"type_of_specialty_1",label:"specialty"},{id:"status",label:"Status"},{id:"",width:88}],je={name:"",status:"active"};function Ae(){const e=(0,v.K2)({defaultOrderBy:"code"}),t=(0,o.useRef)(),n=(0,p.rd)(),u=(0,h.C)(),y=(0,h.C)(),{hospitalsData:j,loading:A,refetch:f}=(0,O.RJl)(),[b,C]=(0,o.useState)(je),k=(0,p.ok)().get("upload_record");(0,o.useEffect)((()=>{k&&C((e=>({...e,name:k})))}),[k]);const R=!(!b.startDate||!b.endDate)&&b.startDate.getTime()>b.endDate.getTime(),M=function(e){let{inputData:t,comparator:n,filters:o,dateError:a}=e;const{status:s,name:i}=o,l=t.map(((e,t,n)=>[e,t]));l.sort(((e,t)=>{const o=n(e[0],t[0]);return 0!==o?o:e[1]-t[1]})),t=l.map(((e,t)=>e[0])),i&&(t=t.filter((e=>{var t,n,o,a,s,l,r,d,c;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(n=e.country)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(o=e.country)||void 0===o?void 0:o.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(a=e.country)||void 0===a?void 0:a.name_arabic)&&-1!==(null===e||void 0===e||null===(s=e.country)||void 0===s?void 0:s.name_arabic.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(l=e.city)||void 0===l?void 0:l.name_english)&&-1!==(null===e||void 0===e||null===(r=e.city)||void 0===r?void 0:r.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(d=e.city)||void 0===d?void 0:d.name_arabic)&&-1!==(null===e||void 0===e||null===(c=e.city)||void 0===c?void 0:c.name_arabic.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===i||(null===e||void 0===e?void 0:e.upload_record)===i||JSON.stringify(e.code)===i})));"all"!==s&&(t=t.filter((e=>e.status===s)));return t}({inputData:j,comparator:(0,v.hz)(e.order,e.orderBy),filters:b,dateError:R}),S=M.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),T=!(null===b||void 0===b||!b.name)||"active"!==b.status,D=!M.length&&T||!M.length,W=(0,I.useReactToPrint)({content:()=>t.current}),F=(0,o.useCallback)(((t,n)=>{e.onResetPage(),C((e=>({...e,[t]:n})))}),[e]),B=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.hospitals.one(t)}/updatestatus`,{status:"active"}),f(),e.onUpdatePageDeleteRow(S.length)}),[S.length,e,f]),H=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.hospitals.one(t)}/updatestatus`,{status:"inactive"}),f(),e.onUpdatePageDeleteRow(S.length)}),[S.length,e,f]),G=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.hospitals.all}/updatestatus`,{status:"active",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:S.length,totalRowsFiltered:M.length})}),[M.length,S.length,e,j,f]),V=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.hospitals.all}/updatestatus`,{status:"inactive",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:S.length,totalRowsFiltered:M.length})}),[M.length,S.length,e,j,f]),Q=(0,o.useCallback)((e=>{n.push(c.f.superadmin.tables.hospitallist.edit(e))}),[n]),ee=(0,o.useCallback)((()=>{C(je)}),[]),te=(0,o.useCallback)(((e,t)=>{F("status",t)}),[F]);return A?(0,P.jsx)($.x,{}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(l.A,{maxWidth:"xl",children:[(0,P.jsx)(m.A,{heading:"Hospital List",links:[{name:"dashboard",href:c.f.superadmin.root},{name:"Tables",href:c.f.superadmin.tables.list},{name:"Hospital List"}],action:(0,P.jsx)(i.A,{component:E.W,href:c.f.superadmin.tables.hospitallist.new,variant:"contained",startIcon:(0,P.jsx)(_.A,{icon:"mingcute:add-line"}),children:"New Hospital"}),sx:{mb:{xs:3,md:5}}}),(0,P.jsxs)(a.A,{children:[(0,P.jsx)(K.A,{value:b.status,onChange:te,sx:{px:2.5,boxShadow:e=>`inset 0 -2px 0 0 ${(0,Y.X4)(e.palette.grey[500],.08)}`},children:ve.map(((e,t)=>(0,P.jsx)(J.A,{iconPosition:"end",value:e.value,label:e.label,icon:(0,P.jsxs)(N.A,{variant:"all"===e.value||e.value===b.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&j.length,"active"===e.value&&j.filter((e=>"active"===e.status)).length,"inactive"===e.value&&j.filter((e=>"inactive"===e.status)).length]})},t)))}),(0,P.jsx)(z.A,{onPrint:W,filters:b,onFilters:F,onDownload:()=>{const e=M.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.Wp.book_new(),n=q.Wp.json_to_sheet(e);q.Wp.book_append_sheet(t,n,"Sheet 1");const o=q.M9(t,{bookType:"xlsx",type:"array"}),a=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,L.saveAs)(a,"HospitalsTable.xlsx")},canReset:T,onResetFilters:ee}),T&&(0,P.jsx)(Z.A,{filters:b,onFilters:F,onResetFilters:ee,results:M.length,sx:{p:2.5,pt:0}}),(0,P.jsxs)(d.A,{children:[(0,P.jsx)(v.Uv,{numSelected:e.selected.length,rowCount:M.length,onSelectAllRows:t=>e.onSelectAllRows(t,M.map(((e,t)=>e._id))),action:(0,P.jsx)(P.Fragment,{children:M.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?(0,P.jsx)(X.A,{title:"Activate all",children:(0,P.jsx)(w.A,{color:"primary",onClick:u.onTrue,children:(0,P.jsx)(_.A,{icon:"codicon:run-all"})})}):(0,P.jsx)(X.A,{title:"Inactivate all",children:(0,P.jsx)(w.A,{color:"error",onClick:y.onTrue,children:(0,P.jsx)(_.A,{icon:"iconoir:pause-solid"})})})}),color:M.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,P.jsx)(x.A,{children:(0,P.jsxs)(s.A,{ref:t,size:e.dense?"small":"medium",children:[(0,P.jsx)(v.er,{order:e.order,orderBy:e.orderBy,headLabel:ye,rowCount:M.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,M.map(((e,t)=>e._id)))}),(0,P.jsxs)(r.A,{children:[M.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map(((t,n)=>(0,P.jsx)(me,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onActivate:()=>B(t._id),onInactivate:()=>H(t._id),onEditRow:()=>Q(t._id)},n))),(0,P.jsx)(v.Sm,{notFound:D})]})]})})]}),(0,P.jsx)(v.We,{count:M.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,P.jsx)(g.T,{open:y.value,onClose:y.onFalse,title:"Inactivate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Inactivate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"error",onClick:()=>{V(),y.onFalse()},children:"Inactivate"})}),(0,P.jsx)(g.T,{open:u.value,onClose:u.onFalse,title:"Activate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Activate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"primary",onClick:()=>{G(),u.onFalse()},children:"Activate"})})]})}function fe(e){let{row:t,selected:n,onEditRow:o,onSelectRow:a,onInactivate:s,onActivate:l,filters:r,setFilters:d}=e;const{code:c,name_english:p,name_arabic:x,unit_service:m,department:v,status:y,created_at:j,user_creation:k,ip_address_user_creation:R,updated_at:M,user_modification:S,ip_address_user_modification:T,modifications_nums:D}=t,W=(0,h.C)(),F=(0,C.f)(),B=(0,C.f)(),L=(0,P.jsxs)(f.A,{hover:!0,selected:n,children:[(0,P.jsx)(b.A,{padding:"checkbox",children:(0,P.jsx)(V.A,{checked:n,onClick:a})}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(A.A,{children:c})}),(0,P.jsx)(b.A,{align:"center",children:p}),(0,P.jsx)(b.A,{align:"center",children:x}),(0,P.jsx)(b.A,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>d({...r,name:m.name_english}),children:null===m||void 0===m?void 0:m.name_english}),(0,P.jsx)(b.A,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>d({...r,name:v.name_english}),children:null===v||void 0===v?void 0:v.name_english}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(N.A,{variant:"soft",color:("active"===y?"success":"inactive"===y&&"error")||"default",children:y})}),(0,P.jsx)(b.A,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,P.jsx)(w.A,{color:F.open?"inherit":"default",onClick:F.onOpen,children:(0,P.jsx)(_.A,{icon:"eva:more-vertical-fill"})})})]});return(0,P.jsxs)(P.Fragment,{children:[L,(0,P.jsxs)(C.A,{open:F.open,onClose:F.onClose,arrow:"right-top",sx:{width:140},children:["active"===y?(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{s(),F.onClose()},sx:{color:"error.main"},children:[(0,P.jsx)(_.A,{icon:"ic:baseline-pause"}),"Inactivate"]}):(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{l(),F.onClose()},sx:{color:"success.main"},children:[(0,P.jsx)(_.A,{icon:"bi:play-fill"}),"activate"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{o(),F.onClose()},children:[(0,P.jsx)(_.A,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:B.onOpen,children:[(0,P.jsx)(_.A,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,P.jsxs)(C.A,{open:B.open,onClose:B.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,P.jsx)(A.A,{sx:{fontWeight:600},children:"Creation Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(j,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(j,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===k||void 0===k?void 0:k.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:R}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(M,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(M,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===S||void 0===S?void 0:S.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:T}),(0,P.jsxs)(A.A,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",D]})]}),(0,P.jsx)(g.T,{open:W.value,onClose:W.onFalse,title:"Delete",content:"Are you sure want to delete?",action:(0,P.jsx)(i.A,{variant:"contained",color:"error",onClick:s,children:"Delete"})})]})}const be=[{value:"all",label:"all"},{value:"active",label:"active"},{value:"inactive",label:"inactive"}],we=[{id:"code",label:"Code"},{id:"name_english",label:"name"},{id:"name_arabic",label:"arabic name"},{id:"unit_service",label:"unit of service"},{id:"department",label:"Department"},{id:"status",label:"Status"},{id:"",width:88}],_e={name:"",status:"active"};function Ce(){const e=(0,v.K2)({defaultOrderBy:"code"}),t=(0,o.useRef)(),n=(0,p.rd)(),u=(0,h.C)(),y=(0,h.C)(),{activitiesData:j,loading:A,refetch:f}=(0,O.TXy)(),[b,C]=(0,o.useState)(_e),k=!(!b.startDate||!b.endDate)&&b.startDate.getTime()>b.endDate.getTime(),R=function(e){var t;let{inputData:n,comparator:o,filters:a,dateError:s}=e;const{status:i,name:l}=a,r=null===(t=n)||void 0===t?void 0:t.map(((e,t,n)=>[e,t]));r.sort(((e,t)=>{const n=o(e[0],t[0]);return 0!==n?n:e[1]-t[1]})),n=r.map(((e,t)=>e[0])),l&&(n=n.filter((e=>{var t,n,o,a,s,i,r,d,c,p,h,u,x,g,m,v,y,j,A,f;return(null===e||void 0===e?void 0:e.name_english)&&-1!==(null===e||void 0===e||null===(t=e.name_english)||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(o=e.name_arabic)||void 0===o||null===(a=o.toLowerCase())||void 0===a?void 0:a.indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(s=e.unit_service)||void 0===s?void 0:s.name_english)&&-1!==(null===e||void 0===e||null===(i=e.unit_service)||void 0===i||null===(r=i.name_english)||void 0===r||null===(d=r.toLowerCase())||void 0===d?void 0:d.indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(c=e.unit_service)||void 0===c?void 0:c.name_arabic)&&-1!==(null===e||void 0===e||null===(p=e.unit_service)||void 0===p||null===(h=p.name_arabic)||void 0===h||null===(u=h.toLowerCase())||void 0===u?void 0:u.indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(x=e.department)||void 0===x?void 0:x.name_english)&&-1!==(null===e||void 0===e||null===(g=e.department)||void 0===g||null===(m=g.name_english)||void 0===m||null===(v=m.toLowerCase())||void 0===v?void 0:v.indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(y=e.department)||void 0===y?void 0:y.name_english)&&-1!==(null===e||void 0===e||null===(j=e.department)||void 0===j||null===(A=j.name_arabic)||void 0===A||null===(f=A.toLowerCase())||void 0===f?void 0:f.indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===l||JSON.stringify(e.code)===l})));"all"!==i&&(n=n.filter((e=>e.status===i)));return n}({inputData:j,comparator:(0,v.hz)(e.order,e.orderBy),filters:b,dateError:k}),M=R.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),S=!(null===b||void 0===b||!b.name)||"active"!==b.status,T=!R.length&&S||!R.length,D=(0,I.useReactToPrint)({content:()=>t.current}),W=(0,o.useCallback)(((t,n)=>{e.onResetPage(),C((e=>({...e,[t]:n})))}),[e]),F=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.activities.one(t)}/updatestatus`,{status:"active"}),f(),e.onUpdatePageDeleteRow(M.length)}),[M.length,e,f]),B=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.activities.one(t)}/updatestatus`,{status:"inactive"}),f(),e.onUpdatePageDeleteRow(M.length)}),[M.length,e,f]),H=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.activities.all}/updatestatus`,{status:"active",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:M.length,totalRowsFiltered:R.length})}),[R.length,M.length,e,j,f]),G=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.activities.all}/updatestatus`,{status:"inactive",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:M.length,totalRowsFiltered:R.length})}),[R.length,M.length,e,j,f]),V=(0,o.useCallback)((e=>{n.push(c.f.superadmin.tables.activities.edit(e))}),[n]),Q=(0,o.useCallback)((()=>{C(_e)}),[]),ee=(0,o.useCallback)(((e,t)=>{W("status",t)}),[W]);return A?(0,P.jsx)($.x,{}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(l.A,{maxWidth:"xl",children:[(0,P.jsx)(m.A,{heading:"Activities",links:[{name:"dashboard",href:c.f.superadmin.root},{name:"Tables",href:c.f.superadmin.tables.list},{name:"Activities"}],action:(0,P.jsx)(i.A,{component:E.W,href:c.f.superadmin.tables.activities.new,variant:"contained",startIcon:(0,P.jsx)(_.A,{icon:"mingcute:add-line"}),children:"New Activity"}),sx:{mb:{xs:3,md:5}}}),(0,P.jsxs)(a.A,{children:[(0,P.jsx)(K.A,{value:b.status,onChange:ee,sx:{px:2.5,boxShadow:e=>`inset 0 -2px 0 0 ${(0,Y.X4)(e.palette.grey[500],.08)}`},children:be.map(((e,t)=>(0,P.jsx)(J.A,{iconPosition:"end",value:e.value,label:e.label,icon:(0,P.jsxs)(N.A,{variant:"all"===e.value||e.value===b.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&j.length,"active"===e.value&&j.filter((e=>"active"===e.status)).length,"inactive"===e.value&&j.filter((e=>"inactive"===e.status)).length]})},t)))}),(0,P.jsx)(z.A,{onPrint:D,filters:b,onFilters:W,onDownload:()=>{const e=R.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.Wp.book_new(),n=q.Wp.json_to_sheet(e);q.Wp.book_append_sheet(t,n,"Sheet 1");const o=q.M9(t,{bookType:"xlsx",type:"array"}),a=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,L.saveAs)(a,"ActivitiesTable.xlsx")},canReset:S,onResetFilters:Q}),S&&(0,P.jsx)(Z.A,{filters:b,onFilters:W,onResetFilters:Q,results:R.length,sx:{p:2.5,pt:0}}),(0,P.jsxs)(d.A,{children:[(0,P.jsx)(v.Uv,{numSelected:e.selected.length,rowCount:R.length,onSelectAllRows:t=>e.onSelectAllRows(t,R.map(((e,t)=>e._id))),action:(0,P.jsx)(P.Fragment,{children:R.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?(0,P.jsx)(X.A,{title:"Activate all",children:(0,P.jsx)(w.A,{color:"primary",onClick:u.onTrue,children:(0,P.jsx)(_.A,{icon:"codicon:run-all"})})}):(0,P.jsx)(X.A,{title:"Inactivate all",children:(0,P.jsx)(w.A,{color:"error",onClick:y.onTrue,children:(0,P.jsx)(_.A,{icon:"iconoir:pause-solid"})})})}),color:R.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,P.jsx)(x.A,{children:(0,P.jsxs)(s.A,{ref:t,size:e.dense?"small":"medium",children:[(0,P.jsx)(v.er,{order:e.order,orderBy:e.orderBy,headLabel:we,rowCount:R.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,R.map(((e,t)=>e._id)))}),(0,P.jsxs)(r.A,{children:[R.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map(((t,n)=>(0,P.jsx)(fe,{row:t,selected:e.selected.includes(t._id),setFilters:C,filters:b,onSelectRow:()=>e.onSelectRow(t._id),onActivate:()=>F(t._id),onInactivate:()=>B(t._id),onEditRow:()=>V(t._id)},n))),(0,P.jsx)(v.Sm,{notFound:T})]})]})})]}),(0,P.jsx)(v.We,{count:R.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,P.jsx)(g.T,{open:y.value,onClose:y.onFalse,title:"Inactivate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Inactivate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"error",onClick:()=>{G(),y.onFalse()},children:"Inactivate"})}),(0,P.jsx)(g.T,{open:u.value,onClose:u.onFalse,title:"Activate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Activate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"primary",onClick:()=>{H(),u.onFalse()},children:"Activate"})})]})}function Pe(e){let{row:t,selected:n,onEditRow:o,onSelectRow:a,onInactivate:s,onActivate:i,filters:l,setFilters:r}=e;const{code:d,name_english:c,name_arabic:p,unit_service:h,start_time:x,end_time:g,status:m,created_at:v,user_creation:y,ip_address_user_creation:j,updated_at:k,user_modification:R,ip_address_user_modification:M,modifications_nums:S}=t,T=(0,C.f)(),D=(0,C.f)(),W=(0,P.jsxs)(f.A,{hover:!0,selected:n,children:[(0,P.jsx)(b.A,{padding:"checkbox",children:(0,P.jsx)(V.A,{checked:n,onClick:a})}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(A.A,{children:d})}),(0,P.jsx)(b.A,{align:"center",children:c}),(0,P.jsx)(b.A,{align:"center",children:p}),(0,P.jsx)(b.A,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r({...l,name:h.name_english}),children:null===h||void 0===h?void 0:h.name_english}),(0,P.jsx)(b.A,{align:"center",children:(0,u.qi)(x)}),(0,P.jsx)(b.A,{align:"center",children:(0,u.qi)(g)}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(N.A,{variant:"soft",color:("active"===m?"success":"inactive"===m&&"error")||"default",children:m})}),(0,P.jsx)(b.A,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,P.jsx)(w.A,{color:T.open?"inherit":"default",onClick:T.onOpen,children:(0,P.jsx)(_.A,{icon:"eva:more-vertical-fill"})})})]});return(0,P.jsxs)(P.Fragment,{children:[W,(0,P.jsxs)(C.A,{open:T.open,onClose:T.onClose,arrow:"right-top",sx:{width:140},children:["active"===m?(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{s(),T.onClose()},sx:{color:"error.main"},children:[(0,P.jsx)(_.A,{icon:"ic:baseline-pause"}),"Inactivate"]}):(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{i(),T.onClose()},sx:{color:"success.main"},children:[(0,P.jsx)(_.A,{icon:"bi:play-fill"}),"activate"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{o(),T.onClose()},children:[(0,P.jsx)(_.A,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:D.onOpen,children:[(0,P.jsx)(_.A,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,P.jsxs)(C.A,{open:D.open,onClose:D.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,P.jsx)(A.A,{sx:{fontWeight:600},children:"Creation Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(v,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(v,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===y||void 0===y?void 0:y.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:j}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(k,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(k,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===R||void 0===R?void 0:R.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:M}),(0,P.jsxs)(A.A,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",S]})]})]})}const ke=[{value:"active",label:"active"},{value:"inactive",label:"inactive"}],Re=[{id:"code",label:"Code"},{id:"name_english",label:"name"},{id:"name_arabic",label:"arabic name"},{id:"unit_service",label:"unit of service"},{id:"start_date",label:"Start Date"},{id:"end_date",label:"End Date"},{id:"status",label:"Status"},{id:"",width:88}],Me={name:"",status:"active"};function Se(){const e=(0,v.K2)({defaultOrderBy:"code"}),t=(0,o.useRef)(),n=(0,p.rd)(),u=(0,h.C)(),y=(0,h.C)(),{workShiftsData:j,loading:A,refetch:f}=(0,O.Yx4)(),[b,C]=(0,o.useState)(Me),k=!(!b.startDate||!b.endDate)&&b.startDate.getTime()>b.endDate.getTime(),R=function(e){let{inputData:t,comparator:n,filters:o,dateError:a}=e;const{status:s,name:i}=o,l=t.map(((e,t,n)=>[e,t]));l.sort(((e,t)=>{const o=n(e[0],t[0]);return 0!==o?o:e[1]-t[1]})),t=l.map(((e,t)=>e[0])),i&&(t=t.filter((e=>{var t,n,o,a,s;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(n=e.unit_service)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(o=e.unit_service)||void 0===o?void 0:o.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(a=e.unit_service)||void 0===a?void 0:a.name_arabic)&&-1!==(null===e||void 0===e||null===(s=e.unit_service)||void 0===s?void 0:s.name_arabic.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===i||JSON.stringify(e.code)===i})));"all"!==s&&(t=t.filter((e=>e.status===s)));return t}({inputData:j,comparator:(0,v.hz)(e.order,e.orderBy),filters:b,dateError:k}),M=R.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),S=!(null===b||void 0===b||!b.name)||"active"!==b.status,T=!R.length&&S||!R.length,D=(0,I.useReactToPrint)({content:()=>t.current}),W=(0,o.useCallback)(((t,n)=>{e.onResetPage(),C((e=>({...e,[t]:n})))}),[e]),F=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.work_shifts.one(t)}/updatestatus`,{status:"active"}),f(),e.onUpdatePageDeleteRow(M.length)}),[M.length,e,f]),B=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.work_shifts.one(t)}/updatestatus`,{status:"inactive"}),f(),e.onUpdatePageDeleteRow(M.length)}),[M.length,e,f]),H=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.work_shifts.all}/updatestatus`,{status:"active",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:M.length,totalRowsFiltered:R.length})}),[R.length,M.length,e,j,f]),G=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.work_shifts.all}/updatestatus`,{status:"inactive",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:M.length,totalRowsFiltered:R.length})}),[R.length,M.length,e,j,f]),V=(0,o.useCallback)((e=>{n.push(c.f.superadmin.tables.workshifts.edit(e))}),[n]),Q=(0,o.useCallback)((()=>{C(Me)}),[]),ee=(0,o.useCallback)(((e,t)=>{W("status",t)}),[W]);return A?(0,P.jsx)($.x,{}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(l.A,{maxWidth:"xl",children:[(0,P.jsx)(m.A,{heading:"Work Shifts",links:[{name:"dashboard",href:c.f.superadmin.root},{name:"Tables",href:c.f.superadmin.tables.list},{name:"Work Shifts"}],action:(0,P.jsx)(i.A,{component:E.W,href:c.f.superadmin.tables.workshifts.new,variant:"contained",startIcon:(0,P.jsx)(_.A,{icon:"mingcute:add-line"}),children:"New Work Shift"}),sx:{mb:{xs:3,md:5}}}),(0,P.jsxs)(a.A,{children:[(0,P.jsx)(K.A,{value:b.status,onChange:ee,sx:{px:2.5,boxShadow:e=>`inset 0 -2px 0 0 ${(0,Y.X4)(e.palette.grey[500],.08)}`},children:ke.map(((e,t)=>(0,P.jsx)(J.A,{iconPosition:"end",value:e.value,label:e.label,icon:(0,P.jsxs)(N.A,{variant:"all"===e.value||e.value===b.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&j.length,"active"===e.value&&j.filter((e=>"active"===e.status)).length,"inactive"===e.value&&j.filter((e=>"inactive"===e.status)).length]})},t)))}),(0,P.jsx)(z.A,{onPrint:D,filters:b,onFilters:W,onDownload:()=>{const e=R.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.Wp.book_new(),n=q.Wp.json_to_sheet(e);q.Wp.book_append_sheet(t,n,"Sheet 1");const o=q.M9(t,{bookType:"xlsx",type:"array"}),a=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,L.saveAs)(a,"WorkShiftsTable.xlsx")},canReset:S,onResetFilters:Q}),S&&(0,P.jsx)(Z.A,{filters:b,onFilters:W,onResetFilters:Q,results:R.length,sx:{p:2.5,pt:0}}),(0,P.jsxs)(d.A,{children:[(0,P.jsx)(v.Uv,{numSelected:e.selected.length,rowCount:R.length,onSelectAllRows:t=>e.onSelectAllRows(t,R.map(((e,t)=>e._id))),action:(0,P.jsx)(P.Fragment,{children:R.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?(0,P.jsx)(X.A,{title:"Activate all",children:(0,P.jsx)(w.A,{color:"primary",onClick:u.onTrue,children:(0,P.jsx)(_.A,{icon:"codicon:run-all"})})}):(0,P.jsx)(X.A,{title:"Inactivate all",children:(0,P.jsx)(w.A,{color:"error",onClick:y.onTrue,children:(0,P.jsx)(_.A,{icon:"iconoir:pause-solid"})})})}),color:R.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,P.jsx)(x.A,{children:(0,P.jsxs)(s.A,{ref:t,size:e.dense?"small":"medium",children:[(0,P.jsx)(v.er,{order:e.order,orderBy:e.orderBy,headLabel:Re,rowCount:R.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,R.map(((e,t)=>e._id)))}),(0,P.jsxs)(r.A,{children:[R.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map(((t,n)=>(0,P.jsx)(Pe,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onActivate:()=>F(t._id),onInactivate:()=>B(t._id),onEditRow:()=>V(t._id)},n))),(0,P.jsx)(v.Sm,{notFound:T})]})]})})]}),(0,P.jsx)(v.We,{count:R.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,P.jsx)(g.T,{open:y.value,onClose:y.onFalse,title:"Inactivate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Inactivate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"error",onClick:()=>{G(),y.onFalse()},children:"Inactivate"})}),(0,P.jsx)(g.T,{open:u.value,onClose:u.onFalse,title:"Activate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Activate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"primary",onClick:()=>{H(),u.onFalse()},children:"Activate"})})]})}function Te(e){let{row:t,selected:n,onEditRow:o,onSelectRow:a,onInactivate:s,onActivate:i,filters:l,setFilters:r}=e;const{code:d,name_english:c,name_arabic:p,unit_service:h,work_shift:x,Measurement_type:g,Price_per_unit:m,status:v,created_at:y,user_creation:j,ip_address_user_creation:k,updated_at:R,user_modification:M,ip_address_user_modification:S,modifications_nums:T}=t,D=(0,C.f)(),W=(0,C.f)(),F=(0,P.jsxs)(f.A,{hover:!0,selected:n,children:[(0,P.jsx)(b.A,{padding:"checkbox",children:(0,P.jsx)(V.A,{checked:n,onClick:a})}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(A.A,{children:d})}),(0,P.jsx)(b.A,{align:"center",children:c}),(0,P.jsx)(b.A,{align:"center",children:p}),(0,P.jsx)(b.A,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r({...l,name:h.name_english}),children:null===h||void 0===h?void 0:h.name_english}),(0,P.jsx)(b.A,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r({...l,name:x.name_english}),children:null===x||void 0===x?void 0:x.name_english}),(0,P.jsx)(b.A,{align:"center",children:m}),(0,P.jsx)(b.A,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r({...l,name:g.name_english}),children:null===g||void 0===g?void 0:g.name_english}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(N.A,{variant:"soft",color:("active"===v?"success":"inactive"===v&&"error")||"default",children:v})}),(0,P.jsx)(b.A,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,P.jsx)(w.A,{color:D.open?"inherit":"default",onClick:D.onOpen,children:(0,P.jsx)(_.A,{icon:"eva:more-vertical-fill"})})})]});return(0,P.jsxs)(P.Fragment,{children:[F,(0,P.jsxs)(C.A,{open:D.open,onClose:D.onClose,arrow:"right-top",sx:{width:140},children:["active"===v?(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{s(),D.onClose()},sx:{color:"error.main"},children:[(0,P.jsx)(_.A,{icon:"ic:baseline-pause"}),"Inactivate"]}):(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{i(),D.onClose()},sx:{color:"success.main"},children:[(0,P.jsx)(_.A,{icon:"bi:play-fill"}),"activate"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{o(),D.onClose()},children:[(0,P.jsx)(_.A,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:W.onOpen,children:[(0,P.jsx)(_.A,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,P.jsxs)(C.A,{open:W.open,onClose:W.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,P.jsx)(A.A,{sx:{fontWeight:600},children:"Creation Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(y,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(y,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===j||void 0===j?void 0:j.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:k}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(R,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(R,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===M||void 0===M?void 0:M.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:S}),(0,P.jsxs)(A.A,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",T]})]})]})}const De=[{value:"active",label:"active"},{value:"inactive",label:"inactive"}],We=[{id:"code",label:"Code"},{id:"name_english",label:"name"},{id:"name_arabic",label:"arabic name"},{id:"unit_service",label:"unit of service"},{id:"work_shift",label:"Work Shift"},{id:"Price_per_unit",label:"Price per unit"},{id:"Measurement_type",label:"Measurement type"},{id:"status",label:"Status"},{id:"",width:88}],Fe={name:"",status:"active"};function Be(){const e=(0,v.K2)({defaultOrderBy:"code"}),t=(0,o.useRef)(),n=(0,p.rd)(),u=(0,h.C)(),y=(0,h.C)(),{serviceTypesData:j,loading:A,refetch:f}=(0,O.yaQ)(),[b,C]=(0,o.useState)(Fe),k=!(!b.startDate||!b.endDate)&&b.startDate.getTime()>b.endDate.getTime(),R=function(e){let{inputData:t,comparator:n,filters:o,dateError:a}=e;const{status:s,name:i}=o,l=t.map(((e,t,n)=>[e,t]));l.sort(((e,t)=>{const o=n(e[0],t[0]);return 0!==o?o:e[1]-t[1]})),t=l.map(((e,t)=>e[0])),i&&(t=t.filter((e=>{var t,n,o,a,s,l,r,d,c;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(n=e.unit_service)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(o=e.unit_service)||void 0===o?void 0:o.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(a=e.unit_service)||void 0===a?void 0:a.name_arabic)&&-1!==(null===e||void 0===e||null===(s=e.unit_service)||void 0===s?void 0:s.name_arabic.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(l=e.work_shift)||void 0===l?void 0:l.name_english)&&-1!==(null===e||void 0===e||null===(r=e.work_shift)||void 0===r?void 0:r.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(d=e.work_shift)||void 0===d?void 0:d.name_arabic)&&-1!==(null===e||void 0===e||null===(c=e.work_shift)||void 0===c?void 0:c.name_arabic.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===i||JSON.stringify(e.code)===i})));"all"!==s&&(t=t.filter((e=>e.status===s)));return t}({inputData:j,comparator:(0,v.hz)(e.order,e.orderBy),filters:b,dateError:k}),M=R.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),S=!(null===b||void 0===b||!b.name)||"active"!==b.status,T=!R.length&&S||!R.length,D=(0,I.useReactToPrint)({content:()=>t.current}),W=(0,o.useCallback)(((t,n)=>{e.onResetPage(),C((e=>({...e,[t]:n})))}),[e]),F=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.service_types.one(t)}/updatestatus`,{status:"active"}),f(),e.onUpdatePageDeleteRow(M.length)}),[M.length,e,f]),B=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.service_types.one(t)}/updatestatus`,{status:"inactive"}),f(),e.onUpdatePageDeleteRow(M.length)}),[M.length,e,f]),H=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.service_types.all}/updatestatus`,{status:"active",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:M.length,totalRowsFiltered:R.length})}),[R.length,M.length,e,j,f]),G=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.service_types.all}/updatestatus`,{status:"inactive",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:M.length,totalRowsFiltered:R.length})}),[R.length,M.length,e,j,f]),V=(0,o.useCallback)((e=>{n.push(c.f.superadmin.tables.servicetypes.edit(e))}),[n]),Q=(0,o.useCallback)((()=>{C(Fe)}),[]),ee=(0,o.useCallback)(((e,t)=>{W("status",t)}),[W]);return A?(0,P.jsx)($.x,{}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(l.A,{maxWidth:"xl",children:[(0,P.jsx)(m.A,{heading:"Service Types",links:[{name:"dashboard",href:c.f.superadmin.root},{name:"Tables",href:c.f.superadmin.tables.list},{name:"Service Types"}],action:(0,P.jsx)(i.A,{component:E.W,href:c.f.superadmin.tables.servicetypes.new,variant:"contained",startIcon:(0,P.jsx)(_.A,{icon:"mingcute:add-line"}),children:"New Service Type"}),sx:{mb:{xs:3,md:5}}}),(0,P.jsxs)(a.A,{children:[(0,P.jsx)(K.A,{value:b.status,onChange:ee,sx:{px:2.5,boxShadow:e=>`inset 0 -2px 0 0 ${(0,Y.X4)(e.palette.grey[500],.08)}`},children:De.map(((e,t)=>(0,P.jsx)(J.A,{iconPosition:"end",value:e.value,label:e.label,icon:(0,P.jsxs)(N.A,{variant:"all"===e.value||e.value===b.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&j.length,"active"===e.value&&j.filter((e=>"active"===e.status)).length,"inactive"===e.value&&j.filter((e=>"inactive"===e.status)).length]})},t)))}),(0,P.jsx)(z.A,{onPrint:D,filters:b,onFilters:W,onDownload:()=>{const e=R.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.Wp.book_new(),n=q.Wp.json_to_sheet(e);q.Wp.book_append_sheet(t,n,"Sheet 1");const o=q.M9(t,{bookType:"xlsx",type:"array"}),a=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,L.saveAs)(a,"ServiceTypesTable.xlsx")},canReset:S,onResetFilters:Q}),S&&(0,P.jsx)(Z.A,{filters:b,onFilters:W,onResetFilters:Q,results:R.length,sx:{p:2.5,pt:0}}),(0,P.jsxs)(d.A,{children:[(0,P.jsx)(v.Uv,{numSelected:e.selected.length,rowCount:R.length,onSelectAllRows:t=>e.onSelectAllRows(t,R.map(((e,t)=>e._id))),action:(0,P.jsx)(P.Fragment,{children:R.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?(0,P.jsx)(X.A,{title:"Activate all",children:(0,P.jsx)(w.A,{color:"primary",onClick:u.onTrue,children:(0,P.jsx)(_.A,{icon:"codicon:run-all"})})}):(0,P.jsx)(X.A,{title:"Inactivate all",children:(0,P.jsx)(w.A,{color:"error",onClick:y.onTrue,children:(0,P.jsx)(_.A,{icon:"iconoir:pause-solid"})})})}),color:R.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,P.jsx)(x.A,{children:(0,P.jsxs)(s.A,{ref:t,size:e.dense?"small":"medium",children:[(0,P.jsx)(v.er,{order:e.order,orderBy:e.orderBy,headLabel:We,rowCount:R.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,R.map(((e,t)=>e._id)))}),(0,P.jsxs)(r.A,{children:[R.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map(((t,n)=>(0,P.jsx)(Te,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onActivate:()=>F(t._id),onInactivate:()=>B(t._id),onEditRow:()=>V(t._id)},n))),(0,P.jsx)(v.Sm,{notFound:T})]})]})})]}),(0,P.jsx)(v.We,{count:R.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,P.jsx)(g.T,{open:y.value,onClose:y.onFalse,title:"Inactivate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Inactivate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"error",onClick:()=>{G(),y.onFalse()},children:"Inactivate"})}),(0,P.jsx)(g.T,{open:u.value,onClose:u.onFalse,title:"Activate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Activate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"primary",onClick:()=>{H(),u.onFalse()},children:"Activate"})})]})}function Le(e){let{row:t,selected:n,onEditRow:o,onSelectRow:a,onInactivate:s,onActivate:i,filters:l,setFilters:r}=e;const{code:d,name_english:c,name_arabic:p,us_type:h,status:x,created_at:g,user_creation:m,ip_address_user_creation:v,updated_at:y,user_modification:j,ip_address_user_modification:k,modifications_nums:R}=t,M=(0,C.f)(),S=(0,C.f)(),T=(0,P.jsxs)(f.A,{hover:!0,selected:n,children:[(0,P.jsx)(b.A,{padding:"checkbox",children:(0,P.jsx)(V.A,{checked:n,onClick:a})}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(A.A,{children:d})}),(0,P.jsx)(b.A,{align:"center",children:c}),(0,P.jsx)(b.A,{align:"center",children:p}),(0,P.jsx)(b.A,{align:"center",children:null===h||void 0===h?void 0:h.name_english}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(N.A,{variant:"soft",color:("active"===x?"success":"inactive"===x&&"error")||"default",children:x})}),(0,P.jsx)(b.A,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,P.jsx)(w.A,{color:S.open?"inherit":"default",onClick:S.onOpen,children:(0,P.jsx)(_.A,{icon:"eva:more-vertical-fill"})})})]});return(0,P.jsxs)(P.Fragment,{children:[T,(0,P.jsxs)(C.A,{open:S.open,onClose:S.onClose,arrow:"right-top",sx:{width:140},children:["active"===x?(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{s(),S.onClose()},sx:{color:"error.main"},children:[(0,P.jsx)(_.A,{icon:"ic:baseline-pause"}),"Inactivate"]}):(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{i(),S.onClose()},sx:{color:"success.main"},children:[(0,P.jsx)(_.A,{icon:"bi:play-fill"}),"activate"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{o(),S.onClose()},children:[(0,P.jsx)(_.A,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:M.onOpen,children:[(0,P.jsx)(_.A,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,P.jsxs)(C.A,{open:M.open,onClose:M.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,P.jsx)(A.A,{sx:{fontWeight:600},children:"Creation Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(g,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(g,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===m||void 0===m?void 0:m.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:v}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(y,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(y,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===j||void 0===j?void 0:j.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:k}),(0,P.jsxs)(A.A,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",R]})]})]})}const Ie=[{value:"active",label:"active"},{value:"inactive",label:"inactive"}],Ee=[{id:"code",label:"Code"},{id:"name_english",label:"name"},{id:"name_arabic",label:"arabic name"},{id:"us_type",label:"unit of service type"},{id:"status",label:"Status"},{id:"",width:88}],Oe={name:"",status:"active"};function Ne(){const e=(0,v.K2)({defaultOrderBy:"code"}),t=(0,o.useRef)(),n=(0,p.rd)(),u=(0,h.C)(),y=(0,h.C)(),{employeeTypesData:j,loading:A,refetch:f}=(0,O.diI)(),[b,C]=(0,o.useState)(Oe),k=!(!b.startDate||!b.endDate)&&b.startDate.getTime()>b.endDate.getTime(),R=function(e){let{inputData:t,comparator:n,filters:o,dateError:a}=e;const{status:s,name:i}=o,l=t.map(((e,t,n)=>[e,t]));l.sort(((e,t)=>{const o=n(e[0],t[0]);return 0!==o?o:e[1]-t[1]})),t=l.map(((e,t)=>e[0])),i&&(t=t.filter((e=>{var t,n,o,a,s;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(n=e.unit_service)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(o=e.unit_service)||void 0===o?void 0:o.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(a=e.unit_service)||void 0===a?void 0:a.name_arabic)&&-1!==(null===e||void 0===e||null===(s=e.unit_service)||void 0===s?void 0:s.name_arabic.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===i||JSON.stringify(e.code)===i})));"all"!==s&&(t=t.filter((e=>e.status===s)));return t}({inputData:j,comparator:(0,v.hz)(e.order,e.orderBy),filters:b,dateError:k}),M=R.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),S=!(null===b||void 0===b||!b.name)||"active"!==b.status,T=!R.length&&S||!R.length,D=(0,I.useReactToPrint)({content:()=>t.current}),W=(0,o.useCallback)(((t,n)=>{e.onResetPage(),C((e=>({...e,[t]:n})))}),[e]),F=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.employee_types.one(t)}/updatestatus`,{status:"active"}),f(),e.onUpdatePageDeleteRow(M.length)}),[M.length,e,f]),B=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.employee_types.one(t)}/updatestatus`,{status:"inactive"}),f(),e.onUpdatePageDeleteRow(M.length)}),[M.length,e,f]),H=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.employee_types.all}/updatestatus`,{status:"active",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:M.length,totalRowsFiltered:R.length})}),[R.length,M.length,e,j,f]),G=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.employee_types.all}/updatestatus`,{status:"inactive",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:M.length,totalRowsFiltered:R.length})}),[R.length,M.length,e,j,f]),V=(0,o.useCallback)((e=>{n.push(c.f.superadmin.tables.employeetypes.edit(e))}),[n]),Q=(0,o.useCallback)((()=>{C(Oe)}),[]),ee=(0,o.useCallback)(((e,t)=>{W("status",t)}),[W]);return A?(0,P.jsx)($.x,{}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(l.A,{maxWidth:"xl",children:[(0,P.jsx)(m.A,{heading:"Employee Types",links:[{name:"dashboard",href:c.f.superadmin.root},{name:"Tables",href:c.f.superadmin.tables.list},{name:"Employee Types"}],action:(0,P.jsx)(i.A,{component:E.W,href:c.f.superadmin.tables.employeetypes.new,variant:"contained",startIcon:(0,P.jsx)(_.A,{icon:"mingcute:add-line"}),children:"New Employee Type"}),sx:{mb:{xs:3,md:5}}}),(0,P.jsxs)(a.A,{children:[(0,P.jsx)(K.A,{value:b.status,onChange:ee,sx:{px:2.5,boxShadow:e=>`inset 0 -2px 0 0 ${(0,Y.X4)(e.palette.grey[500],.08)}`},children:Ie.map(((e,t)=>(0,P.jsx)(J.A,{iconPosition:"end",value:e.value,label:e.label,icon:(0,P.jsxs)(N.A,{variant:"all"===e.value||e.value===b.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&j.length,"active"===e.value&&j.filter((e=>"active"===e.status)).length,"inactive"===e.value&&j.filter((e=>"inactive"===e.status)).length]})},t)))}),(0,P.jsx)(z.A,{onPrint:D,filters:b,onFilters:W,onDownload:()=>{const e=R.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.Wp.book_new(),n=q.Wp.json_to_sheet(e);q.Wp.book_append_sheet(t,n,"Sheet 1");const o=q.M9(t,{bookType:"xlsx",type:"array"}),a=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,L.saveAs)(a,"EmployeeTypesData.xlsx")},canReset:S,onResetFilters:Q}),S&&(0,P.jsx)(Z.A,{filters:b,onFilters:W,onResetFilters:Q,results:R.length,sx:{p:2.5,pt:0}}),(0,P.jsxs)(d.A,{children:[(0,P.jsx)(v.Uv,{numSelected:e.selected.length,rowCount:R.length,onSelectAllRows:t=>e.onSelectAllRows(t,R.map(((e,t)=>e._id))),action:(0,P.jsx)(P.Fragment,{children:R.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?(0,P.jsx)(X.A,{title:"Activate all",children:(0,P.jsx)(w.A,{color:"primary",onClick:u.onTrue,children:(0,P.jsx)(_.A,{icon:"codicon:run-all"})})}):(0,P.jsx)(X.A,{title:"Inactivate all",children:(0,P.jsx)(w.A,{color:"error",onClick:y.onTrue,children:(0,P.jsx)(_.A,{icon:"iconoir:pause-solid"})})})}),color:R.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,P.jsx)(x.A,{children:(0,P.jsxs)(s.A,{ref:t,size:e.dense?"small":"medium",children:[(0,P.jsx)(v.er,{order:e.order,orderBy:e.orderBy,headLabel:Ee,rowCount:R.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,R.map(((e,t)=>e._id)))}),(0,P.jsxs)(r.A,{children:[R.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map(((t,n)=>(0,P.jsx)(Le,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onActivate:()=>F(t._id),onInactivate:()=>B(t._id),onEditRow:()=>V(t._id)},n))),(0,P.jsx)(v.Sm,{notFound:T})]})]})})]}),(0,P.jsx)(v.We,{count:R.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,P.jsx)(g.T,{open:y.value,onClose:y.onFalse,title:"Inactivate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Inactivate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"error",onClick:()=>{G(),y.onFalse()},children:"Inactivate"})}),(0,P.jsx)(g.T,{open:u.value,onClose:u.onFalse,title:"Activate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Activate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"primary",onClick:()=>{H(),u.onFalse()},children:"Activate"})})]})}function $e(e){let{row:t,selected:n,onEditRow:o,onSelectRow:a,onInactivate:s,onActivate:i,filters:l,setFilters:r}=e;const{code:d,name_english:c,name_arabic:p,Coverage_name:h,status:x,created_at:g,user_creation:m,ip_address_user_creation:v,updated_at:y,user_modification:j,ip_address_user_modification:k,modifications_nums:R}=t,M=(0,C.f)(),S=(0,C.f)(),T=(0,P.jsxs)(f.A,{hover:!0,selected:n,children:[(0,P.jsx)(b.A,{padding:"checkbox",children:(0,P.jsx)(V.A,{checked:n,onClick:a})}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(A.A,{children:d})}),(0,P.jsx)(b.A,{align:"center",children:c}),(0,P.jsx)(b.A,{align:"center",children:p}),(0,P.jsx)(b.A,{align:"center",children:h}),(0,P.jsx)(b.A,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,P.jsx)(w.A,{color:S.open?"inherit":"default",onClick:S.onOpen,children:(0,P.jsx)(_.A,{icon:"eva:more-vertical-fill"})})})]});return(0,P.jsxs)(P.Fragment,{children:[T,(0,P.jsxs)(C.A,{open:S.open,onClose:S.onClose,arrow:"right-top",sx:{width:140},children:["active"===x?(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{s(),S.onClose()},sx:{color:"error.main"},children:[(0,P.jsx)(_.A,{icon:"ic:baseline-pause"}),"Inactivate"]}):(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{i(),S.onClose()},sx:{color:"success.main"},children:[(0,P.jsx)(_.A,{icon:"bi:play-fill"}),"activate"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{o(),S.onClose()},children:[(0,P.jsx)(_.A,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:M.onOpen,children:[(0,P.jsx)(_.A,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,P.jsxs)(C.A,{open:M.open,onClose:M.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,P.jsx)(A.A,{sx:{fontWeight:600},children:"Creation Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(g,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(g,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===m||void 0===m?void 0:m.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:v}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(y,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(y,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===j||void 0===j?void 0:j.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:k}),(0,P.jsxs)(A.A,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",R]})]})]})}const Ue=[{value:"active",label:"active"},{value:"inactive",label:"inactive"}],ze=[{id:"code",label:"Code"},{id:"name_english",label:"name"},{id:"name_arabic",label:"arabic name"},{id:"Coverage_name",label:"Coverage name"},{id:"",width:88}],Ze={name:""};function qe(){const e=(0,v.K2)({defaultOrderBy:"code"}),t=(0,o.useRef)(),n=(0,p.rd)(),u=(0,h.C)(),y=(0,h.C)(),{insuranseTypesData:j,loading:A,refetch:f}=(0,O.zrw)(),[b,C]=(0,o.useState)(Ze),k=(0,p.ok)().get("upload_record");(0,o.useEffect)((()=>{k&&C((e=>({...e,name:k})))}),[k]);const R=!(!b.startDate||!b.endDate)&&b.startDate.getTime()>b.endDate.getTime(),M=function(e){let{inputData:t,comparator:n,filters:o,dateError:a}=e;const{status:s,name:i}=o,l=t.map(((e,t,n)=>[e,t]));l.sort(((e,t)=>{const o=n(e[0],t[0]);return 0!==o?o:e[1]-t[1]})),t=l.map(((e,t)=>e[0])),i&&(t=t.filter((e=>{var t,n,o,a,s,l,r,d,c,p,h,u,x,g;return(null===e||void 0===e?void 0:e.name_english)&&-1!==(null===e||void 0===e||null===(t=e.name_english)||void 0===t?void 0:t.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(n=e.name_arabic)||void 0===n?void 0:n.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(o=e.country)||void 0===o?void 0:o.name_english)&&-1!==(null===e||void 0===e||null===(a=e.country)||void 0===a?void 0:a.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(s=e.country)||void 0===s?void 0:s.name_arabic)&&-1!==(null===e||void 0===e||null===(l=e.country)||void 0===l?void 0:l.name_arabic.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(r=e.city)||void 0===r?void 0:r.name_english)&&-1!==(null===e||void 0===e||null===(d=e.city)||void 0===d?void 0:d.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(c=e.city)||void 0===c?void 0:c.name_arabic)&&-1!==(null===e||void 0===e||null===(p=e.city)||void 0===p?void 0:p.name_arabic.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(h=e.type)||void 0===h?void 0:h.name_english)&&-1!==(null===e||void 0===e||null===(u=e.type)||void 0===u?void 0:u.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(x=e.type)||void 0===x?void 0:x.name_arabic)&&-1!==(null===e||void 0===e||null===(g=e.type)||void 0===g?void 0:g.name_arabic.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===i||(null===e||void 0===e?void 0:e.upload_record)===i||JSON.stringify(e.code)===i})));"all"!==s&&(t=t.filter((e=>e.status===s)));return t}({inputData:j,comparator:(0,v.hz)(e.order,e.orderBy),filters:b,dateError:R}),S=M.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),T=!(null===b||void 0===b||!b.name)||"active"!==b.status,D=!M.length&&T||!M.length,W=(0,I.useReactToPrint)({content:()=>t.current}),F=(0,o.useCallback)(((t,n)=>{e.onResetPage(),C((e=>({...e,[t]:n})))}),[e]),B=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.insurance_types.one(t)}/updatestatus`,{status:"active"}),f(),e.onUpdatePageDeleteRow(S.length)}),[S.length,e,f]),H=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.insurance_types.one(t)}/updatestatus`,{status:"inactive"}),f(),e.onUpdatePageDeleteRow(S.length)}),[S.length,e,f]),G=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.insurance_types.all}/updatestatus`,{status:"active",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:S.length,totalRowsFiltered:M.length})}),[M.length,S.length,e,j,f]),V=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.insurance_types.all}/updatestatus`,{status:"inactive",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:S.length,totalRowsFiltered:M.length})}),[M.length,S.length,e,j,f]),Q=(0,o.useCallback)((e=>{n.push(c.f.superadmin.tables.insuranceTypes.edit(e))}),[n]),ee=(0,o.useCallback)((()=>{C(Ze)}),[]),te=(0,o.useCallback)(((e,t)=>{F("status",t)}),[F]);return A?(0,P.jsx)($.x,{}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(l.A,{maxWidth:"xl",children:[(0,P.jsx)(m.A,{heading:"Insurance Types",links:[{name:"dashboard",href:c.f.superadmin.root},{name:"Tables",href:c.f.superadmin.tables.list},{name:"Insurance Types"}],action:(0,P.jsx)(i.A,{component:E.W,href:c.f.superadmin.tables.insuranceTypes.new,variant:"contained",startIcon:(0,P.jsx)(_.A,{icon:"mingcute:add-line"}),children:"New Insurance type"}),sx:{mb:{xs:3,md:5}}}),(0,P.jsxs)(a.A,{children:[(0,P.jsx)(K.A,{value:b.status,onChange:te,sx:{px:2.5,boxShadow:e=>`inset 0 -2px 0 0 ${(0,Y.X4)(e.palette.grey[500],.08)}`},children:Ue.map(((e,t)=>(0,P.jsx)(J.A,{iconPosition:"end",value:e.value,label:e.label,icon:(0,P.jsxs)(N.A,{variant:"all"===e.value||e.value===b.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&j.length,"active"===e.value&&j.filter((e=>"active"===e.status)).length,"inactive"===e.value&&j.filter((e=>"inactive"===e.status)).length]})},t)))}),(0,P.jsx)(z.A,{onPrint:W,filters:b,onFilters:F,onDownload:()=>{const e=M.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.Wp.book_new(),n=q.Wp.json_to_sheet(e);q.Wp.book_append_sheet(t,n,"Sheet 1");const o=q.M9(t,{bookType:"xlsx",type:"array"}),a=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,L.saveAs)(a,"insuranceCompaniesTable.xlsx")},canReset:T,onResetFilters:ee}),T&&(0,P.jsx)(Z.A,{filters:b,onFilters:F,onResetFilters:ee,results:M.length,sx:{p:2.5,pt:0}}),(0,P.jsxs)(d.A,{children:[(0,P.jsx)(v.Uv,{numSelected:e.selected.length,rowCount:M.length,onSelectAllRows:t=>e.onSelectAllRows(t,M.map(((e,t)=>e._id))),action:(0,P.jsx)(P.Fragment,{children:M.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?(0,P.jsx)(X.A,{title:"Activate all",children:(0,P.jsx)(w.A,{color:"primary",onClick:u.onTrue,children:(0,P.jsx)(_.A,{icon:"codicon:run-all"})})}):(0,P.jsx)(X.A,{title:"Inactivate all",children:(0,P.jsx)(w.A,{color:"error",onClick:y.onTrue,children:(0,P.jsx)(_.A,{icon:"iconoir:pause-solid"})})})}),color:M.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,P.jsx)(x.A,{children:(0,P.jsxs)(s.A,{ref:t,size:e.dense?"small":"medium",children:[(0,P.jsx)(v.er,{order:e.order,orderBy:e.orderBy,headLabel:ze,rowCount:M.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,M.map(((e,t)=>e._id)))}),(0,P.jsxs)(r.A,{children:[M.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map(((t,n)=>(0,P.jsx)($e,{row:t,filters:b,setFilters:C,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onActivate:()=>B(t._id),onInactivate:()=>H(t._id),onEditRow:()=>Q(t._id)},n))),(0,P.jsx)(v.Sm,{notFound:D})]})]})})]}),(0,P.jsx)(v.We,{count:M.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,P.jsx)(g.T,{open:y.value,onClose:y.onFalse,title:"Inactivate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Inactivate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"error",onClick:()=>{V(),y.onFalse()},children:"Inactivate"})}),(0,P.jsx)(g.T,{open:u.value,onClose:u.onFalse,title:"Activate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Activate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"primary",onClick:()=>{G(),u.onFalse()},children:"Activate"})})]})}function Je(e){let{row:t,selected:n,onEditRow:o,onSelectRow:a,onInactivate:s,onActivate:i,filters:l,setFilters:r}=e;const{code:d,name_english:c,name_arabic:p,status:h,created_at:x,user_creation:g,ip_address_user_creation:m,updated_at:v,user_modification:y,ip_address_user_modification:j,modifications_nums:k}=t,R=(0,C.f)(),M=(0,C.f)(),S=(0,P.jsxs)(f.A,{hover:!0,selected:n,children:[(0,P.jsx)(b.A,{padding:"checkbox",children:(0,P.jsx)(V.A,{checked:n,onClick:a})}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(A.A,{children:d})}),(0,P.jsx)(b.A,{align:"center",children:c}),(0,P.jsx)(b.A,{align:"center",children:p}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(N.A,{variant:"soft",color:("active"===h?"success":"inactive"===h&&"error")||"default",children:h})}),(0,P.jsx)(b.A,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,P.jsx)(w.A,{color:R.open?"inherit":"default",onClick:R.onOpen,children:(0,P.jsx)(_.A,{icon:"eva:more-vertical-fill"})})})]});return(0,P.jsxs)(P.Fragment,{children:[S,(0,P.jsxs)(C.A,{open:R.open,onClose:R.onClose,arrow:"right-top",sx:{width:140},children:["active"===h?(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{s(),R.onClose()},sx:{color:"error.main"},children:[(0,P.jsx)(_.A,{icon:"ic:baseline-pause"}),"Inactivate"]}):(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{i(),R.onClose()},sx:{color:"success.main"},children:[(0,P.jsx)(_.A,{icon:"bi:play-fill"}),"activate"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{o(),R.onClose()},children:[(0,P.jsx)(_.A,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:M.onOpen,children:[(0,P.jsx)(_.A,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,P.jsxs)(C.A,{open:M.open,onClose:M.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,P.jsx)(A.A,{sx:{fontWeight:600},children:"Creation Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(x,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(x,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===g||void 0===g?void 0:g.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:m}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(v,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(v,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===y||void 0===y?void 0:y.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:j}),(0,P.jsxs)(A.A,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",k]})]})]})}const Ke=[{value:"active",label:"active"},{value:"inactive",label:"inactive"}],Xe=[{id:"code",label:"Code"},{id:"name_english",label:"name"},{id:"name_arabic",label:"arabic name"},{id:"status",label:"Status"},{id:"",width:88}],Ye={name:"",status:"active"};function He(){const e=(0,v.K2)({defaultOrderBy:"code"}),t=(0,o.useRef)(),n=(0,p.rd)(),u=(0,h.C)(),y=(0,h.C)(),{paymentMethodsData:j,loading:A,refetch:f}=(0,O.OCj)(),[b,C]=(0,o.useState)(Ye),k=!(!b.startDate||!b.endDate)&&b.startDate.getTime()>b.endDate.getTime(),R=function(e){let{inputData:t,comparator:n,filters:o,dateError:a}=e;const{status:s,name:i}=o,l=t.map(((e,t,n)=>[e,t]));l.sort(((e,t)=>{const o=n(e[0],t[0]);return 0!==o?o:e[1]-t[1]})),t=l.map(((e,t)=>e[0])),i&&(t=t.filter((e=>{var t;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===i||JSON.stringify(e.code)===i})));"all"!==s&&(t=t.filter((e=>e.status===s)));return t}({inputData:j,comparator:(0,v.hz)(e.order,e.orderBy),filters:b,dateError:k}),M=R.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),S=!(null===b||void 0===b||!b.name)||"active"!==b.status,T=!R.length&&S||!R.length,D=(0,I.useReactToPrint)({content:()=>t.current}),W=(0,o.useCallback)(((t,n)=>{e.onResetPage(),C((e=>({...e,[t]:n})))}),[e]),F=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.payment_methods.one(t)}/updatestatus`,{status:"active"}),f(),e.onUpdatePageDeleteRow(M.length)}),[M.length,e,f]),B=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.payment_methods.one(t)}/updatestatus`,{status:"inactive"}),f(),e.onUpdatePageDeleteRow(M.length)}),[M.length,e,f]),H=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.payment_methods.all}/updatestatus`,{status:"active",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:M.length,totalRowsFiltered:R.length})}),[R.length,M.length,e,j,f]),G=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.payment_methods.all}/updatestatus`,{status:"inactive",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:M.length,totalRowsFiltered:R.length})}),[R.length,M.length,e,j,f]),V=(0,o.useCallback)((e=>{n.push(c.f.superadmin.tables.paymentmethods.edit(e))}),[n]),Q=(0,o.useCallback)((()=>{C(Ye)}),[]),ee=(0,o.useCallback)(((e,t)=>{W("status",t)}),[W]);return A?(0,P.jsx)($.x,{}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(l.A,{maxWidth:"xl",children:[(0,P.jsx)(m.A,{heading:"Payment Methods",links:[{name:"dashboard",href:c.f.superadmin.root},{name:"Tables",href:c.f.superadmin.tables.list},{name:"Payment Methods"}],action:(0,P.jsx)(i.A,{component:E.W,href:c.f.superadmin.tables.paymentmethods.new,variant:"contained",startIcon:(0,P.jsx)(_.A,{icon:"mingcute:add-line"}),children:"New Payment Method"}),sx:{mb:{xs:3,md:5}}}),(0,P.jsxs)(a.A,{children:[(0,P.jsx)(K.A,{value:b.status,onChange:ee,sx:{px:2.5,boxShadow:e=>`inset 0 -2px 0 0 ${(0,Y.X4)(e.palette.grey[500],.08)}`},children:Ke.map(((e,t)=>(0,P.jsx)(J.A,{iconPosition:"end",value:e.value,label:e.label,icon:(0,P.jsxs)(N.A,{variant:"all"===e.value||e.value===b.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&j.length,"active"===e.value&&j.filter((e=>"active"===e.status)).length,"inactive"===e.value&&j.filter((e=>"inactive"===e.status)).length]})},t)))}),(0,P.jsx)(z.A,{onPrint:D,filters:b,onFilters:W,onDownload:()=>{const e=R.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.Wp.book_new(),n=q.Wp.json_to_sheet(e);q.Wp.book_append_sheet(t,n,"Sheet 1");const o=q.M9(t,{bookType:"xlsx",type:"array"}),a=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,L.saveAs)(a,"PaymentMethodsTable.xlsx")},canReset:S,onResetFilters:Q}),S&&(0,P.jsx)(Z.A,{filters:b,onFilters:W,onResetFilters:Q,results:R.length,sx:{p:2.5,pt:0}}),(0,P.jsxs)(d.A,{children:[(0,P.jsx)(v.Uv,{numSelected:e.selected.length,rowCount:R.length,onSelectAllRows:t=>e.onSelectAllRows(t,R.map(((e,t)=>e._id))),action:(0,P.jsx)(P.Fragment,{children:R.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?(0,P.jsx)(X.A,{title:"Activate all",children:(0,P.jsx)(w.A,{color:"primary",onClick:u.onTrue,children:(0,P.jsx)(_.A,{icon:"codicon:run-all"})})}):(0,P.jsx)(X.A,{title:"Inactivate all",children:(0,P.jsx)(w.A,{color:"error",onClick:y.onTrue,children:(0,P.jsx)(_.A,{icon:"iconoir:pause-solid"})})})}),color:R.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,P.jsx)(x.A,{children:(0,P.jsxs)(s.A,{ref:t,size:e.dense?"small":"medium",children:[(0,P.jsx)(v.er,{order:e.order,orderBy:e.orderBy,headLabel:Xe,rowCount:R.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,R.map(((e,t)=>e._id)))}),(0,P.jsxs)(r.A,{children:[R.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map(((t,n)=>(0,P.jsx)(Je,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onActivate:()=>F(t._id),onInactivate:()=>B(t._id),onEditRow:()=>V(t._id)},n))),(0,P.jsx)(v.Sm,{notFound:T})]})]})})]}),(0,P.jsx)(v.We,{count:R.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,P.jsx)(g.T,{open:y.value,onClose:y.onFalse,title:"Inactivate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Inactivate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"error",onClick:()=>{G(),y.onFalse()},children:"Inactivate"})}),(0,P.jsx)(g.T,{open:u.value,onClose:u.onFalse,title:"Activate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Activate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"primary",onClick:()=>{H(),u.onFalse()},children:"Activate"})})]})}function Ge(e){let{row:t,selected:n,onEditRow:o}=e;const{code:a,name_english:s,name_arabic:i,created_at:l,user_creation:r,ip_address_user_creation:d,updated_at:c,user_modification:p,ip_address_user_modification:h,modifications_nums:x}=t,g=(0,C.f)(),m=(0,C.f)(),v=(0,P.jsxs)(f.A,{hover:!0,selected:n,children:[(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(A.A,{children:a})}),(0,P.jsx)(b.A,{align:"center",children:s}),(0,P.jsx)(b.A,{align:"center",children:i}),(0,P.jsx)(b.A,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,P.jsx)(w.A,{color:g.open?"inherit":"default",onClick:g.onOpen,children:(0,P.jsx)(_.A,{icon:"eva:more-vertical-fill"})})})]});return(0,P.jsxs)(P.Fragment,{children:[v,(0,P.jsxs)(C.A,{open:g.open,onClose:g.onClose,arrow:"right-top",sx:{width:140},children:[(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{o(),g.onClose()},children:[(0,P.jsx)(_.A,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:m.onOpen,children:[(0,P.jsx)(_.A,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,P.jsxs)(C.A,{open:m.open,onClose:m.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,P.jsx)(A.A,{sx:{fontWeight:600},children:"Creation Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(l,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(l,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===r||void 0===r?void 0:r.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:d}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(c,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(c,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===p||void 0===p?void 0:p.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:h}),(0,P.jsxs)(A.A,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",x]})]})]})}const Ve=[{id:"code",label:"Code"},{id:"name_english",label:"name"},{id:"name_arabic",label:"arabic name"},{id:"",width:88}],Qe={name:""};function et(){const e=(0,v.K2)({defaultOrderBy:"code"}),t=(0,o.useRef)(),n=(0,p.rd)(),{Family:h,loading:u}=(0,O.lK2)(),[g,y]=(0,o.useState)(Qe),j=!(!g.startDate||!g.endDate)&&g.startDate.getTime()>g.endDate.getTime(),A=function(e){let{inputData:t,comparator:n,filters:o,dateError:a}=e;const{name:s}=o,i=t.map(((e,t,n)=>[e,t]));i.sort(((e,t)=>{const o=n(e[0],t[0]);return 0!==o?o:e[1]-t[1]})),t=i.map(((e,t)=>e[0])),s&&(t=t.filter((e=>{var t;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(s.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(s.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===s||JSON.stringify(e.code)===s})));return t}({inputData:h,comparator:(0,v.hz)(e.order,e.orderBy),filters:g,dateError:j}),f=!(null===g||void 0===g||!g.name),b=!A.length&&f||!A.length,w=(0,I.useReactToPrint)({content:()=>t.current}),C=(0,o.useCallback)(((t,n)=>{e.onResetPage(),y((e=>({...e,[t]:n})))}),[e]),k=(0,o.useCallback)((e=>{n.push(c.f.superadmin.tables.family_relation.edit(e))}),[n]),R=(0,o.useCallback)((()=>{y(Qe)}),[]);return u?(0,P.jsx)($.x,{}):(0,P.jsxs)(l.A,{maxWidth:"xl",children:[(0,P.jsx)(m.A,{heading:"Family relations",links:[{name:"dashboard",href:c.f.superadmin.root},{name:"Tables",href:c.f.superadmin.tables.list},{name:"Family relations"}],action:(0,P.jsx)(i.A,{component:E.W,href:c.f.superadmin.tables.family_relation.new,variant:"contained",startIcon:(0,P.jsx)(_.A,{icon:"mingcute:add-line"}),children:"New family relation"}),sx:{mb:{xs:3,md:5}}}),(0,P.jsxs)(a.A,{children:[(0,P.jsx)(z.A,{onPrint:w,filters:g,onFilters:C,onDownload:()=>{const e=A.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.Wp.book_new(),n=q.Wp.json_to_sheet(e);q.Wp.book_append_sheet(t,n,"Sheet 1");const o=q.M9(t,{bookType:"xlsx",type:"array"}),a=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,L.saveAs)(a,"RoomsTable.xlsx")},canReset:f,onResetFilters:R}),f&&(0,P.jsx)(Z.A,{filters:g,onFilters:C,onResetFilters:R,results:A.length,sx:{p:2.5,pt:0}}),(0,P.jsx)(d.A,{children:(0,P.jsx)(x.A,{children:(0,P.jsxs)(s.A,{ref:t,size:e.dense?"small":"medium",children:[(0,P.jsx)(v.er,{order:e.order,orderBy:e.orderBy,headLabel:Ve,rowCount:A.length,numSelected:e.selected.length,onSort:e.onSort}),(0,P.jsxs)(r.A,{children:[A.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map(((t,n)=>(0,P.jsx)(Ge,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onEditRow:()=>k(t._id)},n))),(0,P.jsx)(v.Sm,{notFound:b})]})]})})}),(0,P.jsx)(v.We,{count:A.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]})}function tt(e){let{row:t,selected:n,onEditRow:o,onSelectRow:a,onInactivate:s,onActivate:i,filters:l,onFilters:r}=e;const{code:d,name_english:c,name_arabic:p,country:h,city:x,type:g,Comment:m,percentage:v,amount:y,status:j,created_at:k,user_creation:R,ip_address_user_creation:M,updated_at:S,user_modification:T,ip_address_user_modification:D,modifications_nums:W}=t,F=(0,C.f)(),B=(0,C.f)(),L=(0,P.jsxs)(f.A,{hover:!0,selected:n,children:[(0,P.jsx)(b.A,{padding:"checkbox",children:(0,P.jsx)(V.A,{checked:n,onClick:a})}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(A.A,{children:d})}),(0,P.jsx)(b.A,{align:"center",children:c}),(0,P.jsx)(b.A,{align:"center",children:p}),(0,P.jsx)(b.A,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r("name",null===h||void 0===h?void 0:h.name_english),children:null===h||void 0===h?void 0:h.name_english}),(0,P.jsx)(b.A,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r("name",null===x||void 0===x?void 0:x.name_english),children:null===x||void 0===x?void 0:x.name_english}),(0,P.jsx)(b.A,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>r("name",g),children:g}),(0,P.jsx)(b.A,{align:"center",children:m}),(0,P.jsx)(b.A,{align:"center",children:v}),(0,P.jsx)(b.A,{align:"center",children:y}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(N.A,{variant:"soft",color:("active"===j?"success":"inactive"===j&&"error")||"default",children:j})}),(0,P.jsx)(b.A,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,P.jsx)(w.A,{color:B.open?"inherit":"default",onClick:B.onOpen,children:(0,P.jsx)(_.A,{icon:"eva:more-vertical-fill"})})})]});return(0,P.jsxs)(P.Fragment,{children:[L,(0,P.jsxs)(C.A,{open:B.open,onClose:B.onClose,arrow:"right-top",sx:{width:140},children:["active"===j?(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{s(),B.onClose()},sx:{color:"error.main"},children:[(0,P.jsx)(_.A,{icon:"ic:baseline-pause"}),"Inactivate"]}):(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{i(),B.onClose()},sx:{color:"success.main"},children:[(0,P.jsx)(_.A,{icon:"bi:play-fill"}),"activate"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{o(),B.onClose()},children:[(0,P.jsx)(_.A,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:F.onOpen,children:[(0,P.jsx)(_.A,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,P.jsxs)(C.A,{open:F.open,onClose:F.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,P.jsx)(A.A,{sx:{fontWeight:600},children:"Creation Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(k,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(k,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===R||void 0===R?void 0:R.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:M}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(S,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(S,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===T||void 0===T?void 0:T.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:D}),(0,P.jsxs)(A.A,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",W]})]})]})}const nt=[{value:"active",label:"active"},{value:"inactive",label:"inactive"}],ot=[{id:"code",label:"Code"},{id:"name_english",label:"name"},{id:"name_english",label:"arabic name"},{id:"country",label:"country"},{id:"city",label:"city"},{id:"type",label:"type"},{id:"Comment",label:"Comment"},{id:"percentage",label:"percentage"},{id:"amount",label:"amount"},{id:"status",label:"Status"},{id:"",width:88}],at={name:"",status:"active"};function st(){const e=(0,v.K2)({defaultOrderBy:"code"}),t=(0,o.useRef)(),n=(0,p.rd)(),u=(0,h.C)(),y=(0,h.C)(),{deductionsData:j,loading:A,refetch:f}=(0,O.ADy)(),[b,C]=(0,o.useState)(at),k=!(!b.startDate||!b.endDate)&&b.startDate.getTime()>b.endDate.getTime(),R=function(e){var t;let{inputData:n,comparator:o,filters:a,dateError:s}=e;const{status:i,name:l}=a,r=null===(t=n)||void 0===t?void 0:t.map(((e,t,n)=>[e,t]));r.sort(((e,t)=>{const n=o(e[0],t[0]);return 0!==n?n:e[1]-t[1]})),n=r.map(((e,t)=>e[0])),l&&(n=n.filter((e=>{var t,n,o,a,s,i,r,d,c;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(n=e.country)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(o=e.country)||void 0===o?void 0:o.name_english.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(a=e.country)||void 0===a?void 0:a.name_arabic)&&-1!==(null===e||void 0===e||null===(s=e.country)||void 0===s?void 0:s.name_arabic.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(i=e.city)||void 0===i?void 0:i.name_english)&&-1!==(null===e||void 0===e||null===(r=e.city)||void 0===r?void 0:r.name_english.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e||null===(d=e.city)||void 0===d?void 0:d.name_arabic)&&-1!==(null===e||void 0===e||null===(c=e.city)||void 0===c?void 0:c.name_arabic.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e.type)&&-1!==(null===e||void 0===e?void 0:e.type.toLowerCase().indexOf(l.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===l||JSON.stringify(e.code)===l})));"all"!==i&&(n=n.filter((e=>e.status===i)));return n}({inputData:j,comparator:(0,v.hz)(e.order,e.orderBy),filters:b,dateError:k}),M=R.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),S=!(null===b||void 0===b||!b.name)||"active"!==b.status,T=!R.length&&S||!R.length,D=(0,I.useReactToPrint)({content:()=>t.current}),W=(0,o.useCallback)(((t,n)=>{e.onResetPage(),C((e=>({...e,[t]:n})))}),[e]),F=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.deductions.one(t)}/updatestatus`,{status:"active"}),f(),e.onUpdatePageDeleteRow(M.length)}),[M.length,e,f]),B=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.deductions.one(t)}/updatestatus`,{status:"inactive"}),f(),e.onUpdatePageDeleteRow(M.length)}),[M.length,e,f]),H=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.deductions.all}/updatestatus`,{status:"active",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:M.length,totalRowsFiltered:R.length})}),[R.length,M.length,e,j,f]),G=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.deductions.all}/updatestatus`,{status:"inactive",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:M.length,totalRowsFiltered:R.length})}),[R.length,M.length,e,j,f]),V=(0,o.useCallback)((e=>{n.push(c.f.superadmin.tables.deductionconfig.edit(e))}),[n]),Q=(0,o.useCallback)((()=>{C(at)}),[]),ee=(0,o.useCallback)(((e,t)=>{W("status",t)}),[W]);return A?(0,P.jsx)($.x,{}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(l.A,{maxWidth:"xl",children:[(0,P.jsx)(m.A,{heading:"Deduction Config",links:[{name:"dashboard",href:c.f.superadmin.root},{name:"Tables",href:c.f.superadmin.tables.list},{name:"Deduction Config"}],action:(0,P.jsx)(i.A,{component:E.W,href:c.f.superadmin.tables.deductionconfig.new,variant:"contained",startIcon:(0,P.jsx)(_.A,{icon:"mingcute:add-line"}),children:"New Deduction Config"}),sx:{mb:{xs:3,md:5}}}),(0,P.jsxs)(a.A,{children:[(0,P.jsx)(K.A,{value:b.status,onChange:ee,sx:{px:2.5,boxShadow:e=>`inset 0 -2px 0 0 ${(0,Y.X4)(e.palette.grey[500],.08)}`},children:nt.map(((e,t)=>(0,P.jsx)(J.A,{iconPosition:"end",value:e.value,label:e.label,icon:(0,P.jsxs)(N.A,{variant:"all"===e.value||e.value===b.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&j.length,"active"===e.value&&j.filter((e=>"active"===e.status)).length,"inactive"===e.value&&j.filter((e=>"inactive"===e.status)).length]})},t)))}),(0,P.jsx)(z.A,{onPrint:D,filters:b,onFilters:W,onDownload:()=>{const e=R.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.Wp.book_new(),n=q.Wp.json_to_sheet(e);q.Wp.book_append_sheet(t,n,"Sheet 1");const o=q.M9(t,{bookType:"xlsx",type:"array"}),a=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,L.saveAs)(a,"DeductionsTable.xlsx")},canReset:S,onResetFilters:Q}),S&&(0,P.jsx)(Z.A,{filters:b,onFilters:W,onResetFilters:Q,results:R.length,sx:{p:2.5,pt:0}}),(0,P.jsxs)(d.A,{children:[(0,P.jsx)(v.Uv,{numSelected:e.selected.length,rowCount:R.length,onSelectAllRows:t=>e.onSelectAllRows(t,R.map(((e,t)=>e._id))),action:(0,P.jsx)(P.Fragment,{children:R.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?(0,P.jsx)(X.A,{title:"Activate all",children:(0,P.jsx)(w.A,{color:"primary",onClick:u.onTrue,children:(0,P.jsx)(_.A,{icon:"codicon:run-all"})})}):(0,P.jsx)(X.A,{title:"Inactivate all",children:(0,P.jsx)(w.A,{color:"error",onClick:y.onTrue,children:(0,P.jsx)(_.A,{icon:"iconoir:pause-solid"})})})}),color:R.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,P.jsx)(x.A,{children:(0,P.jsxs)(s.A,{ref:t,size:e.dense?"small":"medium",children:[(0,P.jsx)(v.er,{order:e.order,orderBy:e.orderBy,headLabel:ot,rowCount:R.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,R.map(((e,t)=>e._id)))}),(0,P.jsxs)(r.A,{children:[R.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map(((t,n)=>(0,P.jsx)(tt,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onActivate:()=>F(t._id),onInactivate:()=>B(t._id),onEditRow:()=>V(t._id),onFilters:W},n))),(0,P.jsx)(v.Sm,{notFound:T})]})]})})]}),(0,P.jsx)(v.We,{count:R.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,P.jsx)(g.T,{open:y.value,onClose:y.onFalse,title:"Inactivate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Inactivate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"error",onClick:()=>{G(),y.onFalse()},children:"Inactivate"})}),(0,P.jsx)(g.T,{open:u.value,onClose:u.onFalse,title:"Activate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Activate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"primary",onClick:()=>{H(),u.onFalse()},children:"Activate"})})]})}function it(e){let{row:t,selected:n,onEditRow:o,onSelectRow:a,onInactivate:s,onActivate:i,filters:l,setFilters:r}=e;const{code:d,symbol:c,name_english:p,name_arabic:h,status:x,created_at:g,user_creation:m,ip_address_user_creation:v,updated_at:y,user_modification:j,ip_address_user_modification:k,modifications_nums:R}=t,M=(0,C.f)(),S=(0,C.f)(),T=(0,P.jsxs)(f.A,{hover:!0,selected:n,children:[(0,P.jsx)(b.A,{padding:"checkbox",children:(0,P.jsx)(V.A,{checked:n,onClick:a})}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(A.A,{children:d})}),(0,P.jsx)(b.A,{align:"center",children:c}),(0,P.jsx)(b.A,{align:"center",children:p}),(0,P.jsx)(b.A,{align:"center",children:h}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(N.A,{variant:"soft",color:("active"===x?"success":"inactive"===x&&"error")||"default",children:x})}),(0,P.jsx)(b.A,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,P.jsx)(w.A,{color:S.open?"inherit":"default",onClick:S.onOpen,children:(0,P.jsx)(_.A,{icon:"eva:more-vertical-fill"})})})]});return(0,P.jsxs)(P.Fragment,{children:[T,(0,P.jsxs)(C.A,{open:S.open,onClose:S.onClose,arrow:"right-top",sx:{width:140},children:["active"===x?(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{s(),S.onClose()},sx:{color:"error.main"},children:[(0,P.jsx)(_.A,{icon:"ic:baseline-pause"}),"Inactivate"]}):(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{i(),S.onClose()},sx:{color:"success.main"},children:[(0,P.jsx)(_.A,{icon:"bi:play-fill"}),"activate"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{o(),S.onClose()},children:[(0,P.jsx)(_.A,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:M.onOpen,children:[(0,P.jsx)(_.A,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,P.jsxs)(C.A,{open:M.open,onClose:M.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,P.jsx)(A.A,{sx:{fontWeight:600},children:"Creation Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(g,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(g,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===m||void 0===m?void 0:m.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:v}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(y,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(y,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===j||void 0===j?void 0:j.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:k}),(0,P.jsxs)(A.A,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",R]})]})]})}const lt=[{value:"active",label:"active"},{value:"inactive",label:"inactive"}],rt=[{id:"code",label:"Code"},{id:"symbol",label:"Symbol"},{id:"name_english",label:"name"},{id:"name_arabic",label:"arabic name"},{id:"status",label:"Status"},{id:"",width:88}],dt={name:"",status:"active"};function ct(){const e=(0,v.K2)({defaultOrderBy:"code"}),t=(0,o.useRef)(),n=(0,p.rd)(),u=(0,h.C)(),y=(0,h.C)(),{measurmentTypesData:j,loading:A,refetch:f}=(0,O.o8H)(),[b,C]=(0,o.useState)(dt),k=(0,p.ok)().get("upload_record");(0,o.useEffect)((()=>{k&&C((e=>({...e,name:k})))}),[k]);const R=!(!b.startDate||!b.endDate)&&b.startDate.getTime()>b.endDate.getTime(),M=function(e){let{inputData:t,comparator:n,filters:o,dateError:a}=e;const{status:s,name:i}=o,l=t.map(((e,t,n)=>[e,t]));l.sort(((e,t)=>{const o=n(e[0],t[0]);return 0!==o?o:e[1]-t[1]})),t=l.map(((e,t)=>e[0])),i&&(t=t.filter((e=>{var t;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===i||(null===e||void 0===e?void 0:e.symbol)===i||(null===e||void 0===e?void 0:e.upload_record)===i||JSON.stringify(e.code)===i})));"all"!==s&&(t=t.filter((e=>e.status===s)));return t}({inputData:j,comparator:(0,v.hz)(e.order,e.orderBy),filters:b,dateError:R}),S=M.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),T=!(null===b||void 0===b||!b.name)||"active"!==b.status,D=!M.length&&T||!M.length,W=(0,I.useReactToPrint)({content:()=>t.current}),F=(0,o.useCallback)(((t,n)=>{e.onResetPage(),C((e=>({...e,[t]:n})))}),[e]),B=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.measurment_types.one(t)}/updatestatus`,{status:"active"}),f(),e.onUpdatePageDeleteRow(S.length)}),[S.length,e,f]),H=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.measurment_types.one(t)}/updatestatus`,{status:"inactive"}),f(),e.onUpdatePageDeleteRow(S.length)}),[S.length,e,f]),G=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.measurment_types.ones}/updatestatus`,{status:"active",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:S.length,totalRowsFiltered:M.length})}),[M.length,S.length,e,j,f]),V=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.measurment_types.ones}/updatestatus`,{status:"inactive",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:S.length,totalRowsFiltered:M.length})}),[M.length,S.length,e,j,f]),Q=(0,o.useCallback)((e=>{n.push(c.f.superadmin.tables.measurementtypes.edit(e))}),[n]),ee=(0,o.useCallback)((()=>{C(dt)}),[]),te=(0,o.useCallback)(((e,t)=>{F("status",t)}),[F]);return A?(0,P.jsx)($.x,{}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(l.A,{maxWidth:"xl",children:[(0,P.jsx)(m.A,{heading:"Measurment Types",links:[{name:"dashboard",href:c.f.superadmin.root},{name:"Tables",href:c.f.superadmin.tables.list},{name:"Measurment Types"}],action:(0,P.jsx)(i.A,{component:E.W,href:c.f.superadmin.tables.measurementtypes.new,variant:"contained",startIcon:(0,P.jsx)(_.A,{icon:"mingcute:add-line"}),children:"New Measurment Type"}),sx:{mb:{xs:3,md:5}}}),(0,P.jsxs)(a.A,{children:[(0,P.jsx)(K.A,{value:b.status,onChange:te,sx:{px:2.5,boxShadow:e=>`inset 0 -2px 0 0 ${(0,Y.X4)(e.palette.grey[500],.08)}`},children:lt.map(((e,t)=>(0,P.jsx)(J.A,{iconPosition:"end",value:e.value,label:e.label,icon:(0,P.jsxs)(N.A,{variant:"all"===e.value||e.value===b.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&j.length,"active"===e.value&&j.filter((e=>"active"===e.status)).length,"inactive"===e.value&&j.filter((e=>"inactive"===e.status)).length]})},t)))}),(0,P.jsx)(z.A,{onPrint:W,filters:b,onFilters:F,onDownload:()=>{const e=M.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.Wp.book_new(),n=q.Wp.json_to_sheet(e);q.Wp.book_append_sheet(t,n,"Sheet 1");const o=q.M9(t,{bookType:"xlsx",type:"array"}),a=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,L.saveAs)(a,"MeasurmentTypesTable.xlsx")},canReset:T,onResetFilters:ee}),T&&(0,P.jsx)(Z.A,{filters:b,onFilters:F,onResetFilters:ee,results:M.length,sx:{p:2.5,pt:0}}),(0,P.jsxs)(d.A,{children:[(0,P.jsx)(v.Uv,{numSelected:e.selected.length,rowCount:M.length,onSelectAllRows:t=>e.onSelectAllRows(t,M.map(((e,t)=>e._id))),action:(0,P.jsx)(P.Fragment,{children:M.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?(0,P.jsx)(X.A,{title:"Activate all",children:(0,P.jsx)(w.A,{color:"primary",onClick:u.onTrue,children:(0,P.jsx)(_.A,{icon:"codicon:run-all"})})}):(0,P.jsx)(X.A,{title:"Inactivate all",children:(0,P.jsx)(w.A,{color:"error",onClick:y.onTrue,children:(0,P.jsx)(_.A,{icon:"iconoir:pause-solid"})})})}),color:M.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,P.jsx)(x.A,{children:(0,P.jsxs)(s.A,{ref:t,size:e.dense?"small":"medium",children:[(0,P.jsx)(v.er,{order:e.order,orderBy:e.orderBy,headLabel:rt,rowCount:M.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,M.map(((e,t)=>e._id)))}),(0,P.jsxs)(r.A,{children:[M.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map(((t,n)=>(0,P.jsx)(it,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onActivate:()=>B(t._id),onInactivate:()=>H(t._id),onEditRow:()=>Q(t._id)},n))),(0,P.jsx)(v.Sm,{notFound:D})]})]})})]}),(0,P.jsx)(v.We,{count:M.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,P.jsx)(g.T,{open:y.value,onClose:y.onFalse,title:"Inactivate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Inactivate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"error",onClick:()=>{V(),y.onFalse()},children:"Inactivate"})}),(0,P.jsx)(g.T,{open:u.value,onClose:u.onFalse,title:"Activate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Activate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"primary",onClick:()=>{G(),u.onFalse()},children:"Activate"})})]})}function pt(e){let{row:t,selected:n,onEditRow:o,onSelectRow:a,onInactivate:s,onActivate:i,filters:l,setFilters:r}=e;const{code:d,name_english:c,name_arabic:p,description:h,status:x,created_at:g,user_creation:m,ip_address_user_creation:v,updated_at:y,user_modification:j,ip_address_user_modification:k,modifications_nums:R}=t,M=(0,C.f)(),S=(0,C.f)(),T=(0,P.jsxs)(f.A,{hover:!0,selected:n,children:[(0,P.jsx)(b.A,{padding:"checkbox",children:(0,P.jsx)(V.A,{checked:n,onClick:a})}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(A.A,{children:d})}),(0,P.jsx)(b.A,{align:"center",children:c}),(0,P.jsx)(b.A,{align:"center",children:p}),(0,P.jsx)(b.A,{align:"center",children:h}),(0,P.jsx)(b.A,{align:"center",children:(0,P.jsx)(N.A,{variant:"soft",color:("active"===x?"success":"inactive"===x&&"error")||"default",children:x})}),(0,P.jsx)(b.A,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,P.jsx)(w.A,{color:M.open?"inherit":"default",onClick:M.onOpen,children:(0,P.jsx)(_.A,{icon:"eva:more-vertical-fill"})})})]});return(0,P.jsxs)(P.Fragment,{children:[T,(0,P.jsxs)(C.A,{open:M.open,onClose:M.onClose,arrow:"right-top",sx:{width:140},children:["active"===x?(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{s(),M.onClose()},sx:{color:"error.main"},children:[(0,P.jsx)(_.A,{icon:"ic:baseline-pause"}),"Inactivate"]}):(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{i(),M.onClose()},sx:{color:"success.main"},children:[(0,P.jsx)(_.A,{icon:"bi:play-fill"}),"activate"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:()=>{o(),M.onClose()},children:[(0,P.jsx)(_.A,{icon:"fluent:edit-32-filled"}),"Edit"]}),(0,P.jsxs)(G.A,{lang:"ar",onClick:S.onOpen,children:[(0,P.jsx)(_.A,{icon:"carbon:data-quality-definition"}),"DDL"]})]}),(0,P.jsxs)(C.A,{open:S.open,onClose:S.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,P.jsx)(A.A,{sx:{fontWeight:600},children:"Creation Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(g,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(g,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===m||void 0===m?void 0:m.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"created by IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:v}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editing Time:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,P.jsx)(H.A,{primary:(0,u.ts)(y,"dd MMMMMMMM yyyy"),secondary:(0,u.ts)(y,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===j||void 0===j?void 0:j.email}),(0,P.jsx)(A.A,{sx:{pt:1,fontWeight:600},children:"Editor IP:"}),(0,P.jsx)(A.A,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:k}),(0,P.jsxs)(A.A,{sx:{pt:1,fontWeight:600},children:["Modifications No: ",R]})]})]})}const ht=[{value:"active",label:"active"},{value:"inactive",label:"inactive"}],ut=[{id:"code",label:"Code"},{id:"name_english",label:"name"},{id:"name_arabic",label:"arabic name"},{id:"description",label:"Description"},{id:"status",label:"Status"},{id:"",width:88}],xt={name:"",status:"active"};function gt(){const e=(0,v.K2)({defaultOrderBy:"code"}),t=(0,o.useRef)(),n=(0,p.rd)(),u=(0,h.C)(),y=(0,h.C)(),{stakeholderTypesData:j,loading:A,refetch:f}=(0,O.NYJ)(),[b,C]=(0,o.useState)(xt),k=!(!b.startDate||!b.endDate)&&b.startDate.getTime()>b.endDate.getTime(),R=function(e){let{inputData:t,comparator:n,filters:o,dateError:a}=e;const{status:s,name:i}=o,l=t.map(((e,t,n)=>[e,t]));l.sort(((e,t)=>{const o=n(e[0],t[0]);return 0!==o?o:e[1]-t[1]})),t=l.map(((e,t)=>e[0])),i&&(t=t.filter((e=>{var t,n,o,a,s,l,r,d,c;return-1!==(null===e||void 0===e?void 0:e.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(t=e.name_arabic)||void 0===t?void 0:t.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(n=e.unit_service)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(o=e.unit_service)||void 0===o?void 0:o.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(a=e.unit_service)||void 0===a?void 0:a.name_arabic)&&-1!==(null===e||void 0===e||null===(s=e.unit_service)||void 0===s?void 0:s.name_arabic.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(l=e.service)||void 0===l?void 0:l.name_english)&&-1!==(null===e||void 0===e||null===(r=e.service)||void 0===r?void 0:r.name_english.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(d=e.service)||void 0===d?void 0:d.name_arabic)&&-1!==(null===e||void 0===e||null===(c=e.service)||void 0===c?void 0:c.name_arabic.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===i||JSON.stringify(e.code)===i})));"all"!==s&&(t=t.filter((e=>e.status===s)));return t}({inputData:j,comparator:(0,v.hz)(e.order,e.orderBy),filters:b,dateError:k}),M=R.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),S=!(null===b||void 0===b||!b.name)||"active"!==b.status,T=!R.length&&S||!R.length,D=(0,I.useReactToPrint)({content:()=>t.current}),W=(0,o.useCallback)(((t,n)=>{e.onResetPage(),C((e=>({...e,[t]:n})))}),[e]),F=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.stakeholder_types.one(t)}/updatestatus`,{status:"active"}),f(),e.onUpdatePageDeleteRow(M.length)}),[M.length,e,f]),B=(0,o.useCallback)((async t=>{await U.Ay.patch(`${U.vZ.stakeholder_types.one(t)}/updatestatus`,{status:"inactive"}),f(),e.onUpdatePageDeleteRow(M.length)}),[M.length,e,f]),H=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.stakeholder_types.all}/updatestatus`,{status:"active",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:M.length,totalRowsFiltered:R.length})}),[R.length,M.length,e,j,f]),G=(0,o.useCallback)((async()=>{U.Ay.patch(`${U.vZ.stakeholder_types.all}/updatestatus`,{status:"inactive",ids:e.selected}),f(),e.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:M.length,totalRowsFiltered:R.length})}),[R.length,M.length,e,j,f]),V=(0,o.useCallback)((e=>{n.push(c.f.superadmin.tables.stakeholdertypes.edit(e))}),[n]),Q=(0,o.useCallback)((()=>{C(xt)}),[]),ee=(0,o.useCallback)(((e,t)=>{W("status",t)}),[W]);return A?(0,P.jsx)($.x,{}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(l.A,{maxWidth:"xl",children:[(0,P.jsx)(m.A,{heading:"Stakeholder Types",links:[{name:"dashboard",href:c.f.superadmin.root},{name:"Tables",href:c.f.superadmin.tables.list},{name:"Stakeholder Types"}],action:(0,P.jsx)(i.A,{component:E.W,href:c.f.superadmin.tables.stakeholdertypes.new,variant:"contained",startIcon:(0,P.jsx)(_.A,{icon:"mingcute:add-line"}),children:"New Stakeholder Type"}),sx:{mb:{xs:3,md:5}}}),(0,P.jsxs)(a.A,{children:[(0,P.jsx)(K.A,{value:b.status,onChange:ee,sx:{px:2.5,boxShadow:e=>`inset 0 -2px 0 0 ${(0,Y.X4)(e.palette.grey[500],.08)}`},children:ht.map(((e,t)=>(0,P.jsx)(J.A,{iconPosition:"end",value:e.value,label:e.label,icon:(0,P.jsxs)(N.A,{variant:"all"===e.value||e.value===b.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&j.length,"active"===e.value&&j.filter((e=>"active"===e.status)).length,"inactive"===e.value&&j.filter((e=>"inactive"===e.status)).length]})},t)))}),(0,P.jsx)(z.A,{onPrint:D,filters:b,onFilters:W,onDownload:()=>{const e=R.reduce(((e,t)=>{var n;return e.push({code:t.code,name:t.name_english,country:null===(n=t.country)||void 0===n?void 0:n.name_english,status:t.status}),e}),[]),t=q.Wp.book_new(),n=q.Wp.json_to_sheet(e);q.Wp.book_append_sheet(t,n,"Sheet 1");const o=q.M9(t,{bookType:"xlsx",type:"array"}),a=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,L.saveAs)(a,"StakeholderTypesTable.xlsx")},canReset:S,onResetFilters:Q}),S&&(0,P.jsx)(Z.A,{filters:b,onFilters:W,onResetFilters:Q,results:R.length,sx:{p:2.5,pt:0}}),(0,P.jsxs)(d.A,{children:[(0,P.jsx)(v.Uv,{numSelected:e.selected.length,rowCount:R.length,onSelectAllRows:t=>e.onSelectAllRows(t,R.map(((e,t)=>e._id))),action:(0,P.jsx)(P.Fragment,{children:R.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?(0,P.jsx)(X.A,{title:"Activate all",children:(0,P.jsx)(w.A,{color:"primary",onClick:u.onTrue,children:(0,P.jsx)(_.A,{icon:"codicon:run-all"})})}):(0,P.jsx)(X.A,{title:"Inactivate all",children:(0,P.jsx)(w.A,{color:"error",onClick:y.onTrue,children:(0,P.jsx)(_.A,{icon:"iconoir:pause-solid"})})})}),color:R.filter((t=>e.selected.includes(t._id))).some((e=>"inactive"===e.status))?"primary":"error"}),(0,P.jsx)(x.A,{children:(0,P.jsxs)(s.A,{ref:t,size:e.dense?"small":"medium",children:[(0,P.jsx)(v.er,{order:e.order,orderBy:e.orderBy,headLabel:ut,rowCount:R.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,R.map(((e,t)=>e._id)))}),(0,P.jsxs)(r.A,{children:[R.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map(((t,n)=>(0,P.jsx)(pt,{row:t,selected:e.selected.includes(t._id),onSelectRow:()=>e.onSelectRow(t._id),onActivate:()=>F(t._id),onInactivate:()=>B(t._id),onEditRow:()=>V(t._id)},n))),(0,P.jsx)(v.Sm,{notFound:T})]})]})})]}),(0,P.jsx)(v.We,{count:R.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,P.jsx)(g.T,{open:y.value,onClose:y.onFalse,title:"Inactivate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Inactivate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"error",onClick:()=>{G(),y.onFalse()},children:"Inactivate"})}),(0,P.jsx)(g.T,{open:u.value,onClose:u.onFalse,title:"Activate",content:(0,P.jsxs)(P.Fragment,{children:["Are you sure want to Activate ",(0,P.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,P.jsx)(i.A,{variant:"contained",color:"primary",onClick:()=>{H(),u.onFalse()},children:"Activate"})})]})}}}]);
//# sourceMappingURL=92836.7d3a77d8.chunk.js.map
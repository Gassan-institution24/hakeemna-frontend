"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[2394],{22698:(e,a,t)=>{t.d(a,{A:()=>R});var l=t(58168),n=t(98587),r=t(65043),s=t(58387),i=t(98610),o=t(88092),d=t(34535),c=t(98206),m=t(94496),u=t(67266),p=t(66734),h=t(70579);const g=(0,p.A)((0,h.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var v=t(96030);const x=["slots","slotProps"],f=(0,d.Ay)(v.A)((e=>{let{theme:a}=e;return(0,l.A)({display:"flex",marginLeft:`calc(${a.spacing(1)} * 0.5)`,marginRight:`calc(${a.spacing(1)} * 0.5)`},"light"===a.palette.mode?{backgroundColor:a.palette.grey[100],color:a.palette.grey[700]}:{backgroundColor:a.palette.grey[700],color:a.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,l.A)({},"light"===a.palette.mode?{backgroundColor:a.palette.grey[200]}:{backgroundColor:a.palette.grey[600]}),"&:active":(0,l.A)({boxShadow:a.shadows[0]},"light"===a.palette.mode?{backgroundColor:(0,u.tL)(a.palette.grey[200],.12)}:{backgroundColor:(0,u.tL)(a.palette.grey[600],.12)})})})),b=(0,d.Ay)(g)({width:24,height:16});const A=function(e){const{slots:a={},slotProps:t={}}=e,r=(0,n.A)(e,x),s=e;return(0,h.jsx)("li",{children:(0,h.jsx)(f,(0,l.A)({focusRipple:!0},r,{ownerState:s,children:(0,h.jsx)(b,(0,l.A)({as:a.CollapsedIcon,ownerState:s},t.collapsedIcon))}))})};var y=t(92532),j=t(72372);function _(e){return(0,j.Ay)("MuiBreadcrumbs",e)}const w=(0,y.A)("MuiBreadcrumbs",["root","ol","li","separator"]),C=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],k=(0,d.Ay)(m.A,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,a)=>[{[`& .${w.li}`]:a.li},a.root]})({}),S=(0,d.Ay)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,a)=>a.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),$=(0,d.Ay)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,a)=>a.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function I(e,a,t,l){return e.reduce(((n,r,s)=>(s<e.length-1?n=n.concat(r,(0,h.jsx)($,{"aria-hidden":!0,className:a,ownerState:l,children:t},`separator-${s}`)):n.push(r),n)),[])}const R=r.forwardRef((function(e,a){const t=(0,c.b)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:m,component:u="nav",slots:p={},slotProps:g={},expandText:v="Show path",itemsAfterCollapse:x=1,itemsBeforeCollapse:f=1,maxItems:b=8,separator:y="/"}=t,j=(0,n.A)(t,C),[w,$]=r.useState(!1),R=(0,l.A)({},t,{component:u,expanded:w,expandText:v,itemsAfterCollapse:x,itemsBeforeCollapse:f,maxItems:b,separator:y}),B=(e=>{const{classes:a}=e;return(0,i.A)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},_,a)})(R),L=(0,o.A)({elementType:p.CollapsedIcon,externalSlotProps:g.collapsedIcon,ownerState:R}),M=r.useRef(null),N=r.Children.toArray(d).filter((e=>r.isValidElement(e))).map(((e,a)=>(0,h.jsx)("li",{className:B.li,children:e},`child-${a}`)));return(0,h.jsx)(k,(0,l.A)({ref:a,component:u,color:"text.secondary",className:(0,s.A)(B.root,m),ownerState:R},j,{children:(0,h.jsx)(S,{className:B.ol,ref:M,ownerState:R,children:I(w||b&&N.length<=b?N:(e=>f+x>=e.length?e:[...e.slice(0,f),(0,h.jsx)(A,{"aria-label":v,slots:{CollapsedIcon:p.CollapsedIcon},slotProps:{collapsedIcon:L},onClick:()=>{$(!0);const e=M.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-x,e.length)])(N),B.separator,y,R)})}))}))},38575:(e,a,t)=>{t.d(a,{A:()=>S});var l=t(80899),n=t(24858),r=t(65043),s=t(18403),i=t(81e3),o=t(12110),d=t(74600),c=t(22075),m=t(38246),u=t(94814),p=t(39336),h=t(94496),g=t(48407),v=t(67132),x=t(5124),f=t(31673),b=t(91562),A=t(75139),y=t(7625),j=t(60778),_=t(35151),w=t(94857),C=t(59699),k=t(70579);function S(e){var a,t,S,$,I,R,B,L;let{currentTable:M}=e;const N=(0,v.rd)(),{t:T}=(0,j.WD)(),{currentLang:q}=(0,j.jc)(),z="ar"===q.value,{user:P}=(0,A.Z)(),{departmentsData:V}=(0,y.Lhq)(null===P||void 0===P||null===(a=P.employee)||void 0===a||null===(t=a.employee_engagements)||void 0===t||null===(S=t[null===P||void 0===P?void 0:P.employee.selected_engagement])||void 0===S||null===($=S.unit_service)||void 0===$?void 0:$._id),{enqueueSnackbar:E}=(0,w.dh)(),{handleAddNew:W}=(0,x.I)(),Y=l.Ik().shape({department:l.Yj().nullable(),name_arabic:l.Yj().required(T("required field")),name_english:l.Yj().required(T("required field")),details:l.Yj(),details_arabic:l.Yj()}),Z=(0,r.useMemo)((()=>{var e,a,t,l,n,r;return{unit_service:(null===M||void 0===M||null===(e=M.unit_service)||void 0===e?void 0:e._id)||(null===P||void 0===P||null===(a=P.employee)||void 0===a||null===(t=a.employee_engagements)||void 0===t||null===(l=t[null===P||void 0===P?void 0:P.employee.selected_engagement])||void 0===l||null===(n=l.unit_service)||void 0===n?void 0:n._id),department:(null===M||void 0===M||null===(r=M.department)||void 0===r?void 0:r._id)||null,name_english:(null===M||void 0===M?void 0:M.name_english)||"",name_arabic:(null===M||void 0===M?void 0:M.name_arabic)||"",details:(null===M||void 0===M?void 0:M.details)||"",details_arabic:(null===M||void 0===M?void 0:M.details_arabic)||""}}),[M,null===P||void 0===P?void 0:P.employee]),D=(0,n.mN)({mode:"all",resolver:(0,s.t)(Y),defaultValues:Z}),{reset:F,handleSubmit:G,formState:{isSubmitting:O,errors:H}}=D;(0,r.useEffect)((()=>{Object.keys(H).length&&Object.keys(H).forEach(((e,a)=>{var t;return E(`${e}: ${(null===H||void 0===H||null===(t=H[e])||void 0===t?void 0:t.message)||"error"}`,{variant:"error"})}))}),[H,E]);const X=e=>{/^[\u0600-\u06FF0-9\s!@#$%^&*_\-().]*$/.test(e.target.value)&&D.setValue(e.target.name,e.target.value,{shouldValidate:!0})},J=e=>{/^[a-zA-Z0-9\s,@#$!*_\-&^%.()]*$/.test(e.target.value)&&D.setValue(e.target.name,e.target.value,{shouldValidate:!0})},K=G((async e=>{try{M?(await f.Ay.patch(`${f.vZ.activities.one(null===M||void 0===M?void 0:M._id)}`,e),b.A.emit("updated",{data:e,user:P,link:g.f.unitservice.tables.activities.root,msg:`updated an activity <strong>${e.name_english||""}</strong>`})):(await f.Ay.post(`${f.vZ.activities.all}`,e),b.A.emit("created",{data:e,user:P,link:g.f.unitservice.tables.activities.root,msg:`created an activity <strong>${e.name_english||""}</strong>`,ar_msg:`\u0625\u0646\u0634\u0627\u0621 \u0646\u0634\u0627\u0637  <strong>${e.name_arabic||""}</strong>`})),F(),N.push(g.f.unitservice.tables.activities.root),E(T(M?"update success!":"create success!"))}catch(a){E(z&&`${a.arabic_message}`||`${a.message}`,{variant:"error"}),console.error(a)}})),Q=(null===P||void 0===P||null===(I=P.employee)||void 0===I||null===(R=I.employee_engagements)||void 0===R||null===(B=R[null===P||void 0===P?void 0:P.employee.selected_engagement])||void 0===B||null===(L=B.unit_service)||void 0===L?void 0:L.employees_number)||10;return(0,r.useEffect)((()=>{F(Z)}),[Z,F]),(0,k.jsx)(C.Ay,{methods:D,onSubmit:K,children:(0,k.jsx)(c.A,{container:!0,spacing:3,children:(0,k.jsx)(c.A,{xs:12,maxWidth:"md",children:(0,k.jsxs)(o.A,{sx:{p:3},children:[(0,k.jsxs)(i.A,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[(0,k.jsx)(C.o3,{onChange:J,name:"name_english",label:`${T("name english")} *`}),(0,k.jsx)(C.o3,{onChange:X,name:"name_arabic",label:`${T("name arabic")} *`}),Q>3&&(0,k.jsxs)(C.tX,{name:"department",label:T("department"),children:[V.map(((e,a)=>(0,k.jsx)(u.A,{lang:"ar",value:null===e||void 0===e?void 0:e._id,children:z?e.name_arabic:e.name_english},a))),(0,k.jsx)(p.A,{}),(0,k.jsxs)(u.A,{lang:"ar",sx:{display:"flex",justifyContent:"flex-end",gap:1,fontWeight:600},onClick:()=>W(g.f.unitservice.departments.new),children:[(0,k.jsx)(h.A,{variant:"body2",sx:{color:"info.main"},children:T("Add new")}),(0,k.jsx)(_.A,{icon:"material-symbols:new-window-sharp"})]})]})]}),(0,k.jsx)(C.o3,{onChange:J,multiline:!0,rows:2,name:"details",label:T("details"),sx:{mt:2}}),(0,k.jsx)(C.o3,{onChange:X,multiline:!0,rows:2,name:"details_arabic",label:T("details arabic"),sx:{mt:2}}),(0,k.jsx)(d.A,{alignItems:"flex-end",sx:{mt:3},children:(0,k.jsx)(m.A,{type:"submit",variant:"contained",loading:O,children:T(M?"save changes":"create")})})]})})})})}},83858:(e,a,t)=>{t.d(a,{A:()=>l.A});var l=t(91720)},91720:(e,a,t)=>{t.d(a,{A:()=>m});var l=t(81e3),n=t(88446),r=t(74600),s=t(94496),i=t(22698),o=t(65381),d=t(70579);function c(e){let{link:a,activeLast:t,disabled:r}=e;const s={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...r&&!t&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},i=(0,d.jsxs)(d.Fragment,{children:[a.icon&&(0,d.jsx)(l.A,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:a.icon}),a.name]});return a.href?(0,d.jsx)(n.A,{component:o.W,href:a.href,sx:s,children:i}):(0,d.jsxs)(l.A,{sx:s,children:[" ",i," "]})}function m(e){let{links:a,action:t,heading:o,moreLink:m,activeLast:p,sx:h,...g}=e;const v=a&&a[a.length-1].name;return(0,d.jsxs)(l.A,{sx:{...h},children:[(0,d.jsxs)(r.A,{direction:"row",alignItems:"center",children:[(0,d.jsxs)(l.A,{sx:{flexGrow:1,display:"flex",gap:{md:3},alignItems:{md:"center"},flexDirection:{xs:"column",md:"row"}},children:[o&&(0,d.jsx)(s.A,{textTransform:"capitalize",variant:"h4",gutterBottom:!0,children:o}),a&&!!a.length&&(0,d.jsx)(i.A,{separator:(0,d.jsx)(u,{}),...g,children:null===a||void 0===a?void 0:a.map(((e,a)=>(0,d.jsx)(c,{link:e,activeLast:p,disabled:e.name===v},a)))})]}),t&&(0,d.jsxs)(l.A,{sx:{flexShrink:0,textTransform:"capitalize"},children:[" ",t," "]})]}),!!m&&(0,d.jsx)(l.A,{sx:{mt:2},children:m.map(((e,a)=>(0,d.jsx)(n.A,{href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},a)))})]})}function u(){return(0,d.jsx)(l.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}}}]);
//# sourceMappingURL=2394.ddbbf75b.chunk.js.map
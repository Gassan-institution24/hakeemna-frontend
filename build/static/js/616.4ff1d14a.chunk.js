/*! For license information please see 616.4ff1d14a.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[616],{616:(e,n,i)=>{i.r(n),i.d(n,{default:()=>M});var t=i(6907),o=i(19208),l=i(8966),a=i(6965),r=i(34045),s=i(64802),d=i(84802),c=i(61146),u=i(72791),v=i(61474),h=i(2101),g=i(57621),p=i(79836),m=i(13838),x=i(12065),f=i(82626),w=i(89164),j=i(53382),b=i(39281),_=i(4419),C=i(89731),y=i(6385),P=i(76932),Z=i(84954),k=i(40268),D=i(10261),R=i(25279),S=i(73379),F=i(24845),O=i(38062),A=i(52007),B=i.n(A),T=i(9195),U=i(68745),I=i(13400),L=i(80184);function E(e){let{row:n,onDeleteRow:i,setFilters:t,filters:o}=e;const{code:l,name_english:a,type:r,status:s,webpage:d,phone:c,address:u}=n,{t:v}=(0,P.qM)(),h=(0,L.jsxs)(T.Z,{hover:!0,children:[(0,L.jsx)(U.Z,{align:"center",children:l}),(0,L.jsx)(U.Z,{children:a}),(0,L.jsx)(U.Z,{align:"center",onClick:()=>t({...o,name:null===r||void 0===r?void 0:r.name_english}),children:null===r||void 0===r?void 0:r.name_english}),(0,L.jsx)(U.Z,{align:"center",children:(0,L.jsx)(Z.Z,{variant:"soft",color:("active"===s?"success":"inactive"===s&&"error")||"default",children:s})}),(0,L.jsx)(U.Z,{align:"center",children:d}),(0,L.jsx)(U.Z,{align:"center",children:c}),(0,L.jsx)(U.Z,{align:"center",children:u}),(0,L.jsx)(U.Z,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,L.jsx)(I.Z,{sx:{color:"error.main"},onClick:i,children:(0,L.jsx)(k.Z,{icon:"mi:delete"})})})]});return(0,L.jsx)(L.Fragment,{children:h})}E.propTypes={setFilters:B().func,onDeleteRow:B().func,row:B().object,filters:B().object};var H=i(81653),W=i(48566);const q=[{id:"code",label:"Code"},{id:"name_english",label:"Name"},{id:"type",label:"Type"},{id:"status",label:"Status"},{id:"webpage",label:"Webpage"},{id:"phone",label:"Phone"},{id:"address",label:"Address"},{id:"",width:88}],z={name:"",status:"all"},N=[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}];function K(e){var n;let{unitServiceData:i,refetch:t}=e;const o=(0,O.x6)({defaultOrderBy:"code"}),A=(0,u.useRef)(),B=(0,F.S)(),T=(0,R.K$)(),[U,I]=(0,u.useState)(z),{insuranseCosData:K,loading:M}=(0,l.Vc)(),Q=K.filter((e=>{var n;return!(null!==i&&void 0!==i&&null!==(n=i.insurance)&&void 0!==n&&n.some((n=>n._id===e._id)))})).filter((e=>"active"===e.status)),V=!(!U.startDate||!U.endDate)&&U.startDate.getTime()>U.endDate.getTime(),$=function(e){var n;let{inputData:i,comparator:t,filters:o,dateError:l}=e;const{status:a,name:r}=o,s=null===(n=i)||void 0===n?void 0:n.map(((e,n)=>[e,n]));null===s||void 0===s||s.sort(((e,n)=>{const i=t(e[0],n[0]);return 0!==i?i:e[1]-n[1]})),i=null===s||void 0===s?void 0:s.map((e=>e[0])),r&&(i=i.filter((e=>{var n,i,t,o,l,a,s,d;return(null===e||void 0===e?void 0:e.name_english)&&-1!==(null===e||void 0===e||null===(n=e.name_english)||void 0===n?void 0:n.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e?void 0:e.name_arabic)&&-1!==(null===e||void 0===e||null===(i=e.name_arabic)||void 0===i?void 0:i.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e||null===(t=e.type)||void 0===t?void 0:t.name_english)&&-1!==(null===e||void 0===e||null===(o=e.type)||void 0===o||null===(l=o.name_english)||void 0===l?void 0:l.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e||null===(a=e.type)||void 0===a?void 0:a.name_arabic)&&-1!==(null===e||void 0===e||null===(s=e.type)||void 0===s||null===(d=s.name_arabic)||void 0===d?void 0:d.toLowerCase().indexOf(r.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===r||JSON.stringify(e.code)===r})));"all"!==a&&(i=i.filter((e=>e.status===a)));return i}({inputData:null===i||void 0===i?void 0:i.insurance,comparator:(0,O.sQ)(o.order,o.orderBy),filters:U,dateError:V}),{t:J}=(0,P.qM)(),Y=null===$||void 0===$?void 0:$.slice(o.page*o.rowsPerPage,o.page*o.rowsPerPage+o.rowsPerPage),G=o.dense?52:72,X=!(null===U||void 0===U||!U.name)||"all"!==U.status,ee=!(null!==$&&void 0!==$&&$.length)&&X||!(null!==$&&void 0!==$&&$.length),ne=(0,c.useReactToPrint)({content:()=>A.current}),ie=(0,u.useCallback)((async e=>{if(i.insurance.some((n=>n._id===e)))return void(0,d.yv)("this company already exist",{variant:"error"});const n=[...i.insurance,e];await(0,y.Z)({method:"PATCH",path:C.Hv.tables.unitservice(null===i||void 0===i?void 0:i._id),data:{insurance:n}}),t(),o.onUpdatePageDeleteRow(null===Y||void 0===Y?void 0:Y.length)}),[null===Y||void 0===Y?void 0:Y.length,o,t,null===i||void 0===i?void 0:i._id,null===i||void 0===i?void 0:i.insurance]),te=(0,u.useCallback)((async e=>{var n;const l=null===i||void 0===i||null===(n=i.insurance)||void 0===n?void 0:n.filter((n=>(null===n||void 0===n?void 0:n._id)!==e));await(0,y.Z)({method:"PATCH",path:C.Hv.tables.unitservice(null===i||void 0===i?void 0:i._id),data:{insurance:l}}),t(),o.onUpdatePageDeleteRow(null===Y||void 0===Y?void 0:Y.length)}),[null===Y||void 0===Y?void 0:Y.length,o,t,null===i||void 0===i?void 0:i._id,null===i||void 0===i?void 0:i.insurance]),oe=(0,u.useCallback)(((e,n)=>{o.onResetPage(),I((i=>({...i,[e]:n})))}),[o]),le=(0,u.useCallback)((()=>{I(z)}),[]),ae=(0,u.useCallback)(((e,n)=>{oe("status",n)}),[oe]);null===i||void 0===i||i.name_english;return M?(0,L.jsx)(a.a,{}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(w.Z,{maxWidth:!T.themeStretch&&"lg",children:[(0,L.jsx)(S.Z,{action:(0,L.jsx)(m.Z,{component:_.r,onClick:B.onOpen,variant:"contained",startIcon:(0,L.jsx)(k.Z,{icon:"mingcute:add-line"}),children:"New Insurance"}),sx:{mb:{xs:3,md:5}}}),(0,L.jsxs)(g.Z,{children:[(0,L.jsx)(h.Z,{value:U.status,onChange:ae,sx:{px:2.5,boxShadow:e=>"inset 0 -2px 0 0 ".concat((0,x.Fq)(e.palette.grey[500],.08))},children:N.map((e=>{var n;return(0,L.jsx)(v.Z,{iconPosition:"end",value:e.value,label:e.label,icon:(0,L.jsxs)(Z.Z,{variant:"all"===e.value||e.value===U.status?"filled":"soft",color:("active"===e.value?"success":"inactive"===e.value&&"error")||"default",children:["all"===e.value&&(null===i||void 0===i||null===(n=i.insurance)||void 0===n?void 0:n.length),"active"===e.value&&(null===i||void 0===i?void 0:i.insurance.filter((e=>"active"===e.status)).length),"inactive"===e.value&&(null===i||void 0===i?void 0:i.insurance.filter((e=>"inactive"===e.status)).length)]})},e.value)}))}),(0,L.jsx)(H.Z,{onPrint:ne,filters:U,onFilters:oe,onDownload:()=>{const e=null===$||void 0===$?void 0:$.reduce(((e,n)=>{var i,t;return e.push({code:n.code,name:n.name_english,category:null===(i=n.category)||void 0===i?void 0:i.name_english,symptoms:null===(t=n.symptoms)||void 0===t?void 0:t.map((e=>null===e||void 0===e?void 0:e.name_english))}),e}),[]),n=r.P6.book_new(),i=r.P6.json_to_sheet(e);r.P6.book_append_sheet(n,i,"Sheet 1");const t=r.cW(n,{bookType:"xlsx",type:"array"}),o=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,s.saveAs)(o,"unitservicesTable.xlsx")},canReset:X,onResetFilters:le}),X&&(0,L.jsx)(W.Z,{filters:U,onFilters:oe,onResetFilters:le,results:null===$||void 0===$?void 0:$.length,sx:{p:2.5,pt:0}}),(0,L.jsx)(b.Z,{children:(0,L.jsx)(D.Z,{children:(0,L.jsxs)(p.Z,{ref:A,size:o.dense?"small":"medium",children:[(0,L.jsx)(O.K,{order:o.order,orderBy:o.orderBy,headLabel:q,rowCount:null===$||void 0===$?void 0:$.length,numSelected:o.selected.length,onSort:o.onSort}),(0,L.jsxs)(j.Z,{children:[null===$||void 0===$||null===(n=$.slice(o.page*o.rowsPerPage,o.page*o.rowsPerPage+o.rowsPerPage))||void 0===n?void 0:n.map((e=>(0,L.jsx)(E,{row:e,filters:U,setFilters:I,onSelectRow:()=>o.onSelectRow(null===e||void 0===e?void 0:e._id),onDeleteRow:()=>te(null===e||void 0===e?void 0:e._id)},null===e||void 0===e?void 0:e._id))),(0,L.jsx)(O.$W,{height:G,emptyRows:(0,O.fQ)(o.page,o.rowsPerPage,null===i||void 0===i?void 0:i.insurance.length)}),(0,L.jsx)(O.et,{notFound:ee})]})]})})}),(0,L.jsx)(O.S_,{count:null===$||void 0===$?void 0:$.length,page:o.page,rowsPerPage:o.rowsPerPage,onPageChange:o.onChangePage,onRowsPerPageChange:o.onChangeRowsPerPage,dense:o.dense,onChangeDense:o.onChangeDense})]})]}),(0,L.jsx)(F.Z,{open:B.open,onClose:B.onClose,arrow:"right-top",children:(0,L.jsx)("div",{style:{maxHeight:"150px",overflowY:"auto",scrollbarWidth:"thin",scrollbarColor:"darkgray lightgray"},children:null===Q||void 0===Q?void 0:Q.map((e=>(0,L.jsx)(f.Z,{onClick:()=>ie(e._id),children:null===e||void 0===e?void 0:e.name_english})))})})]})}function M(){const e=(0,o.UO)(),{id:n}=e,{data:i,loading:r,refetch:s}=(0,l.V5)(n),d=(null===i||void 0===i?void 0:i.name_english)||"unit service";return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(t.ql,{children:(0,L.jsxs)("title",{children:[" ",d," Accounting"]})}),r&&(0,L.jsx)(a.a,{}),!r&&(0,L.jsx)(K,{unitServiceData:i,refetch:s})]})}},6385:(e,n,i)=>{i.d(n,{Z:()=>a});var t=i(55294),o=i(88329),l=i(33805);async function a(e){let{setData:n,setError:i,method:a,path:r,data:s}=e;const d="".concat(l.E0).concat(r),c=o.Z.get("user_token"),u=await(0,t.Z)({method:a,url:d,headers:{authorization:"Bearer ".concat(c)},data:s});return n&&n(u.data),i&&i(u.data),u}},88329:(e,n,i)=>{function t(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)e[t]=i[t]}return e}i.d(n,{Z:()=>o});var o=function e(n,i){function o(e,o,l){if("undefined"!==typeof document){"number"===typeof(l=t({},i,l)).expires&&(l.expires=new Date(Date.now()+864e5*l.expires)),l.expires&&(l.expires=l.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var r in l)l[r]&&(a+="; "+r,!0!==l[r]&&(a+="="+l[r].split(";")[0]));return document.cookie=e+"="+n.write(o,e)+a}}return Object.create({set:o,get:function(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var i=document.cookie?document.cookie.split("; "):[],t={},o=0;o<i.length;o++){var l=i[o].split("="),a=l.slice(1).join("=");try{var r=decodeURIComponent(l[0]);if(t[r]=n.read(a,r),e===r)break}catch(s){}}return e?t[e]:t}},remove:function(e,n){o(e,"",t({},n,{expires:-1}))},withAttributes:function(n){return e(this.converter,t({},this.attributes,n))},withConverter:function(n){return e(t({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(n)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}}]);
//# sourceMappingURL=616.4ff1d14a.chunk.js.map
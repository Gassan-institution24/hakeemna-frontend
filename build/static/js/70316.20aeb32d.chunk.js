"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[70316],{22698:(e,n,o)=>{o.d(n,{A:()=>M});var l=o(58168),t=o(98587),a=o(65043),s=o(58387),i=o(98610),r=o(88092),c=o(34535),d=o(98206),p=o(94496),u=o(67266),m=o(66734),h=o(70579);const g=(0,m.A)((0,h.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var x=o(96030);const v=["slots","slotProps"],y=(0,c.Ay)(x.A)((e=>{let{theme:n}=e;return(0,l.A)({display:"flex",marginLeft:`calc(${n.spacing(1)} * 0.5)`,marginRight:`calc(${n.spacing(1)} * 0.5)`},"light"===n.palette.mode?{backgroundColor:n.palette.grey[100],color:n.palette.grey[700]}:{backgroundColor:n.palette.grey[700],color:n.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,l.A)({},"light"===n.palette.mode?{backgroundColor:n.palette.grey[200]}:{backgroundColor:n.palette.grey[600]}),"&:active":(0,l.A)({boxShadow:n.shadows[0]},"light"===n.palette.mode?{backgroundColor:(0,u.tL)(n.palette.grey[200],.12)}:{backgroundColor:(0,u.tL)(n.palette.grey[600],.12)})})})),A=(0,c.Ay)(g)({width:24,height:16});const j=function(e){const{slots:n={},slotProps:o={}}=e,a=(0,t.A)(e,v),s=e;return(0,h.jsx)("li",{children:(0,h.jsx)(y,(0,l.A)({focusRipple:!0},a,{ownerState:s,children:(0,h.jsx)(A,(0,l.A)({as:n.CollapsedIcon,ownerState:s},o.collapsedIcon))}))})};var b=o(92532),f=o(72372);function w(e){return(0,f.Ay)("MuiBreadcrumbs",e)}const C=(0,b.A)("MuiBreadcrumbs",["root","ol","li","separator"]),k=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],_=(0,c.Ay)(p.A,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,n)=>[{[`& .${C.li}`]:n.li},n.root]})({}),D=(0,c.Ay)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,n)=>n.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),P=(0,c.Ay)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,n)=>n.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function R(e,n,o,l){return e.reduce(((t,a,s)=>(s<e.length-1?t=t.concat(a,(0,h.jsx)(P,{"aria-hidden":!0,className:n,ownerState:l,children:o},`separator-${s}`)):t.push(a),t)),[])}const M=a.forwardRef((function(e,n){const o=(0,d.b)({props:e,name:"MuiBreadcrumbs"}),{children:c,className:p,component:u="nav",slots:m={},slotProps:g={},expandText:x="Show path",itemsAfterCollapse:v=1,itemsBeforeCollapse:y=1,maxItems:A=8,separator:b="/"}=o,f=(0,t.A)(o,k),[C,P]=a.useState(!1),M=(0,l.A)({},o,{component:u,expanded:C,expandText:x,itemsAfterCollapse:v,itemsBeforeCollapse:y,maxItems:A,separator:b}),S=(e=>{const{classes:n}=e;return(0,i.A)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},w,n)})(M),T=(0,r.A)({elementType:m.CollapsedIcon,externalSlotProps:g.collapsedIcon,ownerState:M}),$=a.useRef(null),F=a.Children.toArray(c).filter((e=>a.isValidElement(e))).map(((e,n)=>(0,h.jsx)("li",{className:S.li,children:e},`child-${n}`)));return(0,h.jsx)(_,(0,l.A)({ref:n,component:u,color:"text.secondary",className:(0,s.A)(S.root,p),ownerState:M},f,{children:(0,h.jsx)(D,{className:S.ol,ref:$,ownerState:M,children:R(C||A&&F.length<=A?F:(e=>y+v>=e.length?e:[...e.slice(0,y),(0,h.jsx)(j,{"aria-label":x,slots:{CollapsedIcon:m.CollapsedIcon},slotProps:{collapsedIcon:T},onClick:()=>{P(!0);const e=$.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-v,e.length)])(F),S.separator,b,M)})}))}))},70316:(e,n,o)=>{o.r(n),o.d(n,{default:()=>he});var l=o(29490),t=o(68719),a=o(75139),s=o(19853),i=o.n(s),r=o(65043),c=o(40360),d=o(81e3),p=o(29013),u=o(12110),m=o(71806),h=o(67784),g=o(49633),x=o(77739),v=o(77224),y=o(73460),A=o(17392),j=o(26240),b=o(90310),f=o(79650),w=o(51787),C=o(48407),k=o(67132),_=o(65381),D=o(59229),P=o(31673),R=o(60778),M=o(59331),S=o(7625),T=o(16236),$=o(35151),F=o(51440),B=o(94857),W=o(70074),I=o(91720),z=o(75950),Z=o(45837),L=o(94814),U=o(68738),N=o(1273),E=o(39652),H=o(94496),O=o(26353),q=o(57442),G=o(34624),V=o(70579);function X(e){var n,o,l,a;let{row:s,selected:i,onSelectRow:c,refetch:p,onViewRow:u,onBookAppoint:m,onDelayRow:x,onCancelRow:v,onUnCancelRow:y,onDeleteRow:j,onEndAppoint:b}=e;const{_id:f,appoint_number:_,unit_service:P,work_group:S,coming:F,medicalAnalysis:B,appointment_type:I,note:z,patient:X,unit_service_patient:Y,invoiced:K,start_time:J,status:Q,created_at:ee,user_creation:ne,ip_address_user_creation:oe,updated_at:le,user_modification:te,ip_address_user_modification:ae,modifications_nums:se}=s,{t:ie}=(0,R.WD)(),re=(0,k.rd)(),ce=(0,t.v)(),{isMedLab:de}=(0,M.A)(),{currentLang:pe}=(0,R.jc)(),ue="ar"===pe.value,me=(0,G.f)(),he=(0,G.f)(),ge=(0,D.C)(),[xe,ve]=(0,r.useState)(0);let ye;return X?ye=ue?null===X||void 0===X?void 0:X.name_arabic:null===X||void 0===X?void 0:X.name_english:Y&&(ye=ue?null===Y||void 0===Y?void 0:Y.name_arabic:null===Y||void 0===Y?void 0:Y.name_english),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(U.A,{hover:!0,selected:i,children:[(0,V.jsx)(E.A,{padding:"checkbox",children:(0,V.jsx)(N.A,{checked:i,onClick:c})}),(0,V.jsx)(E.A,{align:"center",children:(0,V.jsx)(O.A,{primary:(0,Z.A)(new Date(J))&&new Date(J).toLocaleTimeString(ie("en-US"),{timeZone:(null===P||void 0===P||null===(n=P.country)||void 0===n?void 0:n.time_zone)||"Asia/Amman",hour:"2-digit",minute:"2-digit"}),secondary:(0,Z.A)(new Date(J))&&new Date(J).toLocaleDateString(ie("en-US"),{timeZone:(null===P||void 0===P||null===(o=P.country)||void 0===o?void 0:o.time_zone)||"Asia/Amman"}),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),(0,V.jsx)(E.A,{align:"center",children:_}),(0,V.jsx)(E.A,{align:"center",children:ue?null===I||void 0===I?void 0:I.name_arabic:null===I||void 0===I?void 0:I.name_english}),(0,V.jsx)(E.A,{align:"center",sx:{cursor:"pointer",color:"#3F54EB"},onClick:()=>{Y&&re.push(C.f.employee.patients.info(null===Y||void 0===Y?void 0:Y._id))},children:ye}),(0,V.jsx)(E.A,{align:"center",children:z}),(0,V.jsxs)(E.A,{align:"center",children:[!de&&(0,V.jsx)($.A,{icon:F?"eva:checkmark-fill":"mingcute:close-line",width:16}),de&&(0,V.jsx)($.A,{icon:B?"eva:checkmark-fill":"mingcute:close-line",width:16})]}),(0,V.jsx)(E.A,{align:"center",children:ue?null===S||void 0===S?void 0:S.name_arabic:null===S||void 0===S?void 0:S.name_english}),(0,V.jsx)(E.A,{align:"center",children:(0,V.jsx)(T.A,{variant:"soft",color:("processing"===Q?"info":"arrived"===Q&&"success")||"late"===Q&&"warning"||"booked"===Q&&"info"||"finished"===Q&&"success"||"not arrived"===Q&&"error"||"canceled"===Q&&"warning"||"available"===Q&&"secondary"||"not booked"===Q&&"secondary"||"default",children:ie(Q)})}),(0,V.jsx)(E.A,{align:"right",sx:{px:1},children:(0,V.jsx)(A.A,{color:me.open?"inherit":"default",onClick:me.onOpen,children:(0,V.jsx)($.A,{icon:"eva:more-vertical-fill"})})})]}),(0,V.jsxs)(G.A,{open:me.open,onClose:me.onClose,arrow:"right-top",sx:{width:155},children:[ce({category:"work_group",subcategory:"appointments",acl:"update"})&&(0,V.jsxs)(L.A,{lang:"ar",onClick:()=>{re.push(C.f.employee.appointments.edit(f)),me.onClose()},children:[(0,V.jsx)($.A,{icon:"fluent:edit-32-filled"}),ie("edit")]}),["Processing","finished"].includes(Q)&&!K&&ce({category:"work_group",subcategory:"accounting",acl:"create"})&&(0,V.jsxs)(L.A,{lang:"ar",onClick:()=>{re.push(`${C.f.unitservice.accounting.economicmovements.add}?appointment=${f}`),me.onClose()},sx:{color:"info.main"},children:[(0,V.jsx)($.A,{icon:"hugeicons:invoice"}),ie("make an invoice")]}),"available"===Q&&ce({category:"work_group",subcategory:"appointments",acl:"update"})&&(0,V.jsxs)(L.A,{lang:"ar",sx:{color:"success.main"},onClick:()=>{m(),me.onClose()},children:[(0,V.jsx)($.A,{icon:"mdi:register"}),ie("book manually")]}),"available"===Q&&ce({category:"work_group",subcategory:"appointments",acl:"delete"})&&(0,V.jsxs)(L.A,{lang:"ar",onClick:()=>{v(),me.onClose()},sx:{color:"error.main"},children:[(0,V.jsx)($.A,{icon:"mdi:bell-cancel"}),ie("cancel")]}),"processing"===Q&&ce({category:"work_group",subcategory:"appointments",acl:"delete"})&&(0,V.jsxs)(L.A,{lang:"ar",onClick:()=>{b(),me.onClose()},sx:{color:"success.main"},children:[(0,V.jsx)($.A,{icon:"mdi:done"}),ie("end")]}),"canceled"===Q&&ce({category:"work_group",subcategory:"appointments",acl:"update"})&&(0,V.jsxs)(L.A,{lang:"ar",onClick:()=>{y(),me.onClose()},sx:{color:"success.main"},children:[(0,V.jsx)($.A,{icon:"material-symbols-light:notifications-active-rounded"}),ie("uncancel")]}),ce({category:"work_group",subcategory:"appointments",acl:"update"})&&!["finished","canceled","not booked"].includes(Q)&&(0,V.jsxs)(L.A,{lang:"ar",sx:{color:"warning.main"},onClick:ge.onTrue,children:[(0,V.jsx)($.A,{icon:"mdi:timer-sync"}),ie("delay")]}),(0,V.jsxs)(L.A,{lang:"ar",onClick:he.onOpen,children:[(0,V.jsx)($.A,{icon:"carbon:data-quality-definition"}),ie("DDL")]})]}),(0,V.jsxs)(G.A,{open:he.open,onClose:he.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,V.jsxs)(d.A,{sx:{fontWeight:600},children:[ie("creation time"),":"]}),(0,V.jsx)(d.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,V.jsx)(O.A,{primary:(0,q.ts)(ee,"dd MMMMMMMM yyyy"),secondary:(0,q.ts)(ee,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,V.jsxs)(d.A,{sx:{pt:1,fontWeight:600},children:[ie("created by"),":"]}),(0,V.jsx)(d.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===ne||void 0===ne?void 0:ne.email}),(0,V.jsxs)(d.A,{sx:{pt:1,fontWeight:600},children:[ie("created by IP"),":"]}),(0,V.jsx)(d.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:oe}),(0,V.jsxs)(d.A,{sx:{pt:1,fontWeight:600},children:[ie("editing time"),":"]}),(0,V.jsx)(d.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,V.jsx)(O.A,{primary:(0,q.ts)(le,"dd MMMMMMMM yyyy"),secondary:(0,q.ts)(le,"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{component:"span",typography:"caption"}})}),(0,V.jsxs)(d.A,{sx:{pt:1,fontWeight:600},children:[ie("editor"),":"]}),(0,V.jsx)(d.A,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===te||void 0===te?void 0:te.email}),(0,V.jsxs)(d.A,{sx:{pt:1,fontWeight:600},children:[ie("editor IP"),":"]}),(0,V.jsx)(d.A,{sx:{pb:1,borderBottom:"1px solid gray",fontWeight:"400"},children:ae}),(0,V.jsxs)(d.A,{sx:{pt:1,fontWeight:600},children:[ie("modifications no"),": ",se]})]}),(0,V.jsx)(W.T,{open:ge.value,onClose:ge.onFalse,title:ie("delay"),content:(0,V.jsxs)(V.Fragment,{children:[ie("How many minutes do you want to delay?"),(0,V.jsx)(h.A,{InputProps:{endAdornment:(0,V.jsx)(w.A,{position:"end",children:(0,V.jsx)(d.A,{sx:{fontSize:"0.8rem"},children:ie("min")})})},type:"number",sx:{p:2,width:"100%"},size:"small",onChange:e=>ve(e.target.value),helperText:ie("knowing that you can type a negative value to make it earlier")}),0!==xe&&(0,V.jsxs)(H.A,{variant:"body2",sx:{textAlign:"center",color:"error.main"},children:[ie("from"),"\xa0",new Date(J).toLocaleTimeString(ie("en-US"),{timeZone:(null===P||void 0===P||null===(l=P.country)||void 0===l?void 0:l.time_zone)||"Asia/Amman",hour:"2-digit",minute:"2-digit"}),"\xa0",ie("to"),"\xa0",new Date(new Date(J).getTime()+60*xe*1e3).toLocaleTimeString(ie("en-US"),{timeZone:(null===P||void 0===P||null===(a=P.country)||void 0===a?void 0:a.time_zone)||"Asia/Amman",hour:"2-digit",minute:"2-digit"})]})]}),action:(0,V.jsx)(g.A,{variant:"contained",color:"info",onClick:()=>{ge.onFalse(),x(s,xe)},children:ie("delay")})})]})}var Y=o(48751),K=o(74600),J=o(72221),Q=o(17642),ee=o(53193),ne=o(74050),oe=o(84284),le=o(74157),te=o(19260);function ae(e){var n,o,l,t,s,i,c;let{filters:d,onFilters:p,onAdd:u,dateError:m,options:h}=e;const{t:g}=(0,R.WD)(),{user:x}=(0,a.Z)(),{currentLang:v}=(0,R.jc)(),y="ar"===v.value,{myunitTime:A}=(0,q.nM)(),{workGroupsData:j}=(0,S.VnY)(null===x||void 0===x||null===(n=x.employee)||void 0===n||null===(o=n.employee_engagements)||void 0===o||null===(l=o[null===x||void 0===x?void 0:x.employee.selected_engagement])||void 0===l?void 0:l._id),{workShiftsData:b}=(0,S.c8d)(null===x||void 0===x||null===(t=x.employee)||void 0===t||null===(s=t.employee_engagements)||void 0===s||null===(i=s[null===x||void 0===x?void 0:x.employee.selected_engagement])||void 0===i||null===(c=i.unit_service)||void 0===c?void 0:c._id),f=(0,G.f)(),w=(0,r.useCallback)((e=>{p("appointype",e.target.value)}),[p]),C=(0,r.useCallback)((e=>{p("shift",e.target.value)}),[p]),k=(0,r.useCallback)((e=>{p("group",e.target.value)}),[p]),_=(0,r.useCallback)((e=>{p("startDate",e)}),[p]),D=(0,r.useCallback)((e=>{p("endDate",e)}),[p]),P=(0,r.useCallback)((e=>{p("startTime",e)}),[p]),M=(0,r.useCallback)((e=>{p("endTime",e)}),[p]);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(K.A,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[(0,V.jsxs)(ee.A,{sx:{width:{xs:1,md:200}},children:[(0,V.jsx)(Q.A,{children:`${g("appointment type")}`}),(0,V.jsx)(J.A,{value:d.appointype,onChange:w,input:(0,V.jsx)(ne.A,{label:g("appointment type")}),MenuProps:{PaperProps:{sx:{maxHeight:240}}},children:h.map(((e,n)=>(0,V.jsx)(L.A,{lang:"ar",value:e._id,children:y?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))})]}),(0,V.jsxs)(ee.A,{sx:{width:{xs:1,md:200}},children:[(0,V.jsx)(Q.A,{children:`${g("work group")}`}),(0,V.jsx)(J.A,{value:d.group,onChange:k,input:(0,V.jsx)(ne.A,{label:g("work group")}),MenuProps:{PaperProps:{sx:{maxHeight:240}}},children:j.map(((e,n)=>(0,V.jsx)(L.A,{lang:"ar",value:e._id,children:y?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))})]}),(0,V.jsxs)(ee.A,{sx:{width:{xs:1,md:200}},children:[(0,V.jsx)(Q.A,{children:`${g("work shift")}`}),(0,V.jsx)(J.A,{value:d.shift,onChange:C,input:(0,V.jsx)(ne.A,{label:g("work shift")}),MenuProps:{PaperProps:{sx:{maxHeight:240}}},children:b.map(((e,n)=>(0,V.jsx)(L.A,{lang:"ar",value:e._id,children:y?null===e||void 0===e?void 0:e.name_arabic:null===e||void 0===e?void 0:e.name_english},n)))})]}),(0,V.jsx)(oe.l,{label:g("date"),value:d.startDate,onChange:_,slotProps:{textField:{fullWidth:!0}},sx:{width:{xs:1,md:200}}}),(0,V.jsx)(oe.l,{label:g("end date"),value:d.endDate,onChange:D,slotProps:{textField:{fullWidth:!0,error:m}},sx:{width:{xs:1,md:200}}}),(0,V.jsx)(le.A,{format:"hh:mm a",viewRenderers:{hours:te.Zo,minutes:te.Zo,seconds:te.Zo},ampm:!1,closeOnSelect:!0,slots:{actionBar:"cancel"},minutesStep:5,label:g("from time"),value:A(d.startTime),onChange:e=>{var n,o,l,t,a;const s=(0,Y.A)(e,(null===x||void 0===x||null===(n=x.employee)||void 0===n||null===(o=n.employee_engagements)||void 0===o||null===(l=o[null===x||void 0===x?void 0:x.employee.selected_engagement])||void 0===l||null===(t=l.unit_service)||void 0===t||null===(a=t.country)||void 0===a?void 0:a.time_zone)||"Asia/Amman");P(s)},slotProps:{textField:{fullWidth:!0}},sx:{width:{xs:1,md:200}}}),(0,V.jsx)(le.A,{viewRenderers:{hours:te.Zo,minutes:te.Zo,seconds:te.Zo},ampm:!1,format:"hh:mm a",closeOnSelect:!0,slots:{actionBar:"cancel"},minutesStep:5,label:g("to time"),value:A(d.endTime),onChange:e=>{var n,o,l,t,a;const s=(0,Y.A)(e,(null===x||void 0===x||null===(n=x.employee)||void 0===n||null===(o=n.employee_engagements)||void 0===o||null===(l=o[null===x||void 0===x?void 0:x.employee.selected_engagement])||void 0===l||null===(t=l.unit_service)||void 0===t||null===(a=t.country)||void 0===a?void 0:a.time_zone)||"Asia/Amman");M(new Date(s))},slotProps:{textField:{fullWidth:!0}},sx:{width:{xs:1,md:200}}}),(0,V.jsx)(K.A,{direction:"row"})]}),(0,V.jsxs)(G.A,{open:f.open,onClose:f.onClose,arrow:"right-top",sx:{width:140},children:[(0,V.jsxs)(L.A,{lang:"ar",onClick:()=>{f.onClose()},children:[(0,V.jsx)($.A,{icon:"solar:printer-minimalistic-bold"}),g("print")]}),(0,V.jsxs)(L.A,{lang:"ar",onClick:()=>{f.onClose()},children:[(0,V.jsx)($.A,{icon:"solar:export-bold"}),g("export")]})]})]})}var se=o(26487),ie=o(8555),re=o(91264);function ce(e){let{filters:n,onFilters:o,onResetFilters:l,results:t,...a}=e;const{t:s}=(0,R.WD)(),i=(0,re.fT)(n.startDate,n.endDate),r=()=>{o("startDate",null),o("endDate",null)};return(0,V.jsxs)(K.A,{spacing:1.5,...a,children:[(0,V.jsxs)(d.A,{sx:{typography:"body2"},children:[(0,V.jsx)("strong",{children:t}),(0,V.jsx)(d.A,{component:"span",sx:{color:"text.secondary",ml:.25},children:s("results found")})]}),(0,V.jsxs)(K.A,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:["active"!==n.status&&(0,V.jsx)(de,{label:s("status:"),children:(0,V.jsx)(se.A,{size:"small",label:s(n.status),onDelete:()=>{o("status","all")}})}),""!==n.appointype&&(0,V.jsx)(se.A,{size:"small",label:s("appointment type"),onDelete:()=>{o("types","")}}),""!==n.group&&(0,V.jsx)(se.A,{size:"small",label:s("work group"),onDelete:()=>{o("group","")}}),""!==n.shift&&(0,V.jsx)(se.A,{size:"small",label:s("work shift"),onDelete:()=>{o("shift","")}}),n.startDate&&!n.endDate&&(0,V.jsx)(de,{label:s("date:"),children:(0,V.jsx)(se.A,{size:"small",label:(0,q.ts)(n.startDate),onDelete:r})}),n.startDate&&n.endDate&&(0,V.jsx)(de,{label:s("date:"),children:(0,V.jsx)(se.A,{size:"small",label:i,onDelete:r})}),(0,V.jsx)(g.A,{color:"error",onClick:l,startIcon:(0,V.jsx)($.A,{icon:"solar:trash-bin-trash-bold"}),children:s("clear")})]})]})}function de(e){let{label:n,children:o,sx:l,...t}=e;return(0,V.jsxs)(K.A,{component:ie.A,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...l},...t,children:[(0,V.jsx)(d.A,{component:"span",sx:{typography:"subtitle2"},children:n}),(0,V.jsx)(K.A,{spacing:1,direction:"row",flexWrap:"wrap",children:o})]})}var pe=o(59486);const ue={name:"",status:"booked",appointype:"",shift:"",group:"",startDate:null,endDate:null,startTime:null,endTime:null};function me(e){var n,o,l;let{employeeData:s}=e;const{t:Z}=(0,R.WD)(),{currentLang:L}=(0,R.jc)(),U="ar"===L.value,{isMedLab:N}=(0,M.A)(),E=[{id:"start_time",label:Z("start time")},{id:"appoint_number",label:Z("number")},{id:"appointment_type",label:Z("appointment type")},{id:"patient",label:Z("patient")},{id:"note",label:Z("note")},{id:N?"medicalAnalysis":"coming",label:Z(N?"medical analysis":"is coming")},{id:"work_group",label:Z("work group")},{id:"status",label:Z("status")},{id:""}],H=(0,t.v)(),O=(0,j.A)(),q=(0,k.rd)(),{enqueueSnackbar:G}=(0,B.dh)(),Y=(0,z.K2)({defaultOrderBy:"start_time"}),{user:K}=(0,a.Z)(),J=(0,D.C)(),Q=(0,D.C)(),ee=(0,D.C)(),ne=(0,D.C)(),{appointmenttypesData:oe}=(0,S.uZ5)(),[le,te]=(0,r.useState)(ue),[se,ie]=(0,r.useState)(0),{appointmentsData:re,refetch:de,lengths:me}=(0,S.I6v)(null===K||void 0===K||null===(n=K.employee)||void 0===n||null===(o=n.employee_engagements)||void 0===o||null===(l=o[null===K||void 0===K?void 0:K.employee.selected_engagement])||void 0===l?void 0:l._id,{page:Y.page||0,sortBy:Y.orderBy||"code",rowsPerPage:Y.rowsPerPage||10,order:Y.order||"asc",populate:"all",...le}),he=!(!le.startDate||!le.endDate)&&le.startDate.getTime()>le.endDate.getTime(),ge=re,xe=ge.slice(Y.page*Y.rowsPerPage,Y.page*Y.rowsPerPage+Y.rowsPerPage),ve=!i()(le,ue),ye=!ge.length&&ve||!ge.length,Ae=[{value:"processing",label:Z("current"),color:"info",count:null===me||void 0===me?void 0:me.processing},{value:"arrived",label:Z("arrived"),color:"success",count:null===me||void 0===me?void 0:me.arrived},{value:"late",label:Z("late"),color:"warning",count:null===me||void 0===me?void 0:me.late},{value:"booked",label:Z("booked"),color:"info",count:null===me||void 0===me?void 0:me.booked},{value:"finished",label:Z("finished"),color:"success",count:null===me||void 0===me?void 0:me.finished},{value:"not arrived",label:Z("not arrived"),color:"error",count:null===me||void 0===me?void 0:me.notArrived},{value:"canceled",label:Z("canceled"),color:"warning",count:null===me||void 0===me?void 0:me.canceled},{value:"available",label:Z("available"),color:"secondary",count:null===me||void 0===me?void 0:me.available},{value:"not booked",label:Z("not booked"),color:"secondary",count:null===me||void 0===me?void 0:me.notBooked}],je=(0,r.useCallback)(((e,n)=>{Y.onResetPage(),te((o=>({...o,[e]:n})))}),[Y]),be=(0,r.useCallback)((async e=>{const n=new URLSearchParams({day:e.start_time,appointment:e._id});q.push({pathname:C.f.employee.appointments.book,search:`?${n.toString()}`})}),[q]),fe=(0,r.useCallback)((async e=>{try{await P.Ay.patch(`${P.vZ.appointments.one(e._id)}/cancel`),G(Z("canceled successfully!"))}catch(n){G(U&&`${n.arabic_message}`||`${n.message}`,{variant:"error"}),console.error(n)}de(),Y.onUpdatePageDeleteRow(xe.length)}),[xe.length,Y,de,G,Z,U]),we=(0,r.useCallback)((async e=>{try{await P.Ay.patch(P.vZ.appointments.one(e._id),{finished_or_not:1}),G(Z("ended successfully!"))}catch(n){G(U&&`${n.arabic_message}`||`${n.message}`,{variant:"error"}),console.error(n)}de(),Y.onUpdatePageDeleteRow(xe.length)}),[xe.length,Y,de,G,Z,U]),Ce=(0,r.useCallback)((async(e,n)=>{try{await P.Ay.patch(`${P.vZ.appointments.one(e._id)}/delay`,{minutes:n}),G(Z("delayed successfully!"))}catch(o){G(U&&`${o.arabic_message}`||`${o.message}`,{variant:"error"}),console.error(o)}de(),ie(0),Y.onUpdatePageDeleteRow(xe.length)}),[xe.length,Y,Z,de,G,U]),ke=(0,r.useCallback)((async e=>{try{await P.Ay.patch(`${P.vZ.appointments.one(e._id)}/uncancel`),G(Z("uncanceled successfully!"))}catch(n){G(U&&`${n.arabic_message}`||`${n.message}`,{variant:"error"}),console.error(n)}de(),Y.onUpdatePageDeleteRow(xe.length)}),[xe.length,Y,Z,de,G,U]),_e=(0,r.useCallback)((async e=>{try{await P.Ay.patch(`${P.vZ.appointments.all}/cancel`,{ids:Y.selected}),G(Z("canceled successfully!"))}catch(n){G(U&&`${n.arabic_message}`||`${n.message}`,{variant:"error"}),console.error(n)}de(),Y.onUpdatePageDeleteRows({totalRows:null===me||void 0===me?void 0:me.length,totalRowsInPage:xe.length,totalRowsFiltered:ge.length})}),[de,ge.length,xe.length,null===me||void 0===me?void 0:me.length,Y,Z,U,G]),De=(0,r.useCallback)((async()=>{try{await P.Ay.patch(`${P.vZ.appointments.all}/delay`,{ids:Y.selected,minutes:se}),G(Z("delayed successfully!"))}catch(e){G(U&&`${e.arabic_message}`||`${e.message}`,{variant:"error"}),console.error(e)}de(),ie(0),Y.onUpdatePageDeleteRows({totalRows:null===me||void 0===me?void 0:me.length,totalRowsInPage:xe.length,totalRowsFiltered:ge.length})}),[de,ge.length,xe.length,null===me||void 0===me?void 0:me.length,Y,Z,U,se,G]),Pe=(0,r.useCallback)((async e=>{try{await P.Ay.patch(`${P.vZ.appointments.all}/uncancel`,{ids:Y.selected}),G(Z("uncanceled successfully!"))}catch(n){G(U&&`${n.arabic_message}`||`${n.message}`,{variant:"error"}),console.error(n)}de(),Y.onUpdatePageDeleteRows({totalRows:null===me||void 0===me?void 0:me.length,totalRowsInPage:xe.length,totalRowsFiltered:ge.length})}),[de,ge.length,xe.length,null===me||void 0===me?void 0:me.length,Y,Z,U,G]),Re=(0,r.useCallback)(((e,n)=>{je("status",n)}),[je]),Me=(0,r.useCallback)((()=>{te(ue)}),[]);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(v.A,{maxWidth:"xl",children:[(0,V.jsx)(I.A,{heading:Z("appointments"),links:[{name:Z("dashboard"),href:C.f.dashboard.root},{name:Z("appointments")}],action:H({category:"work_group",subcategory:"appointments",acl:"create"})&&(0,V.jsx)(g.A,{component:_.W,onClick:()=>J.onTrue(),variant:"contained",startIcon:(0,V.jsx)($.A,{icon:"mingcute:add-line"}),sx:{bgcolor:"error.dark","&:hover":{bgcolor:"error.main"}},children:Z("new urgent appointment")}),sx:{mb:{xs:3,md:5}}}),(0,V.jsxs)(u.A,{children:[(0,V.jsx)(p.A,{value:le.status,onChange:Re,sx:{px:2.5,boxShadow:`inset 0 -2px 0 0 ${(0,b.X4)(O.palette.grey[500],.08)}`},children:Ae.map(((e,n)=>(0,V.jsx)(c.A,{value:e.value,label:e.label,iconPosition:"end",icon:(0,V.jsx)(T.A,{variant:"all"===e.value||e.value===le.status?"filled":"soft",color:e.color,children:e.count})},n)))}),(0,V.jsx)(ae,{filters:le,onFilters:je,onAdd:()=>J.onTrue(),dateError:he,options:oe}),ve&&(0,V.jsx)(ce,{filters:le,onFilters:je,onResetFilters:Me,results:ge.length,sx:{p:2.5,pt:0}}),(0,V.jsxs)(f.A,{sx:{position:"relative",overflow:"unset"},children:[(0,V.jsx)(z.Uv,{numSelected:Y.selected.length,rowCount:ge.length,onSelectAllRows:e=>Y.onSelectAllRows(e,null===ge||void 0===ge?void 0:ge.map(((e,n)=>e._id))),action:H({category:"work_group",subcategory:"appointments",acl:"update"})&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(x.A,{title:"delay all",children:(0,V.jsx)(A.A,{color:"info",onClick:ne.onTrue,children:(0,V.jsx)($.A,{icon:"mdi:timer-sync"})})}),ge.filter((e=>Y.selected.includes(e._id))).some((e=>"canceled"===e.status))?(0,V.jsx)(x.A,{title:"uncancel all",children:(0,V.jsx)(A.A,{color:"primary",onClick:ee.onTrue,children:(0,V.jsx)($.A,{icon:"material-symbols-light:notifications-active-rounded"})})}):(0,V.jsx)(x.A,{title:"cancel all",children:(0,V.jsx)(A.A,{color:"error",onClick:Q.onTrue,children:(0,V.jsx)($.A,{icon:"mdi:bell-cancel"})})})]}),color:H({category:"work_group",subcategory:"appointments",acl:"update"})&&ge.filter((e=>Y.selected.includes(e._id))).some((e=>"canceled"===e.status))?"primary":"error"}),(0,V.jsx)(F.A,{children:(0,V.jsxs)(m.A,{size:Y.dense?"small":"medium",sx:{minWidth:800},children:[(0,V.jsx)(z.er,{order:Y.order,orderBy:Y.orderBy,headLabel:E,rowCount:null===me||void 0===me?void 0:me.length,numSelected:Y.selected.length,onSort:Y.onSort,onSelectAllRows:e=>Y.onSelectAllRows(e,null===ge||void 0===ge?void 0:ge.map(((e,n)=>e._id)))}),(0,V.jsxs)(y.A,{children:[null===ge||void 0===ge?void 0:ge.map(((e,n)=>(0,V.jsx)(X,{refetch:de,row:e,selected:Y.selected.includes(e._id),onSelectRow:()=>Y.onSelectRow(e._id),onDelayRow:Ce,onCancelRow:()=>fe(e),onBookAppoint:()=>be(e),onEndAppoint:()=>we(e),onUnCancelRow:()=>ke(e)},n))),(0,V.jsx)(z.Sm,{notFound:ye})]})]})})]}),(0,V.jsx)(z.We,{count:null===me||void 0===me?void 0:me.length,page:Y.page,rowsPerPage:Y.rowsPerPage,onPageChange:Y.onChangePage,onRowsPerPageChange:Y.onChangeRowsPerPage,dense:Y.dense,onChangeDense:Y.onChangeDense})]})]}),(0,V.jsx)(pe.A,{refetch:de,open:J.value,onClose:J.onFalse}),(0,V.jsx)(W.T,{open:Q.value,onClose:Q.onFalse,title:Z("cancel"),content:(0,V.jsxs)(V.Fragment,{children:[Z("Are you sure want to cancel")," ",(0,V.jsxs)("strong",{children:[" ",Y.selected.length," "]})," ",Z("items?")]}),action:(0,V.jsx)(g.A,{variant:"contained",color:"error",onClick:()=>{Q.onFalse(),_e()},children:Z("cancel")})}),(0,V.jsx)(W.T,{open:ee.value,onClose:ee.onFalse,title:Z("uncancel"),content:(0,V.jsxs)(V.Fragment,{children:[Z("Are you sure want to uncancel")," ",(0,V.jsxs)("strong",{children:[" ",Y.selected.length," "]})," ",Z("items?")]}),action:(0,V.jsx)(g.A,{variant:"contained",color:"error",onClick:()=>{ee.onFalse(),Pe()},children:Z("uncancel")})}),(0,V.jsx)(W.T,{open:ne.value,onClose:ne.onFalse,title:Z("delay"),content:(0,V.jsxs)(V.Fragment,{children:[Z("How many minutes do you want to delay items?"),(0,V.jsx)(h.A,{InputProps:{endAdornment:(0,V.jsx)(w.A,{position:"end",children:(0,V.jsx)(d.A,{sx:{fontSize:"0.8rem"},children:Z("min")})})},type:"number",sx:{p:2,width:"100%"},size:"small",onChange:e=>ie(e.target.value),helperText:Z("knowing that you can type a negative value to make it earlier")})]}),action:(0,V.jsxs)(g.A,{variant:"contained",color:"info",onClick:()=>{ne.onFalse(),De()},children:[Z("delay")," "]})})]})}function he(){var e;const{user:n}=(0,a.Z)();return(0,V.jsxs)(t.A,{category:"work_group",subcategory:"appointments",acl:"read",children:[(0,V.jsxs)(l.mg,{children:[(0,V.jsxs)("title",{children:[" ",(null===n||void 0===n||null===(e=n.employee)||void 0===e?void 0:e.name_english)||"employee"," : Appointments"]}),(0,V.jsx)("meta",{name:"description",content:"meta"})]}),(0,V.jsx)(me,{})]})}},79650:(e,n,o)=>{o.d(n,{A:()=>x});var l=o(58168),t=o(98587),a=o(65043),s=o(58387),i=o(98610),r=o(98206),c=o(34535),d=o(92532),p=o(72372);function u(e){return(0,p.Ay)("MuiTableContainer",e)}(0,d.A)("MuiTableContainer",["root"]);var m=o(70579);const h=["className","component"],g=(0,c.Ay)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,n)=>n.root})({width:"100%",overflowX:"auto"}),x=a.forwardRef((function(e,n){const o=(0,r.b)({props:e,name:"MuiTableContainer"}),{className:a,component:c="div"}=o,d=(0,t.A)(o,h),p=(0,l.A)({},o,{component:c}),x=(e=>{const{classes:n}=e;return(0,i.A)({root:["root"]},u,n)})(p);return(0,m.jsx)(g,(0,l.A)({ref:n,as:c,className:(0,s.A)(x.root,a),ownerState:p},d))}))},91264:(e,n,o)=>{o.d(n,{fT:()=>i});var l=o(41210),t=o(407),a=o(2431),s=o(57442);function i(e,n){const o=(new Date).getFullYear(),i=e?(0,l.A)(e):null,r=n?(0,l.A)(n):null,c=o===i&&o===r,d=!(!e||!n)&&(0,t.A)(new Date(e),new Date(n)),p=!(!e||!n)&&(0,a.A)(new Date(e),new Date(n));return c?p?d?(0,s.ts)(n,"dd MMM yy"):`${(0,s.ts)(e,"dd")} - ${(0,s.ts)(n,"dd MMM yy")}`:`${(0,s.ts)(e,"dd MMM")} - ${(0,s.ts)(n,"dd MMM yy")}`:`${(0,s.ts)(e,"dd MMM yy")} - ${(0,s.ts)(n,"dd MMM yy")}`}o(70579);o(65043)},91720:(e,n,o)=>{o.d(n,{A:()=>p});var l=o(81e3),t=o(88446),a=o(74600),s=o(94496),i=o(22698),r=o(65381),c=o(70579);function d(e){let{link:n,activeLast:o,disabled:a}=e;const s={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...a&&!o&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},i=(0,c.jsxs)(c.Fragment,{children:[n.icon&&(0,c.jsx)(l.A,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:n.icon}),n.name]});return n.href?(0,c.jsx)(t.A,{component:r.W,href:n.href,sx:s,children:i}):(0,c.jsxs)(l.A,{sx:s,children:[" ",i," "]})}function p(e){let{links:n,action:o,heading:r,moreLink:p,activeLast:m,sx:h,...g}=e;const x=n&&n[n.length-1].name;return(0,c.jsxs)(l.A,{sx:{...h},children:[(0,c.jsxs)(a.A,{direction:"row",alignItems:"center",children:[(0,c.jsxs)(l.A,{sx:{flexGrow:1,display:"flex",gap:{md:3},alignItems:{md:"center"},flexDirection:{xs:"column",md:"row"}},children:[r&&(0,c.jsx)(s.A,{textTransform:"capitalize",variant:"h4",gutterBottom:!0,children:r}),n&&!!n.length&&(0,c.jsx)(i.A,{separator:(0,c.jsx)(u,{}),...g,children:null===n||void 0===n?void 0:n.map(((e,n)=>(0,c.jsx)(d,{link:e,activeLast:m,disabled:e.name===x},n)))})]}),o&&(0,c.jsxs)(l.A,{sx:{flexShrink:0,textTransform:"capitalize"},children:[" ",o," "]})]}),!!p&&(0,c.jsx)(l.A,{sx:{mt:2},children:p.map(((e,n)=>(0,c.jsx)(t.A,{href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},n)))})]})}function u(){return(0,c.jsx)(l.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}}}]);
//# sourceMappingURL=70316.20aeb32d.chunk.js.map
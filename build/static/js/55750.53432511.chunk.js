"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[55750],{55750:(e,n,a)=>{a.r(n),a.d(n,{default:()=>m});var t=a(73216),i=a(29490),s=a(74600),r=a(94496),l=a(60778),o=a(68719),d=a(75139),c=a(70491),p=a(70579);function m(){var e,n,a,m,u;const{user:v}=(0,d.Z)(),{t:h}=(0,l.WD)(),x=null===v||void 0===v||null===(e=v.employee)||void 0===e||null===(n=e.employee_engagements)||void 0===n||null===(a=n[null===v||void 0===v||null===(u=v.employee)||void 0===u?void 0:u.selected_engagement])||void 0===a||null===(m=a.unit_service)||void 0===m?void 0:m.name_english,{emid:g,depId:y}=(0,t.g)();return(0,p.jsxs)(o.A,{category:"unit_service",subcategory:"permissions",acl:"read",children:[(0,p.jsxs)(i.mg,{children:[(0,p.jsxs)("title",{children:[x||"unit of service"," : departments permissions"]}),(0,p.jsx)("meta",{name:"description",content:"meta"})]}),(!g||!y)&&(0,p.jsx)(s.A,{direction:"column",justifyContent:"center",alignItems:"center",children:(0,p.jsx)(r.A,{variant:"h5",sx:{mt:2},children:h("Select department and employee to show and change permissions")})}),g&&y&&(0,p.jsx)(c.A,{})]})}},70491:(e,n,a)=>{a.d(n,{A:()=>T});var t=a(80899),i=a(24858),s=a(65043),r=a(18403),l=a(74600),o=a(38246),d=a(68903),c=a(94496),p=a(12110),m=a(79958),u=a(77224),v=a(48407),h=a(67132),x=a(88887),g=a(31673),y=a(91562),j=a(75139),A=a(7625),b=a(60778),f=a(94857),_=a(59699),w=a(70579);function T(){const{t:e}=(0,b.WD)(),{currentLang:n}=(0,b.jc)(),a="ar"===n.value,T=[{label:e("read"),value:"read"},{label:e("create"),value:"create"},{label:e("edit"),value:"update"},{label:e("delete"),value:"delete"}],{id:k}=(0,h.g)(),{data:C}=(0,A.tH$)(k),{user:S}=(0,j.Z)(),E=(0,x.Q)("up","md"),{enqueueSnackbar:O}=(0,f.dh)(),N=t.Ik().shape({employees:t.YO(),management_tables:t.YO(),appointments:t.YO(),appointment_configs:t.YO(),accounting:t.YO(),quality_control:t.YO(),permissions:t.YO(),hr:t.YO()}),z=(0,s.useMemo)((()=>{var e,n,a,t,i,s,r,l,o,d,c,p,m,u,v,h;return{employees:(null===C||void 0===C||null===(e=C.acl)||void 0===e||null===(n=e.department)||void 0===n?void 0:n.employees)||[],management_tables:(null===C||void 0===C||null===(a=C.acl)||void 0===a||null===(t=a.department)||void 0===t?void 0:t.management_tables)||[],appointments:(null===C||void 0===C||null===(i=C.acl)||void 0===i||null===(s=i.department)||void 0===s?void 0:s.appointments)||[],appointment_configs:(null===C||void 0===C||null===(r=C.acl)||void 0===r||null===(l=r.department)||void 0===l?void 0:l.appointment_configs)||[],accounting:(null===C||void 0===C||null===(o=C.acl)||void 0===o||null===(d=o.department)||void 0===d?void 0:d.accounting)||[],quality_control:(null===C||void 0===C||null===(c=C.acl)||void 0===c||null===(p=c.department)||void 0===p?void 0:p.quality_control)||[],permissions:(null===C||void 0===C||null===(m=C.acl)||void 0===m||null===(u=m.department)||void 0===u?void 0:u.permissions)||[],hr:(null===C||void 0===C||null===(v=C.acl)||void 0===v||null===(h=v.department)||void 0===h?void 0:h.hr)||[]}}),[C]),H=(0,i.mN)({mode:"all",resolver:(0,r.t)(N),defaultValues:z}),{reset:M,handleSubmit:R,formState:{isSubmitting:Y,errors:$}}=H;(0,s.useEffect)((()=>{Object.keys($).length&&Object.keys($).forEach(((e,n)=>{var a;return O(`${e}: ${(null===$||void 0===$||null===(a=$[e])||void 0===a?void 0:a.message)||"error"}`,{variant:"error"})}))}),[$,O]),(0,s.useEffect)((()=>{M(z)}),[z,M]);const q=R((async n=>{try{const a=C.acl;a.department=n,g.Ay.patch(g.vZ.employee_engagements.one(k),{acl:a}),y.A.emit("updated",{user:S,link:v.f.unitservice.employees.acl(k),msg:"updated a department employee permissions"}),O(e("updated successfully!"))}catch(t){O(a&&`${t.arabic_message}`||`${t.message}`,{variant:"error"}),console.error(t)}})),I=(0,w.jsxs)(w.Fragment,{children:[E&&(0,w.jsxs)(d.Ay,{md:4,children:[(0,w.jsx)(c.A,{textTransform:"capitalize",variant:"h6",sx:{mb:.5},children:e("permissions")}),(0,w.jsx)(c.A,{variant:"body2",sx:{color:"text.secondary"},children:e("giving or withdrowing permissions refered to all")}),(0,w.jsx)(c.A,{variant:"body2",sx:{color:"text.secondary"},children:e("department and all its work groups")})]}),(0,w.jsx)(d.Ay,{xs:12,md:8,children:(0,w.jsxs)(p.A,{children:[!E&&(0,w.jsx)(m.A,{title:e("permissions")}),(0,w.jsxs)(l.A,{spacing:3,sx:{p:3},children:[(0,w.jsxs)(l.A,{spacing:1,children:[(0,w.jsx)(c.A,{textTransform:"capitalize",variant:"subtitle2",children:e("employees")}),(0,w.jsx)(_.lE,{row:!0,spacing:4,name:"employees",options:T})]}),(0,w.jsxs)(l.A,{spacing:1,children:[(0,w.jsx)(c.A,{textTransform:"capitalize",variant:"subtitle2",children:e("management tables")}),(0,w.jsx)(_.lE,{row:!0,spacing:4,name:"management_tables",options:T})]}),(0,w.jsxs)(l.A,{spacing:1,children:[(0,w.jsx)(c.A,{textTransform:"capitalize",variant:"subtitle2",children:e("appointments")}),(0,w.jsx)(_.lE,{row:!0,spacing:4,name:"appointments",options:T})]}),(0,w.jsxs)(l.A,{spacing:1,children:[(0,w.jsx)(c.A,{textTransform:"capitalize",variant:"subtitle2",children:e("appointment configuration")}),(0,w.jsx)(_.lE,{row:!0,spacing:4,name:"appointment_configs",options:T})]}),(0,w.jsxs)(l.A,{spacing:1,children:[(0,w.jsx)(c.A,{textTransform:"capitalize",variant:"subtitle2",children:e("accounting")}),(0,w.jsx)(_.lE,{row:!0,spacing:4,name:"accounting",options:T})]}),(0,w.jsxs)(l.A,{spacing:1,children:[(0,w.jsx)(c.A,{textTransform:"capitalize",variant:"subtitle2",children:e("quality control")}),(0,w.jsx)(_.lE,{row:!0,spacing:4,name:"quality_control",options:T})]}),(0,w.jsxs)(l.A,{spacing:1,children:[(0,w.jsx)(c.A,{textTransform:"capitalize",variant:"subtitle2",children:e("permissions")}),(0,w.jsx)(_.lE,{row:!0,spacing:4,name:"permissions",options:T})]})]})]})})]}),P=(0,w.jsxs)(w.Fragment,{children:[E&&(0,w.jsx)(d.Ay,{md:4}),(0,w.jsx)(d.Ay,{xs:12,md:8,sx:{display:"flex",justifyContent:"flex-end"},children:(0,w.jsx)(o.A,{type:"submit",variant:"contained",loading:Y,sx:{m:2},children:e("save changes")})})]});return(0,w.jsx)(u.A,{maxWidth:"lg",children:(0,w.jsx)(_.Ay,{methods:H,onSubmit:q,children:(0,w.jsxs)(d.Ay,{container:!0,spacing:3,children:[I,P]})})})}},79958:(e,n,a)=>{a.d(n,{A:()=>b});var t=a(98587),i=a(58168),s=a(65043),r=a(58387),l=a(98610),o=a(94496),d=a(98206),c=a(34535),p=a(92532),m=a(72372);function u(e){return(0,m.Ay)("MuiCardHeader",e)}const v=(0,p.A)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var h=a(70579);const x=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],g=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,n)=>(0,i.A)({[`& .${v.title}`]:n.title,[`& .${v.subheader}`]:n.subheader},n.root)})({display:"flex",alignItems:"center",padding:16}),y=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,n)=>n.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),j=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,n)=>n.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),A=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,n)=>n.content})({flex:"1 1 auto"}),b=s.forwardRef((function(e,n){const a=(0,d.b)({props:e,name:"MuiCardHeader"}),{action:s,avatar:c,className:p,component:m="div",disableTypography:v=!1,subheader:b,subheaderTypographyProps:f,title:_,titleTypographyProps:w}=a,T=(0,t.A)(a,x),k=(0,i.A)({},a,{component:m,disableTypography:v}),C=(e=>{const{classes:n}=e;return(0,l.A)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},u,n)})(k);let S=_;null==S||S.type===o.A||v||(S=(0,h.jsx)(o.A,(0,i.A)({variant:c?"body2":"h5",className:C.title,component:"span",display:"block"},w,{children:S})));let E=b;return null==E||E.type===o.A||v||(E=(0,h.jsx)(o.A,(0,i.A)({variant:c?"body2":"body1",className:C.subheader,color:"text.secondary",component:"span",display:"block"},f,{children:E}))),(0,h.jsxs)(g,(0,i.A)({className:(0,r.A)(C.root,p),as:m,ref:n,ownerState:k},T,{children:[c&&(0,h.jsx)(y,{className:C.avatar,ownerState:k,children:c}),(0,h.jsxs)(A,{className:C.content,ownerState:k,children:[S,E]}),s&&(0,h.jsx)(j,{className:C.action,ownerState:k,children:s})]}))}))}}]);
//# sourceMappingURL=55750.53432511.chunk.js.map
"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[5301],{25301:(e,n,l)=>{l.r(n),l.d(n,{default:()=>te});var a=l(6907),t=l(27031),o=l(72791),r=l(61474),i=l(2101),s=l(12065),d=l(57621),c=l(79836),u=l(89164),h=l(53382),x=l(39281),p=(l(4419),l(38072)),m=l(19208),v=l(8976),g=l(22459),j=l(61146),f=l(34045),b=l(64802),Z=l(84954),_=l(40268),w=l(10261),y=(l(77008),l(25279)),C=l(73379),P=l(38062),k=l(51642),S=l(6965),R=l(79572),D=(l(6385),l(89731),l(76932)),L=(l(99116),l(68870)),F=l(9195),O=l(68745),B=l(13400),T=l(10901),W=l(30250),q=l(24845),z=l(80184);function I(e){let{row:n,onEditRow:l,setFilters:a,filters:t}=e;const{code:o,department:r,appointment:i,employee:s,status:d,title:c,Body:u,Rate:h,created_at:x,user_creation:p,ip_address_user_creation:m}=n,{t:v}=(0,D.qM)(),{currentLang:g}=(0,D.nt)(),j="ar"===g.value,f=(0,q.S)(),b=(0,q.S)(),w=(0,z.jsxs)(F.Z,{hover:!0,children:[(0,z.jsx)(O.Z,{lang:"ar",align:"center",children:o}),(0,z.jsx)(O.Z,{align:"center",onClick:()=>a({...t,name:null===r||void 0===r?void 0:r.name_english}),children:j?null===r||void 0===r?void 0:r.name_arabic:null===r||void 0===r?void 0:r.name_english}),(0,z.jsx)(O.Z,{align:"center",onClick:()=>a({...t,name:null===i||void 0===i?void 0:i.name_english}),children:null===i||void 0===i?void 0:i.code}),(0,z.jsx)(O.Z,{align:"center",onClick:()=>a({...t,name:null===s||void 0===s?void 0:s.name_english}),children:j?null===s||void 0===s?void 0:s.name_arabic:null===s||void 0===s?void 0:s.name_english}),(0,z.jsx)(O.Z,{lang:"ar",align:"center",children:c}),(0,z.jsx)(O.Z,{lang:"ar",align:"center",children:(0,z.jsx)(Z.Z,{lang:"ar",variant:"soft",color:("read"===d?"success":"unread"===d&&"error")||"default",children:v(d)})}),(0,z.jsx)(O.Z,{lang:"ar",align:"center",children:u}),(0,z.jsx)(O.Z,{children:(0,z.jsx)(T.Z,{size:"small",readOnly:!0,value:h,precision:.1,max:5})}),(0,z.jsx)(O.Z,{lang:"ar",align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,z.jsx)(B.Z,{color:f.open?"inherit":"default",onClick:b.onOpen,children:(0,z.jsx)(_.Z,{icon:"carbon:data-quality-definition"})})})]});return(0,z.jsxs)(z.Fragment,{children:[w,(0,z.jsxs)(q.Z,{open:b.open,onClose:b.onClose,arrow:"right-top",sx:{padding:2,fontSize:"14px"},children:[(0,z.jsx)(L.Z,{sx:{fontWeight:600},children:"Creation Time:"}),(0,z.jsx)(L.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:(0,W.zM)(x)}),(0,z.jsx)(L.Z,{sx:{pt:1,fontWeight:600},children:"Creator:"}),(0,z.jsx)(L.Z,{sx:{pb:1,borderBottom:"1px solid gray"},children:null===p||void 0===p?void 0:p.email}),(0,z.jsx)(L.Z,{sx:{pt:1,fontWeight:600},children:"Creator IP:"}),(0,z.jsx)(L.Z,{sx:{pb:1},children:m})]})]})}var M=l(36314),E=l(58406),Q=l(82626),A=l(13034),G=l(48550),H=l(62861),K=l(68096),N=l(13838),$=l(63466),J=l(77196);function U(e){let{filters:n,onFilters:l,canReset:a,onResetFilters:t}=e;const{t:r}=(0,D.qM)(),i=(0,o.useCallback)((e=>{l("name",e.target.value)}),[l]),s=(0,o.useCallback)((e=>{l("rate","string"===typeof e.target.value?e.target.value.split(","):e.target.value)}),[l]);return(0,z.jsxs)(M.Z,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[(0,z.jsxs)(K.Z,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[(0,z.jsx)(H.Z,{children:r("rate")}),(0,z.jsx)(E.Z,{multiple:!0,value:n.rate,onChange:s,input:(0,z.jsx)(J.Z,{label:r("rate")}),renderValue:e=>e.map((e=>e)).join(", "),MenuProps:{PaperProps:{sx:{maxHeight:240}}},children:[1,2,3,4,5].map((e=>(0,z.jsxs)(Q.Z,{value:e,children:[(0,z.jsx)(A.Z,{disableRipple:!0,size:"small",checked:n.rate.includes(e)}),(0,z.jsx)(T.Z,{size:"small",readOnly:!0,value:e,precision:.1,max:5})]},e)))})]}),(0,z.jsx)(M.Z,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:(0,z.jsx)(G.Z,{fullWidth:!0,value:n.name,onChange:i,placeholder:r("Search name or number..."),InputProps:{startAdornment:(0,z.jsx)($.Z,{position:"start",children:(0,z.jsx)(_.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),a&&(0,z.jsx)(N.Z,{color:"error",sx:{flexShrink:0},onClick:t,startIcon:(0,z.jsx)(_.Z,{icon:"solar:trash-bin-trash-bold"}),children:r("clear")})]})}var V=l(85771),X=l(27938),Y=l(2540);function ee(e){let{filters:n,onFilters:l,onResetFilters:a,results:t,...o}=e;const{t:r}=(0,D.qM)(),i=(0,Y.l2)(n.startDate,n.endDate);return(0,z.jsxs)(M.Z,{spacing:1.5,...o,children:[(0,z.jsxs)(L.Z,{sx:{typography:"body2"},children:[(0,z.jsx)("strong",{children:t}),(0,z.jsx)(L.Z,{component:"span",sx:{color:"text.secondary",ml:.25},children:r("results found")})]}),(0,z.jsxs)(M.Z,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:["all"!==n.status&&(0,z.jsx)(ne,{label:r("status:"),children:(0,z.jsx)(V.Z,{size:"small",label:r(n.status),onDelete:()=>{l("status","all")}})}),n.startDate&&n.endDate&&(0,z.jsx)(ne,{label:r("date:"),children:(0,z.jsx)(V.Z,{size:"small",label:i,onDelete:()=>{l("startDate",null),l("endDate",null)}})}),(0,z.jsx)(N.Z,{color:"error",onClick:a,startIcon:(0,z.jsx)(_.Z,{icon:"solar:trash-bin-trash-bold"}),children:r("clear")})]})]})}function ne(e){let{label:n,children:l,sx:a,...t}=e;return(0,z.jsxs)(M.Z,{component:X.Z,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...a},...t,children:[(0,z.jsx)(L.Z,{component:"span",sx:{typography:"subtitle2"},children:n}),(0,z.jsx)(M.Z,{spacing:1,direction:"row",flexWrap:"wrap",children:l})]})}const le={name:"",status:"all",rate:[]};function ae(){var e,n;const{t:l}=(0,D.qM)(),a=[{id:"code",label:l("code")},{id:"department",label:l("department")},{id:"appointments",label:l("appointments")},{id:"employees",label:l("employees")},{id:"title",label:l("title")},{id:"status",label:l("status")},{id:"Body",label:l("body")},{id:"Rate",label:l("rate")},{id:"",width:88}],{QC_STATUS_OPTIONS:t}=(0,k.D)(),_=(0,P.x6)({defaultOrderBy:"code"}),{user:L}=(0,v.E)(),F=(0,o.useRef)(),O=(0,y.K$)(),{feedbackData:B,loading:T}=((0,g.k)(),(0,g.k)(),(0,m.tv)(),(0,R.Ld)(null===L||void 0===L||null===(e=L.employee)||void 0===e||null===(n=e.employee_engagements[null===L||void 0===L?void 0:L.employee.selected_engagement])||void 0===n?void 0:n.unit_service._id)),[W,q]=(0,o.useState)(le),M=!(!W.startDate||!W.endDate)&&W.startDate.getTime()>W.endDate.getTime(),E=function(e){var n;let{inputData:l,comparator:a,filters:t,dateError:o}=e;const{status:r,name:i,rate:s}=t,d=null===(n=l)||void 0===n?void 0:n.map(((e,n)=>[e,n]));null===d||void 0===d||d.sort(((e,n)=>{const l=a(e[0],n[0]);return 0!==l?l:e[1]-n[1]})),l=d.map((e=>e[0])),i&&(l=l.filter((e=>{var n,l,a,t,o,r,s,d,c,u,h,x,p,m,v,g,j,f,b;return(null===e||void 0===e||null===(n=e.department)||void 0===n?void 0:n.name_english)&&-1!==(null===e||void 0===e||null===(l=e.department)||void 0===l||null===(a=l.name_english)||void 0===a?void 0:a.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(t=e.department)||void 0===t?void 0:t.name_arabic)&&-1!==(null===e||void 0===e||null===(o=e.department)||void 0===o||null===(r=o.name_arabic)||void 0===r?void 0:r.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(s=e.appointment)||void 0===s?void 0:s.name_english)&&-1!==(null===e||void 0===e||null===(d=e.appointment)||void 0===d||null===(c=d.name_english)||void 0===c?void 0:c.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(u=e.appointment)||void 0===u?void 0:u.name_arabic)&&-1!==(null===e||void 0===e||null===(h=e.appointment)||void 0===h||null===(x=h.name_arabic)||void 0===x?void 0:x.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(p=e.employee)||void 0===p?void 0:p.name_english)&&-1!==(null===e||void 0===e||null===(m=e.employee)||void 0===m||null===(v=m.name_english)||void 0===v?void 0:v.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e||null===(g=e.employee)||void 0===g?void 0:g.name_arabic)&&-1!==(null===e||void 0===e||null===(j=e.employee)||void 0===j||null===(f=j.name_arabic)||void 0===f?void 0:f.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e.title)&&-1!==(null===e||void 0===e||null===(b=e.title)||void 0===b?void 0:b.toLowerCase().indexOf(i.toLowerCase()))||(null===e||void 0===e?void 0:e._id)===i||JSON.stringify(e.code)===i})));"all"!==r&&(l=l.filter((e=>e.status===r)));s.length>0&&(l=l.filter((e=>s.includes(e.Rate))));return l}({inputData:B,comparator:(0,P.sQ)(_.order,_.orderBy),filters:W,dateError:M}),Q=_.dense?52:72,A=!(null===W||void 0===W||!W.name)||"all"!==W.status||W.rate.length>0,G=!E.length&&A||!E.length,H=(0,j.useReactToPrint)({content:()=>F.current}),K=(0,o.useCallback)(((e,n)=>{_.onResetPage(),q((l=>({...l,[e]:n})))}),[_]),N=(0,o.useCallback)((()=>{q(le)}),[]),$=(0,o.useCallback)(((e,n)=>{K("status",n)}),[K]);return T?(0,z.jsx)(S.a,{}):(0,z.jsx)(z.Fragment,{children:(0,z.jsxs)(u.Z,{maxWidth:!O.themeStretch&&"lg",children:[(0,z.jsx)(C.Z,{heading:l("feedback"),links:[{name:l("dashboard"),href:p.H.superadmin.root},{name:l("feedback")}],sx:{mb:{xs:3,md:5}}}),(0,z.jsxs)(d.Z,{children:[(0,z.jsx)(i.Z,{value:W.status,onChange:$,sx:{px:2.5,boxShadow:e=>"inset 0 -2px 0 0 ".concat((0,s.Fq)(e.palette.grey[500],.08))},children:t.map((e=>(0,z.jsx)(r.Z,{iconPosition:"end",value:e.value,label:e.label,icon:(0,z.jsxs)(Z.Z,{lang:"ar",variant:"all"===e.value||e.value===W.status?"filled":"soft",color:("read"===e.value?"success":"unread"===e.value&&"error")||"default",children:["all"===e.value&&B.length,"read"===e.value&&B.filter((e=>"read"===e.status)).length,"unread"===e.value&&B.filter((e=>"unread"===e.status)).length]})},e.value)))}),(0,z.jsx)(U,{onPrint:H,filters:W,onFilters:K,onDownload:()=>{const e=E.reduce(((e,n)=>{var l,a;return e.push({code:n.code,name:n.name_english,category:null===(l=n.category)||void 0===l?void 0:l.name_english,symptoms:null===(a=n.symptoms)||void 0===a?void 0:a.map((e=>null===e||void 0===e?void 0:e.name_english))}),e}),[]),n=f.P6.book_new(),l=f.P6.json_to_sheet(e);f.P6.book_append_sheet(n,l,"Sheet 1");const a=f.cW(n,{bookType:"xlsx",type:"array"}),t=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,b.saveAs)(t,"unitservicesTable.xlsx")},canReset:A,onResetFilters:N}),A&&(0,z.jsx)(ee,{filters:W,onFilters:K,onResetFilters:N,results:E.length,sx:{p:2.5,pt:0}}),(0,z.jsx)(x.Z,{children:(0,z.jsx)(w.Z,{children:(0,z.jsxs)(c.Z,{ref:F,size:_.dense?"small":"medium",children:[(0,z.jsx)(P.K,{order:_.order,orderBy:_.orderBy,headLabel:a,rowCount:E.length,numSelected:_.selected.length,onSort:_.onSort}),(0,z.jsxs)(h.Z,{children:[E.slice(_.page*_.rowsPerPage,_.page*_.rowsPerPage+_.rowsPerPage).map((e=>(0,z.jsx)(I,{row:e,filters:W,setFilters:q,onSelectRow:()=>_.onSelectRow(e._id)},e._id))),(0,z.jsx)(P.$W,{height:Q,emptyRows:(0,P.fQ)(_.page,_.rowsPerPage,B.length)}),(0,z.jsx)(P.et,{notFound:G})]})]})})}),(0,z.jsx)(P.S_,{count:E.length,page:_.page,rowsPerPage:_.rowsPerPage,onPageChange:_.onChangePage,onRowsPerPageChange:_.onChangeRowsPerPage,dense:_.dense,onChangeDense:_.onChangeDense})]})]})})}function te(){return(0,z.jsx)(z.Fragment,{children:(0,z.jsxs)(t.Z,{hasContent:!0,category:"unit_service",subcategory:"quality_control",acl:"read",children:[(0,z.jsx)(a.ql,{children:(0,z.jsx)("title",{children:"Quality Control"})}),(0,z.jsx)(ae,{})]})})}}}]);
//# sourceMappingURL=5301.e6a420dd.chunk.js.map
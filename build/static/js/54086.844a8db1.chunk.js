(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[54086],{22698:(e,t,i)=>{"use strict";i.d(t,{A:()=>S});var n=i(58168),l=i(98587),a=i(65043),s=i(58387),o=i(98610),r=i(88092),d=i(34535),c=i(98206),u=i(94496),m=i(67266),p=i(66734),x=i(70579);const v=(0,p.A)((0,x.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var h=i(96030);const g=["slots","slotProps"],b=(0,d.Ay)(h.A)((e=>{let{theme:t}=e;return(0,n.A)({display:"flex",marginLeft:`calc(${t.spacing(1)} * 0.5)`,marginRight:`calc(${t.spacing(1)} * 0.5)`},"light"===t.palette.mode?{backgroundColor:t.palette.grey[100],color:t.palette.grey[700]}:{backgroundColor:t.palette.grey[700],color:t.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,n.A)({},"light"===t.palette.mode?{backgroundColor:t.palette.grey[200]}:{backgroundColor:t.palette.grey[600]}),"&:active":(0,n.A)({boxShadow:t.shadows[0]},"light"===t.palette.mode?{backgroundColor:(0,m.tL)(t.palette.grey[200],.12)}:{backgroundColor:(0,m.tL)(t.palette.grey[600],.12)})})})),A=(0,d.Ay)(v)({width:24,height:16});const y=function(e){const{slots:t={},slotProps:i={}}=e,a=(0,l.A)(e,g),s=e;return(0,x.jsx)("li",{children:(0,x.jsx)(b,(0,n.A)({focusRipple:!0},a,{ownerState:s,children:(0,x.jsx)(A,(0,n.A)({as:t.CollapsedIcon,ownerState:s},i.collapsedIcon))}))})};var _=i(92532),j=i(72372);function f(e){return(0,j.Ay)("MuiBreadcrumbs",e)}const w=(0,_.A)("MuiBreadcrumbs",["root","ol","li","separator"]),C=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],I=(0,d.Ay)(u.A,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,t)=>[{[`& .${w.li}`]:t.li},t.root]})({}),k=(0,d.Ay)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,t)=>t.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),$=(0,d.Ay)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,t)=>t.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function P(e,t,i,n){return e.reduce(((l,a,s)=>(s<e.length-1?l=l.concat(a,(0,x.jsx)($,{"aria-hidden":!0,className:t,ownerState:n,children:i},`separator-${s}`)):l.push(a),l)),[])}const S=a.forwardRef((function(e,t){const i=(0,c.b)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:u,component:m="nav",slots:p={},slotProps:v={},expandText:h="Show path",itemsAfterCollapse:g=1,itemsBeforeCollapse:b=1,maxItems:A=8,separator:_="/"}=i,j=(0,l.A)(i,C),[w,$]=a.useState(!1),S=(0,n.A)({},i,{component:m,expanded:w,expandText:h,itemsAfterCollapse:g,itemsBeforeCollapse:b,maxItems:A,separator:_}),z=(e=>{const{classes:t}=e;return(0,o.A)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},f,t)})(S),D=(0,r.A)({elementType:p.CollapsedIcon,externalSlotProps:v.collapsedIcon,ownerState:S}),W=a.useRef(null),q=a.Children.toArray(d).filter((e=>a.isValidElement(e))).map(((e,t)=>(0,x.jsx)("li",{className:z.li,children:e},`child-${t}`)));return(0,x.jsx)(I,(0,n.A)({ref:t,component:m,color:"text.secondary",className:(0,s.A)(z.root,u),ownerState:S},j,{children:(0,x.jsx)(k,{className:z.ol,ref:W,ownerState:S,children:P(w||A&&q.length<=A?q:(e=>b+g>=e.length?e:[...e.slice(0,b),(0,x.jsx)(y,{"aria-label":h,slots:{CollapsedIcon:p.CollapsedIcon},slotProps:{collapsedIcon:D},onClick:()=>{$(!0);const e=W.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-g,e.length)])(q),z.separator,_,S)})}))}))},60262:(e,t,i)=>{var n=i(99910),l=i(33279);e.exports=function(e){return e&&e.length?n(e,l):0}},69503:(e,t,i)=>{"use strict";i.d(t,{A:()=>V});var n=i(80899),l=i(46987),a=i(24858),s=i(65043),o=i(18403),r=i(12110),d=i(74600),c=i(77224),u=i(49633),m=i(38246),p=i(48407),x=i(67132),v=i(59229),h=i(31673),g=i(75139),b=i(60778),A=i(7625),y=i(70074),_=i(59699),j=i(94496),f=i(70579);function w(){var e,t,i,n,l,o;const{control:r,watch:c}=(0,a.xW)(),{append:u}=(0,a.jz)({control:r,name:"items"}),{t:m}=(0,b.WD)(),{currentLang:p}=(0,b.jc)(),x="ar"===p.value,v=c(),{unit_service:h,patient:g,entrance:y,unit_service_patient:w}=v,{data:C}=(0,A.J02)(g),{usPatientData:I}=(0,A.vXx)(w,{populate:[{path:"country",select:"name_english name_arabic"},{path:"city",select:"name_english name_arabic"}]}),{data:k}=(0,A.R_A)(h),{Entrance:$}=(0,A.Jid)(y,{select:"activity_happened",populate:[{path:"activity_happened",select:"name_english name_arabic"}]}),{patientsData:P}=(0,A.dkx)(null===k||void 0===k?void 0:k._id,{select:"name_english name_arabic"});return(0,f.jsxs)(d.A,{direction:{md:"row"},children:[(0,f.jsx)(d.A,{spacing:{xs:2,md:3},sx:{p:3},flex:1,children:(0,f.jsxs)(d.A,{sx:{width:1},children:[(0,f.jsx)(d.A,{direction:"row",alignItems:"center",sx:{mb:1},children:(0,f.jsxs)(j.A,{variant:"h6",sx:{color:"text.disabled",flexGrow:1},children:[m("to"),":"]})}),g&&(0,f.jsxs)(d.A,{spacing:1,children:[(0,f.jsx)(j.A,{variant:"subtitle2",children:x?null===C||void 0===C?void 0:C.name_arabic:null===C||void 0===C?void 0:C.name_english}),(0,f.jsx)(j.A,{variant:"body2",children:x?`${(null===C||void 0===C||null===(e=C.city)||void 0===e?void 0:e.name_arabic)||""}, ${(null===C||void 0===C||null===(t=C.country)||void 0===t?void 0:t.name_arabic)||""}`:`${(null===C||void 0===C||null===(i=C.city)||void 0===i?void 0:i.name_english)||""}, ${(null===C||void 0===C||null===(n=C.country)||void 0===n?void 0:n.name_english)||""}`}),(0,f.jsxs)(j.A,{variant:"body2",children:[" ",null===C||void 0===C?void 0:C.phone]})]}),w&&(0,f.jsxs)(d.A,{spacing:1,children:[(0,f.jsx)(j.A,{variant:"subtitle2",children:x?null===I||void 0===I?void 0:I.name_arabic:null===I||void 0===I?void 0:I.name_english}),(0,f.jsxs)(j.A,{variant:"body2",children:[" ",null===I||void 0===I?void 0:I.phone]})]}),!g&&!w&&(0,f.jsx)(d.A,{direction:"row",justifyContent:"flex-start",children:(0,f.jsx)(_.j2,{lang:"ar",sx:{minWidth:200},name:"patient",options:P.map((e=>e._id)),getOptionLabel:e=>{var t;return null===(t=P.find((t=>t._id===e)))||void 0===t?void 0:t[x?"name_arabic":"name_english"]},renderOption:(e,t,i)=>{var n;return(0,s.createElement)("li",{lang:"ar",...e,key:i,value:t},null===(n=P.find((e=>e._id===t)))||void 0===n?void 0:n[x?"name_arabic":"name_english"])}})})]})}),(null===$||void 0===$||null===(l=$.activity_happened)||void 0===l?void 0:l.length)>0&&(0,f.jsxs)(d.A,{flex:.5,sx:{p:{md:5,xs:2}},children:[(0,f.jsxs)(j.A,{variant:"body1",children:[m("activities"),":"]}),(0,f.jsx)(d.A,{gap:.5,px:2,mt:1,maxHeight:120,overflow:"auto",children:null===$||void 0===$||null===(o=$.activity_happened)||void 0===o?void 0:o.map((e=>(0,f.jsxs)(d.A,{direction:"row",gap:2,children:[(0,f.jsx)(j.A,{variant:"subtitle2",children:(0,f.jsx)("li",{children:x?e.name_arabic:e.name_english})}),(0,f.jsx)(j.A,{variant:"caption",sx:{color:"primary.main",cursor:"pointer"},onClick:()=>{return t=e._id,void u({service_type:null,activity:t||null,quantity:1,price_per_unit:0,subtotal:0,discount_amount:0,deduction:0,tax:0,total:0});var t},children:m("invoicing")})]})))})]})]})}var C=i(60262),I=i.n(C),k=i(81e3),$=i(39336),P=i(94814),S=i(51787),z=i(1470),D=i(5124),W=i(35151);function q(){var e,t,i;const{t:n}=(0,b.WD)(),{currentLang:l}=(0,b.jc)(),o="ar"===l.value,{handleAddNew:r}=(0,D.I)(),{user:c}=(0,g.Z)(),m=null===c||void 0===c||null===(e=c.employee)||void 0===e||null===(t=e.employee_engagements)||void 0===t||null===(i=t[c.employee.selected_engagement])||void 0===i?void 0:i.unit_service,{serviceTypesData:x}=(0,A._BE)(null===m||void 0===m?void 0:m._id,{select:"_id name_english name_arabic Price_per_unit"}),{activitiesData:v}=(0,A.h0B)(null===m||void 0===m?void 0:m._id),{taxesData:h}=(0,A.Fwg)(),{control:y,setValue:w,watch:C}=(0,a.xW)(),{fields:q,append:L,remove:E,update:T}=(0,a.jz)({control:y,name:"items"}),N=C();(0,s.useEffect)((()=>{T()}),[N.items.length,T]);const O=N.items.map((e=>e.subtotal)),J=I()(O);(0,s.useEffect)((()=>{w("subtotal",J)}),[w,J]);const B=N.subtotal-N.discount,R=h.find((e=>e._id===N.taxes_type)),F=B*(R?(R.percentage||0)/100:0),M=B+F;(0,s.useEffect)((()=>{w("taxes",F)}),[w,F]),(0,s.useEffect)((()=>{w("totalAmount",M)}),[w,M]);const Z=(0,s.useCallback)(((e,t)=>{if(e.target.name===`items[${t}].service_type`){w(e.target.name,e.target.value);const i=null===x||void 0===x?void 0:x.find((t=>t._id===e.target.value));w(`items[${t}].price_per_unit`,null===i||void 0===i?void 0:i.Price_per_unit)}else w(e.target.name,Number(e.target.value));w(`items[${t}].subtotal`,N.items[t].quantity*N.items[t].price_per_unit),w(`items[${t}].total`,N.items[t].quantity*N.items[t].price_per_unit)}),[w,N.items,x]),V=(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)($.A,{}),(0,f.jsxs)(d.A,{my:1,gap:{md:2,xs:1},direction:{md:"row"},alignItems:{md:"center",xs:"flex-end"},sx:{textAlign:"right",typography:"body2"},children:[(0,f.jsxs)(d.A,{direction:"row",alignItems:"center",gap:1,children:[(0,f.jsxs)(k.A,{sx:{color:"text.secondary"},children:[n("subtotal"),":"]}),(0,f.jsx)(k.A,{sx:{typography:"subtitle2"},children:(0,f.jsx)(_.o3,{disabled:!0,type:"number",name:"subtotal",size:"small",sx:{width:160,[`& .${z.A.input}`]:{textAlign:{md:"right"}}},InputProps:{startAdornment:(0,f.jsx)(S.A,{position:"start",children:(0,f.jsx)(k.A,{sx:{typography:"subtitle2",color:"text.disabled"},children:"JOD"})})}})})]}),(0,f.jsxs)(d.A,{direction:"row",alignItems:"center",gap:1,children:[(0,f.jsxs)(k.A,{sx:{color:"text.secondary"},children:[n("discount"),":"]}),(0,f.jsx)(k.A,{sx:{...N.discount&&{color:"error.main"}},children:(0,f.jsx)(_.o3,{type:"number",name:"discount",size:"small",sx:{width:160,[`& .${z.A.input}`]:{textAlign:{md:"right"}}},InputProps:{startAdornment:(0,f.jsx)(S.A,{position:"start",children:(0,f.jsx)(k.A,{sx:{typography:"subtitle2",color:"text.disabled"},children:"JOD"})})}})})]}),(null===m||void 0===m?void 0:m.has_tax)&&(0,f.jsxs)(d.A,{direction:"row",alignItems:"center",gap:1,children:[(0,f.jsxs)(k.A,{sx:{color:"text.secondary"},children:[n("tax"),":"]}),(0,f.jsx)(k.A,{children:(0,f.jsx)(_.tX,{name:"taxes_type",size:"small",sx:{width:160,[`& .${z.A.input}`]:{textAlign:{md:"left"}}},children:h.map(((e,t)=>(0,f.jsxs)(P.A,{lang:"ar",value:e._id,children:[o?e.name_arabic:e.name_english," ",e.percentage,"%"]},t)))})})]}),(0,f.jsxs)(d.A,{direction:"row",sx:{typography:"subtitle1"},alignItems:"center",gap:1,children:[(0,f.jsxs)(k.A,{children:[n("total"),":"]}),(0,f.jsx)(k.A,{children:(0,f.jsx)(_.o3,{disabled:!0,type:"number",name:"totalAmount",size:"small",sx:{width:160,[`& .${z.A.input}`]:{textAlign:{md:"right"}}},InputProps:{startAdornment:(0,f.jsx)(S.A,{position:"start",children:(0,f.jsx)(k.A,{sx:{typography:"subtitle2",color:"text.disabled"},children:"JOD"})})}})})]})]}),(0,f.jsx)($.A,{})]});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)($.A,{}),(0,f.jsxs)(k.A,{sx:{p:3},children:[(0,f.jsxs)(j.A,{variant:"h6",sx:{color:"text.disabled",mb:3},children:[n("details"),":"]}),(0,f.jsx)(d.A,{divider:(0,f.jsx)($.A,{flexItem:!0,sx:{borderStyle:"dashed"}}),spacing:2,children:q.map(((e,t)=>{var i,l,a;return(0,f.jsx)(d.A,{alignItems:"flex-start",spacing:1.5,children:(0,f.jsxs)(d.A,{direction:{xs:"column",md:"row"},justifyContent:"flex-start",spacing:2,sx:{width:1},children:[(0,f.jsxs)(_.tX,{name:`items[${t}].service_type`,size:"small",label:n("service"),sx:{maxWidth:{md:400}},InputLabelProps:{shrink:!0},onChange:e=>Z(e,t),children:[null===x||void 0===x?void 0:x.map((e=>(0,f.jsx)(P.A,{lang:"ar",value:e._id,children:o?e.name_arabic:e.name_english},e._id))),(0,f.jsx)($.A,{}),(0,f.jsxs)(P.A,{lang:"ar",sx:{display:"flex",justifyContent:"flex-end",gap:1,fontWeight:600},onClick:()=>r(p.f.unitservice.tables.services.new),children:[(0,f.jsx)(j.A,{variant:"body2",sx:{color:"info.main"},children:n("Add new")}),(0,f.jsx)(W.A,{icon:"material-symbols:new-window-sharp"})]})]}),(0,f.jsxs)(_.tX,{name:`items[${t}].activity`,size:"small",label:n("activity"),sx:{maxWidth:{md:200}},InputLabelProps:{shrink:!0},children:[null===v||void 0===v?void 0:v.map((e=>(0,f.jsx)(P.A,{lang:"ar",value:e._id,children:o?e.name_arabic:e.name_english},e._id))),(0,f.jsx)($.A,{}),(0,f.jsxs)(P.A,{lang:"ar",sx:{display:"flex",justifyContent:"flex-end",gap:1,fontWeight:600},onClick:()=>r(p.f.unitservice.tables.activities.new),children:[(0,f.jsx)(j.A,{variant:"body2",sx:{color:"info.main"},children:n("Add new")}),(0,f.jsx)(W.A,{icon:"material-symbols:new-window-sharp"})]})]}),(0,f.jsx)(_.o3,{size:"small",type:"number",name:`items[${t}].quantity`,label:n("quantity"),placeholder:"0",onChange:e=>Z(e,t),InputLabelProps:{shrink:!0},sx:{maxWidth:{md:200},[`& .${z.A.input}`]:{textAlign:{md:"right"}}}}),(0,f.jsx)(_.o3,{disabled:!0,size:"small",type:"number",name:`items[${t}].price_per_unit`,label:n("price"),placeholder:"0.00",InputProps:{startAdornment:(0,f.jsx)(S.A,{position:"start",children:(0,f.jsx)(k.A,{sx:{typography:"subtitle2",color:"text.disabled"},children:"JOD"})})},sx:{maxWidth:{md:200},[`& .${z.A.input}`]:{textAlign:{md:"right"}}}}),(0,f.jsx)(_.o3,{disabled:!0,size:"small",type:"number",name:`items[${t}].total`,label:n("total"),placeholder:"0.00",value:0===(null===(i=N.items[t])||void 0===i?void 0:i.total)?"":null===(l=N.items[t])||void 0===l||null===(a=l.total)||void 0===a?void 0:a.toFixed(2),InputProps:{startAdornment:(0,f.jsx)(S.A,{position:"start",children:(0,f.jsx)(k.A,{sx:{typography:"subtitle2",color:"text.disabled"},children:"JOD"})})},sx:{maxWidth:{md:200},[`& .${z.A.input}`]:{textAlign:{md:"right"}}}}),(0,f.jsx)(u.A,{size:"small",color:"error",tabIndex:-1,onClick:()=>(e=>{E(e)})(t),children:(0,f.jsx)(W.A,{icon:"solar:trash-bin-trash-bold"})})]})},e.id)}))}),(0,f.jsx)($.A,{sx:{mt:2,mb:1,borderStyle:"dashed"}}),(0,f.jsx)(d.A,{spacing:3,mb:2,direction:{xs:"column",md:"row"},justifyContent:"flex-end",alignItems:{xs:"flex-end",md:"center"},children:(0,f.jsx)(u.A,{size:"small",color:"primary",startIcon:(0,f.jsx)(W.A,{icon:"mingcute:add-line"}),onClick:()=>{L({service_type:null,activity:null,quantity:1,price_per_unit:0,subtotal:0,discount_amount:0,tax:0,total:0})},sx:{flexShrink:0},children:n("add item")})}),V]})]})}var L=i(83462),E=i(4219),T=i(35316),N=i(29347);function O(e){var t,i,n,l;let{open:o,onClose:r,onSubmit:c}=e;const{watch:m,setValue:p}=(0,a.xW)(),{user:x}=(0,g.Z)(),{t:v}=(0,b.WD)(),{currentLang:h}=(0,b.jc)(),A="ar"===h.value,y=null===x||void 0===x||null===(t=x.employee)||void 0===t||null===(i=t.employee_engagements)||void 0===i||null===(n=i[null===x||void 0===x?void 0:x.employee.selected_engagement])||void 0===n?void 0:n.unit_service,w=m(),C=e=>{p(e.target.name,e.target.value),"patient_paid"===e.target.name?p("insurance_coverage_amount",w.totalAmount-e.target.value):p("patient_paid",w.totalAmount-e.target.value)};return(0,f.jsxs)(L.A,{fullWidth:!0,open:o,onClose:r,children:[(0,f.jsx)(E.A,{sx:{pb:2,textTransform:"capitalize"},children:v("payment info")}),(0,f.jsx)(T.A,{children:(0,f.jsxs)(d.A,{gap:2,children:[(0,f.jsxs)(d.A,{gap:1,children:[(0,f.jsx)(j.A,{variant:"subtitle2",children:v("amount paid by patient")}),(0,f.jsx)(_.o3,{type:"number",name:"patient_paid",onChange:C,InputProps:{startAdornment:(0,f.jsx)(S.A,{position:"start",children:(0,f.jsx)(k.A,{sx:{typography:"subtitle2",color:"text.disabled"},children:"JOD"})})}})]}),w.patient_paid>0&&(0,f.jsx)(_.b$,{row:!0,name:"payment_method",label:v("payment method"),options:[{label:v("cash"),value:"cash"},{label:v("credit card"),value:"credit_card"},{label:v("bank transfer"),value:"bank_transfer"},{label:v("instant bank transfer"),value:"instant_transfer"}]}),(0,f.jsxs)(d.A,{gap:1,children:[(0,f.jsx)(j.A,{variant:"subtitle2",children:v("amount covered by insurance")}),(0,f.jsx)(_.o3,{type:"number",name:"insurance_coverage_amount",onChange:C,InputProps:{startAdornment:(0,f.jsx)(S.A,{position:"start",children:(0,f.jsx)(k.A,{sx:{typography:"subtitle2",color:"text.disabled"},children:"JOD"})})}})]}),(0,f.jsxs)(d.A,{gap:1,children:[(0,f.jsx)(j.A,{variant:"subtitle2",children:v("insurance number")}),(0,f.jsx)(_.o3,{name:"insurance_number"})]}),(0,f.jsxs)(d.A,{gap:1,children:[(0,f.jsx)(j.A,{variant:"subtitle2",children:v("insurance company")}),(0,f.jsx)(_.j2,{lang:"ar",sx:{minWidth:200},name:"insurance_company",options:null===y||void 0===y||null===(l=y.insurance)||void 0===l?void 0:l.map((e=>e._id)),getOptionLabel:e=>{var t,i;return null===y||void 0===y||null===(t=y.insurance)||void 0===t||null===(i=t.find((t=>t._id===e)))||void 0===i?void 0:i[A?"name_arabic":"name_english"]},renderOption:(e,t,i)=>{var n,l;return(0,s.createElement)("li",{lang:"ar",...e,key:i,value:t},null===y||void 0===y||null===(n=y.insurance)||void 0===n||null===(l=n.find((e=>e._id===t)))||void 0===l?void 0:l[A?"name_arabic":"name_english"])}})]})]})}),(0,f.jsxs)(N.A,{children:[(0,f.jsx)(u.A,{variant:"outlined",color:"inherit",onClick:r,children:v("cancel")}),(0,f.jsx)(u.A,{variant:"contained",onClick:()=>{c(),r()},children:v("submit")})]})]})}var J=i(84284);function B(){const{control:e}=(0,a.xW)(),{t:t}=(0,b.WD)();return(0,f.jsxs)(d.A,{spacing:2,direction:{xs:"column",sm:"row"},sx:{p:3,bgcolor:"background.neutral"},children:[(0,f.jsx)(_.tX,{fullWidth:!0,name:"status",label:t("status"),InputLabelProps:{shrink:!0},PaperPropsSx:{textTransform:"capitalize"},children:["paid","installment","insurance"].map((e=>(0,f.jsx)(P.A,{value:e,children:t(e)},e)))}),(0,f.jsx)(a.xI,{name:"createDate",control:e,render:e=>{let{field:i,fieldState:{error:n}}=e;return(0,f.jsx)(J.l,{label:t("invoice date"),value:i.value,onChange:e=>{i.onChange(e)},slotProps:{textField:{fullWidth:!0,error:!!n,helperText:null===n||void 0===n?void 0:n.message}}})}})]})}var R=i(94289);function F(){var e,t,i,n,l,o,r,c,m,x,v,h;const{t:y}=(0,b.WD)(),{currentLang:w}=(0,b.jc)(),C="ar"===w.value,{handleAddNew:I}=(0,D.I)(),{user:q}=(0,g.Z)(),{serviceTypesData:L}=(0,A._BE)(null===q||void 0===q||null===(e=q.employee)||void 0===e||null===(t=e.employee_engagements)||void 0===t||null===(i=t[q.employee.selected_engagement])||void 0===i||null===(n=i.unit_service)||void 0===n?void 0:n._id,{select:"name_english name_arabic Price_per_unit tax deduction",populate:[{path:"tax",select:"percentage name_english name_arabic"}]}),{activitiesData:E}=(0,A.h0B)(null===q||void 0===q||null===(l=q.employee)||void 0===l||null===(o=l.employee_engagements)||void 0===o||null===(r=o[q.employee.selected_engagement])||void 0===r||null===(c=r.unit_service)||void 0===c?void 0:c._id),{control:T,setValue:N,watch:O}=(0,a.xW)(),{fields:J,append:B,remove:F,update:M}=(0,a.jz)({control:T,name:"items"}),Z=O(),[V,X]=(0,s.useState)({});(0,s.useEffect)((()=>{const e={};L.forEach((t=>{const i=Z.items.filter((e=>e.service_type===t._id));i.length&&i.forEach((i=>{const n=t.tax._id,l=t.tax.percentage/100*(i.price_per_unit*i.quantity-i.discount_amount);e[n]||(e[n]={name:C?t.tax.name_arabic:t.tax.name_english,value:0}),e[n].value+=l}))})),X(e)}),[Z,L,C]);const Y=(0,s.useMemo)((()=>Object.keys(V).map((e=>({name:V[e].name,value:V[e].value})))),[V]);(0,s.useEffect)((()=>{M()}),[Z.items.length,M]);const K=null===(m=Z.items)||void 0===m?void 0:m.reduce(((e,t)=>e+t.subtotal),0),G=null===(x=Z.items)||void 0===x?void 0:x.reduce(((e,t)=>e+t.discount_amount),0),H=null===(v=Z.items)||void 0===v?void 0:v.reduce(((e,t)=>e+t.tax/100*(t.subtotal-t.discount_amount)),0),Q=null===(h=Z.items)||void 0===h?void 0:h.reduce(((e,t)=>e+t.total),0);(0,s.useEffect)((()=>{N("subtotal",K)}),[K,N]),(0,s.useEffect)((()=>{N("discount",G)}),[G,N]),(0,s.useEffect)((()=>{N("taxes",H)}),[H,N]),(0,s.useEffect)((()=>{N("totalAmount",Q)}),[Q,N]);const U=(0,s.useCallback)(((e,t)=>{var i;const n=null===L||void 0===L?void 0:L.find((e=>e._id===t));N(`items[${e}].price_per_unit`,null===n||void 0===n?void 0:n.Price_per_unit),N(`items[${e}].subtotal`,Z.items[e].quantity*Z.items[e].price_per_unit),N(`items[${e}].tax`,(null===n||void 0===n||null===(i=n.tax)||void 0===i?void 0:i.percentage)||0);const l=Z.items[e].subtotal-Z.items[e].discount_amount,a=l*(Z.items[e].tax/100);N(`items[${e}].total`,l+a)}),[N,Z.items,L]),ee=(0,s.useCallback)(((e,t)=>{N(e.target.name,Number(e.target.value)),N(`items[${t}].subtotal`,Z.items[t].quantity*Z.items[t].price_per_unit);const i=Z.items[t].subtotal-Z.items[t].discount_amount,n=i*(Z.items[t].tax/100);N(`items[${t}].total`,i+n)}),[N,Z.items]),te=(0,f.jsx)(d.A,{spacing:2,alignItems:"flex-end",sx:{mt:3,textAlign:"right",typography:"body2"},children:[{name:"subtotal",value:Z.subtotal},{name:"discount",value:-Z.discount,color:"red"},...Y,{name:"total",value:Z.totalAmount,textColor:"text.primary",typography:"subtitle1"}].map((e=>(0,f.jsxs)(d.A,{direction:"row",children:[(0,f.jsx)(k.A,{sx:{color:e.textColor||"text.secondary",typography:e.typography},children:y(e.name)}),(0,f.jsx)(k.A,{sx:{width:160,typography:"subtitle2",color:e.color},children:e.value?(0,R.KZ)(e.value):"-"})]})))});return(0,f.jsxs)(k.A,{sx:{p:3},children:[(0,f.jsxs)(j.A,{variant:"h6",sx:{color:"text.disabled",mb:3},children:[y("details"),":"]}),(0,f.jsx)(d.A,{divider:(0,f.jsx)($.A,{flexItem:!0,sx:{borderStyle:"dashed"}}),spacing:2,children:J.map(((e,t)=>(0,f.jsxs)(d.A,{alignItems:"flex-start",spacing:1.5,children:[(0,f.jsxs)(d.A,{direction:{xs:"column",md:"row"},justifyContent:"flex-end",spacing:2,sx:{width:1},children:[(0,f.jsxs)(_.tX,{name:`items[${t}].service_type`,size:"small",label:y("service"),sx:{maxWidth:{md:400}},InputLabelProps:{shrink:!0},children:[null===L||void 0===L?void 0:L.map((e=>(0,f.jsx)(P.A,{lang:"ar",value:e._id,onClick:()=>U(t,e._id),children:C?e.name_arabic:e.name_english},e._id))),(0,f.jsx)($.A,{}),(0,f.jsxs)(P.A,{lang:"ar",sx:{display:"flex",justifyContent:"flex-end",gap:1,fontWeight:600},onClick:()=>I(p.f.unitservice.tables.services.new),children:[(0,f.jsx)(j.A,{variant:"body2",sx:{color:"info.main"},children:y("Add new")}),(0,f.jsx)(W.A,{icon:"material-symbols:new-window-sharp"})]})]}),(0,f.jsxs)(_.tX,{name:`items[${t}].activity`,size:"small",label:y("activity"),sx:{maxWidth:{md:200}},InputLabelProps:{shrink:!0},children:[null===E||void 0===E?void 0:E.map((e=>(0,f.jsx)(P.A,{lang:"ar",value:e._id,children:C?e.name_arabic:e.name_english},e._id))),(0,f.jsx)($.A,{}),(0,f.jsxs)(P.A,{lang:"ar",sx:{display:"flex",justifyContent:"flex-end",gap:1,fontWeight:600},onClick:()=>I(p.f.unitservice.tables.activities.new),children:[(0,f.jsx)(j.A,{variant:"body2",sx:{color:"info.main"},children:y("Add new")}),(0,f.jsx)(W.A,{icon:"material-symbols:new-window-sharp"})]})]}),(0,f.jsx)(_.o3,{size:"small",type:"number",name:`items[${t}].quantity`,label:y("quantity"),placeholder:"0",onChange:e=>ee(e,t),InputLabelProps:{shrink:!0},sx:{maxWidth:{md:200},[`& .${z.A.input}`]:{textAlign:{md:"right"}}}}),(0,f.jsx)(_.o3,{disabled:!0,size:"small",type:"number",name:`items[${t}].price_per_unit`,label:y("price"),placeholder:"0.00",InputProps:{startAdornment:(0,f.jsx)(S.A,{position:"start",children:(0,f.jsx)(k.A,{sx:{typography:"subtitle2",color:"text.disabled"},children:"JOD"})})},sx:{maxWidth:{md:200},[`& .${z.A.input}`]:{textAlign:{md:"right"}}}}),(0,f.jsx)(_.o3,{disabled:!0,size:"small",type:"number",name:`items[${t}].subtotal`,label:y("subtotal"),placeholder:"0.00",value:0===Z.items[t].subtotal?"":Z.items[t].subtotal.toFixed(2),InputProps:{startAdornment:(0,f.jsx)(S.A,{position:"start",children:(0,f.jsx)(k.A,{sx:{typography:"subtitle2",color:"text.disabled"},children:"JOD"})})},sx:{maxWidth:{md:200},[`& .${z.A.input}`]:{textAlign:{md:"right"}}}}),(0,f.jsx)(k.A,{width:65})]}),(0,f.jsxs)(d.A,{direction:{xs:"column",md:"row"},justifyContent:"flex-end",spacing:2,sx:{width:1},children:[(0,f.jsx)(_.o3,{size:"small",type:"number",name:`items[${t}].discount_amount`,label:y("discount"),onChange:e=>ee(e,t),InputProps:{startAdornment:(0,f.jsx)(S.A,{position:"start",children:(0,f.jsx)(k.A,{sx:{typography:"subtitle2",color:"text.disabled"},children:"JOD"})})},sx:{maxWidth:{md:200},[`& .${z.A.input}`]:{textAlign:{md:"right"}}}}),(0,f.jsx)(_.o3,{disabled:!0,size:"small",type:"number",name:`items[${t}].tax`,label:y("tax"),placeholder:"00",onChange:e=>ee(e,t),InputProps:{startAdornment:(0,f.jsx)(S.A,{position:"start",children:(0,f.jsx)(k.A,{sx:{typography:"subtitle2",color:"text.disabled"},children:"%"})})},sx:{maxWidth:{md:200},[`& .${z.A.input}`]:{textAlign:{md:"right"}}}}),(0,f.jsx)(_.o3,{disabled:!0,size:"small",type:"number",name:`items[${t}].total`,label:y("total"),placeholder:"0.00",value:0===Z.items[t].total?"":Z.items[t].total.toFixed(2),InputProps:{startAdornment:(0,f.jsx)(S.A,{position:"start",children:(0,f.jsx)(k.A,{sx:{typography:"subtitle2",color:"text.disabled"},children:"JOD"})})},sx:{maxWidth:{md:200},[`& .${z.A.input}`]:{textAlign:{md:"right"}}}}),(0,f.jsx)(u.A,{size:"small",color:"error",onClick:()=>(e=>{F(e)})(t),children:(0,f.jsx)(W.A,{icon:"solar:trash-bin-trash-bold"})})]})]},e.id)))}),(0,f.jsx)($.A,{sx:{my:3,borderStyle:"dashed"}}),(0,f.jsx)(d.A,{spacing:3,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"},children:(0,f.jsx)(u.A,{size:"small",color:"primary",startIcon:(0,f.jsx)(W.A,{icon:"mingcute:add-line"}),onClick:()=>{B({service_type:null,activity:null,quantity:1,price_per_unit:0,subtotal:0,discount_amount:0,tax:0,total:0})},sx:{flexShrink:0},children:y("add item")})}),te]})}var M=i(67784);function Z(e){var t;let{open:i,onClose:n,onSubmit:l}=e;const{control:o,watch:r,setValue:c}=(0,a.xW)(),{t:m}=(0,b.WD)(),p=r(),{fields:x,append:v,remove:h}=(0,a.jz)({control:o,name:"payment_details"}),g=(p.patient_paid?p.patient_paid:0)+p.payment_details.reduce(((e,t)=>e+t.amount),0);(0,s.useEffect)((()=>{c("totalInstallments",g)}),[g,c]);return(0,f.jsxs)(L.A,{fullWidth:!0,maxWidth:"md",open:i,onClose:n,children:[(0,f.jsx)(E.A,{sx:{pb:2,textTransform:"capitalize"},children:m("payment info")}),(0,f.jsxs)(T.A,{children:[(0,f.jsxs)(d.A,{divider:(0,f.jsx)($.A,{flexItem:!0,sx:{borderStyle:"dashed"}}),spacing:2,paddingTop:2,children:[(0,f.jsx)(d.A,{alignItems:"flex-start",spacing:1,children:(0,f.jsxs)(d.A,{direction:{xs:"column",md:"row"},justifyContent:"flex-start",spacing:2,sx:{width:1},children:[(0,f.jsx)(M.A,{disabled:!0,fullWidth:!0,size:"small",value:m("now"),label:m("due date"),InputLabelProps:{shrink:!0}}),(0,f.jsx)(_.o3,{size:"small",type:"number",name:"patient_paid",label:m("amount"),placeholder:"0",InputLabelProps:{shrink:!0},sx:{maxWidth:{md:200}},InputProps:{startAdornment:(0,f.jsx)(S.A,{position:"start",children:(0,f.jsx)(k.A,{sx:{typography:"subtitle2",color:"text.disabled"},children:"JOD"})})}}),(0,f.jsx)(_.tX,{size:"small",name:"payment_method",label:m("payment method"),children:[{label:"cash",value:"cash"},{label:"credit card",value:"credit_card"},{label:"bank transfer",value:"bank_transfer"},{label:"instant bank transfer",value:"instant_transfer"}].map(((e,t)=>(0,f.jsx)(P.A,{value:e.value,children:m(e.label)},t)))}),(0,f.jsx)(k.A,{width:200})]})}),x.map(((e,t)=>(0,f.jsx)(d.A,{alignItems:"flex-start",spacing:1,children:(0,f.jsxs)(d.A,{direction:{xs:"column",md:"row"},justifyContent:"flex-start",spacing:2,sx:{width:1},children:[(0,f.jsx)(_.ZE,{size:"small",name:`payment_details[${t}].due_date`,label:m("due date")}),(0,f.jsx)(_.o3,{size:"small",type:"number",name:`payment_details[${t}].amount`,label:m("amount"),placeholder:"0",InputLabelProps:{shrink:!0},InputProps:{startAdornment:(0,f.jsx)(S.A,{position:"start",children:(0,f.jsx)(k.A,{sx:{typography:"subtitle2",color:"text.disabled"},children:"JOD"})})}}),(0,f.jsx)(u.A,{size:"small",color:"error",sx:{width:50},tabIndex:-1,onClick:()=>(e=>{h(e)})(t),children:(0,f.jsx)(W.A,{icon:"solar:trash-bin-trash-bold"})})]})},e.id))),(0,f.jsx)(d.A,{spacing:3,mb:2,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"},children:(0,f.jsx)(u.A,{size:"small",color:"primary",startIcon:(0,f.jsx)(W.A,{icon:"mingcute:add-line"}),onClick:()=>{var e,t;v({due_date:(null===(e=p.payment_details)||void 0===e||null===(t=e[p.payment_details.length-1])||void 0===t?void 0:t.due_date)||new Date,amount:p.totalAmount-p.totalInstallments})},sx:{flexShrink:0},children:m("add installment")})})]}),(0,f.jsx)($.A,{}),(0,f.jsxs)(d.A,{my:1,spacing:2,direction:"row",alignItems:"center",sx:{textAlign:"right",typography:"body2"},children:[(0,f.jsxs)(d.A,{direction:"row",alignItems:"center",gap:1,children:[(0,f.jsxs)(k.A,{sx:{color:"text.secondary"},children:[m("invoice total amount"),":"]}),(0,f.jsx)(k.A,{sx:{typography:"subtitle2"},children:(0,f.jsx)(_.o3,{disabled:!0,type:"number",name:"totalAmount",size:"small",sx:{width:120},InputProps:{startAdornment:(0,f.jsx)(S.A,{position:"start",children:(0,f.jsx)(k.A,{sx:{typography:"subtitle2",color:"text.disabled"},children:"JOD"})})}})})]}),(0,f.jsxs)(d.A,{direction:"row",alignItems:"center",gap:1,children:[(0,f.jsxs)(k.A,{sx:{color:"text.secondary"},children:[m("installments total amount"),":"]}),(0,f.jsx)(k.A,{children:(0,f.jsx)(_.o3,{disabled:!0,type:"number",name:"totalInstallments",size:"small",sx:{width:120},InputProps:{startAdornment:(0,f.jsx)(S.A,{position:"start",children:(0,f.jsx)(k.A,{sx:{typography:"subtitle2",color:"text.disabled"},children:"JOD"})})}})})]}),(0,f.jsxs)(d.A,{direction:"row",alignItems:"center",gap:1,children:[(0,f.jsxs)(k.A,{sx:{color:"text.secondary"},children:[m("installments number"),":"]}),(0,f.jsx)(k.A,{children:(0,f.jsx)(_.o3,{disabled:!0,type:"number",value:null===(t=p.payment_details)||void 0===t?void 0:t.length,name:"installment_number",size:"small",sx:{width:100}})})]})]}),(0,f.jsx)($.A,{})]}),(0,f.jsxs)(N.A,{children:[(0,f.jsx)(u.A,{variant:"outlined",color:"inherit",onClick:n,children:m("cancel")}),(0,f.jsx)(u.A,{disabled:p.totalAmount!==p.totalInstallments,variant:"contained",onClick:()=>{l(),n()},children:m("submit")})]})]})}function V(e){var t,i,j;let{currentInvoice:C}=e;const I=(0,x.rd)(),k=(0,x.ok)(),$=k.get("appointment"),P=k.get("entrance"),{Entrance:S}=(0,A.Jid)(P),[z,D]=(0,s.useState)(),{data:W}=(0,A.J02)(null===S||void 0===S?void 0:S.patient),{data:L}=(0,A.R_A)(null===S||void 0===S?void 0:S.service_unit),[E,T]=(0,s.useState)(),[N,J]=(0,s.useState)(!1),{user:R}=(0,g.Z)(),{t:M}=(0,b.WD)(),{currentLang:V}=(0,b.jc)(),X="ar"===V.value,Y=n.Ik().shape({createDate:n.gl().nullable().required(M("required field")),patient:n.gl().nullable(),unit_service:n.gl(),appointment:n.gl().nullable(),entrance:n.gl().nullable(),employee:n.gl(),dueDate:n.gl().nullable(),detailedTaxes:n.lc(),items:n.RZ((()=>n.YO().of(n.Ik({service_type:n.Yj().required(M("required field")),activity:n.Yj().nullable(),price_per_unit:n.ai(),discount_amount:n.ai(),subtotal:n.ai(),tax:n.ai(),total:n.ai(),quantity:n.ai().required(M("required field"))})))),status:n.Yj(),taxes_type:n.Yj().nullable(),taxes:n.ai(),discount:n.ai(),work_shift:n.Yj().nullable(),subtotal:n.ai(),totalAmount:n.ai(),concept:n.Yj().required(M("required field"))}),K=(0,s.useMemo)((()=>{var e,t,i,n,l,a,s,o,r,d,c,u,m,p;return{createDate:(null===C||void 0===C?void 0:C.created_at)||new Date,unit_service:(null===C||void 0===C||null===(e=C.unit_service)||void 0===e?void 0:e._id)||(null===C||void 0===C?void 0:C.unit_service)||(null===R||void 0===R||null===(t=R.employee)||void 0===t||null===(i=t.employee_engagements)||void 0===i||null===(n=i[null===R||void 0===R?void 0:R.employee.selected_engagement])||void 0===n||null===(l=n.unit_service)||void 0===l?void 0:l._id),employee:(null===C||void 0===C||null===(a=C.employee)||void 0===a?void 0:a._id)||(null===C||void 0===C?void 0:C.employee)||(null===R||void 0===R||null===(s=R.employee)||void 0===s||null===(o=s.employee_engagements)||void 0===o||null===(r=o[null===R||void 0===R?void 0:R.employee.selected_engagement])||void 0===r?void 0:r._id),patient:(null===C||void 0===C||null===(d=C.patient)||void 0===d?void 0:d._id)||(null===C||void 0===C?void 0:C.patient)||(null===z||void 0===z?void 0:z.patient)||(null===E||void 0===E?void 0:E.patient)||null,unit_service_patient:(null===C||void 0===C||null===(c=C.unit_service_patient)||void 0===c?void 0:c._id)||(null===C||void 0===C?void 0:C.unit_service_patient)||(null===z||void 0===z?void 0:z.unit_service_patient)||(null===E||void 0===E?void 0:E.unit_service_patient)||null,work_shift:(null===C||void 0===C||null===(u=C.work_shift)||void 0===u?void 0:u._id)||(null===C||void 0===C?void 0:C.work_shift)||(null===z||void 0===z?void 0:z.work_shift)||(null===E||void 0===E?void 0:E.work_shift)||null,dueDate:(null===C||void 0===C?void 0:C.dueDate)||null,entrance:(null===C||void 0===C?void 0:C.entrance)||P||null,appointment:(null===C||void 0===C?void 0:C.appointment)||$||(null===z||void 0===z?void 0:z.appointment)||null,detailedTaxes:(null===C||void 0===C?void 0:C.detailedTaxes)||!1,taxes:(null===C||void 0===C?void 0:C.taxes)||0,status:(null===C||void 0===C?void 0:C.status)||"paid",discount:(null===C||void 0===C?void 0:C.Total_discount_amount)||0,subtotal:(null===C||void 0===C?void 0:C.Subtotal_Amount)||0,totalAmount:(null===C||void 0===C?void 0:C.totalAmount)||0,items:(null===C||void 0===C?void 0:C.Provided_services)||(null===z||void 0===z||null===(m=z.Service_types)||void 0===m?void 0:m.length)>0&&(null===z||void 0===z||null===(p=z.Service_types)||void 0===p?void 0:p.map((e=>({service_type:e._id||null,activity:null,quantity:1,price_per_unit:Number(e.Price_per_unit)||0,subtotal:Number(e.Price_per_unit)||0,discount_amount:0,tax:0,total:Number(e.Price_per_unit)||0}))))||[{service_type:null,activity:null,quantity:1,price_per_unit:0,subtotal:0,discount_amount:0,tax:0,total:0}],payment_details:(null===C||void 0===C?void 0:C.payment_details)||[]}}),[C,null===R||void 0===R?void 0:R.employee,P,$,E,z]),G=(0,a.mN)({resolver:(0,o.t)(Y),defaultValues:K}),{watch:H,reset:Q,setValue:U,handleSubmit:ee,formState:{isSubmitting:te}}=G;(0,s.useEffect)((()=>{Q(K)}),[K,Q]);const ie=H(),ne=null===ie||void 0===ie||null===(t=ie.items)||void 0===t||null===(i=t[0])||void 0===i?void 0:i.service_type,{data:le}=(0,A.Vt9)(ne),ae=null===ie||void 0===ie||null===(j=ie.items)||void 0===j?void 0:j.reduce(((e,t)=>e+(Number(t.quantity)||0)),0),se=(0,v.C)(),oe=(0,v.C)(),re=(0,v.C)(),de=(0,v.C)(),{enqueueSnackbar:ce}=(0,l.dh)();(0,s.useEffect)((()=>{(async()=>{try{if(P){const{data:e}=await h.Ay.get(h.vZ.entranceManagement.one(P),{params:{select:"Service_types patient unit_service_patient work_shift appointment",populate:[{path:"Service_types",select:"name_english name_arabic Price_per_unit"}]}});D(e)}else if($){const{data:e}=await h.Ay.get(h.vZ.appointments.one($),{params:{select:"patient unit_service_patient work_shift"}});T(e)}}catch(e){console.log("entranceData",e)}})()}),[$,P]);const ue=ee((async e=>{de.onTrue();try{var t,i,n,l,a;const r=await h.Ay.post(h.vZ.economec_movements.all,e),d=e.subtotal||0,c=ae,u=null!==(t=e.concept)&&void 0!==t?t:"",m=e.totalAmount||0,x=e.discount||0,v={Secret_Key:L.Secret_Key,Activity_Number:L.Activity_Number,ClientId:L.ClientId,CompanyID:L.CompanyID,RegistrationName:L.RegistrationName,Buyer:null===W||void 0===W?void 0:W.name_arabic,BuyerNum:null===W||void 0===W?void 0:W.mobile_num1,BuyerIdNum:null===W||void 0===W?void 0:W.identification_num,BuyerCity:null===W||void 0===W||null===(i=W.city)||void 0===i?void 0:i.name_arabic,service_type:null===le||void 0===le?void 0:le.name_arabic,subtotal:d,quantity:c,discount:x,total:m,concept:u};var s,o;if(N&&await h.Ay.post("/api/invoice",v),Q(),ce(M("created successfully")),null!==r&&void 0!==r&&null!==(n=r.data)&&void 0!==n&&null!==(l=n.receiptPayment)&&void 0!==l&&l._id)window.open(p.f.unitservice.accounting.reciepts.info(null===r||void 0===r||null===(s=r.data)||void 0===s||null===(o=s.receiptPayment)||void 0===o?void 0:o._id),"_blank");await I.push(p.f.unitservice.accounting.economicmovements.info(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.movement._id))}catch(r){ce(X&&`${r.arabic_message}`||`${r.message}`,{variant:"error"})}finally{de.onFalse()}}));return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c.A,{maxWidth:"xl",children:(0,f.jsxs)(_.Ay,{methods:G,children:[(0,f.jsxs)(r.A,{children:[(0,f.jsx)(w,{}),H().detailedTaxes?(0,f.jsx)(F,{}):(0,f.jsx)(q,{}),(0,f.jsx)(B,{}),"paid"===H().status&&(0,f.jsx)(d.A,{sx:{px:3,py:1},children:(0,f.jsx)(_.b$,{row:!0,name:"payment_method",label:M("payment method"),options:[{label:M("cash"),value:"cash"},{label:M("credit card"),value:"credit_card"},{label:M("bank transfer"),value:"bank_transfer"},{label:M("instant bank transfer"),value:"instant_transfer"}]})}),(0,f.jsx)(d.A,{sx:{my:2,px:2},children:(0,f.jsx)(_.o3,{name:"concept",label:M("concept (Notes are added to the National Billing System)")})}),(0,f.jsx)(d.A,{sx:{my:2,px:2},children:(0,f.jsx)(_.SF,{name:"",onChange:()=>J(!N),label:M("Do you want to register the invoice in the national Jordanian billing system?")})}),(0,f.jsx)(Z,{open:re.value,onClose:re.onFalse,onSubmit:ue}),(0,f.jsx)(O,{open:oe.value,onClose:oe.onFalse,onSubmit:ue})]}),(0,f.jsx)(d.A,{justifyContent:"flex-end",direction:"row",spacing:2,sx:{mt:3},children:(0,f.jsxs)(m.A,{size:"large",variant:"contained",loading:de.value,onClick:()=>{"installment"===H().status?re.onTrue():"insurance"===H().status?oe.onTrue():ue()},children:[M(C?"update":"create")," & ",M("print")]})})]})}),(0,f.jsx)(y.T,{open:se.value,onClose:se.onFalse,title:M("confirm changing display option"),content:M("you will loose the all details items data"),action:(0,f.jsx)(u.A,{variant:"contained",color:"error",onClick:()=>{U("items",K.items),U("detailedTaxes",!H().detailedTaxes),se.onFalse()},children:M("confirm")})})]})}},83858:(e,t,i)=>{"use strict";i.d(t,{A:()=>n.A});var n=i(91720)},91720:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var n=i(81e3),l=i(88446),a=i(74600),s=i(94496),o=i(22698),r=i(65381),d=i(70579);function c(e){let{link:t,activeLast:i,disabled:a}=e;const s={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...a&&!i&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},o=(0,d.jsxs)(d.Fragment,{children:[t.icon&&(0,d.jsx)(n.A,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:t.icon}),t.name]});return t.href?(0,d.jsx)(l.A,{component:r.W,href:t.href,sx:s,children:o}):(0,d.jsxs)(n.A,{sx:s,children:[" ",o," "]})}function u(e){let{links:t,action:i,heading:r,moreLink:u,activeLast:p,sx:x,...v}=e;const h=t&&t[t.length-1].name;return(0,d.jsxs)(n.A,{sx:{...x},children:[(0,d.jsxs)(a.A,{direction:"row",alignItems:"center",children:[(0,d.jsxs)(n.A,{sx:{flexGrow:1,display:"flex",gap:{md:3},alignItems:{md:"center"},flexDirection:{xs:"column",md:"row"}},children:[r&&(0,d.jsx)(s.A,{textTransform:"capitalize",variant:"h4",gutterBottom:!0,children:r}),t&&!!t.length&&(0,d.jsx)(o.A,{separator:(0,d.jsx)(m,{}),...v,children:null===t||void 0===t?void 0:t.map(((e,t)=>(0,d.jsx)(c,{link:e,activeLast:p,disabled:e.name===h},t)))})]}),i&&(0,d.jsxs)(n.A,{sx:{flexShrink:0,textTransform:"capitalize"},children:[" ",i," "]})]}),!!u&&(0,d.jsx)(n.A,{sx:{mt:2},children:u.map(((e,t)=>(0,d.jsx)(l.A,{href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},t)))})]})}function m(){return(0,d.jsx)(n.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}},99910:e=>{e.exports=function(e,t){for(var i,n=-1,l=e.length;++n<l;){var a=t(e[n]);void 0!==a&&(i=void 0===i?a:i+a)}return i}}}]);
//# sourceMappingURL=54086.844a8db1.chunk.js.map